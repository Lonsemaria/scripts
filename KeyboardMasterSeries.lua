
--[[
One Click to Challenger
Keyboard Master Series by Ensuluyn
Current Leauge Of Legends Version :5.22
Current Script Version :2.04
Last Update: 11.11.2015
--Credits to Nebelwolfi for mentoring <3
]]

assert(load(Base64Decode("DQoNCi0tIE9uZSBDbGljayB0byBDaGFsbGVuZ2VyDQotLSBLZXlib2FyZCBNYXN0ZXIgU2VyaWVzIGJ5IEVuc3VsdXluDQoNCi0tQ3JlZGl0cyB0byBOZWJlbHdvbGZpIGZvciBtZW50b3JpbmcgPDMNCg0KbG9jYWwgVmVyc2lvbiA9ICIyLjA0IiAgDQpsb2NhbCBMVmVyc2lvbiA9ICI1LjIyIg0KbG9jYWwgU2NyaXB0bmFtZSA9ICJLZXlib2FyZCBNYXN0ZXIgU2VyaWVzIg0KbG9jYWwgQXV0aG9yID0gIkVuc3VsdXluIg0KbG9jYWwgbGlzdCA9ICJMZWJsYW5jICwgTGlzc2FuZHJhICwgVmlrdG9yIg0KbG9jYWwgbGluayA9ICJHbyB0byBodHRwOi8vZm9ydW0uYm90b2ZsZWdlbmRzLmNvbS9mb3J1bS8yMC1jaGFtcGlvbi1zY3JpcHRzLyB0aGVuIHlvdSBjYW4gc2VlIG15IHRvcGljICIuLlNjcmlwdG5hbWUuLiIgb24gdGhlIGZpcnN0IG9yIHNlY29uZCBwYWdlLiINCmxvY2FsIGRhdGUgPSAiMDguMTEuMjAxNSINCmdsb2JhbF90aWNrcyA9IDANCi0tIHN0YXJ0aW5nIHNjcmlwdA0KLS1hdXRvIHVwZGF0ZQ0KbG9jYWwgdmVyc2lvbiA9IDIuMDQNCmxvY2FsIGF1dGhvciA9ICJFbnN1bHV5biINCmxvY2FsIFNDUklQVF9OQU1FID0gIktleWJvYXJkTWFzdGVyU2VyaWVzIg0KbG9jYWwgQVVUT1VQREFURSA9IHRydWUNCmxvY2FsIFVQREFURV9IT1NUID0gInJhdy5naXRodWIuY29tIg0KbG9jYWwgVVBEQVRFX1BBVEggPSAiL0xvbnNlbWFyaWEvc2NyaXB0cy9tYXN0ZXIvS2V5Ym9hcmRNYXN0ZXJTZXJpZXMubHVhIi4uIj9yYW5kPSIuLm1hdGgucmFuZG9tKDEsMTAwMDApDQpsb2NhbCBVUERBVEVfRklMRV9QQVRIID0gU0NSSVBUX1BBVEguLkdldEN1cnJlbnRFbnYoKS5GSUxFX05BTUUNCmxvY2FsIFVQREFURV9VUkwgPSAiaHR0cHM6Ly8iLi5VUERBVEVfSE9TVC4uVVBEQVRFX1BBVEgNCmZ1bmN0aW9uIFNheSh0ZXh0KQ0KICBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+S2V5Ym9hcmQgTWFzdGVyIFNlcmllczo8L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4iIC4uIHRleHQgLi4gIjwvZm9udD4iKQ0KZW5kDQoNCmlmIEFVVE9VUERBVEUgdGhlbg0KICBsb2NhbCBTZXJ2ZXJEYXRhID0gR2V0V2ViUmVzdWx0KFVQREFURV9IT1NULCAiL0xvbnNlbWFyaWEvc2NyaXB0cy9tYXN0ZXIvdmVyc2lvbi9CdW5kbGUudmVyc2lvbiIpDQogIGlmIFNlcnZlckRhdGEgdGhlbg0KICAgIFNlcnZlclZlcnNpb24gPSB0eXBlKHRvbnVtYmVyKFNlcnZlckRhdGEpKSA9PSAibnVtYmVyIiBhbmQgdG9udW1iZXIoU2VydmVyRGF0YSkgb3IgbmlsDQogICAgaWYgU2VydmVyVmVyc2lvbiB0aGVuDQogICAgICBpZiB0b251bWJlcih2ZXJzaW9uKSA8IFNlcnZlclZlcnNpb24gdGhlbg0KICAgICAgICBTYXkoIk5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAiLi5TZXJ2ZXJWZXJzaW9uKQ0KICAgICAgICBTYXkoIlVwZGF0aW5nLCBwbGVhc2UgZG9uJ3QgcHJlc3MgRjkiKQ0KICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIERvd25sb2FkRmlsZShVUERBVEVfVVJMLCBVUERBVEVfRklMRV9QQVRILCBmdW5jdGlvbiAoKSBTYXkoIlN1Y2Nlc3NmdWxseSB1cGRhdGVkLiAoIi4udmVyc2lvbi4uIiA9PiAiLi5TZXJ2ZXJWZXJzaW9uLi4iKSwgcHJlc3MgRjkgdHdpY2UgdG8gbG9hZCB0aGUgdXBkYXRlZCB2ZXJzaW9uLiIpIGVuZCkgZW5kLCAzKQ0KICAgICAgZWxzZQ0KICAgICAgICBTYXkoIi1XZWxjb21lLCBZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICh2Ii4uU2VydmVyVmVyc2lvbi4uIikgb2YgIi4uU2NyaXB0bmFtZS4uIiAsIHVwZGF0ZWQgYXQgKCIuLmRhdGUuLiIpIGJ5ICIgLi4gYXV0aG9yKQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVsc2UgDQogICAgU2F5KCJFcnJvciBkb3dubG9hZGluZyB2ZXJzaW9uIGluZm8iKQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gT25Mb2FkKCkNCiAgICAgICAgaWYgbm90IFJlcXVpcmVTaW1wbGVMaWIoKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgaXRlbWZpeCgpDQogICAgICAgICBpZiBfR1tteUhlcm8uY2hhck5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICBfR1tteUhlcm8uY2hhck5hbWVdKCkNCiAgICAgICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFBhY2tldHMgJiBWSVAgZmVhdHVyZXMgY3VycmVudGx5IGRpc2FibGVkIHVudGlsIHRoZSBuZXh0IHVwZGF0ZSIpIGVuZCwgMTQpDQogICAgICAgIGVsc2UNCiAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+IDpUaGlzIGNoYW1waW9uIGlzIG5vdCBzdXBwb3J0ZWQuIEN1cnJlbnRseSBzdXBwb3J0ZWQgY2hhbXBpb25zIGFyZTogIi4ubGlzdC4uIiAiICkNCiAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPkZlZWwgZnJlZSB0byBjaGVjayBteSBmb3J1bSB0b3BpYyBhbmQgYXNrIGEgbmV3IGNoYW1waW9uIG9yIGdpdmUgZmVlZGJhY2siKSBlbmQsIDAuNSkNCiAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPiIuLmxpbmsuLiIiKSBlbmQsIDAuNSkNCiAgICAgICAgZW5kDQplbmQNCi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxlQmxhbmMgU3RhcnRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIFN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGVCbGFuYyBTdGFydGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxlQmxhbmMgU3RhcnRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjbGFzcyAiTGVibGFuYyINCmZ1bmN0aW9uIExlYmxhbmM6X19pbml0KCkNCnNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDUyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiBzZWxmLnRzdz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNjAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICBzZWxmLnRzZT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTI1LCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICBzZWxmLnRzcj0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTI1LCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgc2VsZi50c2c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDk1MCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkgDQogICBzZWxmLlFTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9RLCBEYW1hZ2VOYW1lID0gIlEiLCBSYW5nZSA9IDcwMCwgV2lkdGggPSAxLCBEZWxheSA9IDAsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDYwMCwgV2lkdGggPSAxMjUsIERlbGF5ID0gMC41LCBTcGVlZCA9IDEzMDAsIFJhZGl1cyA9IDI1MCAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSA5MjUsIFdpZHRoID0gNTUsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSAxNjAwLCBDb2xsaXNpb24gPSB0cnVlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuTElORUFSfSkNCiAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID02MDAsIFdpZHRoID0gMTI1LCBEZWxheSA9IDAuNSwgU3BlZWQgPSAxMzAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgIHNlbGYuSWduaXRlID0gX1NwZWxsKHtTbG90ID0gRmluZFN1bW1vbmVyU2xvdCgic3VtbW9uZXJkb3QiKSwgRGFtYWdlTmFtZSA9ICJJR05JVEUiLCBSYW5nZSA9IDYwMCwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgIHNlbGYubGVibGFuY1csIHNlbGYubGVibGFuY0ltYWdlLCBzZWxmLmNsb25lSWQgPSBuaWwsIG5pbCwgbmlsDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgICAgLS1pZiBWSVBfVVNFUiB0aGVuICBzZWxmOnNraW5oYWNrKCkgZW5kDQogICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlRpY2soKSBlbmQpDQogIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogIC0tQWRkUHJvY2Vzc1NwZWxsQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSBlbmQpDQogIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAtLUFkZFVwZGF0ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmLCBzdGFja3MpIHNlbGY6VXBkYXRlQnVmZih1bml0LCBidWZmLCBzdGFja3MpIGVuZCkNCiAgLS1BZGRSZW1vdmVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZikgc2VsZjpPblJlbW92ZUJ1ZmYodW5pdCwgYnVmZikgZW5kKSANCiAgICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkxvYWRNZW51KCkNCiAgICAgIHNlbGYuQ29uZmlnPXNjcmlwdENvbmZpZygiIi4uU2NyaXB0bmFtZS4uIiIsIm1lbnUiKQ0KDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJDb21ibyBTZXR0aW5ncyIsICJjb21ibyIpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsICJVc2UgUSBpbiBDb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgIlVzZSBXIGluIENvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCAiVXNlIEUgaW4gY29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsICJVc2UgUiBpbiBjb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgIlVzZSBJZ25pdGUgaWYgdGFyZ2V0IGtpbGxhYmxlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiZ2FwY2xvc2UiLCAiVXNlIFcgYXMgYSBnYXBjbG9zZSAoIEJldGEgKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgibG9naWMiLCAiQ29tYm8gbG9naWMiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJRPkU+Vz5SIiwgIlE+Uj5FPlciLCAiRT5RPlc+UiIsICJFPlc+UT5SIiAsIlJhbmRvbSBTa2lsbCBPcmRlciJ9KQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkU3ViTWVudSgiVyBTa2lsbCB0dXJuIGJhY2sgc2V0dGluZ3MiLCAidHVybnciKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oIncxIiwiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBRPkU+Vz5SIG1vZGUgIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzIiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFE+Uj5FPlcgbW9kZSAiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3MyIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gRT5RPlc+UiBtb2RlICIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInc0IiwiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBFPlc+UT5SIG1vZGUgIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzUiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFJhbmRvbSBTa2lsbCBPcmRlciBtb2RlICIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiSGFyYXNzIFNldHRpbmdzIiwgImhhcmFzcyIpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCAiSGFyYXNzIFdpdGggUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlVyIsICJIYXJhc3MgV2l0aCBXIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkxhbmVDbGVhciBTZXR0aW5ncyIsImxhbmVjbGVhciIpDQogICAgICBzZWxmLkNvbmZpZy5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVEiLCJVc2UgUSBvbiBMYW5lY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIiwiVXNlIFcgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlUiIsIlVzZSBSIG9uIExhbmVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgc2VsZi5Db25maWcubGFuZWNsZWFyOmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkp1bmdsZUNsZWFyIFNldHRpbmdzIiwianVuZ2xlY2xlYXIiKQ0KICAgICAgc2VsZi5Db25maWcuanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLCJVc2UgUSBvbiBqdW5nbGVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsIlVzZSBXIG9uIExhbmVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlRSIsIlVzZSBFIG9uIGp1bmdsZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkVzY2FwZSBTZXR0aW5ncyIsImVzY2FwZSIpDQogICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVciLCJVc2UgVyBXaGlsZSBFc2NhcGUiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VSIiwiVXNlIFIgV2hpbGUgRXNjYXBlIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCg0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJLaWxsU3RlYWwgU2V0dGluZ3MiLCAia2lsbHN0ZWFsIikNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLCJLaWxsc3RlYWwgT24vT2ZmIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUSIsICJTdGVhbCBXaXRoIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVciLCAiU3RlYWwgV2l0aCBXIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgIlN0ZWFsIFdpdGggRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUiIsICJTdGVhbCBXaXRoIFIiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVFXIiwgIlN0ZWFsIFdpdGggUVciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUkiLCAiU3RlYWwgV2l0aCBJZ25pdGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkl0ZW0gU2V0dGluZ3MiLCAiaXRlbSIpDQogICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgIkF1dG8gWmhvbnlhIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImF1dG96aG9ueWEiLCAiWmhvbnlhIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgDQogICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJWSVAgU2V0dGluZ3MiLCAidmlwIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0IiwiVXNlIFBhY2tldCBDYXN0aW5nIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsICJUbyB1c2UgdmlwIHNldHRpbmdzLCBQYWNrZXQgQ2FzdGluZyBzaG91bGQgYmUgb3Blbi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJBdXRvIExldmVsIFNldHRpbmdzIiwgImxldmVsIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5IiwiVXNlIEF1dG8gTGV2ZWwiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCAiU2VsZWN0IFNraWxsIE9yZGVyIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDMsIHsiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciICB9KQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIlNraW4gSGFjayBTZXR0aW5ncyIsICJza2luIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLCJVc2UgU2tpbiBIYWNrIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbicsICJTZWxlY3QgU2tpbiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7Ik9yaWdpbmFsIiwgIldpY2tlZCBMZUJsYW5jICIsIlByZXN0aWdpb3VzIExlQmxhbmMiLCJNaXN0bGV0b2UgTGVCbGFuYyIsIlJhdmVuYm9ybiBMZWJsYW5jIiwgfSkNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNCIsICJUbyB1c2Ugc2tpbiBoYWNrLCBZb3UgbmVlZCB0byAyeCBGOSBhZnRlciB5b3Ugc2VsZWN0IHRoZSBza2luIHlvdSBkZXNpcmUuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgiaW5mbzUiLCAiTWFrZSBzdXJlIHRoYXQgdXNpbmcgcGFja2V0IGNhc3RpbmcgaXMgT04uIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgLS1bW3NlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJBbnRpLUFGSyBTZXR0aW5ncyIsICJhbnRpYWZrIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrOmFkZFBhcmFtKCJhbnRpYWZrIiwiVXNlIEFudGkgQWZrIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpIF1dDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsICJUbyB1c2UgdmlwIHNldHRpbmdzLCBZb3UgbmVlZCB0byBiZSBhIFZJUCB1c2VyIG9uIEJPTCBjb21tdW5pdHkuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgIGVuZA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRHJhdyBTZXR0aW5ncyIsIm90aGVyIikNCiAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTa2lsbCBEcmF3aW5nIFNldHRpbmdzIiwgImRyYXciKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLCJRIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3IiwiVyBTa2lsbCBEcmF3aW5ncyIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJlZHJhdyIsIkUgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLCJSIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsIkF1dG8gQXR0YWNrIFJhbmdlIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiY29tYm9tb2RlIiwiRHJhdyBDb21ibyBNb2RlIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJEcmF3IFBlcm1hYm94IiwgInBlcm1hIikNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hOmFkZFBhcmFtKCJwZXJtYSIsIkRyYXcgUGVybWFib3ggKCBOZWVkcyAyeCBGOSApIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiVGFyZ2V0c2VsZWN0b3JzIiwidGFyZ2V0c2VsIikNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0syIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgidHMiLCJMZWZ0IENsaWNrIEZvciBUYXJnZXQgU2VsZWN0aW9uIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgc2VsZi50cy5uYW1lICA9ICJMZWJsYW5jIg0KICAgIHNlbGYudHNxLm5hbWUgPSAiTGVibGFuY1EiDQogICAgc2VsZi50c3cubmFtZSA9ICJMZWJsYW5jVyINCiAgICBzZWxmLnRzZS5uYW1lID0gIkxlYmxhbmNFIg0KICAgIHNlbGYudHNyLm5hbWUgPSAiTGVibGFuY1IiDQogICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHMpDQogICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNxKQ0KICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzdykNCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c2UpDQogICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNyKSANCiAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiS2V5cyBTZXR0aW5ncyIsICJLZXlzIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNvbWJvIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLT4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJjb21ib2tleSIsICJDb21ibyBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgib25seWUiLCAiT25seSB1c2UgRSBTa2lsbCAoT25seSBTdHVuKSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sZmFsc2UsIHN0cmluZy5ieXRlKCJPIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9tb2RlIiwgIiBTZWxlY3QgQ29tYm9tb2RlIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sZmFsc2UsIHN0cmluZy5ieXRlKCIyIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1IYXJhc3MgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc2tleSIsICJTbWFydCBIYXJhc3MgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAtLSBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJoYXJhc3N0b2dsZWtleSIsICJIYXJhc3MgVG9nbGUgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzUiLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNsZWFyIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhbmVjbGVhcmtleSIsICJMYW5lQ2xlYXIgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCAiSnVuZ2xlQ2xlYXIgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJaIikpDQogICAgLS1zZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5IiwgIkxhc3RoaXQgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s2IiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1PdGhlciBLZXkgU2V0dGluZ3MtLS0tLS0tLS0tLS0tLS0tLS0tLT4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJlc2NhcGVrZXkiLCAiRXNjYXBlIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMiIsICJNYWtlIFN1cmUgVGhhdCBZb3VyIE9yYndhbGtlciBLZXlzIGFyZSBTYW1lIEFzIEhlcmUiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJPcndXYWxrZXJLZXkgU2V0dGluZ3MiLCAiS2V5czIiKQ0KICAgIA0KICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgIA0KICAgICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsICIgICAgICAgICAgICAgICAgIFNjcmlwdCBWZXJzaW9uOiAgIi4uVmVyc2lvbi4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgIiAgICAgICAgICAgIFNjcmlwdCB3YXMgbWFkZSBieSAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCAiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgDQogICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hLnBlcm1hIHRoZW4NCiAgICAgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKQ0KICAgIC0tc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImhhcmFzc3RvZ2xla2V5IikNCiAgICAgc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImhhcmFzc2tleSIpDQogIGVuZA0KZW5kDQotLWRyYXdpbmcgc2V0dGluZ3Mgc3RhcnQNCmZ1bmN0aW9uIExlYmxhbmM6Y29tYm9tb2RlKCkNCmxvY2FsIGRyYXdwb3MgPSBHZXRVbml0SFBCYXJQb3MobXlIZXJvKQ0KaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMSB0aGVuDQpEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBRPkU+Vz5SIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCmlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDIgdGhlbg0KRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogUT5SPkU+VyIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQppZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAzIHRoZW4NCkRyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IEU+UT5XPlIiLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNCB0aGVuDQpEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBFPlc+UT5SIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCmlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDUgdGhlbg0KRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogUmFuZG9tIFNraWxsIE9yZGVyIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpEcmF3KCkNCmlmIHNlbGYuQ29uZmlnLm90aGVyLmNvbWJvbW9kZSB0aGVuDQpsb2NhbCBkcmF3cG9zID0gR2V0VW5pdEhQQmFyUG9zKG15SGVybykNCnNlbGY6Y29tYm9tb2RlKCkNCmVuZA0KICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5xZHJhdyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjUwLCAxLHJlZCkNCiAgZW5kDQoNCiAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy53ZHJhdyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjAwLCAxLCByZWQpDQogIGVuZA0KDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDkyNSwgMSwgcmVkKQ0KICBlbmQNCiAgDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucmRyYXcgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwxLCByZWQpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmFhZHJhdyB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDU1MCwxLCBBUkdCKDI1NSwgMjU1LDAsMCkpDQogIGVuZA0KZW5kDQotLWRyYXdpbmcgc2V0dGluZ3MgZW5kDQpmdW5jdGlvbiBMZWJsYW5jOlRpY2soKQ0KICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgc2VsZjpjaGVja3RzKCkNCiAgICAtLSAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KDQogICAgIHNlbGY6Z2FwY2xvc2UoKQ0KIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICApdGhlbg0KICAgIHNlbGY6Y29tYm8oKQ0KICBlbmQNCiAgIGlmKHNlbGYuQ29uZmlnLktleXMub25seWUgICApdGhlbg0KICAgIHNlbGY6b25seWUoKQ0KICBlbmQNCiAgaWYoc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgKXRoZW4NCiAgICBzZWxmOkxhbmVDbGVhcigpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSApdGhlbg0KICAgIHNlbGY6ZXNjYXBlKCkNCiAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApdGhlbg0KICAgc2VsZjpKdW5nbGVDbGVhcigpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgc2VsZjpraWxsc3RlYWwoKQ0KICBlbmQNCiAgaWYoc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgICApIHRoZW4NCiAgICBzZWxmOmhhcmFzcygpDQogIGVuZA0KICAgIGVuZA0KZnVuY3Rpb24gTGVibGFuYzpjaGVja3RzKCkNCmlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCnRhcmdldCA9IHNlbGYudHN3LnRhcmdldA0KZWxzZWlmIHNlbGYudHNnLnRhcmdldH49bmlsIG9yIHNlbGYuc2VsZWN0ZWRUYXIgdGhlbg0KdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KZW5kDQplbmQNCmxvY2FsIHNraW5zUEIgPSB7fTsNCmxvY2FsIHNraW5PYmplY3RQb3MgPSBuaWw7DQpsb2NhbCBza2luSGVhZGVyID0gbmlsOw0KbG9jYWwgZGlzcGVsbEhlYWRlciA9IG5pbDsNCmxvY2FsIHNraW5IID0gbmlsOw0KbG9jYWwgc2tpbkhQb3MgPSBuaWw7DQpmdW5jdGlvbiBMZWJsYW5jOnNraW5oYWNrKCkNCmlmIG5vdCBzZWxmLkNvbmZpZy52aXAucGFja2V0IHRoZW4gU2VuZFNraW5QYWNrZXQobXlIZXJvLmNoYXJOYW1lLCBza2luc1BCWzFdLCBteUhlcm8ubmV0d29ya0lEKTsgZWxzZQ0KaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQpTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KZW5kDQplbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpvbmx5ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLm9ubHllICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHNlbGYudHNlLnRhcmdldCkNCmVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOmFudGlhZmsoKQ0KaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmayB0aGVuIHJldHVybiBlbmQNCiAgICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQpteUhlcm86TW92ZVRvKG15SGVyby54LCBteUhlcm8ueikNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpjb21ibygpDQppZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAxIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCnNlbGY6Y29tYm9RRVdSKCkNCmVuZA0KaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQpzZWxmOmNvbWJvUVJFVygpDQplbmQNCmlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDMgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0Kc2VsZjpjb21ib0VRV1IoKQ0KZW5kDQppZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA0IGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCnNlbGY6Y29tYm9FV1FSKCkNCmVuZA0KaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQpzZWxmOnJhbmRvbWNvbWJvKCkNCmVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICApdGhlbg0KICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgZW5kDQogICAgZW5kDQplbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpjb21ib1FSRVcoKQ0KIHNlbGYudHN3OnVwZGF0ZSgpDQogaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LncyIHRoZW4NCmlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQpzZWxmOkNhc3RRUih0YXJnZXQpDQplbmQNCmlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRUnVzZWQoKSB0aGVuDQpzZWxmOkNhc3RFVyh0YXJnZXQpDQplbmQNCmVuZA0KIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LncyIHRoZW4NCmlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQpzZWxmOkNhc3RRUih0YXJnZXQpDQplbmQNCmlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRRXVzZWQoKSB0aGVuDQpzZWxmOkNhc3RFV0IodGFyZ2V0KQ0KZW5kDQplbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpjb21ib0VXUVIoKQ0KIHNlbGYudHN3OnVwZGF0ZSgpDQogaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc0IHRoZW4NCmlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQpzZWxmOkNhc3RFVyh0YXJnZXQpDQplbmQNCmlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpFV3VzZWQoKSB0aGVuDQpzZWxmOkNhc3RRUih0YXJnZXQpDQplbmQNCmVuZA0KIGlmICBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NCB0aGVuDQppZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0Kc2VsZjpDYXN0RVdCKHRhcmdldCkNCmVuZA0KaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVXdXNlZCgpIHRoZW4NCnNlbGY6Q2FzdFFSKHRhcmdldCkNCmVuZA0KZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6Y29tYm9FUVdSKCkNCiBzZWxmLnRzdzp1cGRhdGUoKQ0KIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MyB0aGVuDQppZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0Kc2VsZjpDYXN0RVEodGFyZ2V0KQ0KZW5kDQppZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6RVF1c2VkKCkgdGhlbg0Kc2VsZjpDYXN0V1IodGFyZ2V0KQ0KZW5kDQplbmQNCiBpZiAgc2VsZi5Db25maWcuY29tYm8udHVybncudzMgdGhlbg0KaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCnNlbGY6Q2FzdEVRKHRhcmdldCkNCmVuZA0KaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVRdXNlZCgpIHRoZW4NCnNlbGY6Q2FzdFdSQih0YXJnZXQpDQplbmQNCmVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOmNvbWJvUUVXUigpDQogc2VsZi50c3c6dXBkYXRlKCkNCiBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzEgdGhlbg0KaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCnNlbGY6Q2FzdFFFKHRhcmdldCkNCmVuZA0KaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFFdXNlZCgpIHRoZW4NCnNlbGY6Q2FzdFdSKHRhcmdldCkNCmVuZA0KZW5kDQogaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzEgdGhlbg0KaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCnNlbGY6Q2FzdFFFKHRhcmdldCkNCmVuZA0KaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFFdXNlZCgpIHRoZW4NCnNlbGY6Q2FzdFdSQih0YXJnZXQpDQplbmQNCmVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOkNhc3RRKHVuaXQpDQogIHNlbGYuUVNwZWxsOkNhc3QodW5pdCkNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpDYXN0UUUodW5pdCkNCiAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCmZ1bmN0aW9uIExlYmxhbmM6Q2FzdEVXKHVuaXQpDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgbm90IHNlbGY6d1VzZWQoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpDYXN0RVdCKHVuaXQpDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICAgIGVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOnJhbmRvbWNvbWJvKCkNCiAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkgICAgIA0KICAgICAgICBlbmQNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KSAgICAgIA0KICAgICAgICBlbmQNCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KSAgICANCiAgICAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgIGVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOkNhc3RRUih1bml0KQ0KICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpDYXN0V1IodW5pdCkNCiAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KClhbmQgbm90IHNlbGY6d1VzZWQoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgZW5kDQogICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSkgYW5kIG5vdCBzZWxmOnJVc2VkKCkgIHRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgIGVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUkIodW5pdCkNCiAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgIGVuZA0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIGFuZCBub3Qgc2VsZjpyVXNlZCgpICB0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpDYXN0UVdIKCkNCiAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpDYXN0UVdLKHVuaXQpDQogICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUVcgYW5kICBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUVcgYW5kICBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6Q2FzdEVRKHVuaXQpDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgICAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6Q2FzdFcodW5pdCkNCiAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIExlYmxhbmM6Q2FzdEUodW5pdCkNCiBzZWxmLkVTcGVsbDpDYXN0KHVuaXQpDQogIA0KZW5kDQoNCmZ1bmN0aW9uIExlYmxhbmM6Q2FzdFIodW5pdCkNCiAgc2VsZi5SU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIExlYmxhbmM6Q2FzdEkodW5pdCkNCiAgc2VsZi5JZ25pdGU6Q2FzdCh1bml0KQ0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOmtpbGxzdGVhbCgpDQpmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgbG9jYWwgZG1nRSA9IGdldERtZygiRSIsIHVuaXQsIG15SGVybykgKyAoKG15SGVyby5hcCkqMC41KSArIChnZXREbWcoIkUiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNSkpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nRSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUUgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh1bml0KSAgDQogICAgICBlbmQNCiAgICAgIGxvY2FsIGRtZ1EgPSBnZXREbWcoIlEiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNDApDQogICAgICBpZihzZWxmLnRzcS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgIGxvY2FsIGRtZ1FXID0gZ2V0RG1nKCJRIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjQwKSsoZ2V0RG1nKCJXIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjYwKSsoZ2V0RG1nKCJRIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjQwKSkpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgaGVhbHRoPGRtZ1EgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRVyBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFFXSyh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIGRtZ1cgPSBnZXREbWcoIlciLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNjApDQogICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVcgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGxvY2FsIGRtZ1IgPWdldERtZygiUiIsdW5pdCxteUhlcm8pKygobXlIZXJvLmFwKSowLjYwKSANCiAgICAgIGlmKHNlbGYudHNyLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICBlbmQNCiAgIGVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOmhhcmFzcygpDQogIHNlbGYudHNxOnVwZGF0ZSgpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApICB0aGVuDQogIHNlbGY6Q2FzdFFXSCgpDQogICAgZW5kICAgDQogZW5kDQogZnVuY3Rpb24gTGVibGFuYzpMYW5lQ2xlYXIoKQ0KbG9jYWwgY2xlYXJ0YXJnZXQgPSBzZWxmLmNsZWFydGFyZ2V0DQpzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5sYW5lY2xlYXIudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5sYW5lY2xlYXIuTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgc2VsZjpDYXN0UShjbGVhcnRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcubGFuZWNsZWFyLnVzZVcgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcubGFuZWNsZWFyLk1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuV1NwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihzZWxmLldTcGVsbC5SYW5nZSwgc2VsZi5XU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpDQogICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBCZXN0UG9zLngsIEJlc3RQb3MueikNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcubGFuZWNsZWFyLnVzZVIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcubGFuZWNsZWFyLk1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuV1NwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihzZWxmLldTcGVsbC5SYW5nZSwgc2VsZi5XU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpDQogICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9SLCBCZXN0UG9zLngsIEJlc3RQb3MueikNCiAgICAgICAgZW5kDQogICAgICBlbmQgICAgICAgIA0KICAgIGVuZA0KICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBMZWJsYW5jOkp1bmdsZUNsZWFyKCkNCmxvY2FsIGNsZWFydGFyZ2V0ID0gbmlsDQogICAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgIGZvciBpLCBtaW5pb24gaW4gaXBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgZW5kDQogICAgZW5kDQogICAgZm9yIGksIGp1bmdsZW1pbmlvbiBpbiBpcGFpcnMoc2VsZi5qdW5nbGVNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICBpZiBWYWxpZFRhcmdldChqdW5nbGVtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICBjbGVhcnRhcmdldCA9IGp1bmdsZW1pbmlvbg0KICAgICAgZW5kDQogICAgZW5kDQogICAgZm9yIGksIG90aGVybWluaW9uIGluIGlwYWlycyhzZWxmLm90aGVyTWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgaWYgVmFsaWRUYXJnZXQob3RoZXJtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICBjbGVhcnRhcmdldCA9IG90aGVybWluaW9uDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKGNsZWFydGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci51c2VXIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKGNsZWFydGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKGNsZWFydGFyZ2V0KQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6d1VzZWQoKSANCiAgbG9jYWwgbGVibGFuY1cgPSBteUhlcm86R2V0U3BlbGxEYXRhKF9XKQ0KICBpZiBsZWJsYW5jVy5uYW1lID09ICJsZWJsYW5jc2xpZGVyZXR1cm4iIHRoZW4gDQogICAgcmV0dXJuIHRydWUgDQogIGVsc2UgDQogICAgcmV0dXJuIGZhbHNlDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOnJVc2VkKCkgDQogIGxvY2FsIGxlYmxhbmNSID0gbXlIZXJvOkdldFNwZWxsRGF0YShfUikNCiAgaWYgbGVibGFuY1IubmFtZSA9PSAiTGVibGFuY1NsaWRlTSIgdGhlbiANCiAgICByZXR1cm4gZmFsc2UNCiAgZWxzZSANCiAgICByZXR1cm4gdHJ1ZQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpRRXVzZWQoKSANCiAgbG9jYWwgbGVibGFuY1EgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLkVTcGVsbDpJc1JlYWR5KCkNCiAgaWYgKGxlYmxhbmNRIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICByZXR1cm4gZmFsc2UgDQogIGVsc2UgDQogICAgcmV0dXJuIHRydWUNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6RVF1c2VkKCkgDQogIGxvY2FsIGxlYmxhbmNXID0gc2VsZi5FU3BlbGw6SXNSZWFkeSgpDQogIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogIGlmIChsZWJsYW5jVyBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgcmV0dXJuIGZhbHNlIA0KICBlbHNlIA0KICAgIHJldHVybiB0cnVlDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOkVXdXNlZCgpIA0KICBsb2NhbCBsZWJsYW5jVyA9IHNlbGYuRVNwZWxsOklzUmVhZHkoKQ0KICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuV1NwZWxsOklzUmVhZHkoKQ0KICBpZiAobGVibGFuY1cgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgIHJldHVybiBmYWxzZSANCiAgZWxzZSANCiAgICByZXR1cm4gdHJ1ZQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpRUnVzZWQoKSANCiAgbG9jYWwgbGVibGFuY1cgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLlJTcGVsbDpJc1JlYWR5KCkNCiAgaWYgKGxlYmxhbmNXIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICByZXR1cm4gZmFsc2UgDQogIGVsc2UgDQogICAgcmV0dXJuIHRydWUNCiAgZW5kDQplbmQNCmxvY2FsIHNwZWxsTGV2ZWwgPSAwDQpmdW5jdGlvbiBMZWJsYW5jOmF1dG9sZXZlbCgpDQppZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDEgKSB0aGVuDQppZiBteUhlcm8ubGV2ZWwgPT0gMSB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAyIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDMgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPiAzIGFuZCBteUhlcm8ubGV2ZWwgPiBzcGVsbExldmVsIHRoZW4NCiAgICAgICAgc3BlbGxMZXZlbCA9IHNwZWxsTGV2ZWwgKyAxICAgICAgICANCiAgICAgICAgIExldmVsU3BlbGwoX1IpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBlbmQNCiAgICBlbHNlaWYgKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMiApIHRoZW4NCiAgICBpZiBteUhlcm8ubGV2ZWwgPT0gMSB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAyIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDMgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPiAzIGFuZCBteUhlcm8ubGV2ZWwgPiBzcGVsbExldmVsIHRoZW4NCiAgICAgICAgc3BlbGxMZXZlbCA9IHNwZWxsTGV2ZWwgKyAxICAgICAgICANCiAgICAgICAgIExldmVsU3BlbGwoX1IpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1cpDQogICAgICAgICAgICBlbmQNCiAgIGVsc2VpZiAoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAzICkgdGhlbg0KICAgIGlmIG15SGVyby5sZXZlbCA9PSAxIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDIgdGhlbg0KIExldmVsU3BlbGwoX1cpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMyB0aGVuDQogTGV2ZWxTcGVsbChfRSkgDQogZWxzZWlmIG15SGVyby5sZXZlbCA+IDMgYW5kIG15SGVyby5sZXZlbCA+IHNwZWxsTGV2ZWwgdGhlbg0KICAgICAgICBzcGVsbExldmVsID0gc3BlbGxMZXZlbCArIDEgICAgICAgIA0KICAgICAgICAgTGV2ZWxTcGVsbChfUikNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1cpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmICggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgKSB0aGVuDQogICAgaWYgbXlIZXJvLmxldmVsID09IDEgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMiB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAzIHRoZW4NCiBMZXZlbFNwZWxsKF9FKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID4gMyBhbmQgbXlIZXJvLmxldmVsID4gc3BlbGxMZXZlbCB0aGVuDQogICAgICAgIHNwZWxsTGV2ZWwgPSBzcGVsbExldmVsICsgMSAgICAgICAgDQogICAgICAgICBMZXZlbFNwZWxsKF9SKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNSApIHRoZW4NCiAgICBpZiBteUhlcm8ubGV2ZWwgPT0gMSB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAyIHRoZW4NCiBMZXZlbFNwZWxsKF9FKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDMgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPiAzIGFuZCBteUhlcm8ubGV2ZWwgPiBzcGVsbExldmVsIHRoZW4NCiAgICAgICAgc3BlbGxMZXZlbCA9IHNwZWxsTGV2ZWwgKyAxICAgICAgICANCiAgICAgICAgIExldmVsU3BlbGwoX1IpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9XKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfUSkNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiAoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA2ICkgdGhlbg0KICAgIGlmIG15SGVyby5sZXZlbCA9PSAxIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDIgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMyB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA+IDMgYW5kIG15SGVyby5sZXZlbCA+IHNwZWxsTGV2ZWwgdGhlbg0KICAgICAgICBzcGVsbExldmVsID0gc3BlbGxMZXZlbCArIDEgICAgICAgIA0KICAgICAgICAgTGV2ZWxTcGVsbChfUikNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6YXV0b3pob255YSgpDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3pob255YSAvIDEwMCkgYW5kICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiWmhvbnlhc0hvdXJnbGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmVzY2FwZWZvcmdhcCgpDQppZiBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5Db25maWcuY29tYm8uZ2FwY2xvc2UgYW5kIG5vdCBzZWxmOndVc2VkKCkgdGhlbg0KQ2FzdFNwZWxsKF9XLG1vdXNlUG9zLngsbW91c2VQb3MueikNCmVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOmVzY2FwZSgpDQppZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSAgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VXIGFuZCBub3Qgc2VsZjp3VXNlZCgpIHRoZW4NCkNhc3RTcGVsbChfVyxtb3VzZVBvcy54LG1vdXNlUG9zLnopDQplbmQNCmlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICB0aGVuIA0Kc2VsZjp3YWxrKCkNCmVuZA0KaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIGFuZCBzZWxmLkNvbmZpZy5lc2NhcGUudXNlUiBhbmQgbm90ICBzZWxmOnJVc2VkKCkgdGhlbg0KQ2FzdFNwZWxsKF9SLG1vdXNlUG9zLngsbW91c2VQb3MueikNCmVuZA0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOndhbGsoKQ0KICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsbW91c2VQb3MueikNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpnYXBjbG9zZSgpDQppZiB0YXJnZXQgYW5kIEdldERpc3RhbmNlKHRhcmdldCxteUhlcm8pPjgwMCB0aGVuIA0Kc2VsZjplc2NhcGVmb3JnYXAoKQ0KICAgIGVuZCANCg0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOlRBUkdFVENTKCkNCiAgICBsb2NhbCBUYXJnZXQgPSBuaWwNCiAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIHRoZW4gVGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICAgIGVsc2UgVGFyZ2V0ID0gc2VsZi50c3cudGFyZ2V0DQogICAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6V25kTXNnKE1zZywgS2V5KQ0KaWYgc2VsZi5Db25maWcuS2V5cy5jb21ib21vZGUgdGhlbg0Kc2VsZi5Db25maWcuY29tYm8ubG9naWMgPSBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyArMQ0KaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPiA1IHRoZW4gc2VsZi5Db25maWcuY29tYm8ubG9naWMgPSAxIGVuZA0KZW5kDQppZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgICAgICAgICAgbG9jYWwgbWluRCA9IDEwDQogICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICBmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQoZW5lbXkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkQgPSBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpDQogICAgICAgICAgICAgICAgICAgICAgICBzdGFyZ2V0ID0gZW5lbXkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQgICAgIA0KICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgaWYgc2VsZi5zZWxlY3RlZFRhciBhbmQgc3RhcmdldC5jaGFyTmFtZSA9PSBzZWxmLnNlbGVjdGVkVGFyLmNoYXJOYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRhciA9IG5pbA0KICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBzdGFyZ2V0ICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCi0tIEFsbCBjbGFzc2ljIG5lY2Vzc2VyaWVzIHN0YXJ0DQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIEVuZGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxlQmxhbmMgRW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGVCbGFuYyBFbmRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIEVuZGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCg0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgc3RhcnRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MaXNhbmRyYSBzdGFydGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxpc2FuZHJhIHN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgc3RhcnRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjbGFzcyAiTGlzc2FuZHJhIg0KZnVuY3Rpb24gTGlzc2FuZHJhOl9faW5pdCgpDQogc2VsZi50cz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNTUwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA0NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQpzZWxmLnRzZT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgMTA1MCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA1NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSA3MjUsIFdpZHRoID0gMjAsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuTElORUFSfSkNCiAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gNDUwLCBXaWR0aCA9IDAsIERlbGF5ID0gMC41LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAxMDUwLCBXaWR0aCA9IDExMCwgRGVsYXkgPSAuMjUsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICBzZWxmLlJTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9NTUwLCBXaWR0aCA9IDAsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgc2VsZi5SU1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID01NTAsIFdpZHRoID0gMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgICBzZWxmOkxvYWRNZW51KCkNCiAgICAgICAgICBzZWxmOmZpbmRvcmJ3YWxrZXIoKQ0KICAgICAgICAgICAgICAgIC0tIGlmIFZJUF9VU0VSIHRoZW4gICBzZWxmOnNraW5oYWNrKCkgZW5kDQogICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlRpY2soKSBlbmQpDQogIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgLS1BZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgLS1BZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbih1bml0LCBzcGVsbCkgc2VsZjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkNCiAgLS1BZGRBcHBseUJ1ZmZDYWxsYmFjayhmdW5jdGlvbihzb3VyY2UsIHVuaXQsIGJ1ZmYpIHNlbGY6T25BcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKSBlbmQpDQogIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYsIHN0YWNrcykgc2VsZjpVcGRhdGVCdWZmKHVuaXQsIGJ1ZmYsIHN0YWNrcykgZW5kKQ0KICAtLUFkZFJlbW92ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmKSBzZWxmOk9uUmVtb3ZlQnVmZih1bml0LCBidWZmKSBlbmQpIA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpUaWNrKCkNCiAgICAgc2VsZjphdXRvemhvbnlhKCkNCiAgICAgc2VsZjplbmdhZ2V3aXRocigpDQogICAgICAgICAtLSBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6YXV0b2xldmVsKCkgZW5kDQogICAgIHNlbGY6YXV0b1IoKQ0KICAgICBzZWxmOmF1dG9xKCkNCiBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICl0aGVuDQogICAgc2VsZjpjb21ibygpDQogIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApdGhlbg0KICAgc2VsZjpKdW5nbGVDbGVhcigpDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICl0aGVuDQogICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICBlbmQNCiAgIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICl0aGVuDQogICAgc2VsZjplbmdhZ2V3aXRocigpDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5KXRoZW4NCiAgICBzZWxmOmVzY2FwZSgpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgc2VsZjpraWxsc3RlYWwoKQ0KICBlbmQNCiAgaWYoc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSAgKSB0aGVuDQogICAgc2VsZjpoYXJhc3MoKQ0KICBlbmQNCiAgICBlbmQNCiAgICBmdW5jdGlvbiBMaXNzYW5kcmE6TG9hZE1lbnUoKQ0KICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIiwibWVudSIpDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkNvbWJvIFNldHRpbmdzIiwgImNvbWJvIikNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgIlVzZSBRIGluIENvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVciLCAiVXNlIFcgaW4gQ29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsICJVc2UgRSBpbiBjb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VSIiwgIlVzZSBSIGluIGNvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUkiLCAiVXNlIElnbml0ZSBpZiB0YXJnZXQga2lsbGFibGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkhhcmFzcyBTZXR0aW5ncyIsICJoYXJhc3MiKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgIkhhcmFzcyBXaXRoIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVciLCAiSGFyYXNzIFdpdGggVyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlRSIsICJIYXJhc3MgV2l0aCBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiYXV0b3EiLCAiQXV0byBIYXJhc3Mgd2l0aCBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJTa2lsbCBMb2dpY3MiLCAic2tpbGxsb2dpYyIpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljOmFkZFN1Yk1lbnUoIkUgU2tpbGwgTG9naWMiLCAiRWxvZ2ljIikNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJjb21ibyIsICJFIExvZ2ljIGZvciBjb21ibyBtb2RlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHsiRW5nYWdlIHdpdGggc2Vjb25kIEUiLCAiRG8gbm90IHVzZSBTZWNvbmQgRSAoIFJlY29tZW5kZWQpIiB9KQ0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWM6YWRkUGFyYW0oImhhcmFzcyIsICJFIExvZ2ljIGZvciBIYXJhc3MgbW9kZSIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IkRvIG5vdCB1c2UgU2Vjb25kIEUgKCBSZWNvbWVuZGVkKSIsICJFbmdhZ2Ugd2l0aCBzZWNvbmQgRSIgfSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJpbmZvRSIsICJFbmdhZ2Ugd2l0aCBzZWNvbmQgRSBvcHRpb24gaXMgc3RpbGwgb24gQmV0YS4uIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljOmFkZFN1Yk1lbnUoIlIgU2tpbGwgTG9naWMiLCAiUmxvZ2ljIikNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJSbG9naWMiLCAiUiBMb2dpYyBmb3IgY29tYm8gbW9kZSIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlNtYXJ0IiwgInNhdmUgZm9yIHlvdXJzZWxmIiwgIlVzZSBmb3IgZW5lbXkiIH0pDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiZW5hYmxlYXV0b1IiLCAiQXV0byBSIGZvciB5b3Vyc2VsZiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJhdXRvUiIsICJBdXRvUiBpZiBIZWFsdGggdW5kZXIgLT4gJSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJpbmZvUjIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiaW5mb1IiLCAiRm9yIHVzaW5nIFNtYXJ0IFIgbG9naWMsIEF1dG9SIHNob3VsZCBiZSBvcGVuLi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWM6YWRkU3ViTWVudSgiVyBTa2lsbCBMb2dpYyIsICJXbG9naWMiKSANCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJ1c2VXIiwgIlVzZSBXIGZvciBBbnRpIEdhcENsb3NlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJpbmZvdzIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgiaW5mb1czIiwgIlRoaXMgRnVuY3Rpb24gaXMgb24gYmV0YS4uIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICANCiAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJFc2NhcGUgU2V0dGluZ3MiLCJlc2NhcGUiKQ0KICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VFIiwiVXNlIEUgV2hpbGUgRXNjYXBlIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlVyIsIlVzZSBXIFdoaWxlIEVzY2FwZSIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkZhcm0gU2V0dGluZ3MiLCAiZmFybSIpDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudSgiTGFuZUNsZWFyIFNldHRpbmdzIiwibGFuZWNsZWFyIikNCiAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIiwiVXNlIFcgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAtLXNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIiwiVXNlIEUgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudSgiSnVuZ2xlQ2xlYXIgU2V0dGluZ3MiLCJqdW5nbGVjbGVhciIpDQogICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24ganVuZ2xlY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsIlVzZSBXIG9uIGp1bmdsZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLCJVc2UgRSBvbiBqdW5nbGVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIC0tc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KCJMYXN0aGl0IFNldHRpbmdzIiwibGFzdGhpdCIpDQogICAgICAtLXNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlUSIsIlVzZSBRIG9uIExhc3RoaXQiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVciLCJVc2UgVyBvbiBMYXN0aGl0IixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIC0tc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VFIiwiVXNlIEUgb24gTGFzdGhpdCIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAtLXNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiS2lsbFN0ZWFsIFNldHRpbmdzIiwgImtpbGxzdGVhbCIpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oImtzIiwiS2lsbHN0ZWFsIE9uL09mZiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVEiLCAiU3RlYWwgV2l0aCBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgIlN0ZWFsIFdpdGggRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUiIsICJTdGVhbCBXaXRoIFIiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUkiLCAiU3RlYWwgV2l0aCBJZ25pdGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkl0ZW0gU2V0dGluZ3MiLCAiaXRlbSIpDQogICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgIkF1dG8gWmhvbnlhIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImF1dG96aG9ueWEiLCAiWmhvbnlhIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgDQogICAgICAgICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJWSVAgU2V0dGluZ3MiLCAidmlwIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0IiwiVXNlIFBhY2tldCBDYXN0aW5nIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsICJUbyB1c2UgdmlwIHNldHRpbmdzLCBQYWNrZXQgQ2FzdGluZyBzaG91bGQgYmUgb3Blbi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJBdXRvIExldmVsIFNldHRpbmdzIiwgImxldmVsIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5IiwiVXNlIEF1dG8gTGV2ZWwiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCAiU2VsZWN0IFNraWxsIE9yZGVyIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciICB9KQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIlNraW4gSGFjayBTZXR0aW5ncyIsICJza2luIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLCJVc2UgU2tpbiBIYWNrIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbicsICJTZWxlY3QgU2tpbiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7Ik9yaWdpbmFsIiwgIkJsb29kc3RvbmUgTGlzc2FuZHJhICIsIkJsYWRlIFF1ZWVuIExpc3NhbmRyYSJ9KQ0KICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSBza2luIGhhY2ssIFlvdSBuZWVkIHRvIDJ4IEY5IGFmdGVyIHlvdSBzZWxlY3QgdGhlIHNraW4geW91IGRlc2lyZS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsICJNYWtlIHN1cmUgdGhhdCB1c2luZyBwYWNrZXQgY2FzdGluZyBpcyBPTi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIC0tc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNSIsICJTa2luIEhhY2sgdGVtcG9yYXJ5IGRpc2FibGVkIHVudGlsIG5leHQgdXBkYXRlLiAuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAtLVtbc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIkFudGktQUZLIFNldHRpbmdzIiwgImFudGlhZmsiKQ0KICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLCJVc2UgQW50aSBBZmsiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgXV0NCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzMiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFlvdSBuZWVkIHRvIGJlIGEgVklQIHVzZXIgb24gQk9MIGNvbW11bml0eS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgZW5kDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJEcmF3IFNldHRpbmdzIiwib3RoZXIiKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTaG93IERhbWFnZSBPbiBIcCBCYXIiLCAiSFBCQVIiKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNraWxsIERyYXdpbmcgU2V0dGluZ3MiLCAiZHJhdyIpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJxZHJhdyIsIlEgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLCJXIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3IiwiRSBTa2lsbCBEcmF3aW5ncyIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJyZHJhdyIsIlIgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3IiwiQXV0byBBdHRhY2sgUmFuZ2UiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCg0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJUYXJnZXRzZWxlY3RvcnMiLCJ0YXJnZXRzZWwiKQ0KICAgIHNlbGYudHMubmFtZSAgPSAiTGlzc2FuZHJhIEdlbmVyYWwiDQogICAgc2VsZi50c3EubmFtZSA9ICJMaXNzYW5kcmEgUSBTa2lsbCINCiAgICBzZWxmLnRzdy5uYW1lID0gIkxpc3NhbmRyYSBXIFNraWxsIg0KICAgIHNlbGYudHNlLm5hbWUgPSAiTGlzc2FuZHJhIEUgU2tpbGwiDQogICAgc2VsZi50c3IubmFtZSA9ICJMaXNzYW5kcmEgUiBTa2lsbCINCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3EpDQogICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHN3KQ0KICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzZSkNCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3IpIA0KICAgIA0KICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIktleXMgU2V0dGluZ3MiLCAiS2V5cyIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0szIiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1Db21ibyBLZXkgU2V0dGluZ3MtLS0tLS0tLS0tLS0tLS0tLS0+IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLCAiQ29tYm8gS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJva2V5ciIsICJTdGFydCBFbmdhZ2UgV2l0aCBZb3VyIFVsdGkgIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJVIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1IYXJhc3MgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc2tleSIsICJTbWFydCBIYXJhc3MgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNzdG9nbGVrZXkiLCAiSGFyYXNzIFRvZ2xlIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJUIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s1IiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1DbGVhciBLZXkgU2V0dGluZ3MtLS0tLS0tLS0tLS0tLS0tLS0tLT4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCAiTGFuZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImp1bmdsZWNsZWFya2V5IiwgIkp1bmdsZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWiIpKQ0KICAgIC0tc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsICJMYXN0aGl0IEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNiIsICI8LS0tLS0tLS0tLS0tLS0tLS0tT3RoZXIgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgIkVzY2FwZSBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzIiLCAiTWFrZSBTdXJlIFRoYXQgWW91ciBPcmJ3YWxrZXIgS2V5cyBhcmUgU2FtZSBBcyBIZXJlIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIk9yYndhbGtlciBLZXkgU2V0dGluZ3MiLCAiS2V5czIiKQ0KICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgIHNlbGYuQ29uZmlnLktleXMyOmFkZFBhcmFtKCJpbmZvSzQiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czI6YWRkUGFyYW0oImluZm9LMjIiLCAiTWFrZSBTdXJlIFRoYXQgWW91ciBTY3JpcHQgS2V5cyBhcmUgU2FtZSBBcyBIZXJlIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIA0KICAgICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsICIgICAgICAgICAgICAgICAgIFNjcmlwdCBWZXJzaW9uOiAgIi4uVmVyc2lvbi4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgIiAgICAgICAgICAgIFNjcmlwdCB3YXMgbWFkZSBieSAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCAiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgDQogICAgIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpDQogICAgIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJjb21ib2tleSIpDQogICAgIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3N0b2dsZWtleSIpDQogICAgIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKQ0KICANCg0KZW5kDQpmdW5jdGlvbiBMaXNzYW5kcmE6c2tpbmhhY2soKQ0KaWYgbm90IHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgdGhlbiBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbMV0sIG15SGVyby5uZXR3b3JrSUQpOyBlbHNlDQppZiBzZWxmLkNvbmZpZy52aXAuc2tpbi5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgIHRoZW4NClNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQplbmQNCmVuZA0KZW5kDQpmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b2xldmVsKCkNCmlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMSApIHRoZW4NCmlmIG15SGVyby5sZXZlbCA9PSAxIHRoZW4NCiBMZXZlbFNwZWxsKF9XKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDIgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMyB0aGVuDQogTGV2ZWxTcGVsbChfRSkgDQogZWxzZWlmIG15SGVyby5sZXZlbCA+IDMgYW5kIG15SGVyby5sZXZlbCA+IHNwZWxsTGV2ZWwgdGhlbg0KICAgICAgICBzcGVsbExldmVsID0gc3BlbGxMZXZlbCArIDEgICAgICAgIA0KICAgICAgICAgTGV2ZWxTcGVsbChfUikNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1EpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9XKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIGVuZA0KICAgIGVsc2VpZiAoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAyICkgdGhlbg0KICAgIGlmIG15SGVyby5sZXZlbCA9PSAxIHRoZW4NCiBMZXZlbFNwZWxsKF9XKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDIgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMyB0aGVuDQogTGV2ZWxTcGVsbChfRSkgDQogZWxzZWlmIG15SGVyby5sZXZlbCA+IDMgYW5kIG15SGVyby5sZXZlbCA+IHNwZWxsTGV2ZWwgdGhlbg0KICAgICAgICBzcGVsbExldmVsID0gc3BlbGxMZXZlbCArIDEgICAgICAgIA0KICAgICAgICAgTGV2ZWxTcGVsbChfUikNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1EpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9FKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIGVuZA0KICAgZWxzZWlmICggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDMgKSB0aGVuDQogICAgaWYgbXlIZXJvLmxldmVsID09IDEgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMiB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAzIHRoZW4NCiBMZXZlbFNwZWxsKF9FKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID4gMyBhbmQgbXlIZXJvLmxldmVsID4gc3BlbGxMZXZlbCB0aGVuDQogICAgICAgIHNwZWxsTGV2ZWwgPSBzcGVsbExldmVsICsgMSAgICAgICAgDQogICAgICAgICBMZXZlbFNwZWxsKF9SKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1EpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9FKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNCApIHRoZW4NCiAgICBpZiBteUhlcm8ubGV2ZWwgPT0gMSB0aGVuDQogTGV2ZWxTcGVsbChfUSkgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAyIHRoZW4NCiBMZXZlbFNwZWxsKF9XKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDMgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPiAzIGFuZCBteUhlcm8ubGV2ZWwgPiBzcGVsbExldmVsIHRoZW4NCiAgICAgICAgc3BlbGxMZXZlbCA9IHNwZWxsTGV2ZWwgKyAxICAgICAgICANCiAgICAgICAgIExldmVsU3BlbGwoX1IpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9XKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1EpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiAoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1ICkgdGhlbg0KICAgIGlmIG15SGVyby5sZXZlbCA9PSAxIHRoZW4NCiBMZXZlbFNwZWxsKF9XKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDIgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMyB0aGVuDQogTGV2ZWxTcGVsbChfUSkgDQogZWxzZWlmIG15SGVyby5sZXZlbCA+IDMgYW5kIG15SGVyby5sZXZlbCA+IHNwZWxsTGV2ZWwgdGhlbg0KICAgICAgICBzcGVsbExldmVsID0gc3BlbGxMZXZlbCArIDEgICAgICAgIA0KICAgICAgICAgTGV2ZWxTcGVsbChfUikNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1cpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmICggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDYgKSB0aGVuDQogICAgaWYgbXlIZXJvLmxldmVsID09IDEgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMiB0aGVuDQogTGV2ZWxTcGVsbChfRSkgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAzIHRoZW4NCiBMZXZlbFNwZWxsKF9XKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID4gMyBhbmQgbXlIZXJvLmxldmVsID4gc3BlbGxMZXZlbCB0aGVuDQogICAgICAgIHNwZWxsTGV2ZWwgPSBzcGVsbExldmVsICsgMSAgICAgICAgDQogICAgICAgICBMZXZlbFNwZWxsKF9SKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1EpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9XKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG96aG9ueWEoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLmVuYWJsZWF1dG96aG9ueWEgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCg0KZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG9SKCkNCiAgaWYgKCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5lbmFibGVhdXRvUiBhbmQgKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAyIG9yIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAxKSkgdGhlbg0KICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5hdXRvUiAvIDEwMCkgdGhlbiBzZWxmOkNhc3RSUyhteUhlcm8pDQogICAgZW5kDQogIGVuZA0KICBlbmQNCg0KZnVuY3Rpb24gTGlzc2FuZHJhOmVuZ2FnZXdpdGhyKCkNCiBzZWxmLnRzcTp1cGRhdGUoKQ0KIGlmIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyIHRoZW4NCiBzZWxmOndhbGsoKQ0KIGVuZA0KICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICApdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHNlbGYudHNxLnRhcmdldCkNCiAgICBlbmQNCiAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgKXRoZW4NCiAgICAgICAgICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCmlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQppZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSApIHRoZW4NCiAgIENhc3RTcGVsbChfRSwgc2VsZi50c2UudGFyZ2V0LngsIHNlbGYudHNlLnRhcmdldC56KQ0KICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDEuNSkNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciAgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0VyhzZWxmLnRzdy50YXJnZXQpDQogICAgZW5kDQogICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICBpZihzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0UihzZWxmLnRzci50YXJnZXQpDQplbmQNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOkRyYXcoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcyNSwgMSxyZWQpDQogIGVuZA0KDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcud2RyYXcgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDEwNTAsIDEsIHJlZCkNCiAgZW5kDQoNCiAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5lZHJhdyBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNDIwLCAxLCByZWQpDQogIGVuZA0KICANCiAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTAwLDEsIHJlZCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuYWFkcmF3IHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTUwLDEsIEFSR0IoMjU1LCAyNTUsMCwwKSkNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTphbnRpZ2FwdygpDQogICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHN3LnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlVyAgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0VyhzZWxmLnRzdy50YXJnZXQpDQogICAgZW5kDQplbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpjb21ibygpDQogICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEoc2VsZi50c3EudGFyZ2V0KQ0KICAgIGVuZA0KICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuY29tYm8gPT0gMSBhbmQgIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCmlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgQ2FzdFNwZWxsKF9FLCBzZWxmLnRzZS50YXJnZXQueCwgc2VsZi50c2UudGFyZ2V0LnopDQogICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMS41KQ0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmNvbWJvID09IDIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCmlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQppZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgIENhc3RTcGVsbChfRSwgc2VsZi50c2UudGFyZ2V0LngsIHNlbGYudHNlLnRhcmdldC56KQ0KICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDIpDQogICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcoc2VsZi50c3cudGFyZ2V0KQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAzIG9yIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAxIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ1IgPWdldERtZygiUiIsdW5pdCxteUhlcm8pKyAoKG15SGVyby5hcCkqMC43MCkgDQogICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgIGlmKGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBHZXREaXN0YW5jZSh1bml0KTw1NTApdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgZWxzZWlmIChzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMiBhbmQgIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5hdXRvUiAvIDEwMCkpIHRoZW4gDQogICAgIHNlbGY6Q2FzdFJTKG15SGVybykNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogICAgDQogICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0USh1bml0KQ0KICBzZWxmLlFTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RXKHVuaXQpDQogIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdEUodW5pdCkNCiAgc2VsZi5FU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0Uih1bml0KQ0KICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQplbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0UlModW5pdCkNCiBDYXN0U3BlbGwoX1IgLCBteUhlcm8pDQplbmQNCg0KZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RJKHVuaXQpDQogIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOmtpbGxzdGVhbCgpDQpmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgbG9jYWwgZG1nRSA9IGdldERtZygiRSIsIHVuaXQsIG15SGVybykgKyAoKG15SGVyby5hcCkqMC42KSANCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgbG9jYWwgZG1nUSA9IGdldERtZygiUSIsIHVuaXQsIG15SGVybykgKyAoKG15SGVyby5hcCkqMC42NSkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodW5pdCkgIA0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdXID0gZ2V0RG1nKCJXIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjQwKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VXIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdSID1nZXREbWcoIlIiLHVuaXQsbXlIZXJvKSsoKG15SGVyby5hcCkqMC43MCkgDQogICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NTUwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgZW5kDQogICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBMaXNzYW5kcmE6ZXNjYXBlKCkNCmxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQppZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VFICB0aGVuDQppZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSApIHRoZW4NCiAgIENhc3RTcGVsbChfRSxtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMS41KQ0KZW5kDQplbmQNCmVuZA0KaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgdGhlbiANCnNlbGY6d2FsaygpDQplbmQNCmlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5IGFuZCBzZWxmLkNvbmZpZy5lc2NhcGUudXNlVyBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgdGhlbg0KQ2FzdFNwZWxsKF9XLHRzdy50YXJnZXQpDQplbmQNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOndhbGsoKQ0KICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsbW91c2VQb3MueikNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOmhhcmFzcygpDQogIHNlbGYudHM6dXBkYXRlKCkNCiAgc2VsZi50c3E6dXBkYXRlKCkNCiAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSB0aGVuDQogICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVEgKSB0aGVuICAgICAgICANCiAgICAgICAgc2VsZjpDYXN0UShzZWxmLnRzcS50YXJnZXQpDQogICAgICBlbmQgICANCiAgICAgIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSBvciBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc3RvZ2xla2V5IHRoZW4NCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyApIHRoZW4gICAgICAgIA0KICAgICAgICBzZWxmOkNhc3RXKHNlbGYudHN3LnRhcmdldCkNCiAgICAgIGVuZCAgDQogICAgICBlbmQgDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgIHRoZW4NCiAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmhhcmFzcyA9PSAxICBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlRSApIHRoZW4gICAgICAgIA0KICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQppZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgYW5kIHNlbGYudHNlLnRhcmdldH49bmlsKSB0aGVuDQogICBDYXN0U3BlbGwoX0UsIHNlbGYudHNlLnRhcmdldC54LCBzZWxmLnRzZS50YXJnZXQueikNCiAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAyKQ0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgIHRoZW4NCiAgICAgICAgICAgICBpZihzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYy5oYXJhc3MgPT0gMiBhbmQgICAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFICkgdGhlbiAgICAgICAgDQogICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCmlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQppZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgIENhc3RTcGVsbChfRSwgc2VsZi50c2UudGFyZ2V0LngsIHNlbGYudHNlLnRhcmdldC56KQ0KICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDEuNSkNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpMYW5lQ2xlYXIoKQ0KIGxvY2FsIGNsZWFydGFyZ2V0ID0gbmlsDQpzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLk1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RMaW5lRmFybVBvc2l0aW9uKHNlbGYuUVNwZWxsLlJhbmdlLCBzZWxmLlFTcGVsbC5XaWR0aCwgc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyApDQogICAgICBpZiBCZXN0UG9zICBhbmQgQmVzdEhpdCA+IDAgdGhlbg0KICAgICAgIENhc3RTcGVsbChfUSwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgIGVuZA0KICAgICAgaWYgY2xlYXJ0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlVyBhbmQgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcoY2xlYXJ0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KZW5kDQpmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b3EoKQ0KDQogICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLmF1dG9xICkgdGhlbiAgICAgICAgDQogICAgICAgIHNlbGY6Q2FzdFEoc2VsZi50c3EudGFyZ2V0KQ0KICAgIGVuZA0KZW5kDQpmdW5jdGlvbiBMaXNzYW5kcmE6SnVuZ2xlQ2xlYXIoKQ0KbG9jYWwgY2xlYXJ0YXJnZXQgPSBuaWwNCiAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBmb3IgaSwganVuZ2xlbWluaW9uIGluIGlwYWlycyhzZWxmLmp1bmdsZU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgIGlmIFZhbGlkVGFyZ2V0KGp1bmdsZW1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgIGNsZWFydGFyZ2V0ID0ganVuZ2xlbWluaW9uDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBmb3IgaSwgb3RoZXJtaW5pb24gaW4gaXBhaXJzKHNlbGYub3RoZXJNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICBpZiBWYWxpZFRhcmdldChvdGhlcm1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgIGNsZWFydGFyZ2V0ID0gb3RoZXJtaW5pb24NCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGlmIGNsZWFydGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKGNsZWFydGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgc2VsZjpDYXN0VyhjbGVhcnRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgaWYgY2xlYXJ0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUoY2xlYXJ0YXJnZXQpDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCmVuZA0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgZW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgZW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgZW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgZW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1WaWt0b3IgU3RhcnQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1WaWt0b3IgU3RhcnQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1WaWt0b3IgU3RhcnQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1WaWt0b3IgU3RhcnQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpjbGFzcyAiVmlrdG9yIg0KcmVxdWlyZSAnSFByZWRpY3Rpb24nDQpmdW5jdGlvbiBWaWt0b3I6X19pbml0KCkNCiBzZWxmLnRzPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA1MjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogIHNlbGYudHNxPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA2MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogIHNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogIHNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMjAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICBzZWxmLnRzcj0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgIHNlbGYuUVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1EsIERhbWFnZU5hbWUgPSAiUSIsIFJhbmdlID0gbWF0aC5odWdlLCBXaWR0aCA9IDEsIERlbGF5ID0gMCwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IHRydWUsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgc2VsZi5XU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfVywgRGFtYWdlTmFtZSA9ICJXIiwgUmFuZ2UgPSBtYXRoLmh1Z2UsIFdpZHRoID0gMTI1LCBEZWxheSA9IDAuNSwgU3BlZWQgPSA3NTAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5DSVJDVUxBUn0pDQogICBzZWxmLkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9FLCBEYW1hZ2VOYW1lID0gIkUiLCBSYW5nZSA9IDEyMDAsIFdpZHRoID0gOTAsIERlbGF5ID0gMCwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IHRydWUsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgc2VsZi5SU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTcwMCwgV2lkdGggPSAwLCBEZWxheSA9IDAuMjUsIFNwZWVkID0gMTAwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLkNJUkNVTEFSfSkNCiAgIHNlbGYuSWduaXRlID0gX1NwZWxsKHtTbG90ID0gRmluZFN1bW1vbmVyU2xvdCgic3VtbW9uZXJkb3QiKSwgRGFtYWdlTmFtZSA9ICJJR05JVEUiLCBSYW5nZSA9IDYwMCwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgIHNlbGYuSFByZWQgPSBIUHJlZGljdGlvbigpDQogICBzZWxmLkUgPSB7UmFuZ2UxID0gNTUwLCBSYW5nZTIgPSA3MDAsIHdpZHRoID0gMTgwLCByZWFkeX0NCiAgIHNlbGYuRVJhbmdlID0gc2VsZi5FLlJhbmdlMStzZWxmLkUuUmFuZ2UyDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgICAgICAgc2VsZjpMb2FkTWVudSgpDQogICAgICAgICAgICBzZWxmOmZpbmRvcmJ3YWxrZXIoKQ0KICAgICAgICAtLSBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICAtLUFkZE1zZ0NhbGxiYWNrKGZ1bmN0aW9uKG1zZyxLZXkpIHNlbGY6V25kTXNnKG1zZyxLZXkpIGVuZCkNCiAgLS1BZGRBbmltYXRpb25DYWxsYmFjayhmdW5jdGlvbih1bml0LCBhbmltYXRpb24pIHNlbGY6QW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbikgZW5kKQ0KICAtLUFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAtLUFkZEFwcGx5QnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpPbkFwcGx5QnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCiAgLS1BZGRVcGRhdGVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZiwgc3RhY2tzKSBzZWxmOlVwZGF0ZUJ1ZmYodW5pdCwgYnVmZiwgc3RhY2tzKSBlbmQpDQogIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgZW5kDQotLSBoYW5kbGVzIHNjcmlwdCBsb2dpYywgYSBwdXJlIGhpZ2ggc3BlZWQgbG9vcA0KZnVuY3Rpb24gVmlrdG9yOlRpY2soKQ0KICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgICAgLS0gaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KIGlmKHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgc2VsZjpjb21ibygpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5sYW5lY2xlYXIubGFuZWNsZWFya2V5KXRoZW4NCiAgICBzZWxmOkxhbmVDbGVhcigpDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyLmp1bmdsZWNsZWFya2V5KXRoZW4NCiAgICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgZW5kDQogIGlmKHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApIHRoZW4NCiAgICBzZWxmOmtpbGxzdGVhbCgpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLmhhcmFzcy5oYXJhc3N0b2dsZSApIHRoZW4NCiAgICBzZWxmOmhhcmFzcygpDQogIGVuZA0KICAgIGVuZA0KZnVuY3Rpb24gVmlrdG9yOkxvYWRNZW51KCkNCiAgICAgIHNlbGYuQ29uZmlnPXNjcmlwdENvbmZpZygiIi4uU2NyaXB0bmFtZS4uIiIsIm1lbnUiKQ0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiSGl0Y2hhbmNlIiwgImhpdCIpDQogICAgICBzZWxmLkNvbmZpZy5oaXQ6YWRkUGFyYW0oIkUiLCAiRSBIaXRDaGFuY2UgKERlZmF1bHQgdmFsdWUgPSAxLjYpIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxLjYsIDEsIDMsIDIpDQogICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiQ29tYm8gU2V0dGluZ3MiLCAiY29tYm8iKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImNvbWJva2V5IiwgIkNvbWJvIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgIlVzZSBRIGluIENvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVciLCAiVXNlIFcgaW4gQ29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsICJVc2UgRSBpbiBjb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VSIiwgIlVzZSBSIGluIGNvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUkiLCAiVXNlIElnbml0ZSBpZiB0YXJnZXQga2lsbGFibGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgibG9naWMiLCAiVWx0aSBMb2dpYyIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlVzZSBVbHRpIElmIFRhcmdldCBJcyBLaWxsYWJsZSIsfSkgLS0oIlVzZSBVbHRpIERpcmVjdGx5IiB9KQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiSGFyYXNzIFNldHRpbmdzIiwgImhhcmFzcyIpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc2tleSIsICJTbWFydCBIYXJhc3MgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc3RvZ2xlIiwgIlNtYXJ0IEF1dG8gSGFyYXNzIiwgICBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgIkhhcmFzcyBXaXRoIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCAiSGFyYXNzIFdpdGggRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiRSIsICJFIEhpdENoYW5jZSAoRGVmYXVsdCB2YWx1ZSA9IDIpIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAzLCAyKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkxhbmVDbGVhciBTZXR0aW5ncyIsImxhbmVjbGVhciIpDQogICAgICBzZWxmLkNvbmZpZy5sYW5lY2xlYXI6YWRkUGFyYW0oImxhbmVjbGVhcmtleSIsICJMYW5lIENsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlRSIsIlVzZSBFIG9uIExhbmVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5sYW5lY2xlYXI6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiSnVuZ2xlQ2xlYXIgU2V0dGluZ3MiLCJqdW5nbGVjbGVhciIpDQogICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCAiSnVuZ2xlQ2xlYXIgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsIlVzZSBRIG9uIGp1bmdsZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIiwiVXNlIEUgb24ganVuZ2xlY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuanVuZ2xlY2xlYXI6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIktpbGxTdGVhbCBTZXR0aW5ncyIsICJraWxsc3RlYWwiKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsIktpbGxzdGVhbCBPbi9PZmYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgIlN0ZWFsIFdpdGggUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlRSIsICJTdGVhbCBXaXRoIEUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCAiU3RlYWwgV2l0aCBSIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VJIiwgIlN0ZWFsIFdpdGggSWduaXRlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJJdGVtIFNldHRpbmdzIiwgIml0ZW0iKQ0KICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsICJBdXRvIFpob255YSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgIlpob255YSBpZiBIZWFsdGggdW5kZXIgLT4gJSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgICAgICAgaWYgVklQX1VTRVIgdGhlbg0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiVklQIFNldHRpbmdzIiwgInZpcCIpDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oInBhY2tldCIsIlVzZSBQYWNrZXQgQ2FzdGluZyIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzIiLCAiVG8gdXNlIHZpcCBzZXR0aW5ncywgUGFja2V0IENhc3Rpbmcgc2hvdWxkIGJlIG9wZW4uIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudSgiQXV0byBMZXZlbCBTZXR0aW5ncyIsICJsZXZlbCIpDQogICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImtleSIsIlVzZSBBdXRvIExldmVsIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImxvZ2ljIiwgIlNlbGVjdCBTa2lsbCBPcmRlciIsIFNDUklQVF9QQVJBTV9MSVNULCA2LCB7IkZvY3VzIFE+Vz5FIiwgIkZvY3VzIFE+RT5XIiwiRm9jdXMgVz5RPkUiLCJGb2N1cyBXPkU+USIsIkZvY3VzIEU+Vz5RIiwgIkZvY3VzIEU+UT5XIiAgfSkNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJTa2luIEhhY2sgU2V0dGluZ3MiLCAic2tpbiIpDQogICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgia2V5IiwiVXNlIFNraW4gSGFjayIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCAiU2VsZWN0IFNraW4iLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJPcmlnaW5hbCIsICJGdWxsIE1hY2hpbmUgVmlrdG9yICIsIlByb3RvdHlwZSBWaWt0b3IgIiwiQ3JlYXRvciBWaWt0b3IgIiB9KQ0KICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSBza2luIGhhY2ssIFlvdSBuZWVkIHRvIDJ4IEY5IGFmdGVyIHlvdSBzZWxlY3QgdGhlIHNraW4geW91IGRlc2lyZS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsICJNYWtlIHN1cmUgdGhhdCB1c2luZyBwYWNrZXQgY2FzdGluZyBpcyBPTi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIC0tc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNSIsICJTa2luIEhhY2sgdGVtcG9yYXJ5IGRpc2FibGVkIHVudGlsIG5leHQgdXBkYXRlLiAuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAtLVtbc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIkFudGktQUZLIFNldHRpbmdzIiwgImFudGlhZmsiKQ0KICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLCJVc2UgQW50aSBBZmsiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgXV0NCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzMiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFlvdSBuZWVkIHRvIGJlIGEgVklQIHVzZXIgb24gQk9MIGNvbW11bml0eS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgZW5kDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJEcmF3IFNldHRpbmdzIiwib3RoZXIiKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTaG93IERhbWFnZSBPbiBIcCBCYXIiLCAiSFBCQVIiKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNraWxsIERyYXdpbmcgU2V0dGluZ3MiLCAiZHJhdyIpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJxZHJhdyIsIlEgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLCJXIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3IiwiRSBTa2lsbCBEcmF3aW5ncyIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJyZHJhdyIsIlIgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3IiwiQXV0byBBdHRhY2sgUmFuZ2UiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiVGFyZ2V0c2VsZWN0b3JzIiwidGFyZ2V0c2VsIikNCiAgIHNlbGYudHMubmFtZSAgPSAiVmlrdG9yIg0KICAgIHNlbGYudHNxLm5hbWUgPSAiVmlrdG9yUSINCiAgICBzZWxmLnRzdy5uYW1lID0gIlZpa3RvclciDQogICAgc2VsZi50c2UubmFtZSA9ICJWaWt0b3JFIg0KICAgIHNlbGYudHNyLm5hbWUgPSAiVmlrdG9yUiINCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3EpDQogICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHN3KQ0KICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzZSkNCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3IpIA0KICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIktleXMgU2V0dGluZ3MiLCAiS2V5cyIpDQogICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5cykNCiAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLCAiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2lvbjogICIuLlZlcnNpb24uLiAiICAgICAgICAgIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsICIgICAgICAgICAgICBTY3JpcHQgd2FzIG1hZGUgYnkgICIuLkF1dGhvci4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgIiAgICAgICBMZWF1Z2UgT2YgTGVnZW5kcyBWZXJzaW9uOiAgIi4uTFZlcnNpb24uLiAiICAgICAgICAgIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgIA0KICAgICBzZWxmLkNvbmZpZzpwZXJtYVNob3coImluZm9ib3giKQ0KICAgICBzZWxmLkNvbmZpZy5jb21ibzpwZXJtYVNob3coImNvbWJva2V5IikNCiAgICAgc2VsZi5Db25maWcuaGFyYXNzOnBlcm1hU2hvdygiaGFyYXNzdG9nbGUiKQ0KICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6cGVybWFTaG93KCJoYXJhc3NrZXkiKQ0KICANCmVuZA0KZnVuY3Rpb24gVmlrdG9yOkRyYXcoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDYwMCwgMSxyZWQpDQogIGVuZA0KDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcud2RyYXcgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgMSwgcmVkKQ0KICBlbmQNCg0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmVkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCAxMjAwLCAxLCByZWQpDQogIGVuZA0KICANCiAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLDEsIHJlZCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuYWFkcmF3IHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTI1LDEsIEFSR0IoMjU1LCAyNTUsMCwwKSkNCiAgZW5kDQplbmQNCg0KZnVuY3Rpb24gVmlrdG9yOnNraW5oYWNrKCkNCmlmIG5vdCBzZWxmLkNvbmZpZy52aXAucGFja2V0IHRoZW4gU2VuZFNraW5QYWNrZXQobXlIZXJvLmNoYXJOYW1lLCBza2luc1BCWzFdLCBteUhlcm8ubmV0d29ya0lEKTsgZWxzZQ0KaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQpTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KZW5kDQplbmQNCmVuZA0KZnVuY3Rpb24gVmlrdG9yOmF1dG9sZXZlbCgpDQppZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDEgKSB0aGVuDQppZiBteUhlcm8ubGV2ZWwgPT0gMSB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAyIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDMgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPiAzIGFuZCBteUhlcm8ubGV2ZWwgPiBzcGVsbExldmVsIHRoZW4NCiAgICAgICAgc3BlbGxMZXZlbCA9IHNwZWxsTGV2ZWwgKyAxICAgICAgICANCiAgICAgICAgIExldmVsU3BlbGwoX1IpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBlbmQNCiAgICBlbHNlaWYgKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMiApIHRoZW4NCiAgICBpZiBteUhlcm8ubGV2ZWwgPT0gMSB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAyIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDMgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPiAzIGFuZCBteUhlcm8ubGV2ZWwgPiBzcGVsbExldmVsIHRoZW4NCiAgICAgICAgc3BlbGxMZXZlbCA9IHNwZWxsTGV2ZWwgKyAxICAgICAgICANCiAgICAgICAgIExldmVsU3BlbGwoX1IpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1cpDQogICAgICAgICAgICBlbmQNCiAgIGVsc2VpZiAoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAzICkgdGhlbg0KICAgIGlmIG15SGVyby5sZXZlbCA9PSAxIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDIgdGhlbg0KIExldmVsU3BlbGwoX1cpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMyB0aGVuDQogTGV2ZWxTcGVsbChfRSkgDQogZWxzZWlmIG15SGVyby5sZXZlbCA+IDMgYW5kIG15SGVyby5sZXZlbCA+IHNwZWxsTGV2ZWwgdGhlbg0KICAgICAgICBzcGVsbExldmVsID0gc3BlbGxMZXZlbCArIDEgICAgICAgIA0KICAgICAgICAgTGV2ZWxTcGVsbChfUikNCiAgICAgICAgICAgIExldmVsU3BlbGwoX1cpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfRSkNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZWxzZWlmICggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgKSB0aGVuDQogICAgaWYgbXlIZXJvLmxldmVsID09IDEgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMiB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAzIHRoZW4NCiBMZXZlbFNwZWxsKF9FKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID4gMyBhbmQgbXlIZXJvLmxldmVsID4gc3BlbGxMZXZlbCB0aGVuDQogICAgICAgIHNwZWxsTGV2ZWwgPSBzcGVsbExldmVsICsgMSAgICAgICAgDQogICAgICAgICBMZXZlbFNwZWxsKF9SKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbHNlaWYgKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNSApIHRoZW4NCiAgICBpZiBteUhlcm8ubGV2ZWwgPT0gMSB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA9PSAyIHRoZW4NCiBMZXZlbFNwZWxsKF9FKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDMgdGhlbg0KIExldmVsU3BlbGwoX1EpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPiAzIGFuZCBteUhlcm8ubGV2ZWwgPiBzcGVsbExldmVsIHRoZW4NCiAgICAgICAgc3BlbGxMZXZlbCA9IHNwZWxsTGV2ZWwgKyAxICAgICAgICANCiAgICAgICAgIExldmVsU3BlbGwoX1IpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9XKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfUSkNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVsc2VpZiAoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA2ICkgdGhlbg0KICAgIGlmIG15SGVyby5sZXZlbCA9PSAxIHRoZW4NCiBMZXZlbFNwZWxsKF9RKSANCiBlbHNlaWYgbXlIZXJvLmxldmVsID09IDIgdGhlbg0KIExldmVsU3BlbGwoX0UpIA0KIGVsc2VpZiBteUhlcm8ubGV2ZWwgPT0gMyB0aGVuDQogTGV2ZWxTcGVsbChfVykgDQogZWxzZWlmIG15SGVyby5sZXZlbCA+IDMgYW5kIG15SGVyby5sZXZlbCA+IHNwZWxsTGV2ZWwgdGhlbg0KICAgICAgICBzcGVsbExldmVsID0gc3BlbGxMZXZlbCArIDEgICAgICAgIA0KICAgICAgICAgTGV2ZWxTcGVsbChfUikNCiAgICAgICAgICAgIExldmVsU3BlbGwoX0UpDQogICAgICAgICAgICBMZXZlbFNwZWxsKF9RKQ0KICAgICAgICAgICAgTGV2ZWxTcGVsbChfVykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQplbmQNCmZ1bmN0aW9uIFZpa3RvcjphdXRvemhvbnlhKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS5lbmFibGVhdXRvemhvbnlhIHRoZW4NCiAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICBpZiBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuaXRlbS5hdXRvemhvbnlhIC8gMTAwKSBhbmQgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJaaG9ueWFzSG91cmdsYXNzIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3Rvcjpvbmx5cigpDQogIGlmIChzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IGFuZCBHZXREaXN0YW5jZShzZWxmLnRzci50YXJnZXQpPDcwMCApdGhlbg0KICAgIHNlbGY6Q2FzdFIoc2VsZi50c3IudGFyZ2V0KQ0KICAgIGVuZA0KICBlbmQNCmZ1bmN0aW9uIFZpa3Rvcjpjb21ibygpDQogICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICApdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHNlbGYudHNxLnRhcmdldCkNCiAgICBlbmQNCiAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgICl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUoc2VsZi50c2UudGFyZ2V0KQ0KICAgIGVuZA0KICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICApdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHNlbGYudHN3LnRhcmdldCkNCiAgICBlbmQNCiAgICBpZiggc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBkbWdSID1nZXREbWcoIlIiLHVuaXQsbXlIZXJvKSsgKChteUhlcm8uYXApKjAuNTUpIA0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICBlbmQNCiAgICAgZW5kDQogICAgIGlmIChzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAyIGFuZCBzZWxmLnRzci50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBzZWxmOm9ubHlyKCkNCiAgICBlbmQNCiAgDQogICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KZW5kDQplbmQNCmVuZA0KZnVuY3Rpb24gVmlrdG9yOkNhc3RRKHVuaXQpDQogIHNlbGYuUVNwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBWaWt0b3I6Q2FzdFcodW5pdCkNCiAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIFZpa3RvcjpDYXN0RSh1bml0KQ0KIA0KICBpZiB1bml0LmRlYWQgb3IgdW5pdC5oZWFsdGggPT0gMCB0aGVuDQogICAgcmV0dXJuDQogIGVuZA0KICANCiAgaWYgR2V0RGlzdGFuY2UodW5pdCwgbXlIZXJvKSA+IHNlbGYuRS5SYW5nZTEtNSB0aGVuDQogICBFU3RhcnRQb3MgPSBDaXJjbGVJbnRlcnNlY3Rpb24obXlIZXJvLCB1bml0LCBteUhlcm8sIHNlbGYuRS5SYW5nZTEtNSkNCiAgZWxzZQ0KICAgRVN0YXJ0UG9zID0gVmVjdG9yKHVuaXQueCwgdW5pdC55LCB1bml0LnopDQogIGVuZA0KICANCiAgIEVQb3MsIEVIaXRDaGFuY2UgPSBzZWxmLkhQcmVkOkdldFByZWRpY3Qoc2VsZi5IUHJlZC5QcmVzZXRzWydWaWt0b3InXVsiRSJdLCB1bml0LCBFU3RhcnRQb3MpDQogIA0KICBpZiBtb2RlID09ICJDb21ibyIgYW5kIEVIaXRDaGFuY2UgPj0gc2VsZi5Db25maWcuaGl0LkUgb3IgbW9kZSA9PSAiSGFyYXNzIiBhbmQgRUhpdENoYW5jZSA+PSBzZWxmLkNvbmZpZy5oYXJhc3MuRSBvciAgbW9kZSA9PSBuaWwgYW5kIEVIaXRDaGFuY2UgPiAxIHRoZW4NCiAgICBDYXN0U3BlbGwzKF9FLCBEM0RYVkVDVE9SMyhFU3RhcnRQb3MueCwgMCwgRVN0YXJ0UG9zLnopLCBEM0RYVkVDVE9SMyhFUG9zLngsIDAsIEVQb3MueikpDQogIGVuZA0KICANCmVuZA0KDQpmdW5jdGlvbiBWaWt0b3I6Q2FzdFIodW5pdCkNCiAgc2VsZi5SU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQpmdW5jdGlvbiBWaWt0b3I6Q2FzdEkodW5pdCkNCiAgc2VsZi5JZ25pdGU6Q2FzdCh1bml0KQ0KZW5kDQpmdW5jdGlvbiBWaWt0b3I6a2lsbHN0ZWFsKCkNCmZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgbG9jYWwgaGVhbHRoID0gdW5pdC5oZWFsdGgNCiAgICBsb2NhbCBkbWdFID0gZ2V0RG1nKCJFIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjcpICsgKChnZXREbWcoIkUiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNykpKjAuNCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwICAgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodW5pdCkgIA0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdRID0gZ2V0RG1nKCJRIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjMwKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdSID1nZXREbWcoIlIiLHVuaXQsbXlIZXJvKSsoKG15SGVyby5hcCkqMC41NSkgDQogICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgZW5kDQogICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBWaWt0b3I6aGFyYXNzKCkNCiAgc2VsZi50czp1cGRhdGUoKQ0KICBzZWxmLnRzcTp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLmhhcmFzcy5oYXJhc3N0b2dsZSAgdGhlbg0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRICkgdGhlbiAgICAgICAgDQogICAgICAgIHNlbGY6Q2FzdFEoc2VsZi50c3EudGFyZ2V0KQ0KICAgICAgZW5kICAgDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFICBhbmQgVmFsaWRUYXJnZXQoc2VsZi50c2UudGFyZ2V0LCBzZWxmLkVSYW5nZSkpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdEUoc2VsZi50c2UudGFyZ2V0KQ0KICBlbmQNCg0KICAgICAgZW5kDQogICAgZW5kICAgDQogDQpmdW5jdGlvbiBWaWt0b3I6TGFuZUNsZWFyKCkNCiBsb2NhbCBjbGVhcnRhcmdldCA9IG5pbA0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgY2xlYXJ0YXJnZXQgPSBtaW5pb24NCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGZvciBpLCBqdW5nbGVtaW5pb24gaW4gaXBhaXJzKHNlbGYuanVuZ2xlTWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgaWYgVmFsaWRUYXJnZXQoanVuZ2xlbWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgY2xlYXJ0YXJnZXQgPSBqdW5nbGVtaW5pb24NCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGZvciBpLCBvdGhlcm1pbmlvbiBpbiBpcGFpcnMoc2VsZi5vdGhlck1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgIGlmIFZhbGlkVGFyZ2V0KG90aGVybWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgY2xlYXJ0YXJnZXQgPSBvdGhlcm1pbmlvbg0KICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgY2xlYXJ0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcubGFuZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmxhbmVjbGVhci5sYW5lY2xlYXJrZXkpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmxhbmVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEoY2xlYXJ0YXJnZXQpDQogICAgICBlbmQNCiAgICAgaWYgY2xlYXJ0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcubGFuZWNsZWFyLnVzZUUgYW5kIHNlbGYuQ29uZmlnLmxhbmVjbGVhci5sYW5lY2xlYXJrZXkpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmxhbmVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5FU3BlbGwuUmFuZ2UsIHNlbGYuRVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCBCZXN0SGl0ID49IDEgdGhlbg0KICAgICAgIENhc3RTcGVsbChfRSwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkp1bmdsZUNsZWFyKCkNCiBsb2NhbCBjbGVhcnRhcmdldCA9IG5pbA0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICBmb3IgaSwganVuZ2xlbWluaW9uIGluIGlwYWlycyhzZWxmLmp1bmdsZU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgIGlmIFZhbGlkVGFyZ2V0KGp1bmdsZW1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgIGNsZWFydGFyZ2V0ID0ganVuZ2xlbWluaW9uDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci5qdW5nbGVjbGVhcmtleSkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKGNsZWFydGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci5qdW5nbGVjbGVhcmtleSkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKGNsZWFydGFyZ2V0KQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIGl0ZW1maXgoKQ0KDQogIEl0ZW1OYW1lcyAgICAgICA9IHsNCiAgICBbMzMwM10gICAgICAgID0gIkFyY2hBbmdlbHNEdW1teVNwZWxsIiwNCiAgICBbMzAwN10gICAgICAgID0gIkFyY2hBbmdlbHNEdW1teVNwZWxsIiwNCiAgICBbMzE0NF0gICAgICAgID0gIkJpbGdld2F0ZXJDdXRsYXNzIiwNCiAgICBbMzE4OF0gICAgICAgID0gIkl0ZW1CbGFja2ZpcmVUb3JjaCIsDQogICAgWzMxNTNdICAgICAgICA9ICJJdGVtU3dvcmRPZkZlYXN0QW5kRmFtaW5lIiwNCiAgICBbMzQwNV0gICAgICAgID0gIlRyaW5rZXRTd2VlcGVyTHZsMSIsDQogICAgWzM0MTFdICAgICAgICA9ICJUcmlua2V0T3JiTHZsMSIsDQogICAgWzMxNjZdICAgICAgICA9ICJUcmlua2V0VG90ZW1MdmwxIiwNCiAgICBbMzQ1MF0gICAgICAgID0gIk9kaW5Ucmlua2V0UmV2aXZlIiwNCiAgICBbMjA0MV0gICAgICAgID0gIkl0ZW1DcnlzdGFsRmxhc2siLA0KICAgIFsyMDU0XSAgICAgICAgPSAiSXRlbUtpbmdQb3JvU25hY2siLA0KICAgIFsyMTM4XSAgICAgICAgPSAiRWxpeGlyT2ZJcm9uIiwNCiAgICBbMjEzN10gICAgICAgID0gIkVsaXhpck9mUnVpbiIsDQogICAgWzIxMzldICAgICAgICA9ICJFbGl4aXJPZlNvcmNlcnkiLA0KICAgIFsyMTQwXSAgICAgICAgPSAiRWxpeGlyT2ZXcmF0aCIsDQogICAgWzMxODRdICAgICAgICA9ICJPZGluRW50cm9waWNDbGF5bW9yZSIsDQogICAgWzIwNTBdICAgICAgICA9ICJJdGVtTWluaVdhcmQiLA0KICAgIFszNDAxXSAgICAgICAgPSAiSGVhbHRoQm9tYiIsDQogICAgWzMzNjNdICAgICAgICA9ICJUcmlua2V0T3JiTHZsMyIsDQogICAgWzMwOTJdICAgICAgICA9ICJJdGVtR2xhY2lhbFNwaWtlQ2FzdCIsDQogICAgWzM0NjBdICAgICAgICA9ICJBc2NXYXJwIiwNCiAgICBbMzM2MV0gICAgICAgID0gIlRyaW5rZXRUb3RlbUx2bDMiLA0KICAgIFszMzYyXSAgICAgICAgPSAiVHJpbmtldFRvdGVtTHZsNCIsDQogICAgWzMxNTldICAgICAgICA9ICJIZXh0ZWNoU3dlZXBlciIsDQogICAgWzIwNTFdICAgICAgICA9ICJJdGVtSG9ybiIsDQogICAgLS1bMjAwM10gICAgICA9ICJSZWdlbmVyYXRpb25Qb3Rpb24iLA0KICAgIFszMTQ2XSAgICAgICAgPSAiSGV4dGVjaEd1bmJsYWRlIiwNCiAgICBbMzE4N10gICAgICAgID0gIkhleHRlY2hTd2VlcGVyIiwNCiAgICBbMzE5MF0gICAgICAgID0gIklyb25TdHlsdXMiLA0KICAgIFsyMDA0XSAgICAgICAgPSAiRmxhc2tPZkNyeXN0YWxXYXRlciIsDQogICAgWzMxMzldICAgICAgICA9ICJJdGVtTWVyY3VyaWFsIiwNCiAgICBbMzIyMl0gICAgICAgID0gIkl0ZW1Nb3JlbGxvc0JhbmUiLA0KICAgIFszMDQyXSAgICAgICAgPSAiTXVyYW1hbmEiLA0KICAgIFszMDQzXSAgICAgICAgPSAiTXVyYW1hbmEiLA0KICAgIFszMTgwXSAgICAgICAgPSAiT2R5bnNWZWlsIiwNCiAgICBbMzA1Nl0gICAgICAgID0gIkl0ZW1GYWl0aFNoYWtlciIsDQogICAgWzIwNDddICAgICAgICA9ICJPcmFjbGVFeHRyYWN0U2lnaHQiLA0KICAgIFszMzY0XSAgICAgICAgPSAiVHJpbmtldFN3ZWVwZXJMdmwzIiwNCiAgICBbMjA1Ml0gICAgICAgID0gIkl0ZW1Qb3JvU25hY2siLA0KICAgIFszMTQwXSAgICAgICAgPSAiUXVpY2tzaWx2ZXJTYXNoIiwNCiAgICBbMzE0M10gICAgICAgID0gIlJhbmR1aW5zT21lbiIsDQogICAgWzMwNzRdICAgICAgICA9ICJJdGVtVGlhbWF0Q2xlYXZlIiwNCiAgICBbMzgwMF0gICAgICAgID0gIkl0ZW1SaWdodGVvdXNHbG9yeSIsDQogICAgWzIwNDVdICAgICAgICA9ICJJdGVtR2hvc3RXYXJkIiwNCiAgICBbMzM0Ml0gICAgICAgID0gIlRyaW5rZXRPcmJMdmwxIiwNCiAgICBbMzA0MF0gICAgICAgID0gIkl0ZW1TZXJhcGhzRW1icmFjZSIsDQogICAgWzMwNDhdICAgICAgICA9ICJJdGVtU2VyYXBoc0VtYnJhY2UiLA0KICAgIFsyMDQ5XSAgICAgICAgPSAiSXRlbUdob3N0V2FyZCIsDQogICAgWzMzNDVdICAgICAgICA9ICJPZGluVHJpbmtldFJldml2ZSIsDQogICAgWzIwNDRdICAgICAgICA9ICJTaWdodFdhcmQiLA0KICAgIFszMzQxXSAgICAgICAgPSAiVHJpbmtldFN3ZWVwZXJMdmwxIiwNCiAgICBbMzA2OV0gICAgICAgID0gInNodXJlbHlhc2NyZXN0IiwNCiAgICBbMzU5OV0gICAgICAgID0gIkthbGlzdGFQU3BlbGxDYXN0IiwNCiAgICBbMzE4NV0gICAgICAgID0gIkhleHRlY2hTd2VlcGVyIiwNCiAgICBbMzA3N10gICAgICAgID0gIkl0ZW1UaWFtYXRDbGVhdmUiLA0KICAgIFsyMDA5XSAgICAgICAgPSAiSXRlbU1pbmlSZWdlblBvdGlvbiIsDQogICAgWzIwMTBdICAgICAgICA9ICJJdGVtTWluaVJlZ2VuUG90aW9uIiwNCiAgICBbMzAyM10gICAgICAgID0gIkl0ZW1XcmFpdGhDb2xsYXIiLA0KICAgIFszMjkwXSAgICAgICAgPSAiSXRlbVdyYWl0aENvbGxhciIsDQogICAgWzIwNDNdICAgICAgICA9ICJWaXNpb25XYXJkIiwNCiAgICBbMzM0MF0gICAgICAgID0gIlRyaW5rZXRUb3RlbUx2bDEiLA0KICAgIFszMDkwXSAgICAgICAgPSAiWmhvbnlhc0hvdXJnbGFzcyIsDQogICAgWzMxNTRdICAgICAgICA9ICJ3cmlnZ2xlbGFudGVybiIsDQogICAgWzMxNDJdICAgICAgICA9ICJZb3VtdXNCbGFkZSIsDQogICAgWzMxNTddICAgICAgICA9ICJaaG9ueWFzSG91cmdsYXNzIiwNCiAgICBbMzUxMl0gICAgICAgID0gIkl0ZW1Wb2lkR2F0ZSIsDQogICAgWzMxMzFdICAgICAgICA9ICJJdGVtU29URCIsDQogICAgWzMxMzddICAgICAgICA9ICJJdGVtRGVydmlzaEJsYWRlIiwNCiAgICBbMzM1Ml0gICAgICAgID0gIlJlbGljU3BvdHRlciIsDQogICAgWzMzNTBdICAgICAgICA9ICJUcmlua2V0VG90ZW1MdmwyIiwNCiAgfQ0KICANCiAgX0cuSVRFTV8xICAgICAgID0gMDYNCiAgX0cuSVRFTV8yICAgICAgID0gMDcNCiAgX0cuSVRFTV8zICAgICAgID0gMDgNCiAgX0cuSVRFTV80ICAgICAgID0gMDkNCiAgX0cuSVRFTV81ICAgICAgID0gMTANCiAgX0cuSVRFTV82ICAgICAgID0gMTENCiAgX0cuSVRFTV83ICAgICAgID0gMTINCiAgDQogIF9fX0dldEludmVudG9yeVNsb3RJdGVtID0gcmF3Z2V0KF9HLCAiR2V0SW52ZW50b3J5U2xvdEl0ZW0iKQ0KICBfRy5HZXRJbnZlbnRvcnlTbG90SXRlbSA9IEdldFNsb3RJdGVtDQogIA0KICANCmVuZA0KX0cuTGV2ZWxTcGVsbCA9IGZ1bmN0aW9uKGlkKQ0KIGxvY2FsIG9mZnNldHMgPSB7DQogIFtfUV0gPSAweDg1LA0KICBbX1ddID0gMHg0NSwNCiAgW19FXSA9IDB4MTUsDQogIFtfUl0gPSAweEM1LA0KIH0NCiBsb2NhbCBwDQogcCA9IENMb0xQYWNrZXQoMHgxMzApDQogcC52VGFibGUgPSAweEVEQjM2MA0KIHA6RW5jb2RlRihteUhlcm8ubmV0d29ya0lEKQ0KIGZvciBpID0gMSwgNCBkbyBwOkVuY29kZTEoMHg1NSkgZW5kDQogZm9yIGkgPSAxLCA0IGRvIHA6RW5jb2RlMSgweDc0KSBlbmQNCiBwOkVuY29kZTEob2Zmc2V0c1tpZF0pDQogcDpFbmNvZGUxKDB4QjMpDQogZm9yIGkgPSAxLCA0IGRvIHA6RW5jb2RlMSgweDRGKSBlbmQNCiBwOkVuY29kZTEoMHgwMSkNCiBmb3IgaSA9IDEsIDMgZG8gcDpFbmNvZGUxKDB4MDApIGVuZA0KIFNlbmRQYWNrZXQocCkNCmVuZA0KZnVuY3Rpb24gQ2lyY2xlSW50ZXJzZWN0aW9uKHYxLCB2MiwgYywgcmFkaXVzKQ0KICBhc3NlcnQoVmVjdG9yVHlwZSh2MSkgYW5kIFZlY3RvclR5cGUodjIpIGFuZCBWZWN0b3JUeXBlKGMpIGFuZCB0eXBlKHJhZGl1cykgPT0gIm51bWJlciIsICJDaXJjbGVJbnRlcnNlY3Rpb246IHdyb25nIGFyZ3VtZW50IHR5cGVzICg8VmVjdG9yPiwgPFZlY3Rvcj4sIDxWZWN0b3I+LCBpbnRlZ2VyIGV4cGVjdGVkKSIpDQogIA0KICBsb2NhbCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzID0gdjEueCwgdjEueiBvciB2MS55LCB2Mi54LCB2Mi56IG9yIHYyLnksIGMueCwgYy56IG9yIGMueQ0KICBsb2NhbCByID0gcmFkaXVzDQogIGxvY2FsIHhwLCB5cCwgeG0sIHltID0gbmlsLCBuaWwsIG5pbCwgbmlsDQogIGxvY2FsIElzT25TZWdtZW50ID0gbmlsDQogIA0KICBpZiB4MSA9PSB4MiB0aGVuDQogIA0KICAgIGxvY2FsIEIgPSBtYXRoLnNxcnQocl4yLSh4MS14MyleMikNCiAgICANCiAgICB4cCwgeXAsIHhtLCB5bSA9IHgxLCB5MytCLCB4MSwgeTMtQg0KICBlbHNlDQogIA0KICAgIGxvY2FsIG0gPSAoeTIteTEpLyh4Mi14MSkNCiAgICBsb2NhbCBuID0geTEtbSp4MQ0KICAgIGxvY2FsIEEgPSB4My1tKihuLXkzKQ0KICAgIGxvY2FsIEIgPSBtYXRoLnNxcnQoQV4yLSgxK21eMikqKHgzXjItcl4yKyhuLXkzKV4yKSkNCiAgICANCiAgICB4cCwgeG0gPSAoQStCKS8oMSttXjIpLCAoQS1CKS8oMSttXjIpDQogICAgeXAsIHltID0gbSp4cCtuLCBtKnhtK24NCiAgZW5kDQogIA0KICBpZiB4MSA8PSB4MiB0aGVuDQogICAgSXNPblNlZ21lbnQgPSB4MSA8PSB4cCBhbmQgeHAgPD0geDINCiAgZWxzZQ0KICAgIElzT25TZWdtZW50ID0geDIgPD0geHAgYW5kIHhwIDw9IHgxICAgICAgICANCiAgZW5kDQogICAgaWYgSXNPblNlZ21lbnQgdGhlbg0KICAgIHJldHVybiBWZWN0b3IoeHAsIDAsIHlwKQ0KICBlbHNlDQogICAgcmV0dXJuIFZlY3Rvcih4bSwgMCwgeW0pDQogIGVuZA0KICANCmVuZA0KZnVuY3Rpb24gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24ocmFuZ2UsIHdpZHRoLCBvYmplY3RzKQ0KICAgIGxvY2FsIEJlc3RQb3MgDQogICAgbG9jYWwgQmVzdEhpdCA9IDANCiAgICBmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbw0KICAgICAgICBsb2NhbCBFbmRQb3MgPSBWZWN0b3IobXlIZXJvLnBvcykgKyByYW5nZSAqIChWZWN0b3Iob2JqZWN0KSAtIFZlY3RvcihteUhlcm8ucG9zKSk6bm9ybWFsaXplZCgpDQogICAgICAgIGxvY2FsIGhpdCA9IENvdW50T2JqZWN0c09uTGluZVNlZ21lbnQobXlIZXJvLnBvcywgRW5kUG9zLCB3aWR0aCwgb2JqZWN0cykNCiAgICAgICAgaWYgaGl0ID4gQmVzdEhpdCB0aGVuDQogICAgICAgICAgICBCZXN0SGl0ID0gaGl0DQogICAgICAgICAgICBCZXN0UG9zID0gVmVjdG9yKG9iamVjdCkNCiAgICAgICAgICAgIGlmIEJlc3RIaXQgPT0gI29iamVjdHMgdGhlbg0KICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgZW5kDQogICAgZW5kDQoNCiAgICByZXR1cm4gQmVzdFBvcywgQmVzdEhpdA0KZW5kDQoNCmZ1bmN0aW9uIENvdW50T2JqZWN0c09uTGluZVNlZ21lbnQoU3RhcnRQb3MsIEVuZFBvcywgd2lkdGgsIG9iamVjdHMpDQogICAgbG9jYWwgbiA9IDANCiAgICBmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbw0KICAgICAgICBsb2NhbCBwb2ludFNlZ21lbnQsIHBvaW50TGluZSwgaXNPblNlZ21lbnQgPSBWZWN0b3JQb2ludFByb2plY3Rpb25PbkxpbmVTZWdtZW50KFN0YXJ0UG9zLCBFbmRQb3MsIG9iamVjdCkNCiAgICAgICAgaWYgaXNPblNlZ21lbnQgYW5kIEdldERpc3RhbmNlU3FyKHBvaW50U2VnbWVudCwgb2JqZWN0KSA8IHdpZHRoICogd2lkdGggdGhlbg0KICAgICAgICAgICAgbiA9IG4gKyAxDQogICAgICAgIGVuZA0KICAgIGVuZA0KDQogICAgcmV0dXJuIG4NCmVuZA0KZnVuY3Rpb24gQ291bnRPYmplY3RzTmVhclBvcyhwb3MsIHJhbmdlLCByYWRpdXMsIG9iamVjdHMpDQogICAgbG9jYWwgbiA9IDANCiAgICBmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbw0KICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihwb3MsIG9iamVjdCkgPD0gcmFkaXVzICogcmFkaXVzIHRoZW4NCiAgICAgICAgICAgIG4gPSBuICsgMQ0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICByZXR1cm4gbg0KZW5kDQpmdW5jdGlvbiBHZXRCZXN0Q2lyY3VsYXJGYXJtUG9zaXRpb24ocmFuZ2UsIHJhZGl1cywgb2JqZWN0cykNCiAgICBsb2NhbCBCZXN0UG9zIA0KICAgIGxvY2FsIEJlc3RIaXQgPSAwDQogICAgZm9yIGksIG9iamVjdCBpbiBpcGFpcnMob2JqZWN0cykgZG8NCiAgICAgICAgbG9jYWwgaGl0ID0gQ291bnRPYmplY3RzTmVhclBvcyhvYmplY3QucG9zIG9yIG9iamVjdCwgcmFuZ2UsIHJhZGl1cywgb2JqZWN0cykNCiAgICAgICAgaWYgaGl0ID4gQmVzdEhpdCB0aGVuDQogICAgICAgICAgICBCZXN0SGl0ID0gaGl0DQogICAgICAgICAgICBCZXN0UG9zID0gVmVjdG9yKG9iamVjdCkNCiAgICAgICAgICAgIGlmIEJlc3RIaXQgPT0gI29iamVjdHMgdGhlbg0KICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgZW5kDQogICAgZW5kDQogICAgcmV0dXJuIEJlc3RQb3MsIEJlc3RIaXQNCmVuZA0KZnVuY3Rpb24gUmVxdWlyZVNpbXBsZUxpYigpDQogICAgaWYgRmlsZUV4aXN0KExJQl9QQVRILi4iU2ltcGxlTGliLmx1YSIpIGFuZCBub3QgRmlsZUV4aXN0KFNDUklQVF9QQVRILi4iU2ltcGxlTGliLmx1YSIpIHRoZW4NCiAgICAgICAgcmVxdWlyZSAiU2ltcGxlTGliIg0KICAgICAgICBpZiBfRy5TaW1wbGVMaWJWZXJzaW9uID09IG5pbCB0aGVuIA0KICAgICAgICAgICAgcHJpbnQoIllvdXIgU2ltcGxlTGliIGZpbGUgaXMgd3JvbmcuIikNCiAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgX0cuU2ltcGxlTGliVmVyc2lvbiA8IDEuMDIgdGhlbg0KICAgICAgICAgICAgcHJpbnQoIllvdSBuZWVkIHRoZSBsYXN0ZXN0IHZlcnNpb24gb2YgU2ltcGxlTGliLiIpDQogICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgZW5kDQogICAgICAgIHJldHVybiB0cnVlDQogICAgZWxzZWlmIEZpbGVFeGlzdChMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiKSBhbmQgRmlsZUV4aXN0KFNDUklQVF9QQVRILi4iU2ltcGxlTGliLmx1YSIpIHRoZW4NCiAgICAgICAgcHJpbnQoIlNpbXBsZUxpYi5sdWEgc2hvdWxkIG5vdCBiZSBpbiBDdXN0b20gU2NyaXB0IChPbmx5IG9uIENvbW1vbiBmb2xkZXIpLCBkZWxldGUgaXQgZnJvbSB0aGVyZS4uLiIpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVsc2UNCiAgICAgICAgbG9jYWwgZnVuY3Rpb24gQmFzZTY0RW5jb2RlMihkYXRhKQ0KICAgICAgICAgICAgbG9jYWwgYj0nQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycNCiAgICAgICAgICAgIHJldHVybiAoKGRhdGE6Z3N1YignLicsIGZ1bmN0aW9uKHgpDQogICAgICAgICAgICAgICAgbG9jYWwgcixiPScnLHg6Ynl0ZSgpDQogICAgICAgICAgICAgICAgZm9yIGk9OCwxLC0xIGRvIHI9ci4uKGIlMl5pLWIlMl4oaS0xKT4wIGFuZCAnMScgb3IgJzAnKSBlbmQNCiAgICAgICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgICAgIGVuZCkuLicwMDAwJyk6Z3N1YignJWQlZCVkPyVkPyVkPyVkPycsIGZ1bmN0aW9uKHgpDQogICAgICAgICAgICAgICAgaWYgKCN4IDwgNikgdGhlbiByZXR1cm4gJycgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgYz0wDQogICAgICAgICAgICAgICAgZm9yIGk9MSw2IGRvIGM9YysoeDpzdWIoaSxpKT09JzEnIGFuZCAyXig2LWkpIG9yIDApIGVuZA0KICAgICAgICAgICAgICAgIHJldHVybiBiOnN1YihjKzEsYysxKQ0KICAgICAgICAgICAgZW5kKS4uKHsgJycsICc9PScsICc9JyB9KVsjZGF0YSUzKzFdKQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgU2F2ZVBhdGggPSBMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiDQogICAgICAgIGxvY2FsIFNjcmlwdFBhdGggPSAnL0JvTC9UQ1BVcGRhdGVyL0dldFNjcmlwdDUucGhwP3NjcmlwdD0nLi5CYXNlNjRFbmNvZGUyKCJyYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2phY2hpY2FvL0JvTC9tYXN0ZXIvU2ltcGxlTGliLmx1YSIpLi4nJnJhbmQ9Jy4ubWF0aC5yYW5kb20oOTk5OTk5OTkpDQogICAgICAgIGxvY2FsIEdvdFNjcmlwdCA9IGZhbHNlDQogICAgICAgIGxvY2FsIEx1YVNvY2tldCA9IG5pbA0KICAgICAgICBsb2NhbCBTb2NrZXQgPSBuaWwNCiAgICAgICAgbG9jYWwgU2l6ZSA9IG5pbA0KICAgICAgICBsb2NhbCBSZWN2U3RhcnRlZCA9IGZhbHNlDQogICAgICAgIGxvY2FsIFJlY2VpdmUsIFN0YXR1cywgU25pcHBlZCA9IG5pbCwgbmlsLCBuaWwNCiAgICAgICAgbG9jYWwgU3RhcnRlZCA9IGZhbHNlDQogICAgICAgIGxvY2FsIEZpbGUgPSAiIg0KICAgICAgICBsb2NhbCBOZXdGaWxlID0gIiINCiAgICAgICAgaWYgbm90IEx1YVNvY2tldCB0aGVuDQogICAgICAgICAgICBMdWFTb2NrZXQgPSByZXF1aXJlKCJzb2NrZXQiKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICBTb2NrZXQ6Y2xvc2UoKQ0KICAgICAgICAgICAgU29ja2V0ID0gbmlsDQogICAgICAgICAgICBTaXplID0gbmlsDQogICAgICAgICAgICBSZWN2U3RhcnRlZCA9IGZhbHNlDQogICAgICAgIGVuZA0KICAgICAgICBTb2NrZXQgPSBMdWFTb2NrZXQudGNwKCkNCiAgICAgICAgaWYgbm90IFNvY2tldCB0aGVuDQogICAgICAgICAgICBwcmludCgnU29ja2V0IEVycm9yJykNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgU29ja2V0OnNldHRpbWVvdXQoMCwgJ2InKQ0KICAgICAgICAgICAgU29ja2V0OnNldHRpbWVvdXQoOTk5OTk5OTksICd0JykNCiAgICAgICAgICAgIFNvY2tldDpjb25uZWN0KCdzeC1ib2wuZXUnLCA4MCkNCiAgICAgICAgICAgIFN0YXJ0ZWQgPSBmYWxzZQ0KICAgICAgICAgICAgRmlsZSA9ICIiDQogICAgICAgIGVuZA0KICAgICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKQ0KICAgICAgICAgICAgaWYgR290U2NyaXB0IHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgUmVjZWl2ZSwgU3RhdHVzLCBTbmlwcGVkID0gU29ja2V0OnJlY2VpdmUoMTAyNCkNCiAgICAgICAgICAgIGlmIFN0YXR1cyA9PSAndGltZW91dCcgYW5kIG5vdCBTdGFydGVkIHRoZW4NCiAgICAgICAgICAgICAgICBTdGFydGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgIHByaW50KCJEb3dubG9hZGluZyBhIGxpYnJhcnkgY2FsbGVkIFNpbXBsZUxpYi4gUGxlYXNlIHdhaXQuLi4iKQ0KICAgICAgICAgICAgICAgIFNvY2tldDpzZW5kKCJHRVQgIi4uU2NyaXB0UGF0aC4uIiBIVFRQLzEuMVxyXG5Ib3N0OiBzeC1ib2wuZXVcclxuXHJcbiIpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGlmIChSZWNlaXZlIG9yICgjU25pcHBlZCA+IDApKSBhbmQgbm90IFJlY3ZTdGFydGVkIHRoZW4NCiAgICAgICAgICAgICAgICBSZWN2U3RhcnRlZCA9IHRydWUNCiAgICAgICAgICAgIGVuZA0KDQogICAgICAgICAgICBGaWxlID0gRmlsZSAuLiAoUmVjZWl2ZSBvciBTbmlwcGVkKQ0KICAgICAgICAgICAgaWYgRmlsZTpmaW5kKCc8L3NpJy4uJ3plPicpIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBub3QgU2l6ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIFNpemUgPSB0b251bWJlcihGaWxlOnN1YihGaWxlOmZpbmQoJzxzaScuLid6ZT4nKSArIDYsIEZpbGU6ZmluZCgnPC9zaScuLid6ZT4nKSAtIDEpKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGlmIEZpbGU6ZmluZCgnPHNjcicuLidpcHQ+JykgdGhlbg0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBfLCBTY3JpcHRGaW5kID0gRmlsZTpmaW5kKCc8c2NyJy4uJ2lwdD4nKQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBTY3JpcHRFbmQgPSBGaWxlOmZpbmQoJzwvc2NyJy4uJ2lwdD4nKQ0KICAgICAgICAgICAgICAgICAgICBpZiBTY3JpcHRFbmQgdGhlbiBTY3JpcHRFbmQgPSBTY3JpcHRFbmQgLSAxIGVuZA0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBEb3dubG9hZGVkU2l6ZSA9IEZpbGU6c3ViKFNjcmlwdEZpbmQgKyAxLFNjcmlwdEVuZCBvciAtMSk6bGVuKCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgaWYgRmlsZTpmaW5kKCc8L3NjcicuLidpcHQ+JykgdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIGEsYiA9IEZpbGU6ZmluZCgnXHJcblxyXG4nKQ0KICAgICAgICAgICAgICAgIEZpbGUgPSBGaWxlOnN1YihhLC0xKQ0KICAgICAgICAgICAgICAgIE5ld0ZpbGUgPSAnJw0KICAgICAgICAgICAgICAgIGZvciBsaW5lLGNvbnRlbnQgaW4gaXBhaXJzKEZpbGU6c3BsaXQoJ1xuJykpIGRvDQogICAgICAgICAgICAgICAgICAgIGlmIGNvbnRlbnQ6bGVuKCkgPiA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIE5ld0ZpbGUgPSBOZXdGaWxlIC4uIGNvbnRlbnQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgbG9jYWwgSGVhZGVyRW5kLCBDb250ZW50U3RhcnQgPSBOZXdGaWxlOmZpbmQoJzxzYycuLidyaXB0PicpDQogICAgICAgICAgICAgICAgbG9jYWwgQ29udGVudEVuZCwgXyA9IE5ld0ZpbGU6ZmluZCgnPC9zY3InLi4naXB0PicpDQogICAgICAgICAgICAgICAgaWYgbm90IENvbnRlbnRTdGFydCBvciBub3QgQ29udGVudEVuZCB0aGVuDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBuZXdmID0gTmV3RmlsZTpzdWIoQ29udGVudFN0YXJ0ICsgMSxDb250ZW50RW5kIC0gMSkNCiAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3ZiA9IG5ld2Y6Z3N1YignXHInLCcnKQ0KICAgICAgICAgICAgICAgICAgICBpZiBuZXdmOmxlbigpIH49IFNpemUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBsb2NhbCBuZXdmID0gQmFzZTY0RGVjb2RlKG5ld2YpDQogICAgICAgICAgICAgICAgICAgIGlmIHR5cGUobG9hZChuZXdmKSkgfj0gJ2Z1bmN0aW9uJyB0aGVuDQogICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIGYgPSBpby5vcGVuKFNhdmVQYXRoLCAidytiIikNCiAgICAgICAgICAgICAgICAgICAgICAgIGY6d3JpdGUobmV3ZikNCiAgICAgICAgICAgICAgICAgICAgICAgIGY6Y2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIlJlcXVpcmVkIGxpYnJhcnkgZG93bmxvYWRlZC4gUGxlYXNlIHJlbG9hZCB3aXRoIDJ4IEY5LiIpDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIEdvdFNjcmlwdCA9IHRydWUNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KZW5kDQoNCi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1vcmIgd2FsayBzZXR0aW5ncyBzdGFydC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQpmdW5jdGlvbiBWaWt0b3I6ZmluZG9yYndhbGtlcigpDQogaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgU0FDPXRydWUgYW5kDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICBlbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgYW5kIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAgICBTeE9yYj10cnVlIGFuZCANCiAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDQpDQogICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJTeE9yYldhbGsiLCJvcmJXYWxrIikgZW5kLDUpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOmZpbmRvcmJ3YWxrZXIoKQ0KIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgIFNBQz10cnVlIGFuZA0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgU3hPcmI9dHJ1ZSBhbmQgDQogIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgZWxzZWlmIFNBQ349dHJ1ZSBhbmQgU3hPcmJ+PSB0cnVlIHRoZW4NCiAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIHAoIlN4T3JiIG9yIFNBQzpSIGlzIHJlcXVpcmVkLiIpDQogICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6ZmluZG9yYndhbGtlcigpDQogaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgU0FDPXRydWUgYW5kDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICBlbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgYW5kIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAgICBTeE9yYj10cnVlIGFuZCANCiAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDQpDQogICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJTeE9yYldhbGsiLCJvcmJXYWxrIikgZW5kLDUpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICBlbmQNCmVuZA0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLW9yYiB3YWxrIHNldHRpbmdzIHN0YXJ0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogZnVuY3Rpb24gRHJhd2RtZ2xpYigpDQogIGlmKEZpbGVFeGlzdChMSUJfUEFUSC4uIkRyYXdEYW1hZ2VMaWIubHVhIikpdGhlbg0KICAgIGNoZWNrPTENCiAgZWxzZQ0KICAgIGNoZWNrPTANCiAgZW5kIA0KICAgaWYgX1JlcXVpcmVkKCk6QWRkKHtOYW1lID0gIkRyYXdEYW1hZ2VMaWIiLCBVcmwgPSAicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9pbm5lcm91dC9Cb3RPZkxlZ2VuZHMvbWFzdGVyL0RyYXdEYW1hZ2VMaWIubHVhIn0pOkNoZWNrKCk6SXNEb3dubG9hZGluZygpIHRoZW4gcmV0dXJuIGVuZCANCmVuZA0KZnVuY3Rpb24gQ2lyY2xlSW50ZXJzZWN0aW9uKHYxLCB2MiwgYywgcmFkaXVzKQ0KICBhc3NlcnQoVmVjdG9yVHlwZSh2MSkgYW5kIFZlY3RvclR5cGUodjIpIGFuZCBWZWN0b3JUeXBlKGMpIGFuZCB0eXBlKHJhZGl1cykgPT0gIm51bWJlciIsICJDaXJjbGVJbnRlcnNlY3Rpb246IHdyb25nIGFyZ3VtZW50IHR5cGVzICg8VmVjdG9yPiwgPFZlY3Rvcj4sIDxWZWN0b3I+LCBpbnRlZ2VyIGV4cGVjdGVkKSIpDQogIA0KICBsb2NhbCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzID0gdjEueCwgdjEueiBvciB2MS55LCB2Mi54LCB2Mi56IG9yIHYyLnksIGMueCwgYy56IG9yIGMueQ0KICBsb2NhbCByID0gcmFkaXVzDQogIGxvY2FsIHhwLCB5cCwgeG0sIHltID0gbmlsLCBuaWwsIG5pbCwgbmlsDQogIGxvY2FsIElzT25TZWdtZW50ID0gbmlsDQogIA0KICBpZiB4MSA9PSB4MiB0aGVuDQogIA0KICAgIGxvY2FsIEIgPSBtYXRoLnNxcnQocl4yLSh4MS14MyleMikNCiAgICANCiAgICB4cCwgeXAsIHhtLCB5bSA9IHgxLCB5MytCLCB4MSwgeTMtQg0KICBlbHNlDQogIA0KICAgIGxvY2FsIG0gPSAoeTIteTEpLyh4Mi14MSkNCiAgICBsb2NhbCBuID0geTEtbSp4MQ0KICAgIGxvY2FsIEEgPSB4My1tKihuLXkzKQ0KICAgIGxvY2FsIEIgPSBtYXRoLnNxcnQoQV4yLSgxK21eMikqKHgzXjItcl4yKyhuLXkzKV4yKSkNCiAgICANCiAgICB4cCwgeG0gPSAoQStCKS8oMSttXjIpLCAoQS1CKS8oMSttXjIpDQogICAgeXAsIHltID0gbSp4cCtuLCBtKnhtK24NCiAgZW5kDQogIA0KICBpZiB4MSA8PSB4MiB0aGVuDQogICAgSXNPblNlZ21lbnQgPSB4MSA8PSB4cCBhbmQgeHAgPD0geDINCiAgZWxzZQ0KICAgIElzT25TZWdtZW50ID0geDIgPD0geHAgYW5kIHhwIDw9IHgxICAgICAgICANCiAgZW5kDQogICAgaWYgSXNPblNlZ21lbnQgdGhlbg0KICAgIHJldHVybiBWZWN0b3IoeHAsIDAsIHlwKQ0KICBlbHNlDQogICAgcmV0dXJuIFZlY3Rvcih4bSwgMCwgeW0pDQogIGVuZA0KICANCmVuZA0KDQotLWlza2V5ZG93bmZpeCBzdGFydA0KbG9jYWwgb3JpZ2luYWxLRCA9IF9HLklzS2V5RG93bjsNCl9HLklzS2V5RG93biA9IGZ1bmN0aW9uKHRoZUtleSkNCiAgaWYgKHR5cGUodGhlS2V5KSB+PSAnbnVtYmVyJykgdGhlbg0KICAgIGxvY2FsIHRoZU51bWJlciA9IHRvbnVtYmVyKHRoZUtleSk7DQogICAgaWYgKHRoZU51bWJlciB+PSBuaWwpIHRoZW4NCiAgICAgIHJldHVybiBvcmlnaW5hbEtEKHRoZU51bWJlcik7DQogICAgZWxzZQ0KICAgICAgcmV0dXJuIG9yaWdpbmFsS0QoR2V0S2V5KHRoZUtleSkpOw0KICAgIGVuZDsNCiAgZWxzZQ0KICAgIHJldHVybiBvcmlnaW5hbEtEKHRoZUtleSk7DQogIGVuZDsNCmVuZDsNCi0taXNrZXlkb3duZml4IGVuZA0KLS0gQWxsIGNsYXNzaWMgbmVjZXNzZXJpZXMgZW5kDQotLXNraW5oYWNrDQpmdW5jdGlvbiBTZW5kU2tpblBhY2tldChtT2JqZWN0LCBza2luUEIsIG5ldHdvcmtJRCkNCiAgaWYgKHN0cmluZy5maW5kKEdldEdhbWVWZXJzaW9uKCksICdSZWxlYXNlcy81LjIwJykgfj0gbmlsKSB0aGVuDQogICAgbG9jYWwgbVAgPSBDTG9MUGFja2V0KDB4REMpOw0KDQogICAgbVAudlRhYmxlID0gMHhFRjVEODQ7DQoNCiAgICBtUDpFbmNvZGVGKG5ldHdvcmtJRCk7DQogICAgDQogICAgbVA6RW5jb2RlMSgweEMzKTsNCiAgICBtUDpFbmNvZGU0KDB4MDAwMDAwMDApOw0KICAgIG1QOkVuY29kZTEoMHgwOSk7DQogICAgaWYgKHNraW5QQiA9PSBuaWwpIHRoZW4NCiAgICAgIG1QOkVuY29kZTQoMHhFNUU1RTVFNSk7DQogICAgZWxzZQ0KICAgICAgbVA6RW5jb2RlMShza2luUEIpOw0KICAgICAgZm9yIEkgPSAxLCAzIGRvDQogICAgICAgIG1QOkVuY29kZTEoc2tpbkgpOw0KICAgICAgZW5kOw0KICAgIGVuZDsNCiAgICBtUDpFbmNvZGUxKDB4QjQpOw0KDQogICAgZm9yIEkgPSAxLCBzdHJpbmcubGVuKG1PYmplY3QpIGRvDQogICAgICBtUDpFbmNvZGUxKHN0cmluZy5ieXRlKHN0cmluZy5zdWIobU9iamVjdCwgSSwgSSkpKTsNCiAgICBlbmQ7DQoNCiAgICBmb3IgSSA9IDEsICgxNiAtIHN0cmluZy5sZW4obU9iamVjdCkpIGRvDQogICAgICBtUDpFbmNvZGUxKDB4MDApOw0KICAgIGVuZDsNCg0KICAgIG1QOkVuY29kZTQoMHgwMDAwMDAwRSk7DQogICAgbVA6RW5jb2RlNCgweDAwMDAwMDBGKTsNCiAgICBtUDpFbmNvZGU0KDB4MDAwMDAwMDApOw0KICAgIA0KICAgIG1QOkhpZGUoKTsNCiAgICBSZWN2UGFja2V0KG1QKTsNCiAgZWxzZWlmIChzdHJpbmcuZmluZChHZXRHYW1lVmVyc2lvbigpLCAnUmVsZWFzZXMvNS4yMScpIH49IG5pbCkgdGhlbg0KICAgICAgbG9jYWwgbVAgPSBDTG9MUGFja2V0KDB4MTJBKTsNCg0KICAgICAgbVAudlRhYmxlID0gMHhFQTI5OEM7DQoNCiAgICAgIG1QOkVuY29kZUYobmV0d29ya0lEKTsNCiAgICAgIA0KICAgICAgbVA6RW5jb2RlNCgweDAwMDAwMDAwKTsNCiAgICAgIG1QOkVuY29kZTIoMHgwMDAwKTsNCg0KICAgICAgZm9yIEkgPSAxLCBzdHJpbmcubGVuKG1PYmplY3QpIGRvDQogICAgICAgIG1QOkVuY29kZTEoc3RyaW5nLmJ5dGUoc3RyaW5nLnN1YihtT2JqZWN0LCBJLCBJKSkpOw0KICAgICAgZW5kOw0KDQogICAgICBmb3IgSSA9IDEsICgxNiAtIHN0cmluZy5sZW4obU9iamVjdCkpIGRvDQogICAgICAgIG1QOkVuY29kZTEoMHgwMCk7DQogICAgICBlbmQ7DQoNCiAgICAgIG1QOkVuY29kZTQoMHgwMDAwMDAwRSk7DQogICAgICBtUDpFbmNvZGU0KDB4MDAwMDAwMEYpOw0KICAgICAgaWYgKHNraW5QQiA9PSBuaWwpIHRoZW4NCiAgICAgICAgbVA6RW5jb2RlNCgweDRFNEU0RTRFKTsNCiAgICAgIGVsc2UNCiAgICAgICAgbVA6RW5jb2RlMShza2luUEIpOw0KICAgICAgICBmb3IgSSA9IDEsIDMgZG8NCiAgICAgICAgICBtUDpFbmNvZGUxKHNraW5IKTsNCiAgICAgICAgZW5kOw0KICAgICAgZW5kOw0KICAgICAgbVA6RW5jb2RlNCgweDAwMDAwMDAwKTsNCiAgICAgIG1QOkVuY29kZTEoMHgwMCk7DQoNCiAgICAgIG1QOkhpZGUoKTsNCiAgICAgIFJlY3ZQYWNrZXQobVApOw0KICBlbmQ7DQplbmQ7DQppZiAoc3RyaW5nLmZpbmQoR2V0R2FtZVZlcnNpb24oKSwgJ1JlbGVhc2VzLzUuMjAnKSB+PSBuaWwpIHRoZW4NCiAgc2tpbnNQQiA9IHsNCiAgICBbMV0gPSAweEU2LA0KICAgIFsyXSA9IDB4MDYsDQogICAgWzNdID0gMHgyNiwNCiAgICBbNF0gPSAweDM2LA0KICAgIFs1XSA9IDB4NDYsDQogICAgWzZdID0gMHg2NiwNCiAgICBbN10gPSAweDc2LA0KICAgIFs4XSA9IDB4ODYsDQogICAgWzldID0gMHhBNiwNCiAgICBbMTBdID0gMHhCNiwNCiAgICBbMTFdID0gMHhDNiwNCiAgICBbMTJdID0gMHhGNiwNCiAgfTsNCiAgc2tpbk9iamVjdFBvcyA9IDE3Ow0KICBza2luSGVhZGVyID0gMHhEQzsNCiAgZGlzcGVsbEhlYWRlciA9IDB4NzM7DQogIHNraW5IID0gMHhFNjsNCiAgc2tpbkhQb3MgPSAxMjsNCmVsc2VpZiAoc3RyaW5nLmZpbmQoR2V0R2FtZVZlcnNpb24oKSwgJ1JlbGVhc2VzLzUuMjEnKSB+PSBuaWwpIHRoZW4NCiAgICBza2luc1BCID0gew0KICAgICAgWzFdID0gMHg1MiwNCiAgICAgIFsyXSA9IDB4M0UsDQogICAgICBbM10gPSAweDQyLA0KICAgICAgWzRdID0gMHg1RSwNCiAgICAgIFs1XSA9IDB4NjIsDQogICAgICBbNl0gPSAweEFFLA0KICAgICAgWzddID0gMHhCMiwNCiAgICAgIFs4XSA9IDB4QkUsDQogICAgICBbOV0gPSAweEMyLA0KICAgICAgWzEwXSA9IDB4Q0UsDQogICAgICBbMTFdID0gMHhEMiwNCiAgICAgIFsxMl0gPSAweERFLA0KICAgIH07DQogICAgc2tpbk9iamVjdFBvcyA9IDEyOw0KICAgIHNraW5IZWFkZXIgPSAweDEyQTsNCiAgICBkaXNwZWxsSGVhZGVyID0gMHg3OTsNCiAgICBza2luSCA9IDB4NTI7DQogICAgc2tpbkhQb3MgPSAzNjsNCmVuZDs=="), nil, "bt", _ENV))()
-- ---------------------------Easy Copy Line---------------------------------------