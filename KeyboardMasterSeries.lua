

assert(load(Base64Decode("DQogICAgICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgS2V5TWFzdGVyTGliIERvd25sb2FkICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgaWYgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJLZXlib2FyZE1hc3RlckxpYi5sdWEiKSB0aGVuDQogICAgcmVxdWlyZSgiS2V5Ym9hcmRNYXN0ZXJMaWIiKQ0KICBlbHNlDQogIHNraW5sb2FkID0gdHJ1ZQ0KICAgIERlbGF5QWN0aW9uKERvd25sb2FkRmlsZSwgMCwgew0KICAgICAgImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Mb25zZW1hcmlhL3NjcmlwdHMvbWFzdGVyL0tleWJvYXJkTWFzdGVyTGliLmx1YSIsDQogICAgICBMSUJfUEFUSC4uIlxcS2V5Ym9hcmRNYXN0ZXJMaWIubHVhIiwNCiAgICAgIGZ1bmN0aW9uICgpDQogICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjMDBGRkZGXCI+PGI+W0tleWJvYXJkTWFzdGVyTGliXTwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPktleWJvYXJkTWFzdGVyTGliLmx1YSBpcyBuZWNlc3NlcnksIHBsZWFzZSB3YWl0IHdoaWxlIGRvd25sb2FkaW5nLjwvZm9udD4iKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKClwcmludCgiPGZvbnQgY29sb3I9XCIjMDBGRkZGXCI+PGI+W0tleWJvYXJkTWFzdGVyTGliXTwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPktleWJvYXJkTWFzdGVyTGliLmx1YSBoYXMgYmVlbiBkb3dubG9hZGVkLCBQbGVhc2UgcmVsb2FkICgyeEY5KTwvZm9udD4iKSBlbmQsIDUuNSkNCiAgICAgIGVuZA0KICAgIH0pDQogIGVuZA0KICAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFNjcmlwdCBTdGFydCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBsb2NhbCBWZXJzaW9uID0gIjMuMDIiICANCiAgbG9jYWwgTFZlcnNpb24gPSAiICIgLi4gY3VycmVudHBhdGNoLi4iIg0KICBsb2NhbCBTY3JpcHRuYW1lID0gIktleWJvYXJkIE1hc3RlciBTZXJpZXMiDQogIGxvY2FsIEF1dGhvciA9ICJFbnN1bHV5biINCiAgbG9jYWwgbGlzdCA9ICJMZWJsYW5jICwgTGlzc2FuZHJhICwgVmlrdG9yLCBBa2FsaSwgRGlhbmEiDQogIGxvY2FsIGxpbmsgPSAiR28gdG8gaHR0cDovL2ZvcnVtLmJvdG9mbGVnZW5kcy5jb20vZm9ydW0vMjAtY2hhbXBpb24tc2NyaXB0cy8gdGhlbiB5b3UgY2FuIHNlZSBteSB0b3BpYyAiLi5TY3JpcHRuYW1lLi4iIG9uIHRoZSBmaXJzdCBvciBzZWNvbmQgcGFnZS4iDQogIGxvY2FsIGRhdGUgPSAiMjYuMTIuMjAxNSINCiAgZ2xvYmFsX3RpY2tzID0gMA0KICBsb2NhbCBsYXN0VGltZVRpY2tDYWxsZWQgPSAwDQogbG9jYWwgc2tpbmxvYWQgPSBmYWxzZQ0KICAgaWYgc2tpbmxvYWQgdGhlbg0KICBsb2NhbCBza2luc1BCID0ge307DQogIGxvY2FsIHNraW5PYmplY3RQb3MgPSBuaWw7DQogIGxvY2FsIHNraW5IZWFkZXIgPSBuaWw7DQogIGxvY2FsIGRpc3BlbGxIZWFkZXIgPSBuaWw7DQogIGxvY2FsIHNraW5IID0gbmlsOw0KICBsb2NhbCBza2luSFBvcyA9IG5pbDsNCiAgZW5kDQogIGxvY2FsIGxhbmcgPSAiZW5nIg0KbG9jYWwgYXZhX2xhbmd1YWdlcyA9IHsiZW5nIiwgInRyIiwiZ3IifQ0KDQoNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IEVuZ2xpc2ggVHJhbnNsYXRpb24gZGV0YWlscyAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KbG9jYWwgbG9jX2VuZyA9IHsNCi0tR2VuZXJhbCBNZW51KENvbWJvKSAvLyA4IC8vIDENCiJDb21ibyBTZXR0aW5ncyIsICJVc2UgUSBpbiBDb21ibyIsICJVc2UgVyBpbiBDb21ibyIsICJVc2UgRSBpbiBDb21ibyIsICJVc2UgUiBpbiBDb21ibyIgLA0KIlVzZSBJZ25pdGUgaWYgdGFyZ2V0IGtpbGxhYmxlIiwiQ29tYm8gbG9naWMiLCJNYW5hIE1hbmFnZXIgJSIsDQotLUdlbmVyYWwgTWVudShIYXJhc3MpIC8vIDUgLy8gOQ0KIkhhcmFzcyBTZXR0aW5ncyIsIkhhcmFzcyBXaXRoIFEiLCJIYXJhc3MgV2l0aCBXIiwiSGFyYXNzIFdpdGggRSIsIkhhcmFzcyBXaXRoIFIiLA0KLS1HZW5lcmFsIE1lbnUoQ2xlYXIpIC8vIDE2IC8vIDE0DQoiRmFybSBTZXR0aW5ncyIsIkxhbmVDbGVhciBTZXR0aW5ncyIsIlVzZSBRIG9uIExhbmVjbGVhciIsIlVzZSBXIG9uIExhbmVjbGVhciIsIlVzZSBFIG9uIExhbmVjbGVhciIsIlVzZSBSIG9uIExhbmVjbGVhciIsDQoiSnVuZ2xlQ2xlYXIgU2V0dGluZ3MiLCJVc2UgUSBvbiBqdW5nbGVjbGVhciIsIlVzZSBXIG9uIGp1bmdsZWNsZWFyIiwiVXNlIEUgb24ganVuZ2xlY2xlYXIiLCJVc2UgUiBvbiBqdW5nbGVjbGVhciIsDQoiTGFzdGhpdCBTZXR0aW5ncyIsIlVzZSBRIG9uIExhc3RoaXQiLCJVc2UgVyBvbiBMYXN0aGl0IiwiVXNlIEUgb24gTGFzdGhpdCIsIlVzZSBSIG9uIExhc3RoaXQiLA0KLS1HZW5lcmFsIE1lbnUoRXNjYXBlKSAvLyA1IC8vIDMwDQoiRXNjYXBlIFNldHRpbmdzIiwiVXNlIFEgV2hpbGUgRXNjYXBlIiwiVXNlIFcgV2hpbGUgRXNjYXBlIiwiVXNlIEUgV2hpbGUgRXNjYXBlIiwiVXNlIFIgV2hpbGUgRXNjYXBlIiwNCi0tR2VuZXJhbCBNZW51KEtpbGxzdGVhbCkgLy8gNyAvLyAzNQ0KIktpbGxTdGVhbCBTZXR0aW5ncyIsIktpbGxzdGVhbCBPbi9PZmYiLCJTdGVhbCBXaXRoIFEiLCJTdGVhbCBXaXRoIFciLCJTdGVhbCBXaXRoIEUiLCJTdGVhbCBXaXRoIFIiLCJTdGVhbCBXaXRoIElnbml0ZSIsDQotLUdlbmVyYWwgTWVudSjEsHRlbSBTZXR0aW5ncykgLy8gNSAvLyA0Mg0KIkl0ZW0gU2V0dGluZ3MiLCJBdXRvIFpob255YSIsICJaaG9ueWEgaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCAiVXNlIEhleHRlY2ggR3VuYmxhZGUiLCAiVXNlIEJpbGdld2F0ZXIgQ3V0bGFzcyIsDQotLUdlbmVyYWwgTWVudShWxLFwIFNldHRpbmdzKSAvLyAxOSAvLyA0Nw0KIlZJUCBTZXR0aW5ncyIsIlVzZSBQYWNrZXQgQ2FzdGluZyIsIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFBhY2tldCBDYXN0aW5nIHNob3VsZCBiZSBvcGVuLiIsICJBdXRvIExldmVsIFNldHRpbmdzIiwiVXNlIEF1dG8gTGV2ZWwiLA0KIlNlbGVjdCBTa2lsbCBPcmRlciIsIlNraW4gSGFjayBTZXR0aW5ncyIsIlVzZSBTa2luIEhhY2siLCJNYWtlIHN1cmUgdGhhdCB1c2luZyBwYWNrZXQgY2FzdGluZyBpcyBPTi4iLA0KIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFlvdSBuZWVkIHRvIGJlIGEgVklQIHVzZXIgb24gQk9MIGNvbW11bml0eS4iLCJTZWxlY3QgU2tpbiIsDQoiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciLCAiU21hcnQiICwNCi0tR2VuZXJhbCBNZW51KERyYXcgU2V0dGluZ3MpIC8vIDEyIC8vIDY1DQoiRHJhdyBTZXR0aW5ncyIsIlNraWxsIERyYXdpbmcgU2V0dGluZ3MiLCJRIFNraWxsIERyYXdpbmdzIiwiVyBTa2lsbCBEcmF3aW5ncyIsIkUgU2tpbGwgRHJhd2luZ3MiLCJSIFNraWxsIERyYXdpbmdzIiwiQXV0byBBdHRhY2sgUmFuZ2UiLA0KIkRyYXcgQ29tYm8gTW9kZSIsIkRyYXcgUGVybWFib3giLCJEcmF3IFBlcm1hYm94ICggTmVlZHMgMnggRjkgKSIsIkRyYXcgY2lyY2xlIGZvciB0YXJnZXQgc2VsZWN0ZWQiLCJUYXJnZXQgY2FsY3VsYXRpb24iLA0KLS1HZW5lcmFsIE1lbnUoVGFyZ2V0IFNlbGVjdG9ycykgLy8gMiAvLyA3Nw0KIlRhcmdldHNlbGVjdG9ycyIsIkxlZnQgQ2xpY2sgRm9yIFRhcmdldCBTZWxlY3Rpb24iLA0KLS1HZW5lcmFsIE1lbnUoS2V5IFNldHRpbmdzKSAvLyAxMyAvLyA3OQ0KIktleXMgU2V0dGluZ3MiLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNvbWJvIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLT4iLCJDb21ibyBLZXkiLCI8LS0tLS0tLS0tLS0tLS0tLS0tSGFyYXNzIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLT4iLCANCiJTbWFydCBIYXJhc3MgS2V5IiwiPC0tLS0tLS0tLS0tLS0tLS0tLUNsZWFyIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkxhbmVDbGVhciBLZXkiLCJKdW5nbGVDbGVhciBLZXkiLCANCiI8LS0tLS0tLS0tLS0tLS0tLS0tT3RoZXIgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiRXNjYXBlIEtleSIsICJNYWtlIFN1cmUgVGhhdCBZb3VyIE9yYndhbGtlciBLZXlzIGFyZSBTYW1lIEFzIEhlcmUiLCJPcndXYWxrZXJLZXkgU2V0dGluZ3MiLA0KIkF1dG8gSGFyYXNzIFEiLA0KLS1HZW5lcmFsIE1lbnUoTWlzYyBTZXR0aW5ncykgLy8gNyAvLyA5Mg0KIk1pc2MgU2V0dGluZ3MiLCAiWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4gIl0gLSBBdXRvLUludGVycnVwdCIsIkludGVycnVwdCB3aXRoIFEgU2tpbGwiLCJJbnRlcnJ1cHQgd2l0aCBXIFNraWxsIiwiSW50ZXJydXB0IHdpdGggRSBTa2lsbCIsDQoiSW50ZXJydXB0IHdpdGggUiBTa2lsbCIsIiAgICAgICAgICAgICAgICAgIFtTdXBwb3J0ZWQgU2tpbGxzXSIsDQotLSBHZW5lcmFsIE1lbnUoU2tpbGwgTG9naWMpIC8vIDYgLy8gOTkNCiJTa2lsbCBMb2dpY3MiLCJRIFNraWxsIExvZ2ljIiwiVyBTa2lsbCBMb2dpYyIsIkUgU2tpbGwgTG9naWMiLCJSIFNraWxsIExvZ2ljIiwiSGVhbHRoIE1hbmFnZXIgJSIsDQotLSBHZW5lcmFsIE1lbnUoSGl0Y2hhbmNlIFNldHRpbmdzKSAvLyA1IC8vIDEwNQ0KIkhpdGNoYW5jZSIsIlEgSGl0Y2hhbmNlIiwiVyBIaXRjaGFuY2UiLCJFIEhpdGNoYW5jZSIsIlIgSGl0Y2hhbmNlIiwNCi0tIEdlbmVyYWwgTWVudShPcmJ3YWxrIFNldHRpbmdzKSAvLyA1ICAvLyAxMTANCiJPcmJXYWxrZXJLZXkgU2V0dGluZ3MiLA0KIiAgICAgICAgICAgICAgICAgU2NyaXB0IFZlcnNpb246ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIiAgICAgICAgICAgIFNjcmlwdCB3YXMgbWFkZSBieSAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsDQoiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCJDdXJyZW50IE9yYndhbGtlcjogICAgICAgICAgICAgICAgICAgICAgU2lkYXMgQXV0byBDYXJyeSIsDQoiQ3VycmVudCBPcmJ3YWxrZXI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeE9yYldhbGsiLCANCi0tIExlYmxhbmMgTWVudSAvLyAxMyAvLyAxMTYNCiJRPkU+Vz5SIiwgIlE+Uj5FPlciLCAiRT5RPlc+UiIsICJFPlc+UT5SIiAsIlJhbmRvbSBTa2lsbCBPcmRlciIsIlcgU2tpbGwgdHVybiBiYWNrIHNldHRpbmdzIiwiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBRPkU+Vz5SIG1vZGUgIiwNCiJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFE+Uj5FPlcgbW9kZSAiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIEU+UT5XPlIgbW9kZSAiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIEU+Vz5RPlIgbW9kZSAiLA0KIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gUmFuZG9tIFNraWxsIE9yZGVyIG1vZGUgIiwiU3RlYWwgV2l0aCBRVyIsIk9ubHkgdXNlIEUgU2tpbGwgKE9ubHkgU3R1bikiLCIgU2VsZWN0IENvbWJvbW9kZSBLZXkiLA0KLS0gQWthbGkgTWVudSAvLyA5DQoiMiBlbmVteSIsICIzIGVuZW15IiAsICI0IGVuZW15IiwiNSBlbmVteSIsIlVzZSBSIGlmIFEgaXMgb24gdGFyZ2V0IiwgIlJ1c2ggU2tpbGxzIiwiVXNlIFN0ZWFsdGggaWYgZW5lbXkgPiIsIlVzZSBTdGVhbHRoIGlmIGhlYWx0ICUiLCJVc2UgU3RlYWx0aCAoVykiLA0KLS0gRGlhbmEgTWVudSAvLyA0DQoiU21hcnQgQ29tYm8iLCAiVXNlIFIgaWYgdGFyZ2V0IG1hcmtlZCIgLCAiU3BhbSBldmVyeXRoaW5nIGZhc3QiLCJVc2UgRSBvbmx5IGlmIGVuZW15IGRpc3RhbmNlID4gMjgwIiwNCi0tIExpc3NhbmRyYWEgTWVudSAvLyAxNw0KIkUgTG9naWMgZm9yIGNvbWJvIG1vZGUiLCJFIExvZ2ljIGZvciBoYXJhc3MgbW9kZSIsIkVuZ2FnZSB3aXRoIHNlY29uZCBFIiwgIkRvIG5vdCB1c2UgU2Vjb25kIEUgKCBSZWNvbWVuZGVkKSIgLA0KIkRvIG5vdCB1c2UgU2Vjb25kIEUgKCBSZWNvbWVuZGVkKSIsICJFbmdhZ2Ugd2l0aCBzZWNvbmQgRSIgLCJTbWFydCIsICJzYXZlIGZvciB5b3Vyc2VsZiIsICJVc2UgZm9yIGVuZW15IiAsIkF1dG8gUiBmb3IgeW91cnNlbGYiLA0KIkF1dG9SIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwgIkVuZ2FnZSB3aXRoIHNlY29uZCBFIG9wdGlvbiBpcyBzdGlsbCBvbiBCZXRhLi4iLCAiUiBMb2dpYyBmb3IgY29tYm8gbW9kZSIsICJGb3IgdXNpbmcgU21hcnQgUiBsb2dpYywgQXV0b1Igc2hvdWxkIGJlIG9wZW4uLiIsDQoiVXNlIFcgZm9yIEFudGkgR2FwQ2xvc2UiLCJUaGlzIEZ1bmN0aW9uIGlzIG9uIGJldGEuLiIsDQotLSBWaWt0b3IgTWVudSAvLyA1DQoiVWx0aSBMb2dpYyIsIlVzZSBVbHRpIElmIFRhcmdldCBJcyBLaWxsYWJsZSIsIlVzZSBVbHRpIERpcmVjdGx5IiAsIkUgSGl0Q2hhbmNlIChEZWZhdWx0IHZhbHVlID0gMS42KSIsIkUgSGl0Q2hhbmNlIChEZWZhdWx0IHZhbHVlID0gMikiLCJTbWFydCBBdXRvIEhhcmFzcyIsDQotLSBsYW5ndWFnZSBtZW51Ly8gNQ0KIkxhbmd1YWdlKE5lZWRzIDJ4RjkpIiwiRW5nbGlzaCIsICJUdXJraXNoIiwiR2VybWFuIiwiS29yZWFuIiwNCi0tIEV4dHJhc3MvLyANCiJTdGFydCBFbmdhZ2UgV2l0aCBZb3VyIFVsdGkgIiwNCi0tIHJld29yay8vIDE3MQ0KIkF1dG8gVyBiYWNrIGlmIGhlYWx0aCA+IiwiQWx3YXlzIiwiRGVwZW5kcyBvbiBsb2NhbCBTZXR0aW5ncyIsIk5ldmVyIiwiRW5lbXkgTnVtYmVyIiwiQXV0byBXIGJhY2sgaWYgZW5lbXkgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtMb2NhbCBTZXR0aW5nc10iLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFc+Uj5RPkUgbW9kZSAiLA0KIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gVz5RPlI+RSBtb2RlICIsIk1pbmltdW0gbWluaW9uIHRvIFEgPiIsIk1pbmltdW0gbWluaW9uIHRvIFcgPiIsIk1pbmltdW0gbWluaW9uIHRvIEUgPiIsIk1pbmltdW0gbWluaW9uIHRvIFIgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtNYW5hIE1hbmFnZXJdIiwNCiJRIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlcgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiRSBTa2lsbCBNYW5hIE1hbmFnZXIgICUiLCJSIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlVzZSBBdXRvIExhc3RoaXQiLCJPbmx5IGlmIGNhbm5vdCBBQSIsIkxhc3RoaXQgTG9naWMiLCJBdXRvIFBvdGlvbiIsIlVzZSBBdXRvIFBvdGlvbiIsDQoiQXV0byBQb3Rpb24gaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCJBbnRpLUFGSyBTZXR0aW5ncyIsIlVzZSBBbnRpIEFmayIsIkUgLVRhcmdldCBkcmF3IiwiQ29sb3IgU2V0dGluZ3MiLCJRIENvbG9yIiwiVyBDb2xvciIsIkUgQ29sb3IiLCJSIENvbG9yIiwiRSAtVGFyZ2V0IENvbG9yIiwiQXV0byBBdHRhY2sgQ29sb3IiLA0KIlNlbGVjdGVkIFRhcmdldCBDb2xvciIsIkRyYXcgV2lkdGggU2V0dGluZ3MiLCJFIC1UYXJnZXQgV2lkdGgiLCJTZWxlY3RlZCBUYXJnZXQgV2lkdGgiLCJBdXRvIEF0dGFjayBXaWR0aCIsIlEgU2tpbGwgV2lkdGgiLCJXIFNraWxsIFdpZHRoIiwiRSBTa2lsbCBXaWR0aCIsIlIgU2tpbGwgV2lkdGgiLCJEcmF3IERhbWFnZSBJbmRpY2F0b3IiLA0KIkxhc3RoaXQgS2V5IiwiQ2xpY2sgRm9yIEluc3RydWN0aW9ucyIsIlVzZSBpZiBuZWVkZWQiLCJDbGVhciBLZXkgU2V0dGluZ3MiLCJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIEFudGkgR2FwLUNsb3NlIiwiR2FwLUNsb3NlIFdpdGggVyBTa2lsbCIsIkh1bWFuaXplciBmb3IgQW50aSBHYXAgQ2xvc2UiLA0KIkF1dG8gVyBTZXR0aW5ncyIsIlVzZSBBdXRvIFcgIiwiQXV0byBXIGlmIGVuZW15ID4iLCJSIC1UYXJnZXQgZHJhdyIsIlIgLVRhcmdldCBDb2xvciIsIlIgLVRhcmdldCBXaWR0aCINCn0NCg0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gVHVya2lzaCBUcmFuc2xhdGlvbiBkZXRhaWxzICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQpsb2NhbCBsb2NfdHIgPSB7DQotLUdlbmVyYWwgTWVudShDb21ibykgLy8gOA0KIktvbWJvIEF5YXJsYXJpIiwgIktvbWJvZGEgUSBrdWxsYW4iLCAiS29tYm9kYSBXIGt1bGxhbiIsICJLb21ib2RhIEUga3VsbGFuIiwgIktvbWJvZGEgUiBrdWxsYW4iICwNCiJIZWRlZiBvbHVjZWtzZSB0dXR1c3R1ciBrdWxsYW4iLCJLb21ib251IHNlYyAiLCJNYW5hIE1lbmFqZXJpICUiLA0KLS1HZW5lcmFsIE1lbnUoSGFyYXNzKSAvLyA1DQoiRHVydG1lIEF5YXJsYXJpIiwiUmFraWJpIFEgaWxlIGR1cnQiLCJSYWtpYmkgVyBpbGUgZHVydCIsIlJha2liaSBFIGlsZSBkdXJ0IiwiUmFraWJpIFIgaWxlIGR1cnQiLA0KLS1HZW5lcmFsIE1lbnUoQ2xlYXIpIC8vIDE2DQoiRmFybSBBeWFybGFyaSIsIktvcmlkb3IgVGVtaXpsZW1lIEF5YXJsYXJpIiwiUSBza2lsaW5pIEt1bGxhbiIsIlcgc2tpbGluaSBLdWxsYW4iLCJFIHNraWxpbmkgS3VsbGFuIiwiUiBza2lsaW5pIEt1bGxhbiIsDQoiT3JtYW4gVGVtaXpsZW1lIEF5YXJsYXJpIiwiUSBza2lsaW5pIEt1bGxhbiIsIlcgc2tpbGluaSBLdWxsYW4iLCJFIHNraWxpbmkgS3VsbGFuIiwiUiBza2lsaW5pIEt1bGxhbiIsDQoiU29uIFZ1cnVzIEF5YXJsYXJpIiwiUSBza2lsaW5pIEt1bGxhbiIsIlcgc2tpbGluaSBLdWxsYW4iLCJFIHNraWxpbmkgS3VsbGFuIiwiUiBza2lsaW5pIEt1bGxhbiIsDQotLUdlbmVyYWwgTWVudShFc2NhcGUpIC8vIDUNCiJLYWNpcyBBeWFybGFyaSIsIkthY2Fya2VuIFEga3VsbGFuIiwiS2FjYXJrZW4gVyBrdWxsYW4iLCJLYWNhcmtlbiBFIGt1bGxhbiIsIkthY2Fya2VuIFIga3VsbGFuIiwNCi0tR2VuZXJhbCBNZW51KEtpbGxzdGVhbCkgLy8gNw0KIktpbGwgQ2FsbWEgQXlhcmxhcmkiLCJLaWxsIENhbG1hIEthcGFsaSAvIEFjaWsiLCJRIHNraWxpbmkgS3VsbGFuIiwiVyBza2lsaW5pIEt1bGxhbiIsIkUgc2tpbGluaSBLdWxsYW4iLCJSIHNraWxpbmkgS3VsbGFuIiwiVHV0dXN0dXIgS3VsbGFuIiwNCi0tR2VuZXJhbCBNZW51KMSwdGVtIFNldHRpbmdzKSAvLyA1DQoiSXRlbSBBeWFybGFyaSIsIk90b21hdGlrIFpob255YSIsICJaaG9ueWEgRWdlciBjYW4gLT4gJSIsICJIZXh0ZWNoIEd1bmJsYWRlIGt1bGxhbiIsICJCaWxnZXdhdGVyIEN1dGxhc3Mga3VsbGFuIiwNCi0tR2VuZXJhbCBNZW51KFbEsXAgU2V0dGluZ3MpIC8vIDE5DQoiVklQIEF5YXJsYXJpIiwiUGFja2V0IENhc3RpbmcgS3VsbGFuIiwiVmlwIGF5YXJsYXJpbmkga3VsbGFubWFrIGljaW4gcGFja2V0IGNhc3RpbmcgYWNpayBvbG1hbGlkaXIuIiwgIk90b21hdGlrIFNldml5ZSBBeWFybGFyaSIsIk90b21hdGlrIFNldml5ZSIsDQoiWWV0ZW5layBEdXplbmluaW4gU2VjaW4iLCJLb3N0dW0gSGFjayBBeWFybGFyaSIsIktvc3R1bSBIYWNrIEt1bGxhbiIsIlBhY2tldCBDYXN0aW5nIGFjaWsgb2xkdWd1bmRhbiBlbWluIG9sdW51eiIsDQoiVmlwIGF5YXJsYXJpbmkga3VsbGFubWFrIGljaW4gQk9MIFZpcCB1eWVzaSBvbG1hbml6IGdlcmVrbWVrdGVkaXIuIiwiS29zdHVtIHNlYyIsDQoiUT5XPkUgIiwgIlE+RT5XIiwiVz5RPkUiLCJXPkU+USIsIkU+Vz5RIiwgIkU+UT5XIiwgIkFraWxsaSIgLA0KLS1HZW5lcmFsIE1lbnUoRHJhdyBTZXR0aW5ncykgLy8gMTENCiJDaXppbSBBeWFybGFyaSIsIllldGVuZWsgQ2l6aW0gQXlhcmxhcmkiLCJRIFlldGVuZWsgbWVuemlsaW5pIGNpeiIsIlcgWWV0ZW5layBtZW56aWxpbmkgY2l6IiwiRSBZZXRlbmVrIG1lbnppbGluaSBjaXoiLCJSIFlldGVuZWsgbWVuemlsaW5pIGNpeiIsIk90b21hdGlrIFNhbGRpcmkgTWVuemlsaSIsDQoiS29tYm8gTW9kdW51IENpeiIsIlBlcm1hYm94IENpeiIsIlBlcm1hYm94IENpeiAoIDJ4IEY5IEdlcmVraXIgKSIsIlNlY2lsaSBoZWRlZmkgZGFpcmUgaWNpbmUgYWwiLCJIZWRlZiBoYXNhciBoZXNhcGxhIiwNCi0tR2VuZXJhbCBNZW51KFRhcmdldCBTZWxlY3RvcnMpIC8vIDINCiJIZWRlZiBTZWNpY2kiLCJTb2wgdGlrIGlsZSBoZWRlZiBzZWMiLA0KLS1HZW5lcmFsIE1lbnUoS2V5IFNldHRpbmdzKSAvLyAxMw0KIlR1cyBBeWFybGFyaSIsICI8LS0tLS0tLS0tLS0tLS0tLS0tS29tYm8gVHVzIEF5YXJsYXJpLS0tLS0tLS0tLS0tLS0tLS0tPiIsIktvbWJvIFR1c3UiLCI8LS0tLS0tLS0tLS0tLS0tLS0tRHVydG1lIFR1cyBBeWFyaS0tLS0tLS0tLS0tLS0tLS0tLT4iLCANCiJEdXJ0bWUgVHVzdSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1UZW1pemxlbWUgVHVzIEF5YXJsYXJpLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiS29yaWRvciBUZW1pemxlbWUgVHVzdSIsIk9ybWFuIFRlbWl6bGVtZSBUdXN1IiwgDQoiPC0tLS0tLS0tLS0tLS0tLS0tLURpZ2VyIFR1cyBBeWFybGFyaS0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkthY2lzIFR1c3UiLCAiT3Jid2Fsa2VyIFR1c2xhcmluaXogQnVyYXlsYSBBeW5pIE9sbWFsaWRpci4iLCJPcndXYWxrZXJLZXkgQXlhcmxhcmkiLA0KIk90b21hdGlrIFEgRHVydG1lIiwNCi0tR2VuZXJhbCBNZW51KE1pc2MgU2V0dGluZ3MpIC8vIDcNCiJFa3N0cmEgQXlhcmxhciIsICJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIE90b21hdGlrIER1cmR1cm1hIiwiUSBZZXRlbmVnaSBpbGUgZHVyZHVyIiwiVyBZZXRlbmVnaSBpbGUgZHVyZHVyIiwiRSBZZXRlbmVnaSBpbGUgZHVyZHVyIiwNCiJSIFlldGVuZWdpIGlsZSBkdXJkdXIiLCIgICAgICAgICAgICAgICAgICBbRGVzdGVrbGVuZW4gWWV0ZW5la2xlcl0iLA0KLS0gR2VuZXJhbCBNZW51KFNraWxsIExvZ2ljKSAvLyA2DQoiWWV0ZW5layBBeWFybGFyaSIsIlEgWWV0ZW5lZ2kgQXlhcmxhcmkiLCJXIFlldGVuZWdpIEF5YXJsYXJpIiwiRSBZZXRlbmVnaSBBeWFybGFyaSIsIlIgWWV0ZW5lZ2kgQXlhcmxhcmkiLCJIZWFsdGggTWVuYWplcmkgJSIsDQotLSBHZW5lcmFsIE1lbnUoSGl0Y2hhbmNlIFNldHRpbmdzKSAvLyA1DQoiVHV0dHVybWEgT3JhbmkiLCJRIFR1dHR1cm1hIE9yYW5pIiwiVyBUdXR0dXJtYSBPcmFuaSIsIkUgVHV0dHVybWEgT3JhbmkiLCJSIFR1dHR1cm1hIE9yYW5pIiwNCi0tIEdlbmVyYWwgTWVudShPcmJ3YWxrIFNldHRpbmdzKSAvLyA1DQoiT3JiV2Fsa2VyIFR1cyBBeWFybGFyaSIsDQoiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2l5b251OiAgIi4uVmVyc2lvbi4uICIgICAgICAgICAiLCIgICAgICAgICAgICBTY3JpcHQgIi4uQXV0aG9yLi4gIiB0YXJhZmluZGFuIHlhcGlsbWlzdGlyLiAgICAgICAgIiwNCiIgICAgICAgTGVhdWdlIE9mIExlZ2VuZHMgVmVyc2l5b251OiAgIi4uTFZlcnNpb24uLiAiICAgICAgICAgIiwiS3VsbGFuaWxhbiBPcmJ3YWxrZXI6ICAgICAgICAgICAgICAgICAgICAgIFNpZGFzIEF1dG8gQ2FycnkiLA0KIkt1bGxhbmlsYW4gT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3hPcmJXYWxrIiwgDQotLSBMZWJsYW5jIE1lbnUgLy8gMTMNCiJRPkU+Vz5SIiwgIlE+Uj5FPlciLCAiRT5RPlc+UiIsICJFPlc+UT5SIiAsIlJhc3RnZWxlIFlldGVuZWsgRHV6ZW5pIiwiVyB5ZXRlbmVnaSBnZXJpIGRvbm1lIGF5YXJsYXJpIiwiIFE+RT5XPlIgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiAiLA0KIlE+Uj5FPlcgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiAiLCJFPlE+Vz5SIG1vZHVuZGEgVyB5ZXJpbmUgZ2VyaSBkb24iLCJFPlc+UT5SIG1vZHVuZGEgVyB5ZXJpbmUgZ2VyaSBkb24gIiwNCiJSYXN0Z2VsZSBZZXRlbmVrIG1vZHVuZGEgVyB5ZXJpbmUgZ2VyaSBkw7ZuICIsIlFXIGlsZSBjYWwiLCJTYWRlY2UgRSBLdWxsYW4gKFNhZGVjZSBTZXJzZW1sZXQpIiwiIEtvbWJvIE1vZHUgVHVzdSIsDQotLSBBa2FsaSBNZW51IC8vIDkNCiIyIGR1c21hbiIsICIzIGR1c21hbiIgLCAiNCBkdXNtYW4iLCI1IGR1c21hbiIsIlEgSGVkZWZ0ZXlzZSBSIEt1bGxhbiIsICJZZXRlbmVrbGVyaSBEaXJlayBLdWxsYW4iLCJHw7ZydW5tZXpsaWsoVykga3VsbGFuIGhlZGVmID4iLCJHw7ZydW5tZXpsaWsoVykga3VsbGFuIENhbiAlIiwNCiJHw7ZydW5tZXpsaWsoVykga3VsbGFuIiwNCi0tIERpYW5hIE1lbnUgLy8gNA0KIkFraWxsaSBLb21ibyIsICJIZWRlZiBpc2FyZXRsaSBpc2UgUiBrdWxsYW4iICwgIkJ1dHVuIHlldGVuZWtsZXJpIGhpemxpY2Ega3VsbGFuIiwiRSB5ZXRlbmVnaW5pIG1lc2FmZSA+IDI4MCBrdWxsYW4iLA0KLS0gTGlzc2FuZHJhYSBNZW51IC8vIDE3DQoiS29tYm8gbW9kdSBpY2luIEUgYXlhcmxhcmkiLCJEdXJ0bWUgbW9kdSBpY2luIEUgYXlhcmxhcmkiLCIyLiBFIGlsZSBiYXNsYSIsICIyLiBFJ3lpIGt1bGxhbm1hICggw7ZuZXJpbGVuKSIgLA0KIjIuIEUneWkga3VsbGFubWEgKG9uZXJpbGVuKSIsICIyLiBFIGlsZSBiYXNsYSIgLCJBa2lsbGkiLCAiS2VuZGluaSBrb3J1IiwgIkR1c21hbiBpY2luIGt1bGxhbiIgLCJLZW5kaW5lIG90b21hdGlrIFIiLA0KIk90b21hdGlrIFIgY2FuIGFsdGluZGF5c2EgLT4gJSIsICIyLiBFIGlsZSBiYXNsYSBheWFyaSB0ZXN0IGFzYW1hc2luZGFkaXIuLiIsICJLb21ibyBtb2R1IGljaW4gUiBheWFybGFyaSIsICJBa2lsbGkgUiBheWFybGFyaSBpw6dpbiBrZW5kaW5lIG90b21hdGlrIFIgYWNpayBvbG1hbGlkaXIuIiwNCiJXIGt1bGxhbmFyYWsgZHVzbWFuaSB1emFrIHR1dCIsIkJ1IG96ZWxsaWsgaGFsYSB0ZXN0IGFzYW1hc2luZGFkaXIuLiIsDQotLSBWaWt0b3IgTWVudSAvLyA1DQoiVWx0aSBBeWFybGFyaSIsIkhlZGVmIG9sdWNlayBpc2UgVWx0aSBLdWxsYW4iLCJVbHRpeWkgRGlyZWsgS3VsbGFuIiAsIkUgVHV0dHVybWEgT3JhbmkgKE5vcm1hbGkgPSAxLjYpIiwiRSBUdXR0dXJtYSBPcmFuaSAoTm9ybWFsaSA9IDIpIiwiT3RvbWF0aWsgZHVydG1lIiwNCi0tIGxhbmd1YWdlIG1lbnUvLyA1DQoiRGlsIFNlY2ltaSgyeEY5IEdlcmVrbWVrdGVkaXIuKSIsIkluZ2lsaXpjZSIsICJUdXJrY2UiLCJBbG1hbmNhIiwiS29yZWNlIiwNCi0tIEV4dHJhc3MvLyANCiJLb21ib3l1IHVsdGkgaWxlIGJhc2xhdCAiLA0KLS0gcmV3b3JrLy8gMTcxDQoiT3RvbWF0aWsgdyBlZ2VyIGNhbiA+IiwiSGVyIHphbWFuIiwiTG9jYWwgQXlhcmxhcmEgQmFnbGkiLCJBc2xhIiwiRHVzbWFuIFNheWlzaSIsIk90b21hdGlrIFcgRWdlciBEdXNtYW4gPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtMb2NhbCBBeWFybGFyXSIsIlc+Uj5RPkUgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiIsDQoiVz5RPlI+RSBtb2R1bmRhIFcgeWVyaW5lIGdlcmkgZG9uICIsIlEgaWNpbiBtaW5pbXVtIG1pbmlvbiAgPiIsIlcgaWNpbiBtaW5pbXVtIG1pbmlvbiAgPiIsIkUgaWNpbiBtaW5pbXVtIG1pbmlvbiAgPiIsIlIgaWNpbiBtaW5pbXVtIG1pbmlvbiA+IiwiICAgICAgICAgICAgICAgICAgICAgICAgW01hbmEgTWVuYWplcmldIiwNCiJRIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJXIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJFIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJSIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJPdG9tYXRpayBTb24gVnVydXMiLCJFZ2VyIG90b21hdGlrIFNhbGRpcmkgWWFwYW1peW9yc2EiLCJTb24gVnVydXMgQXlhcmxhcmkiLCJPdG9tYXRpayBQb3QiLCJPdG9tYXRpayBQb3QgS3VsbGFuIiwNCiJBdXRvIFBvdGlvbiBpZiBIZWFsdGggdW5kZXIgLT4gJSIsIkFudGktQUZLIEF5YXJsYXJpIiwiQW50aSBBZmsgS3VsbGFuIiwiRSAtSGVkZWYgQ2l6aW1pIiwiUmVuayBBeWFybGFyaSIsIlEgUmVuZ2kiLCJXIFJlbmdpIiwiRSBSZW5naSIsIlIgUmVuZ2kiLCJFIC1IZWRlZiBSZW5naSIsIk90b21hdGlrIFNhbGRpcmkgUmVuZ2kiLA0KIlNlY2lsaSBLYXJha3RlciBSZW5naSIsIkthbGlubGlrIEF5YXJsYXJpIiwiRSAtSGVkZWYgS2FsaW5saWsiLCJTZWNpbGkgS2FyYWt0ZXIgS2FsaW5saWsiLCJPdG9tYXRpayBTYWxkaXJpIEthbGlubGlrIiwiUSBZZXRlbmVnaSBrYWxpbmxpayIsIlcgWWV0ZW5lZ2kga2FsaW5saWsiLCJFIFlldGVuZWdpIGthbGlubGlrIiwNCiJSIFlldGVuZWdpIGthbGlubGlrIiwiSGFzYXIgY2l6aW1pIGdvc3RlciIsDQoiU29uIHZ1cnVzIHR1c3UiLCJUYWxpbWF0bGFyIGljaW4gdGlrbGF5aW5peiIsIkdlcmVrbGkgaXNlIGt1bGxhbiIsIkZhcm0gVHVzIEF5YXJsYXJpIiwiWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4gIl0gLSBBbnRpIEdhcC1DbG9zZSIsIlcgWWV0ZW5lZ2kgaWxlIEFudGkgR2FwLUNsb3NlIiwiQW50aSBHYXAtQ2xvc2UgaWNpbiBpbnNhbmxhc3Rpcm1hIiwNCiJPdG9tYXRpayBXIEF5YXJsYXJpIiwiT3RvbWF0aWsgVyBLdWxsYW4gIiwiT3RvbWF0aWsgVyBFZ2VyIER1c21hbiA+IiwiUiAtSGVkZWYgQ2l6aW0iLCJSIC1IZWRlZiBSZW5naSIsIlIgLUhlZGVmIEthbGlubGlrIg0KfQ0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gR2VybWFuIFRyYW5zbGF0aW9uIGRldGFpbHMgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCmxvY2FsIGxvY19nciA9IHsNCi0tR2VuZXJhbCBNZW51KENvbWJvKSAvLyA4IC8vIDENCiJDb21ibyBFaW5zdGVsbHVuZ2VuIiwgIkJlbnV0emUgUSBpbSBDb21ibyBNb2R1cyIsICJCZW51dHplIFcgaW0gQ29tYm8gTW9kdXMiLCAiQmVudXR6ZSBFIGltIENvbWJvIE1vZHVzIiwgIkJlbnV0emUgUiBpbSBDb21ibyBNb2R1cyIgLA0KIkJlbnV0emUgSWduaXRlIHdlbm4gZGFzIFppZWwgZGFkdXJjaCBzdGlyYnQiLCJDb21ibyBMb2dpayIsIk1hbmEgTWFuYWdlciAlIiwNCi0tR2VuZXJhbCBNZW51KEhhcmFzcykgLy8gNSAvLyA5DQoiSGFyYXNzIEVpbnN0ZWxsdW5nZW4iLCJIYXJhc3MgbWl0IFEiLCJIYXJhc3MgbWl0IFciLCJIYXJhc3MgbWl0IEUiLCJIYXJhc3MgbWl0IFIiLA0KLS1HZW5lcmFsIE1lbnUoQ2xlYXIpIC8vIDE2IC8vIDE0DQoiRmFybSBFaW5zdGVsbHVuZ2VuIiwiTGFuZUNsZWFyIEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIFEgaW0gTGFuZWNsZWFyIE1vZHVzIiwiQmVudXR6ZSBXIGltIExhbmVjbGVhciBNb2R1cyIsIkJlbnV0emUgRSBpbSBMYW5lY2xlYXIgTW9kdXMiLCJCZW51dHplIGltIExhbmVjbGVhciBNb2R1cyIsDQoiSnVuZ2xlQ2xlYXIgRWluc3RlbGx1bmdlbiIsIkJlbnV0emUgUSBpbSBqdW5nbGVjbGVhciBNb2R1cyIsIkJlbnV0emUgVyBpbSBqdW5nbGVjbGVhciBNb2R1cyIsIkJlbnV0emUgRSBpbSBqdW5nbGVjbGVhciBNb2R1cyIsIkJlbnV0emUgUiBpbSBqdW5nbGVjbGVhciBNb2R1cyIsDQoiTGFzdGhpdCBFaW5zdGVsbHVuZ2VuIiwiQmVudXR6ZSBRIGltIExhc3RoaXQgTW9kdXMiLCJCZW51dHplIFcgaW0gTGFzdGhpdCBNb2R1cyIsIkJlbnV0emUgRSBpbSBMYXN0aGl0IE1vZHVzIiwiQmVudXR6ZSBSIGltIExhc3RoaXQgTW9kdXMiLA0KLS1HZW5lcmFsIE1lbnUoRXNjYXBlKSAvLyA1IC8vIDMwDQoiRXNjYXBlIEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIFEgYmVpbSBGbGllaGVuIiwiQmVudXR6ZSBXIGJlaW0gRmxpZWhlbiIsIkJlbnV0emUgRSBiZWltIEZsaWVoZW4iLCJCZW51dHplIFIgYmVpbSBGbGllaGVuIiwNCi0tR2VuZXJhbCBNZW51KEtpbGxzdGVhbCkgLy8gNyAvLyAzNQ0KIktpbGxTdGVhbCBFaW5zdGVsbHVuZ2VuIiwiS2lsbHN0ZWFsIEVpbi9BdXMiLCJTdGllaGwgbWl0IFEiLCJTdGllaGwgbWl0IFciLCJTdGllaGwgbWl0IEUiLCJTdGllaGwgbWl0IFIiLCJTdGllaGwgbWl0IElnbml0ZSIsDQotLUdlbmVyYWwgTWVudShpdGVtKSAvLyA1IC8vIDQyDQoiSXRlbSBFaW5zdGVsbHVuZ2VuIiwiQXV0byBaaG9ueWEiLCAiQmVudXR6dGUgWmhvbnlhIHdlbm4gTGViZW4gdW50ZXIgLT4gJSIsICJCZW51dHplIEhleHRlY2ggR3VuYmxhZGUiLCAiQmVudXR6ZSBCaWxnZXdhdGVyIEN1dGxhc3MiLA0KLS1HZW5lcmFsIE1lbnUodmlwIEVpbnN0ZWxsdW5nZW4pIC8vIDE5IC8vIDQ3DQoiVklQIEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIFBhY2tldCBDYXN0aW5nIiwiVW0gVklQIEVpbnN0ZWxsdW5nZW4sIHp1IGJlbnV0enRlbiBtdXNzIFBhY2thZ2UgQ2FzdGluZyBtb2dsaWNoIHNlaW4iLCAiQXV0byBMZXZlbCBFaW5zdGVsbHVuZ2VuIiwiQmVudXR6ZSBBdXRvIExldmVsIiwNCiJTZWxlY3QgU2tpbGwgT3JkZXIiLCJTa2luIEhhY2sgRWluc3RlbGx1bmdlbiIsIkJlbnV0emUgU2tpbiBIYWNrIiwiU3RlbGxlIHNpY2hlciwgZGFzcyBQYWNrZXQgQ2FzdGluZyBhY3RpdmllcnQgaXN0IiwNCiJVbSBWSVAgRWluc3RlbGx1bmdlbiB6dSBiZW51dHp0ZW4sIG11c3N0IGR1IFZJUCBzZWluIiwiV2FobGUgZWluZW4gU2tpbiIsDQoiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciLCAiU21hcnQiICwNCi0tR2VuZXJhbCBNZW51KEdyYXBoaWsgRWluc3RlbGx1bmdlbikgLy8gMTIgLy8gNjUNCiJHcmFwaGlrIEVpbnN0ZWxsdW5nZW4iLCJTa2lsbCBBbnplaWdlIEVpbnN0ZWxsdW5nZW4iLCJRIEFuemVpZ2VuIiwiVyAgQW56ZWlnZW4iLCJFIEFuemVpZ2VuIiwiUiBBbnplaWdlbiIsIlN0YW5kYXJ0IEF0dGFja2VuIFJlaWNod2VpdGUiLA0KIlplaWdlIENvbWJvIE1vZHVzIiwiWmVpZ2UgUGVybWFib3giLCJaZWlnZSBQZXJtYWJveCAoIEJlbm90aWd0IDJ4IEY5ICkiLCJaZWljaG5lIFppcmtlbCB1bSBkZWluIGdld2FobHRlcyBaaWVsIiwiWmllbCBiZXJlY2hudW5nIiwNCi0tR2VuZXJhbCBNZW51KFRhcmdldCBTZWxlY3RvcnMpIC8vIDIgLy8gNzcNCiJaaWVsIFNvcnRpZXJ1bmciLCJMaW5rc2NsaWNrIGZ1ciBtYW51ZWxsZXMgQXVzd2FobGVuIHZvbiBaaWVsZW4iLA0KLS1HZW5lcmFsIE1lbnUoS2V5IEVpbnN0ZWxsdW5nZW4pIC8vIDEzIC8vIDc5DQoiS2V5IEVpbnN0ZWxsdW5nZW4iLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNvbWJvIEtleSBFaW5zdGVsbHVuZ2VuLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkNvbWJvIEtleSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1IYXJhc3MgS2V5IEVpbnN0ZWxsdW5nZW4tLS0tLS0tLS0tLS0tLS0tLS0+IiwgDQoiU21hcnQgSGFyYXNzIEtleSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1DbGVhciBLZXkgRWluc3RlbGx1bmdlbi0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkxhbmVDbGVhciBLZXkiLCJKdW5nbGVDbGVhciBLZXkiLCANCiI8LS0tLS0tLS0tLS0tLS0tLS0tQW5kZXJlIEtleSBFaW5zdGVsbHVuZ2VuLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiRXNjYXBlIEtleSIsICJTdGVsbGUgc2ljaGVyLCBkYXNzIGRlaW5lIE9yYndhbGtlciBLZXlzIGRpZSBnbGVpY2hlbiB3aWUgaGllciBzaW5kLiIsIk9yd1dhbGtlcktleSBFaW5zdGVsbHVuZ2VuIiwNCiJBdXRvIEhhcmFzcyBRIiwNCi0tR2VuZXJhbCBNZW51KE1pc2MgRWluc3RlbGx1bmdlbikgLy8gNyAvLyA5Mg0KIkFuZGVyZSBFaW5zdGVsbHVuZ2VuIiwgIlsiIC4uIG15SGVyby5jaGFyTmFtZS4uICJdIC0gQXV0by1BYnJlY2hlbiIsIkFicnVjaCBtaXQgUSIsIkFicnVjaCBtaXQgVyIsIkFicnVjaCBtaXQgRSIsDQoiQWJydWNoIG1pdCBSIiwiICAgICAgICAgICAgICAgICAgW1N1cHBvcnRlZCBTa2lsbHNdIiwNCi0tIEdlbmVyYWwgTWVudShTa2lsbCBMb2dpYykgLy8gNiAvLyA5OQ0KIlNraWxsIExvZ2lrIiwiUSBMb2dpayIsIlcgTG9naWsiLCJFIExvZ2lrIiwiUiBMb2dpayIsIkhlYWx0aCBNYW5hZ2VyICUiLA0KLS0gR2VuZXJhbCBNZW51KEhpdGNoYW5jZSBFaW5zdGVsbHVuZ2VuKSAvLyA1IC8vIDEwNQ0KIlRyZWZmZXJjaGFuY2UiLCJRIFRyZWZmZXJjaGFuY2UiLCJXIFRyZWZmZXJjaGFuY2UiLCJFIFRyZWZmZXJjaGFuY2UiLCJSIFRyZWZmZXJjaGFuY2UiLA0KLS0gR2VuZXJhbCBNZW51KE9yYndhbGsgRWluc3RlbGx1bmdlbikgLy8gNSAgLy8gMTEwDQoiT3JiV2Fsa2VyS2V5IEVpbnN0ZWxsdW5nZW4iLA0KIiAgICAgICAgICAgICAgICAgU2NyaXB0IFZlcnNpb246ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIiAgICAgICAgICAgIFNjcmlwdCB3dXJkZSBnZW1hY2h0IHZvbiAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsDQoiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCJBa3R1ZWxsZXIgT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICBTaWRhcyBBdXRvIENhcnJ5IiwNCiJBa3R1ZWxsZXIgT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3hPcmJXYWxrIiwgDQotLSBMZWJsYW5jIE1lbnUgLy8gMTMgLy8gMTE2DQoiUT5FPlc+UiIsICJRPlI+RT5XIiwgIkU+UT5XPlIiLCAiRT5XPlE+UiIgLCJadWbDpGxsaWdlIEJlbnV0enVuZyIsIlcgU2tpbGwgenVydWNra29tbSBFaW5zdGVsbHVuZ2VuIiwiR2VoZSB6dXJ1Y2sgenVtIFcgU3BvdCBpbSBRPkU+Vz5SIG1vZHVzICIsDQoiR2VoZSB6dXJ1Y2sgenVtIFcgU3BvdCBpbSBRPlI+RT5XIG1vZHVzICIsIkdlaGUgenVydWNrIHp1bSBXIFNwb3QgaW0gRT5RPlc+UiBtb2R1cyAiLCJHZWhlIHp1cnVjayB6dW0gVyBTcG90IGltIEU+Vz5RPlIgbW9kdXMiLA0KIkdlaGUgenVydWNrIHp1bSBXIFNwb3QgaW0gWnVmw6RsbGlnZW4gTW9kdXMgIiwiU3RpZWhsIG1pdCBRVyIsIkJlbnV0emUgbnVyIEUgKE51ciBTdHVubmVuKSIsIiBXw6RobGUgQ29tYm9tb2R1cyBLZXkiLA0KLS0gQWthbGkgTWVudSAvLyA5DQoiMiBHZWduZXIiLCAiMyBHZWduZXIiICwgIjQgR2VnbmVyIiwiNSBHZWduZXIiLCJCZW51dHplIFIgd2VubiBRIGRhcyBaaWVsIGdldHJvZmZlbiBoYXQiLCAiUnVzaCBTa2lsbHMiLCJCZW51dHplIFZlcmJlcmdlbiB3ZW5uIGdlZ25lciA+IiwiQmVudXR6ZSBWZXJiZXJnZW4gd2VubiBMZWJlbiAlIiwiQmVudXR6ZSBWZXJiZXJnZW4gKFcpIiwNCi0tIERpYW5hIE1lbnUgLy8gNA0KIlNtYXJ0IENvbWJvIiwgIkJlbnV0emUgUiB3ZW5uIFppZWwgbWFya2llcnQiICwgIkJlbnV0enRlIGFsbGVzIHNjaG5lbGwgaGludGVyZWluYW5kZXIiLCJCZW51dHplIEUgbnVyIHdlbm4gZGllIERpc3RhbnogenVtIGdlZ25lciA+IDI4MCIsDQotLSBMaXNzYW5kcmFhIE1lbnUgLy8gMTcNCiJFIExvZ2lrIGZ1ciBjb21ibyBtb2R1cyIsIkUgTG9naWMgZnVyIGhhcmFzcyBtb2R1cyIsIkVuZ2FnZSBtaXQgWndlaXRlbiBFIiwgIkJlbnV0emUgbmljaHQgZGVuIFp3ZWl0ZW4gRSAoIEVtcGZvaGxlbikiICwNCiJCZW51dHplIG5pY2h0IGRlbiBad2VpdGVuIEUgKCBFbXBmb2hsZW4pIiwgIkVuZ2FnZSBtaXQgWndlaXRlbiBFIiAsIlNtYXJ0IiwgIlJldHRlIGRpY2ggc2VsYnN0IiwgIkJlbnV0emUgZ2VnZW4gR2VnbmVyIiAsIkF1dG8gUiBmdXIgZGljaHNlbGJzdCIsDQoiQXV0b1Igd2VubiBMZWJlbiB1bnRlciAtPiAlIiwgIkRpZSAnRW5nYWdlIG1pdCBad2VpdGVuIEUnIE9wdGlvbiBpc3QgaW0gQmV0YSBTdGFkaXVtIiwgIlIgTG9naWsgZnVyIGRlbiBjb21ibyBtb2R1cyIsICJVbSBTbWFydCBSIExvZ2lrIHp1IGJlbnV0enRlbiwgc29sbHRlIEF1dG9SIGFrdGl2aWVydCBzZWluIiwNCiJCZW51dHplIFcgZnVyIEFudGktR2FwQ2xvc2UiLCJEaWVzZSBGdW5jdGlvbiBiZWZpbmRldCBzaWNoIGluIGRlciBCZXRhIFBoYXNlIiwNCi0tIFZpa3RvciBNZW51IC8vIDUNCiJVbHRpIExvZ2lrIiwiQmVudXR6ZSBVbHRpbWF0ZSB3ZW5uIGRhcyBaaWVsIGRhZHVyY2ggc3RyaWJ0IiwiQmVudXR6ZSBkaWUgVWx0aW1hdGUgZGlyZWt0IiAsIkUgVHJlZmZlcndhcnNjaGVpbmxpY2hrZWl0IChTdGFuZGFydCBXZXJ0ID0gMS42KSIsIkUgVHJlZmZlcndhcnNjaGVpbmxpY2hrZWl0IChTdGFuZGFydCBXZXJ0ID0gMikiLCJTbWFydCBBdXRvIEhhcmFzcyIsDQotLSBsYW5ndWFnZSBtZW51Ly8gNQ0KIlNwcmFjaGVuKDJ4RjkpIiwiRW5nbGlzaCIsICJUdXJraXNoIiwiRGV1dHNjaCIsIktvcmVhbiIsDQotLSBFeHRyYXNzLy8gDQoiU3RhcnRlIEVuZ2FuZ2UncyBtaXQgZGVpbmVyIFVsdGltYXRlIiwNCi0tIHJld29yay8vIDE3MQ0KIkF1dG8gVyBiYWNrIGlmIGhlYWx0aCA+IiwiQWx3YXlzIiwiRGVwZW5kcyBvbiBsb2NhbCBTZXR0aW5ncyIsIk5ldmVyIiwiRW5lbXkgTnVtYmVyIiwiQXV0byBXIGJhY2sgaWYgZW5lbXkgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtMb2NhbCBTZXR0aW5nc10iLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFc+Uj5RPkUgbW9kZSAiLA0KIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gVz5RPlI+RSBtb2RlICIsIk1pbmltdW0gbWluaW9uIHRvIFEgPiIsIk1pbmltdW0gbWluaW9uIHRvIFcgPiIsIk1pbmltdW0gbWluaW9uIHRvIEUgPiIsIk1pbmltdW0gbWluaW9uIHRvIFIgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtNYW5hIE1hbmFnZXJdIiwNCiJRIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlcgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiRSBTa2lsbCBNYW5hIE1hbmFnZXIgICUiLCJSIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlVzZSBBdXRvIExhc3RoaXQiLCJPbmx5IGlmIGNhbm5vdCBBQSIsIkxhc3RoaXQgTG9naWMiLCJBdXRvIFBvdGlvbiIsIlVzZSBBdXRvIFBvdGlvbiIsDQoiQXV0byBQb3Rpb24gaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCJBbnRpLUFGSyBTZXR0aW5ncyIsIlVzZSBBbnRpIEFmayIsIkUgLVRhcmdldCBkcmF3IiwiQ29sb3IgU2V0dGluZ3MiLCJRIENvbG9yIiwiVyBDb2xvciIsIkUgQ29sb3IiLCJSIENvbG9yIiwiRSAtVGFyZ2V0IENvbG9yIiwiQXV0byBBdHRhY2sgQ29sb3IiLA0KIlNlbGVjdGVkIFRhcmdldCBDb2xvciIsIkRyYXcgV2lkdGggU2V0dGluZ3MiLCJFIC1UYXJnZXQgV2lkdGgiLCJTZWxlY3RlZCBUYXJnZXQgV2lkdGgiLCJBdXRvIEF0dGFjayBXaWR0aCIsIlEgU2tpbGwgV2lkdGgiLCJXIFNraWxsIFdpZHRoIiwiRSBTa2lsbCBXaWR0aCIsIlIgU2tpbGwgV2lkdGgiLCJEcmF3IERhbWFnZSBJbmRpY2F0b3IiLA0KIkxhc3RoaXQgS2V5IiwiQ2xpY2sgRm9yIEluc3RydWN0aW9ucyIsIlVzZSBpZiBuZWVkZWQiLCJDbGVhciBLZXkgU2V0dGluZ3MiLCJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIEFudGkgR2FwLUNsb3NlIiwiR2FwLUNsb3NlIFdpdGggVyBTa2lsbCIsIkh1bWFuaXplciBmb3IgQW50aSBHYXAgQ2xvc2UiLA0KIkF1dG8gVyBTZXR0aW5ncyIsIlVzZSBBdXRvIFcgIiwiQXV0byBXIGlmIGVuZW15ID4iLCJSIC1UYXJnZXQgZHJhdyIsIlIgLVRhcmdldCBDb2xvciIsIlIgLVRhcmdldCBXaWR0aCINCn0NCmxvY2FsIGxvY19jaG9vc2VuID0ge30NCmxvY19jaG9vc2VuID0gbG9jX2VuZCAtLSBGYWxsYmFjayBvbiBlcnJvcnMNCiAgICAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IEF1dG8gVXBkYXRlICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGxvY2FsIHZlcnNpb24gPSAzLjINCiAgbG9jYWwgYXV0aG9yID0gIkVuc3VsdXluIg0KICBsb2NhbCBTQ1JJUFRfTkFNRSA9ICJLZXlib2FyZE1hc3RlclNlcmllcyINCiAgbG9jYWwgQVVUT1VQREFURSA9IHRydWUNCiAgbG9jYWwgVVBEQVRFX0hPU1QgPSAicmF3LmdpdGh1Yi5jb20iDQogIGxvY2FsIFVQREFURV9QQVRIID0gIi9Mb25zZW1hcmlhL3NjcmlwdHMvbWFzdGVyL0tleWJvYXJkTWFzdGVyU2VyaWVzLmx1YSIuLiI/cmFuZD0iLi5tYXRoLnJhbmRvbSgxLDEwMDAwKQ0KICBsb2NhbCBVUERBVEVfRklMRV9QQVRIID0gU0NSSVBUX1BBVEguLkdldEN1cnJlbnRFbnYoKS5GSUxFX05BTUUNCiAgbG9jYWwgVVBEQVRFX1VSTCA9ICJodHRwczovLyIuLlVQREFURV9IT1NULi5VUERBVEVfUEFUSA0KICBmdW5jdGlvbiBTYXkodGV4dCkNCiAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+S2V5Ym9hcmQgTWFzdGVyIFNlcmllczo8L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4iIC4uIHRleHQgLi4gIjwvZm9udD4iKQ0KICBlbmQNCiAgaWYgQVVUT1VQREFURSB0aGVuDQogICAgbG9jYWwgU2VydmVyRGF0YSA9IEdldFdlYlJlc3VsdChVUERBVEVfSE9TVCwgIi9Mb25zZW1hcmlhL3NjcmlwdHMvbWFzdGVyL3ZlcnNpb24vQnVuZGxlLnZlcnNpb24iKQ0KICAgIGlmIFNlcnZlckRhdGEgdGhlbg0KICAgICAgU2VydmVyVmVyc2lvbiA9IHR5cGUodG9udW1iZXIoU2VydmVyRGF0YSkpID09ICJudW1iZXIiIGFuZCB0b251bWJlcihTZXJ2ZXJEYXRhKSBvciBuaWwNCiAgICAgIGlmIFNlcnZlclZlcnNpb24gdGhlbg0KICAgICAgICBpZiB0b251bWJlcih2ZXJzaW9uKSA8IFNlcnZlclZlcnNpb24gdGhlbg0KICAgICAgICAgIFNheSgiTmV3IHZlcnNpb24gYXZhaWxhYmxlICIuLlNlcnZlclZlcnNpb24pDQogICAgICAgICAgU2F5KCJVcGRhdGluZywgcGxlYXNlIGRvbid0IHByZXNzIEY5IikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIERvd25sb2FkRmlsZShVUERBVEVfVVJMLCBVUERBVEVfRklMRV9QQVRILCBmdW5jdGlvbiAoKSBTYXkoIlN1Y2Nlc3NmdWxseSB1cGRhdGVkLiAoIi4udmVyc2lvbi4uIiA9PiAiLi5TZXJ2ZXJWZXJzaW9uLi4iKSwgcHJlc3MgRjkgdHdpY2UgdG8gbG9hZCB0aGUgdXBkYXRlZCB2ZXJzaW9uLiIpIGVuZCkgZW5kLCAzKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgU2F5KCItV2VsY29tZSwgWW91IGhhdmUgZ290IHRoZSBsYXRlc3QgdmVyc2lvbiAodiIuLlNlcnZlclZlcnNpb24uLiIpIG9mICIuLlNjcmlwdG5hbWUuLiIgLCB1cGRhdGVkIGF0ICgiLi5kYXRlLi4iKSBieSAiIC4uIGF1dGhvcikNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbHNlIA0KICAgICAgU2F5KCJFcnJvciBkb3dubG9hZGluZyB2ZXJzaW9uIGluZm8iKQ0KICAgIGVuZA0KICBlbmQNCmxic3BvdCA9IHsNCnt4ID0gMzA3OC4yMTc3NzM0Mzc1ICwgeSA9IDk1Ljc0ODA0Njg3NSwgeiA9IDQzMDMuOTY0MzU1NDY4OH0sDQp7eCA9IDIxNTMuMDk2Njc5Njg3NSAsIHkgPSA5NS43NDgwNDY4NzUsIHogPSA0NDkzLjE4ODQ3NjU2MjV9LA0Ke3ggPSA0Mzk1LjkyMjM2MzI4MTMgLCB5ID0gOTUuNzQ4MTY4OTQ1MzEzLCB6ID0gMzEyNS40NTQxMDE1NjI1fSwNCnt4ID0gNDUyNC43MjQxMjEwOTM4ICwgeSA9IDk1Ljc0ODE2ODk0NTMxMywgeiA9IDIwODQuNjk1ODAwNzgxM30sDQp7eCA9IDUzODAuMDMyMjI2NTYyNSAsIHkgPSA1MS4yNjEzNTI1MzkwNjMsIHogPSAyNDkwLjU3NDcwNzAzMTN9LA0Ke3ggPSA2MjE0LjIzNzMwNDY4NzUgLCB5ID0gNTAuMDExODQwODIwMzEzLCB6ID0gMzQ2MS4xMDM1MTU2MjV9LA0Ke3ggPSA2MjgxLjc5NjM4NjcxODggLCB5ID0gNDguNTI4MDc2MTcxODc1LCB6ID0gNTA4OS44NTQwMDM5MDYzfSwNCnt4ID0gNzI1NC45OTQxNDA2MjUgLCB5ID0gNTIuNDUxMTcxODc1LCB6ID0gNTk5MS42NTYyNX0sDQp7eCA9IDgxMTYuNDMyMTI4OTA2MyAsIHkgPSA1Mi44OTAyNTg3ODkwNjMsIHogPSA1NzUxLjI2NTYyNX0sDQp7eCA9IDg5NjUuODI1MTk1MzEyNSAsIHkgPSA1Mi42MjM0MTMwODU5MzgsIHogPSA0NDc0LjQ0OTIxODc1fSwNCnt4ID0gOTAzNC45OTIxODc1ICwgeSA9IDUzLjc5NTE2NjAxNTYyNSwgeiA9IDM4OTAuMjYwNzQyMTg3NX0sDQp7eCA9IDkyODcuMDM0MTc5Njg3NSAsIHkgPSA1OC4zNzQ1MTE3MTg3NSwgeiA9IDM1MTEuOTE1NzcxNDg0NH0sDQp7eCA9IDk4NjcuNTk3NjU2MjUgLCB5ID0gNTcuOTk5MDIzNDM3NSwgeiA9IDMxMTguNjY2NTAzOTA2M30sDQp7eCA9IDgxODkuNTMwNzYxNzE4OCAsIHkgPSA1MS42MDU5NTcwMzEyNSwgeiA9IDMyMDkuNTgxMjk4ODI4MX0sDQp7eCA9IDMzNTkuMzQyNTI5Mjk2OSAsIHkgPSA1Mi40NzQxMjEwOTM3NSwgeiA9IDYyNDEuMTMxODM1OTM3NX0sDQp7eCA9IDM3NzEuNDIzODI4MTI1ICwgeSA9IDUxLjAwMDczMjQyMTg3NSwgeiA9IDcyNTQuNDkyNjc1NzgxM30sDQp7eCA9IDQ0OTUuMzgzNzg5MDYyNSAsIHkgPSA0OS4xMjM2NTcyMjY1NjMsIHogPSA4MDcxLjM2NTcyMjY1NjN9LA0Ke3ggPSA1MTE4LjU2NTkxNzk2ODggLCB5ID0gNTEuMTU3MzQ4NjMyODEzLCB6ID0gNzgzMi41NTk1NzAzMTI1fSwNCnt4ID0gNTYyOS4zNjYyMTA5Mzc1ICwgeSA9IDUxLjY1NDI5Njg3NSwgeiA9IDc2NzkuMzE5MzM1OTM3NX0sDQp7eCA9IDg1MzkuNjAyNTM5MDYyNSAsIHkgPSA1MS4xMjk4ODI4MTI1LCB6ID0gMjA4Ny40NDE4OTQ1MzEzfSwNCnt4ID0gMTAyMDUuMzg0NzY1NjI1ICwgeSA9IDQ5LjIyMzE0NDUzMTI1LCB6ID0gMjE4Ny4zMDQxOTkyMTg4fSwNCnt4ID0gNzYwNC44MTA1NDY4NzUgLCB5ID0gNTEuMjczNjgxNjQwNjI1LCB6ID0gMjA5Ni4wNjc4NzEwOTM4fSwNCnt4ID0gNzU1Ny45MTk0MzM1OTM4ICwgeSA9IDQ4LjczMDEwMjUzOTA2MywgeiA9IDQ2ODYuMzM3ODkwNjI1fSwNCnt4ID0gMjIxMi4xNjkxODk0NTMxICwgeSA9IDUwLjQxMTg2NTIzNDM3NSwgeiA9IDc3OTcuNDQzODQ3NjU2M30sDQp7eCA9IDE2NTIuODMwMjAwMTk1MyAsIHkgPSA1Mi44MzgxMzQ3NjU2MjUsIHogPSA4NjQ3LjY3MDg5ODQzNzV9LA0Ke3ggPSAyMTYwLjcwMTkwNDI5NjkgLCB5ID0gNTMuMTIwMTE3MTg3NSwgeiA9IDEwMDAxLjE5MDQyOTY4OH0sDQp7eCA9IDI1MTQuNTY2ODk0NTMxMyAsIHkgPSA1MS43NzQ5MDIzNDM3NSwgeiA9IDkxOTMuMDgzOTg0Mzc1fSwNCnt4ID0gMzA3MS42MDkzNzUgLCB5ID0gNTIuODEyNjIyMDcwMzEzLCB6ID0gOTg2NC4wNzAzMTI1fSwNCnt4ID0gMjgzMS4yMTUwODc4OTA2ICwgeSA9IDU0LjMyNTY4MzU5Mzc1LCB6ID0gMTAzNTMuMzU2NDQ1MzEzfSwNCnt4ID0gODk1NC43NTM5MDYyNSAsIHkgPSA1MS41MjgwNzYxNzE4NzUsIHogPSA0OTAzLjc3NzgzMjAzMTN9LA0Ke3ggPSA4NDE4LjEwNTQ2ODc1ICwgeSA9IDUzLjk3MTE5MTQwNjI1LCB6ID0gMzc2My4xNTgyMDMxMjV9LA0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLW1hdmkgdGFyYWYgYml0dGkNCnt4ID0gMTAyMjQuODg4NjcxODc1ICwgeSA9IDkxLjQzMDA1MzcxMDkzOCwgeiA9IDEyNzA0LjEwMDU4NTkzOH0sDQp7eCA9IDEwNDI5Ljg0MDgyMDMxMyAsIHkgPSA5MS40Mjk4MDk1NzAzMTMsIHogPSAxMTcwMy41NjQ0NTMxMjV9LA0Ke3ggPSAxMTU4Mi4yMzUzNTE1NjMgLCB5ID0gOTEuNDI5ODA5NTcwMzEzLCB6ID0gMTA1NTQuMTkyMzgyODEzfSwNCnt4ID0gMTI2NjguNzc5Mjk2ODc1ICwgeSA9IDkxLjQzMDA1MzcxMDkzOCwgeiA9IDEwMzI4Ljc0MTIxMDkzOH0sDQp7eCA9IDExODUyLjA0Nzg1MTU2MyAsIHkgPSA1MC4zMDc2MTcxODc1LCB6ID0gODg5NC4wNTg1OTM3NX0sDQp7eCA9IDEyMTE3Ljc3ODMyMDMxMyAsIHkgPSA1Mi40ODA0Njg3NSwgeiA9IDgwNDMuODQyNzczNDM3NX0sDQp7eCA9IDExMTQ4LjQxNDA2MjUgLCB5ID0gNTIuMjA0NzExOTE0MDYzLCB6ID0gNzc1MS4zNjEzMjgxMjV9LA0Ke3ggPSAxMDM2Mi4wNDg4MjgxMjUgLCB5ID0gNjEuMDcwMDY4MzU5Mzc1LCB6ID0gODU3NS42MzE4MzU5Mzc1fSwNCnt4ID0gMTA5NTAuMTk1MzEyNSAsIHkgPSA1Mi4yMDM5Nzk0OTIxODgsIHogPSA3NTA2LjM5ODkyNTc4MTN9LA0Ke3ggPSAxMDM1My4yNTM5MDYyNSAsIHkgPSA1MS45OTkyNjc1NzgxMjUsIHogPSA2NzExLjg0MDgyMDMxMjV9LA0Ke3ggPSAxMDQzNy4yMTU4MjAzMTMgLCB5ID0gNTMuNDQ0NDU4MDA3ODEzLCB6ID0gOTA5Ni42OTA0Mjk2ODc1fSwNCnt4ID0gMTI5NzEuNjQ1NTA3ODEzICwgeSA9IDUxLjk4MTIwMTE3MTg3NSwgeiA9IDY4ODYuMjMzMzk4NDM3NX0sDQp7eCA9IDEzMTAxLjE2NjAxNTYyNSAsIHkgPSA1My4xNDM0MzI2MTcxODgsIHogPSA1NjUzLjA2Mzk2NDg0Mzh9LA0Ke3ggPSAxMjQwOC4yOTM5NDUzMTMgLCB5ID0gNTEuNzI5MzcwMTE3MTg4LCB6ID0gNTIyMi43NzYzNjcxODc1fSwNCnt4ID0gMTIxMzkuNjk0MzM1OTM4ICwgeSA9IDUxLjcyOTQ5MjE4NzUsIHogPSA0NTY3LjY5NzI2NTYyNX0sDQp7eCA9IDExNjE3LjUzODA4NTkzOCAsIHkgPSA1MS42NzkzMjEyODkwNjMsIHogPSA1MTc2LjA2MjV9LA0Ke3ggPSA5MDcwLjg1NTQ2ODc1ICwgeSA9IDUzLjAzNjAxMDc0MjE4OCwgeiA9IDcxNjUuMzE0OTQxNDA2M30sDQp7eCA9IDcwNzIuNzkwMDM5MDYyNSAsIHkgPSA1Mi44NzI1NTg1OTM3NSwgeiA9IDg4MTEuNjIzMDQ2ODc1fSwNCnt4ID0gNzU5OC40MDU3NjE3MTg4ICwgeSA9IDUyLjg3MjQzNjUyMzQzOCwgeiA9IDg4NzguMDcxMjg5MDYyNX0sDQp7eCA9IDg4MjYuOTQxNDA2MjUgLCB5ID0gNTIuNTk2MDY5MzM1OTM4LCB6ID0gOTI5NS4wNjkzMzU5Mzc1fSwNCnt4ID0gODU3My43OTAwMzkwNjI1ICwgeSA9IDUxLjc3MDE0MTYwMTU2MywgeiA9IDExMjYwLjAzNTE1NjI1fSwNCnt4ID0gOTQwOS4wODg4NjcxODc1ICwgeSA9IDUyLjMwNjM5NjQ4NDM3NSwgeiA9IDEyMjg5LjY5NzI2NTYyNX0sDQp7eCA9IDY1NTkuMTAzMDI3MzQzOCAsIHkgPSA1My45NDQ1ODAwNzgxMjUsIHogPSAxMTYyMS40NTgwMDc4MTN9LA0Ke3ggPSA1MjgxLjY1MTg1NTQ2ODggLCB5ID0gNTYuODQ4MjY2NjAxNTYzLCB6ID0gMTE3NDkuNDA5MTc5Njg4fSwNCnt4ID0gNjMyOC42MDQ5ODA0Njg4ICwgeSA9IDU0LjU3MDMxMjUsIHogPSAxMjc3NC43MDUwNzgxMjV9LA0Ke3ggPSA3MjA2LjEwMDU4NTkzNzUgLCB5ID0gNTYuNDc2NTYyNSwgeiA9IDEyNzcwLjI1MDk3NjU2M30sDQp7eCA9IDQ5NzYuNDM5OTQxNDA2MyAsIHkgPSA1Ni42NzEwMjA1MDc4MTMsIHogPSAxMTQ0Ni4zMzc4OTA2MjV9LA0Ke3ggPSA1Njk5LjI5ODMzOTg0MzggLCB5ID0gNTYuNjkyMDE2NjAxNTYzLCB6ID0gMTA5MDcuNjQzNTU0Njg4fSwNCnt4ID0gNTgxMi4wMDk3NjU2MjUgLCB5ID0gNTQuMTYwMTU2MjUsIHogPSAxMDE4OS4xMTEzMjgxMjV9LA0Ke3ggPSA3Mjg2LjExNDc0NjA5MzggLCB5ID0gNTEuNDE3MzU4Mzk4NDM4LCB6ID0gMTAxODYuODY2MjEwOTM4fQ0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCg0KfQ0KDQpsYnNwb3RlbmQgPSB7DQp7eCA9IDMzNjAuNzU0Mzk0NTMxMyAsIHkgPSA1NC4xNDk5MDIzNDM3NSwgeiA9IDQ4MTIuNzV9LA0Ke3ggPSAyMTkwLjA4MDU2NjQwNjMgLCB5ID0gNTIuNzg4MDg1OTM3NSwgeiA9IDUxMTkuMzg1MjUzOTA2M30sDQp7eCA9IDQ5ODcuMzcyMDcwMzEyNSAsIHkgPSA1MC45NDcyNjU2MjUsIHogPSAzMjA0LjU0MDAzOTA2MjV9LA0Ke3ggPSA1MTE1LjkzNDA4MjAzMTMgLCB5ID0gNTEuOTkxMzMzMDA3ODEzLCB6ID0gMjExMi45NjA0NDkyMTg4fSwNCnt4ID0gNjAwNi4yODYxMzI4MTI1ICwgeSA9IDUyLjEzOTE2MDE1NjI1LCB6ID0gMjQzOS42MDI3ODMyMDMxfSwNCnt4ID0gNjcxNy4yOTg4MjgxMjUgLCB5ID0gNDguNTIzNTU5NTcwMzEzLCB6ID0gMzg5Mi45Mjk5MzE2NDA2fSwNCnt4ID0gNjExOC4zNTQ0OTIxODc1ICwgeSA9IDUxLjc3NjM2NzE4NzUsIHogPSA1NzA4LjcwODQ5NjA5Mzh9LA0Ke3ggPSA3MTA5LjIzMjkxMDE1NjMgLCB5ID0gNTMuMTkyODcxMDkzNzUsIHogPSA1NDM3LjM5MDEzNjcxODh9LA0Ke3ggPSA4MjI5LjQ2MDkzNzUgLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDYzODkuMjA1NTY2NDA2M30sDQp7eCA9IDk0MzAuOTE4OTQ1MzEyNSAsIHkgPSAtNzEuMjQwNjAwNTg1OTM4LCB6ID0gNDUxNi45NDYyODkwNjI1fSwNCnt4ID0gOTQzOC44MzMwMDc4MTI1ICwgeSA9IC03MC41Nzk3MTE5MTQwNjMsIHogPSA0Mjc1LjM4MDg1OTM3NX0sDQp7eCA9IDk2NTYuMDMyMjI2NTYyNSAsIHkgPSAtNzAuODA2NTE4NTU0Njg4LCB6ID0gNDAwNS4xOTY3NzczNDM4fSwNCnt4ID0gOTczOS43NjQ2NDg0Mzc1ICwgeSA9IDQ5LjIyMjkwMDM5MDYyNSwgeiA9IDI3MDIuOTEwODg4NjcxOX0sDQp7eCA9IDgyNTQuMTY0MDYyNSAsIHkgPSA1MS4xMzAxMjY5NTMxMjUsIHogPSAyNjc5LjE3MjM2MzI4MTN9LA0Ke3ggPSAyODY0LjE2MjM1MzUxNTYgLCB5ID0gNTcuMDQ0Nzk5ODA0Njg4LCB6ID0gNTk5My42NjY1MDM5MDYzfSwNCnt4ID0gMzY5OC41NzkxMDE1NjI1ICwgeSA9IDUyLjc1ODc4OTA2MjUsIHogPSA3NzYxLjAzNzEwOTM3NX0sDQp7eCA9IDQwMDMuMTM5ODkyNTc4MSAsIHkgPSA1MS4yMzQyNTI5Mjk2ODgsIHogPSA3ODkxLjM4NjIzMDQ2ODh9LA0Ke3ggPSA1MTE0LjI5ODgyODEyNSAsIHkgPSAtNDAuMzg5MDM4MDg1OTM4LCB6ID0gODUzNy43ODUxNTYyNX0sDQp7eCA9IDU5OTUuMzUzMDI3MzQzOCAsIHkgPSAtNjguOTg3MzA0Njg3NSwgeiA9IDgyNDEuOTEyMTA5Mzc1fSwNCnt4ID0gODU3NC4wMjkyOTY4NzUgLCB5ID0gNDkuNDUzNzM1MzUxNTYzLCB6ID0gMTY3My41ODAwNzgxMjV9LA0Ke3ggPSAxMDEwMi41NDI5Njg3NSAsIHkgPSA1MC4yNjAwMDk3NjU2MjUsIHogPSAxNzE3LjIxOTQ4MjQyMTl9LA0Ke3ggPSA3MzkyLjkwNjI1ICwgeSA9IDQ5LjQ0NjY1NTI3MzQzOCwgeiA9IDE2NDEuNTY4MjM3MzA0N30sDQp7eCA9IDc2NTguMzM4Mzc4OTA2MyAsIHkgPSA1My45ODI0MjE4NzUsIHogPSA0MjI3LjIzMTkzMzU5Mzh9LA0Ke3ggPSAyMzM3LjIwMDkyNzczNDQgLCB5ID0gNTEuNzg5OTE2OTkyMTg4LCB6ID0gODIyOC41OTg2MzI4MTI1fSwNCnt4ID0gMjA0Ny42NTA2MzQ3NjU2ICwgeSA9IDUxLjc3NzU4Nzg5MDYyNSwgeiA9IDg2MzEuOTY4NzV9LA0Ke3ggPSAxNjgzLjU5MzEzOTY0ODQgLCB5ID0gNTIuODM4Mzc4OTA2MjUsIHogPSAxMDE4OS40NDIzODI4MTN9LA0Ke3ggPSAyODcyLjY2Njk5MjE4NzUgLCB5ID0gNTAuNjc2MDI1MzkwNjI1LCB6ID0gOTIxMy40ODQzNzV9LA0Ke3ggPSAzNTIxLjkyMzgyODEyNSAsIHkgPSAtNjYuMzgwMTI2OTUzMTI1LCB6ID0gMTAwOTQuNjE4MTY0MDYzfSwNCnt4ID0gMzAyMC4wMTI5Mzk0NTMxICwgeSA9IC03MC4zNDM4NzIwNzAzMTMsIHogPSAxMDg0Ni40NDIzODI4MTN9LA0Ke3ggPSA5MDQxLjE0MDYyNSAsIHkgPSAtNzEuMjQwNjAwNTg1OTM4LCB6ID0gNTQ5Ni40NjUzMzIwMzEzfSwNCnt4ID0gODAzNC4yMjgwMjczNDM4ICwgeSA9IDUzLjcyMDgyNTE5NTMxMywgeiA9IDM5NDAuMjYwMjUzOTA2M30sDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1tYXZpIHRhcmFmIGJpdHRpDQp7eCA9IDk2ODkuOTM2NTIzNDM3NSAsIHkgPSA1Mi4zMjI4NzU5NzY1NjMsIHogPSAxMjY2My4wNTY2NDA2MjV9LA0Ke3ggPSA5OTU1LjQzNzUgLCB5ID0gNTIuMzA2MTUyMzQzNzUsIHogPSAxMTQ2MC40Njc3NzM0Mzh9LA0Ke3ggPSAxMTM3MS4zODQ3NjU2MjUgLCB5ID0gNTIuMzA2Mjc0NDE0MDYzLCB6ID0gMTAwNjUuNTc3MTQ4NDM4fSwNCnt4ID0gMTI2MzIuNDc2NTYyNSAsIHkgPSA1Mi4zMDYyNzQ0MTQwNjMsIHogPSA5Nzc3LjAwOTc2NTYyNX0sDQp7eCA9IDExNDMxLjY1MDM5MDYyNSAsIHkgPSA1OS4xMTEyMDYwNTQ2ODgsIHogPSA4NTIyLjkxOTkyMTg3NX0sDQp7eCA9IDExNTg1LjM2MTMyODEyNSAsIHkgPSA1Mi44MjQ1ODQ5NjA5MzgsIHogPSA4MDMxLjc2MDI1MzkwNjN9LA0Ke3ggPSAxMDkwNi42OTkyMTg3NSAsIHkgPSA2Mi42NjI1OTc2NTYyNSwgeiA9IDgyMzkuNTIyNDYwOTM3NX0sDQp7eCA9IDEwNzkxLjY3MDg5ODQzOCAsIHkgPSA2My4wNzc4ODA4NTkzNzUsIHogPSA4MzYwLjcyNzUzOTA2MjV9LA0Ke3ggPSAxMDk5OC45Njg3NSAsIHkgPSA1MS43MjM1MTA3NDIxODgsIHogPSA3MDM3Ljc0ODA0Njg3NX0sDQp7eCA9IDEwODcyLjAwODc4OTA2MyAsIHkgPSA1MS43MjI2NTYyNSwgeiA9IDY4ODguNDYwOTM3NX0sDQp7eCA9IDEwMTczLjM5NTUwNzgxMyAsIHkgPSA1Mi4xMTc1NTM3MTA5MzgsIHogPSA5NTM3Ljc5MTk5MjE4NzV9LA0Ke3ggPSAxMjY3My41NTU2NjQwNjMgLCB5ID0gNTEuNzAyNzU4Nzg5MDYzLCB6ID0gNjQ5MS4xOTkyMTg3NX0sDQp7eCA9IDEyNjE3LjgwMzcxMDkzOCAsIHkgPSA1Mi4xNzM4MjgxMjUsIHogPSA1NzgyLjE4MDE3NTc4MTN9LA0Ke3ggPSAxMTk3My4wOTk2MDkzNzUgLCB5ID0gNTMuNjQ0MTY1MDM5MDYzLCB6ID0gNTIyNy4zNDA4MjAzMTI1fSwNCnt4ID0gMTE5MjUuODc2OTUzMTI1ICwgeSA9IC02OC45MjExNDI1NzgxMjUsIHogPSA0MDQ1Ljg3OTg4MjgxMjV9LA0Ke3ggPSAxMTM3Ny4xMjMwNDY4NzUgLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDQ4MDEuMzk4OTI1NzgxM30sDQp7eCA9IDg2NDguNjEzMjgxMjUgLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDY3MzUuMTQ3NDYwOTM3NX0sDQp7eCA9IDY3MjguNjgwMTc1NzgxMyAsIHkgPSAtNzEuMjQwNjAwNTg1OTM4LCB6ID0gODQ5NS41NzQyMTg3NX0sDQp7eCA9IDc3MDMuNzQzNjUyMzQzOCAsIHkgPSA1Mi40MDg4MTM0NzY1NjMsIHogPSA5Mzg0LjAwMTk1MzEyNX0sDQp7eCA9IDg2OTkuNTc3MTQ4NDM3NSAsIHkgPSA1MC4zODM5MTExMzI4MTMsIHogPSA5Nzc1LjA0Njg3NX0sDQp7eCA9IDgxMjkuODExNTIzNDM3NSAsIHkgPSA1MC40NjcxNjMwODU5MzgsIHogPSAxMDk1Ni4xNDQ1MzEyNX0sDQp7eCA9IDg4NjMuNTAxOTUzMTI1ICwgeSA9IDU2LjQ3NzA1MDc4MTI1LCB6ID0gMTI0MDYuODcwMTE3MTg4fSwNCnt4ID0gNjM5MS4yNTI5Mjk2ODc1ICwgeSA9IDU2LjQ3NzA1MDc4MTI1LCB6ID0gMTIxOTEuNjE1MjM0Mzc1fSwNCnt4ID0gNTM3Ni4yODA3NjE3MTg4ICwgeSA9IDU2LjQ2MDgxNTQyOTY4OCwgeiA9IDEyMTU4LjIxMDkzNzV9LA0Ke3ggPSA2MjkzLjM1NzQyMTg3NSAsIHkgPSA1Mi44Mzc4OTA2MjUsIHogPSAxMzI3Ni4wNzYxNzE4NzV9LA0Ke3ggPSA3MjYxLjczMjQyMTg3NSAsIHkgPSA1Mi44MzgxMzQ3NjU2MjUsIHogPSAxMzMyMS4wMDI5Mjk2ODh9LA0Ke3ggPSA0OTQxLjI3MTk3MjY1NjMgLCB5ID0gLTcxLjI0MDQ3ODUxNTYyNSwgeiA9IDEwODQwLjk0ODI0MjE4OH0sDQp7eCA9IDUzMDkuOTcxMTkxNDA2MyAsIHkgPSAtNzEuMjQwNjAwNTg1OTM4LCB6ID0gMTA2NzcuMzg2NzE4NzV9LA0Ke3ggPSA1MzQ2LjE2MTYyMTA5MzggLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDEwMzYzLjA4OTg0Mzc1fSwNCnt4ID0gNzE1OC44NzU5NzY1NjI1ICwgeSA9IDU2LjM4MDEyNjk1MzEyNSwgeiA9IDEwNzA3LjI5OTgwNDY4OH0NCg0KDQoNCg0KDQoNCg0KDQoNCg0KfQ0KICAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IE9ubG9hZCBGdW5jdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgZnVuY3Rpb24gT25Mb2FkKCkNCiAgICAgICAgICBpZiBub3QgUmVxdWlyZVNpbXBsZUxpYigpIHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgIGl0ZW1maXgoKQ0KICAgICAgICAgcmVhZGNmZygpDQogICAgICAgICBjaG5nbGFuZygpDQogICAgICAgICAgIGlmIF9HW215SGVyby5jaGFyTmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgICAgX0dbbXlIZXJvLmNoYXJOYW1lXSgpDQogICAgICAgICAgICAgICAgIC0tIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU2tpbiBIYWNrIGN1cnJlbnRseSBkaXNhYmxlZCB1bnRpbCB0aGUgbmV4dCB1cGRhdGUiKSBlbmQsIDE0KQ0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj4gOlRoaXMgY2hhbXBpb24gaXMgbm90IHN1cHBvcnRlZC4gQ3VycmVudGx5IHN1cHBvcnRlZCBjaGFtcGlvbnMgYXJlOiAiLi5saXN0Li4iICIgKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5GZWVsIGZyZWUgdG8gY2hlY2sgbXkgZm9ydW0gdG9waWMgYW5kIGFzayBhIG5ldyBjaGFtcGlvbiBvciBnaXZlIGZlZWRiYWNrIikgZW5kLCAwLjUpDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPiIuLmxpbmsuLiIiKSBlbmQsIDAuNSkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogICAgICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBTY3JpcHRTdGF0dXMuTmV0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgYXNzZXJ0KGxvYWQoQmFzZTY0RGVjb2RlKCJHMHgxWVZJQUFRUUVCQWdBR1pNTkNob0tBQUFBQUFBQUFBQUFBUUlLQUFBQUJnQkFBRUZBQUFBZFFBQUJCa0JBQUdVQUFBQUtRQUNCQmtCQUFHVkFBQUFLUUlDQkh3Q0FBQVFBQUFBRUJnQUFBR05zWVhOekFBUU5BQUFBVTJOeWFYQjBVM1JoZEhWekFBUUhBQUFBWDE5cGJtbDBBQVFMQUFBQVUyVnVaRlZ3WkdGMFpRQUNBQUFBQWdBQUFBZ0FBQUFDQUFvdEFBQUFoa0JBQU1hQVFBQUd3VUFBQndGQkFrRkJBUUFkZ1FBQlJzRkFBRWNCd1FLQmdRRUFYWUVBQVliQlFBQ0hBVUVEd2NFQkFKMkJBQUhHd1VBQXh3SEJBd0VDQWdEZGdRQUJCc0pBQUFjQ1FRUkJRZ0lBSFlJQUFSWUJBZ0xkQUFBQm5ZQUFBQXFBQUlBS1FBQ0ZoZ0JEQU1IQUFnQ2RnQUFCQ29DQWhRcUF3NGFHQUVRQXg4QkNBTWZBd3dIZEFJQUFuWUFBQUFxQWdJZU1RRVFBQVlFRUFKMUFnQUdHd0VRQTVRQUFBSjFBQUFFZkFJQUFGQUFBQUFRRkFBQUFhSGRwWkFBRURRQUFBRUpoYzJVMk5FVnVZMjlrWlFBRUNRQUFBSFJ2YzNSeWFXNW5BQVFEQUFBQWIzTUFCQWNBQUFCblpYUmxibllBQkJVQUFBQlFVazlEUlZOVFQxSmZTVVJGVGxSSlJrbEZVZ0FFQ1FBQUFGVlRSVkpPUVUxRkFBUU5BQUFBUTA5TlVGVlVSVkpPUVUxRkFBUVFBQUFBVUZKUFEwVlRVMDlTWDB4RlZrVk1BQVFUQUFBQVVGSlBRMFZUVTA5U1gxSkZWa2xUU1U5T0FBUUVBQUFBUzJWNUFBUUhBQUFBYzI5amEyVjBBQVFJQUFBQWNtVnhkV2x5WlFBRUNnQUFBR2RoYldWVGRHRjBaUUFBQkFRQUFBQjBZM0FBQkFjQUFBQmhjM05sY25RQUJBc0FBQUJUWlc1a1ZYQmtZWFJsQUFNQUFBQUFBQUR3UHdRVUFBQUFRV1JrUW5WbmMzQnNZWFJEWVd4c1ltRmphd0FCQUFBQUNBQUFBQWdBQUFBQUFBTUZBQUFBQlFBQUFBd0FRQUNCUUFBQUhVQ0FBUjhBZ0FBQ0FBQUFCQXNBQUFCVFpXNWtWWEJrWVhSbEFBTUFBQUFBQUFBQVFBQUFBQUFCQUFBQUFRQVFBQUFBUUc5aVpuVnpZMkYwWldRdWJIVmhBQVVBQUFBSUFBQUFDQUFBQUFnQUFBQUlBQUFBQ0FBQUFBQUFBQUFCQUFBQUJRQUFBSE5sYkdZQUFRQUFBQUFBRUFBQUFFQnZZbVoxYzJOaGRHVmtMbXgxWVFBdEFBQUFBd0FBQUFNQUFBQUVBQUFBQkFBQUFBUUFBQUFFQUFBQUJBQUFBQVFBQUFBRUFBQUFCQUFBQUFVQUFBQUZBQUFBQlFBQUFBVUFBQUFGQUFBQUJRQUFBQVVBQUFBRkFBQUFCZ0FBQUFZQUFBQUdBQUFBQmdBQUFBVUFBQUFEQUFBQUF3QUFBQVlBQUFBR0FBQUFCZ0FBQUFZQUFBQUdBQUFBQmdBQUFBWUFBQUFIQUFBQUJ3QUFBQWNBQUFBSEFBQUFCd0FBQUFjQUFBQUhBQUFBQndBQUFBY0FBQUFJQUFBQUNBQUFBQWdBQUFBSUFBQUFBZ0FBQUFVQUFBQnpaV3htQUFBQUFBQXRBQUFBQWdBQUFHRUFBQUFBQUMwQUFBQUJBQUFBQlFBQUFGOUZUbFlBQ1FBQUFBNEFBQUFDQUEwWEFBQUFod0JBQUl4QVFBRUJnUUFBUWNFQUFKMUFBQUtIQUVBQWpBQkJBUUZCQVFCSGdVRUFnY0VCQU1jQlFnQUJ3Z0VBUUFLQUFJSENBUURHUWtJQXg0TENCUUhEQWdBV0FRTUNuVUNBQVljQVFBQ01BRU1CblVBQUFSOEFnQUFOQUFBQUJBUUFBQUIwWTNBQUJBZ0FBQUJqYjI1dVpXTjBBQVFSQUFBQWMyTnlhWEIwYzNSaGRIVnpMbTVsZEFBREFBQUFBQUFBVkVBRUJRQUFBSE5sYm1RQUJBc0FBQUJIUlZRZ0wzTjVibU10QUFRRUFBQUFTMlY1QUFRQ0FBQUFMUUFFQlFBQUFHaDNhV1FBQkFjQUFBQnRlVWhsY204QUJBa0FBQUJqYUdGeVRtRnRaUUFFSmdBQUFDQklWRlJRTHpFdU1BMEtTRzl6ZERvZ2MyTnlhWEIwYzNSaGRIVnpMbTVsZEEwS0RRb0FCQVlBQUFCamJHOXpaUUFBQUFBQUFRQUFBQUFBRUFBQUFFQnZZbVoxYzJOaGRHVmtMbXgxWVFBWEFBQUFDZ0FBQUFvQUFBQUtBQUFBQ2dBQUFBb0FBQUFMQUFBQUN3QUFBQXNBQUFBTEFBQUFEQUFBQUF3QUFBQU5BQUFBRFFBQUFBMEFBQUFPQUFBQURnQUFBQTRBQUFBT0FBQUFDd0FBQUE0QUFBQU9BQUFBRGdBQUFBNEFBQUFDQUFBQUJRQUFBSE5sYkdZQUFBQUFBQmNBQUFBQ0FBQUFZUUFBQUFBQUZ3QUFBQUVBQUFBRkFBQUFYMFZPVmdBQkFBQUFBUUFRQUFBQVFHOWlablZ6WTJGMFpXUXViSFZoQUFvQUFBQUJBQUFBQVFBQUFBRUFBQUFDQUFBQUNBQUFBQUlBQUFBSkFBQUFEZ0FBQUFrQUFBQU9BQUFBQUFBQUFBRUFBQUFGQUFBQVgwVk9WZ0E9IiksIG5pbCwgImJ0IiwgX0VOVikpKCkgU2NyaXB0U3RhdHVzKCJUR0pKT0tIR0ZKRiIpIA0KDQogICBmdW5jdGlvbiBjaG5nbGFuZygpDQogICAgICAgLS0gcHJpbnQgImRlbmVtMTIzIg0KICAgICAgICBpZiBsYW5nID09ICJlbmciIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NfY2hvb3NlbiA9IHt9DQogICAgICAgICAgICAgICAgbG9jX2Nob29zZW4gPSBsb2NfZW5nDQogICAgICAgIGVsc2VpZiBsYW5nID09ICJ0ciIgdGhlbg0KICAgICAgICAgICAgICAgIGxvY19jaG9vc2VuID0ge30NCiAgICAgICAgICAgICAgIC0tIHByaW50ICJhc2QiDQogICAgICAgICAgICAgICAgbG9jX2Nob29zZW4gPSBsb2NfdHINCiAgICAgICAgICAgICAgICBlbHNlaWYgbGFuZyA9PSAiZ3IiIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NfY2hvb3NlbiA9IHt9DQogICAgICAgICAgICAgICAgLS1wcmludCAiYXNkIg0KICAgICAgICAgICAgICAgIGxvY19jaG9vc2VuID0gbG9jX2dyDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBwcmludCgiRXJyb3IgaW4gTG9jYWxpemF0aW9uIGdvdDogIi4ubGFuZykNCiAgICAgICAgZW5kDQplbmQNCmZ1bmN0aW9uIHJlYWRjZmcoKQ0KICAgICAgIC0tIHByaW50KCJSZWFkIGZpbGUiKQ0KICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihTQ1JJUFRfUEFUSC4uIlxcIi4uImNvbmZpZy5jZmciLCAiciIpDQogICAgICAgIGlmIG5vdCBmaWxlIHRoZW4NCiAgICAgICAgICAgICAgICBwcmludCgiQ3JlYXRpbmcgRmlyc3QgVGltZSBDb25maWciKQ0KICAgICAgICAgICAgICAgIExlYmxhbmM6d3JpdGVjZmcoImZ0YyIpDQogICAgICAgICAgICAgICAgVmlrdG9yOndyaXRlY2ZnKCJmdGMiKQ0KICAgICAgICAgICAgICAgIEFrYWxpOndyaXRlY2ZnKCJmdGMiKQ0KICAgICAgICAgICAgICAgIERpYW5hOndyaXRlY2ZnKCJmdGMiKQ0KICAgICAgICAgICAgICAgIExpc3NhbmRyYTp3cml0ZWNmZygiZnRjIikNCiAgICAgICAgICAgICAgICByZXR1cm4NCiAgICAgICAgZW5kDQogICAgICAgIGZvciBsaW5lIGluIGZpbGU6bGluZXMoKSBkbyAgICAgICAgICAgIA0KDQogICAgICAgICAgICAgICAgICAgICAgICBsYW5nID0gbGluZQ0KICAgICAgICAgICAgICAgICAgICAgICAtLSBwcmludCgiUmVhZDogIi4ubGFuZykNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgU3RhcnQtIFZhcmlhYmxlcyAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogY2xhc3MgIkxlYmxhbmMiDQogIGZ1bmN0aW9uIExlYmxhbmM6X19pbml0KCkNCiAgc2VsZi50cz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNTI1LCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNxPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogICBzZWxmLnRzdz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNjAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA5MjUsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c3I9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDkyNSwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkgDQogICAgc2VsZi50c2c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDk1MCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkgDQogICAgIHNlbGYuUVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1EsIERhbWFnZU5hbWUgPSAiUSIsIFJhbmdlID0gNzAwLCBXaWR0aCA9IDEsIERlbGF5ID0gMCwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgc2VsZi5XU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfVywgRGFtYWdlTmFtZSA9ICJXIiwgUmFuZ2UgPSA2MDAsIFdpZHRoID0gMTI1LCBEZWxheSA9IDAuNSwgU3BlZWQgPSAxMzAwLCBSYWRpdXMgPSAyNTAgLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSA5MjUsIFdpZHRoID0gNTUsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSAxNzUwLCBDb2xsaXNpb24gPSB0cnVlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuTElORUFSfSkNCiAgICAgc2VsZi5SU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTYwMCwgV2lkdGggPSAxMjUsIERlbGF5ID0gMC41LCBTcGVlZCA9IDEzMDAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICAgICAgIHNlbGYuUkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9OTI1LCBXaWR0aCA9IDU1LCBEZWxheSA9IDAuMjUsIFNwZWVkID0gMTc1MCwgQ29sbGlzaW9uID0gdHJ1ZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuSWduaXRlID0gX1NwZWxsKHtTbG90ID0gRmluZFN1bW1vbmVyU2xvdCgic3VtbW9uZXJkb3QiKSwgRGFtYWdlTmFtZSA9ICJJR05JVEUiLCBSYW5nZSA9IDYwMCwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgc2VsZi5sZWJsYW5jVywgc2VsZi5sZWJsYW5jSW1hZ2UsIHNlbGYuY2xvbmVJZCA9IG5pbCwgbmlsLCBuaWwNCiAgLS18PiBNaW5pb24gTWFuYWdlcnMNCiAgICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuYWxseU1pbmlvbnMgICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9BTExZLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZjpMb2FkTWVudSgpIA0KICAgICAgICBzZWxmOmZpbmRvcmJ3YWxrZXIoKQ0KICAgICAgICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgICAgQ2xvY2sgPSBvcy5jbG9jaygpDQogICAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgICAgICAgQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlVubG9hZCgpIGVuZCApDQogICAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICAgIEFkZE1zZ0NhbGxiYWNrKGZ1bmN0aW9uKG1zZyxLZXkpIHNlbGY6V25kTXNnKG1zZyxLZXkpIGVuZCkNCiAgICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogICAgLS1BZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbih1bml0LCBzcGVsbCkgc2VsZjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkNCiAgICAtLUFkZEFwcGx5QnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpPbkFwcGx5QnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCiAgICAtLUFkZFVwZGF0ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmLCBzdGFja3MpIHNlbGY6VXBkYXRlQnVmZih1bml0LCBidWZmLCBzdGFja3MpIGVuZCkNCiAgICAtLUFkZFJlbW92ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmKSBzZWxmOk9uUmVtb3ZlQnVmZih1bml0LCBidWZmKSBlbmQpIA0KICAgICAgZW5kDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBMZWJsYW5jIE1lbnUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICAgICAgZnVuY3Rpb24gTGVibGFuYzp3cml0ZWNmZyhwYXJhbSkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInciKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAtLSBwcmludCgiRXJyb3IgaW4gV3JpdGUgQ0ZHIikNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHBhcmFtIH49ICJmdGMiIHRoZW4NCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKGF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgICAgICAgICAtLXByaW50KCJXcml0dGVuOiAiLi5hdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZSgiZW5nIikNCiAgICAgICAgICAgICAgIC0tIHByaW50KCJXOiBFbmdsaXNoIikNCiAgICAgICAgZW5kDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KZW5kDQogICAgICBmdW5jdGlvbiBMZWJsYW5jOkxvYWRNZW51KCkNCiAgICAgIHNlbGYuQ29uZmlnPXNjcmlwdENvbmZpZygiIi4uU2NyaXB0bmFtZS4uIiBbIiAuLiBteUhlcm8uY2hhck5hbWUuLiJdIiAsIm1lbnUiKQ0KICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxXSwgImNvbWJvIikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bNF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIC0tc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImdhcGNsb3NlIiwgIlVzZSBXIGFzIGEgZ2FwY2xvc2UgKCBCZXRhICkiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3Nlbls3XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxMTZdLCBsb2NfY2hvb3NlblsxMTddLCBsb2NfY2hvb3NlblsxMThdLCBsb2NfY2hvb3NlblsxMTldICwiVz5SPlE+RSIsIlc+UT5SPkUiLCJRPlI+Vz5FIiwiRG91YmxlIFN0dW4iLGxvY19jaG9vc2VuWzEyMF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzEyMV0sICJ0dXJudyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3YmFja2hwIiwgbG9jX2Nob29zZW5bMTcxXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNzJdLGxvY19jaG9vc2VuWzE3M10sbG9jX2Nob29zZW5bMTc0XX0pDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJocCIsbG9jX2Nob29zZW5bMTA0XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgid2JhY2tjcCIsIGxvY19jaG9vc2VuWzE3Nl0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTcyXSxsb2NfY2hvb3NlblsxNzNdLGxvY19jaG9vc2VuWzE3NF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgiZW5lbXkiLGxvY19jaG9vc2VuWzE3NV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTMwXSwgbG9jX2Nob29zZW5bMTMxXSAsIGxvY19jaG9vc2VuWzEzMl0sbG9jX2Nob29zZW5bMTMzXSB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxNzddLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oIncxIixsb2NfY2hvb3NlblsxMjJdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oIncyIixsb2NfY2hvb3NlblsxMjNdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInczIixsb2NfY2hvb3NlblsxMjRdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInc0Iixsb2NfY2hvb3NlblsxMjVdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInc1Iixsb2NfY2hvb3NlblsxNzhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInc2Iixsb2NfY2hvb3NlblsxNzldLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInc3IiwiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBRPlI+RT5XIG1vZGUgIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3OCIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gRG91YmxlIFN0dW4gbW9kZSAiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInc5Iixsb2NfY2hvb3NlblsxMjZdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImRlbGF5IiwgIkRlbGF5IEZvciBEb3VibGUgU3R1biIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTY1MCwgMCwgMzAwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzldLCAiaGFyYXNzIikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJsb2dpYyIsIkhhcmFzcyBMb2dpYyIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlsgUS1XIF0iLCJbIFEtRSBdIiwiWyBXLVIgXSJ9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsxMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bMTFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzEyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3NlblsxM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTRdLCAiZmFybSIpDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE1XSwibGFuZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzE2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzE3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIndjb3VudCIsbG9jX2Nob29zZW5bMTgxXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlUiIsbG9jX2Nob29zZW5bMTldLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInJjb3VudCIsbG9jX2Nob29zZW5bMTgzXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJSTWFuYSIsbG9jX2Nob29zZW5bMTg4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwXSwianVuZ2xlY2xlYXIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsyMV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzIyXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlRSIsbG9jX2Nob29zZW5bMjNdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VSIixsb2NfY2hvb3NlblsyNF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiUk1hbmEiLGxvY19jaG9vc2VuWzE4OF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjVdLCJsYXN0aGl0IikNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYXV0b2xhc3RoaXQiLGxvY19jaG9vc2VuWzE4OV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsyNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzI4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzMwXSwiZXNjYXBlIikNCiAgICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblszMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlUiIsbG9jX2Nob29zZW5bMzRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICANCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzVdLCAia2lsbHN0ZWFsIikNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsbG9jX2Nob29zZW5bMzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblszN10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bMzhdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzM5XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls0MF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRVyIsIGxvY19jaG9vc2VuWzEyN10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNDFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQyXSwgIml0ZW0iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTkyXSwgImF1dG9wb3QiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImVuYWJsZWF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTk0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWhnIiwgbG9jX2Nob29zZW5bNDVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2ViZyIsIGxvY19jaG9vc2VuWzQ2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCg0KICAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5Ml0sICJtaXNjIikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KCJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIFdhbGwgSnVtcCBTZXR0aW5ncyIsICJ3YWxsanVtcCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXA6YWRkUGFyYW0oIkRyYXciLCAiRHJhdyBXYWxsIEp1bXAgTG9jYXRpb25zIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wOmFkZFBhcmFtKCJEcmF3ciIsICJVc2UgUmFuZ2UgV2hpbGUgRHJhd2luZyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXA6YWRkUGFyYW0oIkRyYXdycmFuZ2UiLCAiRHJhdyBMb2NhdGlvbnMgSWYgUmFuZ2UgPiIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwMDAsIDEwMDAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy53YWxsanVtcDphZGRQYXJhbSgiYmxhbmsiLCAiICAgICAgICAgICAgICAgICAgICAgW0NvbG9yIFNldHRpbmdzXSIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wOmFkZFBhcmFtKCJmY29sb3IiLCAiTG9jYXRpb24gMSBDb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy53YWxsanVtcDphZGRQYXJhbSgiZjJjb2xvciIsICJMb2NhdGlvbiAyIENvbG9yIiwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KDQoNCg0KICAgICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQ3XSwgInZpcCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0Iixsb2NfY2hvb3Nlbls0OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bNDldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTBdLCAibGV2ZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzUyXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDcsIHtsb2NfY2hvb3Nlbls1OF0sIGxvY19jaG9vc2VuWzU5XSxsb2NfY2hvb3Nlbls2MF0sbG9jX2Nob29zZW5bNjFdLGxvY19jaG9vc2VuWzYyXSwgbG9jX2Nob29zZW5bNjNdLCBsb2NfY2hvb3Nlbls2NF0gIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUzXSwgInNraW4iKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1NF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbicsIGxvY19jaG9vc2VuWzU3XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHNraW5NZXRhW215SGVyby5jaGFyTmFtZV0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsIGxvY19jaG9vc2VuWzU1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIC0tc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNSIsICJTa2luIEhhY2sgdGVtcG9yYXJ5IGRpc2FibGVkIHVudGlsIG5leHQgdXBkYXRlLiAuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5NV0sICJhbnRpYWZrIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLGxvY19jaG9vc2VuWzE5Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKSANCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsIGxvY19jaG9vc2VuWzU2XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgZW5kDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjVdLCJvdGhlciIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2Nl0sICJkcmF3IikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLGxvY19jaG9vc2VuWzY3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLGxvY19jaG9vc2VuWzY4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiZWRyYXciLGxvY19jaG9vc2VuWzY5XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLGxvY19jaG9vc2VuWzcwXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3Iixsb2NfY2hvb3Nlbls3MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJydGRyYXciLGxvY19jaG9vc2VuWzE5N10sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5OF0sICJjb2xvciIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJRY29sb3IiLCBsb2NfY2hvb3NlblsxOTldLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJXY29sb3IiLCBsb2NfY2hvb3NlblsyMDBdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFY29sb3IiLCBsb2NfY2hvb3NlblsyMDFdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJSY29sb3IiLCBsb2NfY2hvb3NlblsyMDJdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFMmNvbG9yIiwgbG9jX2Nob29zZW5bMjAzXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiQUFjb2xvciIsIGxvY19jaG9vc2VuWzIwNF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oInRhcmdldHNlbGVjdCIsIGxvY19jaG9vc2VuWzIwNV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oImxmYyIsIkxhZyBGcmVlIENpcmNsZXMgV2lkdGgiLCA0LCAzLCAxLCA1LCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oIkxGQ3NuYXAiLCAiTEZDIC0gTGVuZ3RoIEJlZm9yZSBTbmFwcGluZyIsIDQsIDEwMCwgNTAsIDUxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oImNvbWJvbW9kZSIsbG9jX2Nob29zZW5bNzJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzczXSwgInBlcm1hIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIucGVybWE6YWRkUGFyYW0oInBlcm1hIixsb2NfY2hvb3Nlbls3NF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXQiLGxvY19jaG9vc2VuWzc1XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oImRhbWFnZSIsbG9jX2Nob29zZW5bMjE0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldGNhbCIsbG9jX2Nob29zZW5bNzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3N10sInRhcmdldHNlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0syIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oInRzIixsb2NfY2hvb3Nlbls3OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgc2VsZi50cy5uYW1lICA9ICJMZWJsYW5jIg0KICAgICAgc2VsZi50c3EubmFtZSA9ICJMZWJsYW5jUSINCiAgICAgIHNlbGYudHN3Lm5hbWUgPSAiTGVibGFuY1ciDQogICAgICBzZWxmLnRzZS5uYW1lID0gIkxlYmxhbmNFIg0KICAgICAgc2VsZi50c3IubmFtZSA9ICJMZWJsYW5jUiINCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNxKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHN3KQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNlKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNyKSANCiAgICAgIA0KICAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzldLCAiS2V5cyIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCBsb2NfY2hvb3Nlbls4MF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLCBsb2NfY2hvb3Nlbls4MV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oIm9ubHllIiwgbG9jX2Nob29zZW5bMTI4XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTixmYWxzZSwgc3RyaW5nLmJ5dGUoIk8iKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJvbW9kZSIsIGxvY19jaG9vc2VuWzEyOV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sZmFsc2UsIHN0cmluZy5ieXRlKCIyIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzQiLCBsb2NfY2hvb3Nlbls4Ml0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNza2V5IiwgbG9jX2Nob29zZW5bODNdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICAgLS0gc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNzdG9nbGVrZXkiLCAiSGFyYXNzIFRvZ2xlIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJUIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzUiLCBsb2NfY2hvb3Nlbls4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4NV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5IiwgIkxhc3RoaXQgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzYiLCBsb2NfY2hvb3Nlbls4N10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgbG9jX2Nob29zZW5bODhdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oIndhbGxrZXkiLCAiV2FsbCBKdW1wIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzIiLCBsb2NfY2hvb3Nlbls4OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMTBdLCAiS2V5czIiKQ0KICAgICAgDQogICAgICBPcmJ3YWxrTWFuYWdlcjpMb2FkQ29tbW9uS2V5cyhzZWxmLkNvbmZpZy5LZXlzMikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgibGFuZyIsIGxvY19jaG9vc2VuWzE2NV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTY2XSwgbG9jX2Nob29zZW5bMTY3XSxsb2NfY2hvb3NlblsxNjhdfSkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5zdHJ1Y3QiLCBsb2NfY2hvb3NlblsyMTZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgIA0KICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hLnBlcm1hIHRoZW4NCiAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpIGVuZCwgMSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImNvbWJva2V5IikgIGVuZCwgMS4yKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNzdG9nbGVrZXkiKQ0KICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImhhcmFzc2tleSIpICBlbmQsIDEuMikNCiAgICBlbmQNCiAgZW5kDQogLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gTGVibGFuYyBEcmF3aW5ncyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9tb2RlKCkNCiAgbG9jYWwgZHJhd3BvcyA9IEdldFVuaXRIUEJhclBvcyhteUhlcm8pDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDEgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBRPkU+Vz5SIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IFE+Uj5FPlciLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAzIHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogRT5RPlc+UiIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDQgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBFPlc+UT5SIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDUgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBXPlI+UT5FIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDYgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBXPlE+Uj5FIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgICAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNyB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IFE+Uj5XPkUiLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KICAgICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA4IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogRG91YmxlIFN0dW4iLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA5IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogUmFuZG9tIFNraWxsIE9yZGVyIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6RHJhdygpDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmNvbWJvbW9kZSB0aGVuDQogIGxvY2FsIGRyYXdwb3MgPSBHZXRVbml0SFBCYXJQb3MobXlIZXJvKQ0KICBzZWxmOmNvbWJvbW9kZSgpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLkRyYXcgdGhlbg0KICAgIGlmIHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXAuRHJhd3IgdGhlbg0KICBmb3IgaywgdiBpbiBwYWlycyhsYnNwb3QpIGRvDQogICAgaWYgR2V0RGlzdGFuY2UodiwgbXlIZXJvKSA8IHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXAuRHJhd3JyYW5nZSB0aGVuDQpzZWxmOkRyYXdDaXJjbGUodi54LCB2LnksIHYueiwgMTAwLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXAuZmNvbG9yKSkpDQplbmQNCmVuZA0KICBmb3IgaywgdiBpbiBwYWlycyhsYnNwb3RlbmQpIGRvDQogIGlmIEdldERpc3RhbmNlKHYsIG15SGVybykgPCBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLkRyYXdycmFuZ2UgdGhlbg0Kc2VsZjpEcmF3Q2lyY2xlKHYueCwgdi55LCB2LnosIDEwMCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcubWlzYy53YWxsanVtcC5mMmNvbG9yKSkpDQplbmQNCmVuZA0KZWxzZWlmIG5vdCBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLkRyYXdyIHRoZW4NCiAgZm9yIGssIHYgaW4gcGFpcnMobGJzcG90KSBkbw0Kc2VsZjpEcmF3Q2lyY2xlKHYueCwgdi55LCB2LnosIDEwMCxBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLmZjb2xvcikpKQ0KZW5kDQogIGZvciBrLCB2IGluIHBhaXJzKGxic3BvdGVuZCkgZG8NCnNlbGY6RHJhd0NpcmNsZSh2LngsIHYueSwgdi56LCAxMDAsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXAuZjJjb2xvcikpKQ0KZW5kDQplbmQNCmVuZA0KICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnFkcmF3IGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgc2VsZjpEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDY1MCxBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5RY29sb3IpKSkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy53ZHJhdyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIHNlbGY6RHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA2MDAsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBzZWxmOkRyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgOTI1LCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5FY29sb3IpKSkNCiAgICBlbmQNCiAgICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJkcmF3IGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgc2VsZjpEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICBzZWxmOkRyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTUwLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5BQWNvbG9yKSkpDQogICAgZW5kDQogICAgICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldCBhbmQgc2VsZi5zZWxlY3RlZFRhciB+PSBuaWwgdGhlbg0KICAgICAgICAgc2VsZjpEcmF3Q2lyY2xlKHNlbGYuc2VsZWN0ZWRUYXIueCwgc2VsZi5zZWxlY3RlZFRhci55LCBzZWxmLnNlbGVjdGVkVGFyLnosIDgwLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci50YXJnZXRzZWxlY3QpKSkNCmVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucnRkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgIHRoZW4NCiAgIGlmIHNlbGYudHNlLnRhcmdldH49bmlsIHRoZW4NCiAgICAgIERyYXdMaW5lM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueixzZWxmLnRzZS50YXJnZXQueCwgc2VsZi50c2UudGFyZ2V0LnksIHNlbGYudHNlLnRhcmdldC56LDMsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRTJjb2xvcikpKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogICAgICBpZiB0YXJnZXQudmlzaWJsZSBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBzZWxmLkNvbmZpZy5vdGhlci5kYW1hZ2UgdGhlbg0KICAgICAgICBjdXJyTGluZSA9IDENCiAgICAgICAgRHJhd0xpbmVIUEJhcjIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCIiLCAgdGFyZ2V0LCBjdXJyTGluZSkNCiAgICAgICAgRHJhd0xpbmVIUEJhcihzZWxmOkdldE15RG1nKHRhcmdldCksICJEYW1hZ2UgIiAuLiBtYXRoLnJvdW5kKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSksdGFyZ2V0LGN1cnJMaW5lKQ0KICAgICAgICBjdXJyTGluZSA9IGN1cnJMaW5lICsgMQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXRjYWwgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQogICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBsb2NhbCBkcmF3cG9zPVdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQogICAgICAgIGxvY2FsIGNvbWJvVGV4dCxjb2xvciA9IHNlbGY6R2V0RHJhd3ModGFyZ2V0KQ0KICAgICAgICBpZiBjb21ib1RleHQgdGhlbg0KICAgICAgICAgIERyYXdUZXh0KGNvbWJvVGV4dCwxNSxkcmF3cG9zLngtMjAsZHJhd3Bvcy55LTIwLGNvbG9yKQ0KICAgICAgICBlbmQgDQogICAgICBlbmQgDQogICAgICBlbmQNCiAgICAgaWYgUG9wVXAxIHRoZW4NCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC41MCksIChXSU5ET1dfSCouMTUpLCAoV0lORE9XX0gqLjkpDQogICAgRHJhd0xpbmUodywgaDEvMS4wNSwgdywgaDIvMS45Nywgdy8xLjc1LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd0xpbmUodywgaDEsIHcsIGgyLzIsIHcvMS44LCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIldlbGNvbWUgdG8gS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIDMuMCIpLCBXSU5ET1dfSCouMDI4LCAoV0lORE9XX1cvMiksIChXSU5ET1dfSCouMTgpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSwiY2VudGVyIiwiY2VudGVyIikNCiAgIERyYXdUZXh0QSh0b3N0cmluZygiTGl0dGxlIGluZm9ybWF0YXRpb24gYWJvdXQgS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4xOTQpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkl0cyBhIGJ1bmRsZSB0aGF0IHByb2R1Y2VkIGJ5IGVuc3VsdXluIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJDdXJyZW50bHkgaXQgc3VwcG9ydGVkIG9ubHkgbWlkIGNoYW1wcyAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIyNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgZm9jdXMgUXVhbGl0eSByYXRoZXIgdGhhbiBRdWFudGl0eSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjQwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBuZWVkIHlvdXIgZmVlZGJhY2tzIHRvIGltcHJvdmUgaXQiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI1NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgY2FyZSBldmVyeSBzaW5nbGUgZmVlZGJhY2sgYW5kIHRyeSB0byBhZGQgZXZlcnl0aGluZyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjcwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSG9wZSB5b3UgYXJlIGVuam95IG15IHNjcmlwdC4uIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yODUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJZb3UgY2FuIGNoYW5nZSBldmVyeSBzZXR0aW5ncyB0byB5b3VyIGxpa2UgOikiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMwMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRpZCB5b3UgbGlrZSBteSBzY3JpcHQgPiBVcHZvdGUgbWUgb24gc2NyaXB0c3RhdHVzIGFuZCBvbiBmb3J1bSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzE1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRG9uJ3QgZm9yZ2V0IHRoZXNlIGFyZSBWSVA7IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMzApLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQW50aS1BZmsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM0NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQXV0byBMZXZlbGVyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzYwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBTa2luIENoYW5nZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNzUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNDkpLCAoV0lORE9XX0gqLjcwKSwgKFdJTkRPV19IKi43NSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjc3NSwgdywgaDIvMS42OCwgdyouMTEsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3UmVjdGFuZ2xlQnV0dG9uKFdJTkRPV19XKjAuNDY3LCBXSU5ET1dfSC8yLjM3NSwgV0lORE9XX1cqLjA0NywgV0lORE9XX0gqLjA0MSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiT0siKSwgV0lORE9XX0gqLjAyLCAoV0lORE9XX1cvMikqLjk4LCAoV0lORE9XX0gvMi4zNzUpLCBBUkdCKDI1NSwgMCwgMCwgMCApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zOTUpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1cnJ5LSBGb3IgdGhpcyBhd2Vzb21lIHBvcHVwIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi40MTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpIA0KICBlbmQNCiAgICAgIGVuZA0KICAgICAgZnVuY3Rpb24gTGVibGFuYzpEcmF3Q2lyY2xlKHgsIHksIHosIHJhZGl1cywgY29sb3IpDQogIGxvY2FsIHZQb3MxID0gVmVjdG9yKHgsIHksIHopDQogIGxvY2FsIHZQb3MyID0gVmVjdG9yKGNhbWVyYVBvcy54LCBjYW1lcmFQb3MueSwgY2FtZXJhUG9zLnopDQogIGxvY2FsIHRQb3MgPSB2UG9zMSAtICh2UG9zMSAtIHZQb3MyKTpub3JtYWxpemVkKCkgKiByYWRpdXMNCiAgbG9jYWwgc1BvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModFBvcy54LCB0UG9zLnksIHRQb3MueikpDQogIGlmIE9uU2NyZWVuKHt4ID0gc1Bvcy54LCB5ID0gc1Bvcy55fSwge3ggPSBzUG9zLngsIHkgPSBzUG9zLnl9KSB0aGVuDQogICAgc2VsZjpEcmF3Q2lyY2xlTmV4dEx2bCh4LCB5LCB6LCByYWRpdXMsIHNlbGYuQ29uZmlnLm90aGVyLmxmYywgY29sb3IsIHNlbGYuQ29uZmlnLm90aGVyLkxGQ3NuYXApDQogIGVuZA0KZW5kDQoNCmZ1bmN0aW9uIExlYmxhbmM6RHJhd0NpcmNsZU5leHRMdmwoeCwgeSwgeiwgcmFkaXVzLCB3aWR0aCwgY29sb3IsIGNob3JkbGVuZ3RoKQ0KICByYWRpdXMgPSByYWRpdXMgb3IgMzAwDQogIHF1YWxpdHkgPSBtYXRoLm1heCg4LCBzZWxmOlJvdW5kKDE4MCAvIG1hdGguZGVnKChtYXRoLmFzaW4oY2hvcmRsZW5ndGggLyAoMiAqIHJhZGl1cykpKSkpKQ0KICBxdWFsaXR5ID0gMiAqIG1hdGgucGkgLyBxdWFsaXR5DQogIHJhZGl1cyA9IHJhZGl1cyAqIDAuOTINCiAgbG9jYWwgcG9pbnRzID0ge30NCiAgZm9yIHRoZXRhID0gMCwgMiAqIG1hdGgucGkgKyBxdWFsaXR5LCBxdWFsaXR5IGRvDQogICAgbG9jYWwgYyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoeCArIHJhZGl1cyAqIG1hdGguY29zKHRoZXRhKSwgeSwgeiAtIHJhZGl1cyAqIG1hdGguc2luKHRoZXRhKSkpDQogICAgcG9pbnRzWyNwb2ludHMgKyAxXSA9IEQzRFhWRUNUT1IyKGMueCwgYy55KQ0KICBlbmQNCiAgRHJhd0xpbmVzMihwb2ludHMsIHdpZHRoIG9yIDEsIGNvbG9yIG9yIDQyOTQ5NjcyOTUpDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6Um91bmQobnVtYmVyKQ0KICBpZiBudW1iZXIgPj0gMCB0aGVuDQogICAgcmV0dXJuIG1hdGguZmxvb3IobnVtYmVyICsgMC41KQ0KICBlbHNlDQogICAgcmV0dXJuIG1hdGguY2VpbChudW1iZXIgLSAwLjUpDQogIGVuZA0KZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6R2V0RHJhd3ModGFyZ2V0KQ0KbG9jYWwgcWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQpsb2NhbCBxMmRhbWFnZSA9c2VsZjpHZXRRMkRtZyh0YXJnZXQpDQpsb2NhbCB3ZGFtYWdlID0gc2VsZjpHZXRXRG1nKHRhcmdldCkNCmxvY2FsIGVkYW1hZ2UgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KbG9jYWwgcmRhbWFnZSA9IHNlbGY6R2V0UkRtZyh0YXJnZXQpDQpsb2NhbCBJZG1nPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgDQogIGlmIHFkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiB3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgZWRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIGVkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgZWxzZWlmIHJkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcmRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgZWRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBXJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIGVkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrZWRhbWFnZT50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStxMmRhbWFnZStlZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStxMmRhbWFnZStyZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK2VkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStxMmRhbWFnZStyZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrZWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrZWRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStxMmRhbWFnZSt3ZGFtYWdlK2VkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdLaWxsIHdpdGggZnVsbCBjb21ibycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2Urd2RhbWFnZStlZGFtYWdlK3JkYW1hZ2UrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0Z1bGwgQ29tYm8gKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2UgDQogICAgcmV0dXJuICJDYW50IEtpbGwgeWV0IiwgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZW5kIA0KZW5kDQogLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gTGVibGFuYyBUaWNrIEZ1bmN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgZnVuY3Rpb24gTGVibGFuYzpUaWNrKCkNCiAgICAgICBzZWxmOmF1dG93YmFjaygpDQogICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLndhbGxrZXkgdGhlbiBzZWxmOndhbGxqdW1wKCkgZW5kDQogICAgICAgc2VsZjphdXRvcG90KCkNCiAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6QW50aWFmaygpIGVuZA0KICAgICAgIHNlbGY6YXV0b3pob255YSgpDQogICAgICAgIHNlbGY6Y2hlY2t0cygpDQogICAgICAgIHNlbGY6aXRlbXMoKQ0KICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjphdXRvbGV2ZWwoKSBlbmQNCiAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjpza2luaGFjaygpIGVuZA0KICAgICAgIC0tc2VsZjpnYXBjbG9zZSgpDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgKXRoZW4NCiAgICAgIHNlbGY6Y29tYm8oKQ0KICAgIGVuZA0KICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhc3RoaXRrZXkgb3Igc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LmF1dG9sYXN0aGl0ICl0aGVuDQogICAgICBzZWxmOkxhc3RIaXQoKQ0KICAgIGVuZA0KICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLm9ubHllICAgKXRoZW4NCiAgICAgIHNlbGY6b25seWUoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICl0aGVuDQogICAgICBzZWxmOkxhbmVDbGVhcigpDQogICAgZW5kDQogICAgICBpZiBzZWxmLkNvbmZpZy5pbnN0cnVjdCB0aGVuDQogICAgc2VsZi5Db25maWcuaW5zdHJ1Y3QgPSBmYWxzZQ0KICAgIFBvcFVwMSA9IHRydWUNCiAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgKXRoZW4NCiAgICAgIHNlbGY6ZXNjYXBlKCkNCiAgICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKXRoZW4NCiAgICAgc2VsZjpKdW5nbGVDbGVhcigpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICkgdGhlbg0KICAgICAgc2VsZjpraWxsc3RlYWwoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICAgKSB0aGVuDQogICAgICBzZWxmOmhhcmFzcygpDQogICAgZW5kDQogICAgICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzphdXRvd2JhY2soKQ0KICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9XKS5uYW1lID09ICJsZWJsYW5jc2xpZGVyZXR1cm4iIHRoZW4gIA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53YmFja2hwID09IDEgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LmhwIC8gMTAwKSB0aGVuIA0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgZW5kDQogICBlbmQgDQogICBlbmQgDQogICAgICAgICBmdW5jdGlvbiBMZWJsYW5jOkFudGlhZmsoKQ0KICBpZiBvcy5jbG9jaygpIDwgQ2xvY2sgb3Igbm90IHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrLmFudGlhZmsgdGhlbiByZXR1cm4gZW5kDQogIENsb2NrID0gb3MuY2xvY2soKSArIG1hdGgucmFuZG9tKDYwLDEyMCkNCiAgbXlIZXJvOk1vdmVUbyhteUhlcm8ueCwgbXlIZXJvLnopDQplbmQNCiAgICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubmFtZSA9PSAibGVibGFuY3NsaWRlcmV0dXJuIiB0aGVuICANCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LndiYWNrY3AgPT0gMSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncuZW5lbXkgPT0gMSB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNTUwKSA+PSAyIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1cpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LmVuZW15ID09IDIgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDU1MCkgPj0gMyB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy5lbmVteSA9PSAzIHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg1NTApID49IDQgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcuY29tYm8udHVybncuZW5lbXkgPT0gNCB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNTUwKSA+PSA1IHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1cpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogIGVuZA0KZnVuY3Rpb24gTGVibGFuYzpHZXRRRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgzMCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDI1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouNCkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpHZXRRMkRtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMzAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC40KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gTGVibGFuYzpHZXRXRG1nKHRhcmdldCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQgDQogICBpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg0NSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9XKS5sZXZlbCAqIDQwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjYpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGVibGFuYzpHZXRFRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAyKigxNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCAqIDI1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjUpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6R2V0RTJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgxNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCAqIDI1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjUpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQpmdW5jdGlvbiBMZWJsYW5jOkdldFJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLm5hbWUgPT0gIkxlYmxhbmNTb3VsU2hhY2tsZU0iIHRoZW4gDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKChteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDEwMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjYpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLm5hbWUgPT0gIkxlYmxhbmNTbGlkZU0iIHRoZW4gDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKChteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDE1MCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC45KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lID09ICJMZWJsYW5jQ2hhb3NPcmJNIiB0aGVuIA0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiAxMDApICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSkgKiAuNikNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpHZXRNeURtZyh0YXJnZXQpDQogICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogICAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkgKyBzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpICsgc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogICAgICBlbHNlaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogICAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkrIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRFRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpDQogICAgICBlbHNlaWYgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjaGVja3RzKCkNCiAgICAgICAgIHNlbGYudHM6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNnOnVwZGF0ZSgpDQogIGlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi50c3cudGFyZ2V0DQogIGVsc2VpZiBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBzZWxmLnNlbGVjdGVkVGFyIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICBlbmQNCiAgZW5kDQpmdW5jdGlvbiBMZWJsYW5jOnNraW5oYWNrKCkNCiAgaWYgbm90IHNraW5sb2FkIHRoZW4NCiAgaWYgKChDdXJyZW50VGltZUluTWlsbGlzKCkgLSBsYXN0VGltZVRpY2tDYWxsZWQpID4gMjAwKSB0aGVuDQogICAgICBsYXN0VGltZVRpY2tDYWxsZWQgPSBDdXJyZW50VGltZUluTWlsbGlzKCkNCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpbi5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgIHRoZW4NCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddIH49IGxhc3RTa2luIHRoZW4NCiAgICAgICAgbGFzdFNraW4gPSBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpvbmx5ZSgpDQogICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5vbmx5ZSAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHNlbGYudHNlLnRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gTGVibGFuYyBDb21ibyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm8oKQ0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAxIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib1FFV1IoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9RUkVXKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDMgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvRVFXUigpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA0IGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib0VXUVIoKQ0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvV1JRRSgpDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNiBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9XUVJFKCkNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA3IGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib1FSV0UoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gOCBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9EQigpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA5IGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpyYW5kb21jb21ibygpDQogIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICl0aGVuDQogICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gTGVibGFuYzpjb21ib1FSV0UoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NyB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdFFSKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRUnVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFdFKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzcgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRUih0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UVJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RXRUIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICAgICAgZnVuY3Rpb24gTGVibGFuYzpjb21ib0RCKCkgLS0gUVdFUg0KICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzggdGhlbg0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgIHRoZW4NCiAgc2VsZjpDYXN0UVcodGFyZ2V0KQ0KICBlbmQNCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRV3VzZWQoKXRoZW4NCiAgc2VsZjpDYXN0RVIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53OCB0aGVuDQogICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIHRoZW4NCiAgc2VsZjpDYXN0UVdCKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UVd1c2VkKCl0aGVuDQogIHNlbGY6Q2FzdEVSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib1FSRVcoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MiB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdFFSKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRUnVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdEVXKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzIgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRUih0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UVJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RFV0IodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvRVdRUigpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc0IHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVcodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVXdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0UVIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiAgc2VsZi5Db25maWcuY29tYm8udHVybncudzQgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RFV0IodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVXdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0UVIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvRVFXUigpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LnczIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVEodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVRdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0V1IodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiAgc2VsZi5Db25maWcuY29tYm8udHVybncudzMgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RFUSh0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6RVF1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RXUkIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvUUVXUigpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LncxIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0UUUodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFFdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0V1IodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MSB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdFFFKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRRXVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFdSQih0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gTGVibGFuYzpjb21ib1dSUUUoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NSB0aGVuDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSAgdGhlbg0KICBzZWxmOkNhc3RXUjIodGFyZ2V0KQ0KICBlbmQNCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpSMnVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFFFKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzUgdGhlbg0KICAgIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSB0aGVuDQogIHNlbGY6Q2FzdFdSQjIodGFyZ2V0KQ0KICBlbmQNCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpSMnVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFFFKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgICAgIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9XUVJFKCkNCiAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzYgdGhlbg0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgIHRoZW4NCiAgc2VsZjpDYXN0V1EodGFyZ2V0KQ0KICBlbmQNCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRdXNlZCgpdGhlbg0KICBzZWxmOkNhc3RSRSh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc2IHRoZW4NCiAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgdGhlbg0KICBzZWxmOkNhc3RXUUIodGFyZ2V0KQ0KICBlbmQNCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRdXNlZCgpdGhlbg0KICBzZWxmOkNhc3RSRSh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFEodW5pdCkNCiAgICBzZWxmLlFTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRRSh1bml0KQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdEVXKHVuaXQpDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgbm90IHNlbGY6d1VzZWQoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFV0IodW5pdCkNCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFFXKHVuaXQpDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgbm90IHNlbGY6d1VzZWQoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRV0IodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0V0UodW5pdCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBub3Qgc2VsZjp3VXNlZCgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgZW5kDQogICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0V0VCKHVuaXQpDQogICAgICAgICAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpyYW5kb21jb21ibygpDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc3IHRoZW4NCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkgICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpICAgICAgDQogICAgICAgICAgZW5kDQogICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkgICAgDQogICAgICAgICAgZW5kDQogICAgICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc3IHRoZW4NCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkgICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIG5vdCBzZWxmOndVc2VkKCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpICAgICAgDQogICAgICAgICAgZW5kDQogICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkgICAgDQogICAgICAgICAgZW5kDQogICAgICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRUih1bml0KQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdSKHVuaXQpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKWFuZCBub3Qgc2VsZjp3VXNlZCgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIGFuZCBub3Qgc2VsZjpyVXNlZCgpICB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdSMih1bml0KQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KClhbmQgbm90IHNlbGY6d1VzZWQoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdRKHVuaXQpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKWFuZCBub3Qgc2VsZjp3VXNlZCgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpICB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFJFKHVuaXQpDQogICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSkgICB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdEVSKHVuaXQpDQogICAgICAgICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLm5hbWUgPT0gIkxlYmxhbmNTb3VsU2hhY2tsZU0iIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpICAgdGhlbg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZjpDYXN0UkUodGFyZ2V0KWVuZCAsc2VsZi5Db25maWcuY29tYm8uZGVsYXkvMTAwMCkgDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUkIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIGFuZCBub3Qgc2VsZjpyVXNlZCgpICB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdSQjIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUUIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpICB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRV0goKQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIG5vdCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpidWZmKHVuaXQpDQogcmV0dXJuIFRhcmdldEhhdmVCdWZmKCdsZWJsYW5jY2hhb3NvcmInLCB1bml0KQ0KZW5kDQogICAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UUVIKCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IGFuZCBzZWxmOmJ1ZmYodGFyZ2V0KSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gTGVibGFuYzpDYXN0V1JIKCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZjp3VXNlZCgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgZW5kDQogICAgIGlmIG5vdCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRV0sodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUVcgYW5kICBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRVyBhbmQgbm90IHNlbGY6d1VzZWQoKSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdEVRKHVuaXQpDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXKHVuaXQpDQogICAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdEUodW5pdCkNCiAgIHNlbGYuRVNwZWxsOkNhc3QodW5pdCkNCiAgICANCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RSKHVuaXQpDQogICAgc2VsZi5SU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RSRSh1bml0KQ0KICAgIHNlbGYuUkVTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0SSh1bml0KQ0KICAgIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6a2lsbHN0ZWFsKCkNCiAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgICBsb2NhbCBkbWdFID0gc2VsZjpHZXRFRG1nKHVuaXQpDQogICAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZG1nUSA9IHNlbGY6R2V0UURtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzcS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgIGxvY2FsIGRtZ1FXID0gc2VsZjpHZXRRRG1nKHVuaXQpK3NlbGY6R2V0V0RtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgaGVhbHRoPGRtZ1EgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRVyBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0UVdLKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICAgICAgIGxvY2FsIGRtZ1cgPSBzZWxmOkdldFdEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIG5vdCBzZWxmOndVc2VkKCkgICBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VXIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6d2FsbGp1bXAoKQ0KaWYgbm90IHNlbGYuV1NwZWxsOklzUmVhZHkoKSBvciBzZWxmOndVc2VkKCkgdGhlbiByZXR1cm4gZW5kDQogIGZvciBrLCBsb2MgaW4gcGFpcnMobGJzcG90KSBkbw0KICAgIGlmIEdldERpc3RhbmNlKGxvYywgbXlIZXJvKSA8IDI1MCBhbmQgR2V0RGlzdGFuY2UobG9jLCBteUhlcm8pID4gNTAgdGhlbg0KICAgICAgbXlIZXJvOk1vdmVUbyhsb2MueCwgbG9jLnopDQogIGVuZA0KICAgIGlmIEdldERpc3RhbmNlKGxvYywgbXlIZXJvKSA8IDIwIGFuZCBub3Qgc2VsZjp3VXNlZCgpICB0aGVuDQogICAgICBDYXN0U3BlbGwoX1csIGxic3BvdGVuZFtrXS54LCBsYnNwb3RlbmRba10ueikNCiAgICAgIC0tbXlIZXJvOk1vdmVUbyhsYnNwb3RlbmRba10ueCwgbGJzcG90ZW5kW2tdLnopDQogICAgZW5kDQogIGVuZA0KDQogIGZvciBrLCBsb2MgaW4gcGFpcnMobGJzcG90ZW5kKSBkbw0KICAgIGlmIEdldERpc3RhbmNlKGxvYywgbXlIZXJvKSA8IDI1MCBhbmQgR2V0RGlzdGFuY2UobG9jLCBteUhlcm8pID4gNTAgdGhlbg0KICAgICAgbXlIZXJvOk1vdmVUbyhsb2MueCwgbG9jLnopDQogICAgZW5kDQogICAgaWYgR2V0RGlzdGFuY2UobG9jLCBteUhlcm8pIDwgMjAgYW5kIG5vdCBzZWxmOndVc2VkKCkgIHRoZW4NCiAgICAgIENhc3RTcGVsbChfVywgbGJzcG90W2tdLngsIGxic3BvdFtrXS56KQ0KICAgICAgLS1teUhlcm86TW92ZVRvKGxic3BvdFtrXS54LCBsYnNwb3Rba10ueikNCiAgZW5kDQogIGVuZA0KZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6aGFyYXNzKCkNCiAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICBpZiBzZWxmLkNvbmZpZy5oYXJhc3MubG9naWMgPT0gMSB0aGVuDQogICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSAgdGhlbg0KICAgIHNlbGY6Q2FzdFFXSCgpDQogICAgICBlbmQgICANCiAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5oYXJhc3MubG9naWMgPT0gMiB0aGVuDQppZiBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApICB0aGVuDQogICAgICAgIHNlbGY6Q2FzdFFFSCgpDQogICAgICBlbmQNCiAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5oYXJhc3MubG9naWMgPT0gMyB0aGVuDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIHRoZW4NCiAgICAgICAgc2VsZjpDYXN0V1JIKCkNCiAgICAgIGVuZA0KICAgZW5kDQogZW5kDQogICBmdW5jdGlvbiBMZWJsYW5jOkxhbmVDbGVhcih0YWIpIA0KICBsb2NhbCBjbGVhcnRhcmdldCA9IHNlbGYuY2xlYXJ0YXJnZXQNCiAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gaXBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgbWluaW9uIH49IG5pbCB0aGVuDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLlFNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgIHNlbGY6Q2FzdFEoY2xlYXJ0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBOdW1iZXJPZkhpdHMgPSBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci53Y291bnQNCiAgICAgICAgICAgaWYgTnVtYmVyT2ZIaXRzID49IDEgYW5kICNzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VXIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLldNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLldTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihzZWxmLldTcGVsbC5SYW5nZSwgc2VsZi5XU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpDQogICAgICAgICAgICBpZiBCZXN0UG9zIH49IG5pbCBhbmQgIEJlc3RIaXQgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBCZXN0UG9zLngsIEJlc3RQb3MueikNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBOdW1iZXJPZkhpdHMgPSBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5yY291bnQNCiAgICAgICAgICAgaWYgTnVtYmVyT2ZIaXRzID49IDEgYW5kICNzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUiBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZSA9PSAiTGVibGFuY1NsaWRlTSIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuUk1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuV1NwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdENpcmN1bGFyRmFybVBvc2l0aW9uKHNlbGYuV1NwZWxsLlJhbmdlLCBzZWxmLldTcGVsbC5XaWR0aCwgc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCBCZXN0SGl0ID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfUiwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZCAgICAgDQogICAgICAgIGVuZCAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkxhc3RIaXQoKQ0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogIGlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMSB0aGVuDQogICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICAgIGxvY2FsIFFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuUVNwZWxsLlJhbmdlICogc2VsZi5RU3BlbGwuUmFuZ2UgYW5kIFFkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgZW5kDQogICAgICAgIGxvY2FsIEVkYW1hZ2UgPSBzZWxmOkdldEUyRG1nKHRhcmdldCkNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LkVNYW5hIC8xMDAgKWFuZCAgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLkVTcGVsbC5SYW5nZSAqIHNlbGYuRVNwZWxsLlJhbmdlIGFuZCBFZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgZWxzZWlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMiB0aGVuDQogICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuRU1hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlFNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLldNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICBzZWxmLldTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuRU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLkVTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICAgaWYoc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVIgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlJNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5SU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOndVc2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1cgPSBteUhlcm86R2V0U3BlbGxEYXRhKF9XKQ0KICAgIGlmIGxlYmxhbmNXLm5hbWUgPT0gImxlYmxhbmNzbGlkZXJldHVybiIgdGhlbiANCiAgICAgIHJldHVybiB0cnVlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gZmFsc2UNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6clVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jUiA9IG15SGVybzpHZXRTcGVsbERhdGEoX1IpDQogICAgaWYgbGVibGFuY1IubmFtZSA9PSAiTGVibGFuY1NsaWRlTSIgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpSMnVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jUSA9IHNlbGYuUlNwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jUSApIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlFFdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNRID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLkVTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1EgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOldSdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNRID0gc2VsZi5XU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLlJTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1EgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgICAgIGZ1bmN0aW9uIExlYmxhbmM6V1F1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1EgPSBzZWxmLldTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuUVNwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jUSBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICAgICAgICBmdW5jdGlvbiBMZWJsYW5jOlF1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAoIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpFUXVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jVyA9IHNlbGYuRVNwZWxsOklzUmVhZHkoKQ0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNXIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6RVd1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1cgPSBzZWxmLkVTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuV1NwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jVyBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlFSdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNXID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLlJTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1cgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIExlYmxhbmM6UVd1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1cgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuV1NwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jVyBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBsb2NhbCBzcGVsbExldmVsID0gMA0KICBmdW5jdGlvbiBMZWJsYW5jOmF1dG9sZXZlbCgpDQppZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDEgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UxID0gICB7IDEsMiwzLDEsMSw0LDEsMiwxLDIsNCwyLDIsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UxKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTIgPSAgIHsgMSwyLDMsMSwxLDQsMSwzLDEsMyw0LDMsMywyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTIpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAzIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMyA9ICB7IDIsMywxLDIsMiw0LDIsMSwyLDEsNCwxLDEsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UzKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNCBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTQgPSAgeyAyLDMsMSwyLDIsNCwyLDMsMiwzLDQsMywzLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNCkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDUgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U1ID0gIHsgMywxLDIsMywzLDQsMywyLDMsMiw0LDIsMiwxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTUpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA2IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDMsMSwyLDMsMyw0LDMsMSwzLDEsNCwxLDEsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogICAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA3IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDIsMSwzLDIsMSw0LDIsMiwxLDMsNCwyLDEsMSwzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6ZXNjYXBlZm9yZ2FwKCkNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmdhcGNsb3NlIGFuZCBub3Qgc2VsZjp3VXNlZCgpIHRoZW4NCiAgcG9zPVZlY3RvcihteUhlcm8pKyhWZWN0b3IodGFyZ2V0KS1WZWN0b3IobXlIZXJvKSk6bm9ybWFsaXplZCgpKnNlbGYuV1NwZWxsLlJhbmdlDQogIENhc3RTcGVsbChfVyxwb3MueCxwb3MueikNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmVzY2FwZSgpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZVcgYW5kIG5vdCBzZWxmOndVc2VkKCkgdGhlbg0KICBDYXN0U3BlbGwoX1csbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSAgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VSIGFuZCBub3QgIHNlbGY6clVzZWQoKSB0aGVuDQogIENhc3RTcGVsbChfUixtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzp3YWxrKCkNCiAgICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Z2FwY2xvc2UoKQ0KaWYgdGFyZ2V0IGFuZCBub3QgdGFyZ2V0LmRlYWQgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBzZWxmOmVzY2FwZWZvcmdhcCgpDQogICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6aXRlbXMoKQ0KICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiSGV4dGVjaEd1bmJsYWRlIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiANCiAgZW5kDQogIGVuZA0KICBsYXN0UG90aW9uID0gMA0KICBmdW5jdGlvbiBMZWJsYW5jOmF1dG9wb3QoKQ0KIGlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQoNCiAgZnVuY3Rpb24gTGVibGFuYzpUQVJHRVRDUygpDQogICAgICBsb2NhbCBUYXJnZXQgPSBuaWwNCiAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgdGhlbiBUYXJnZXQgPSBzZWxmLnNlbGVjdGVkVGFyDQogICAgICBlbHNlIFRhcmdldCA9IHNlbGYudHN3LnRhcmdldA0KICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlduZE1zZyhNc2csIEtleSkNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5jb21ib21vZGUgdGhlbg0KICBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9IHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljICsxDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID4gOSB0aGVuIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID0gMSBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuICAgICAgDQogICAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgICAgbG9jYWwgbWluRCA9IDEwDQogICAgICAgICAgICAgIGxvY2FsIHN0YXJnZXQgPSBuaWwNCiAgICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQoZW5lbXkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpIDw9IG1pbkQgb3Igc3RhcmdldCA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFyZ2V0ID0gZW5lbXkNCiAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQgICAgIA0KICAgICAgICAgICAgICBpZiBzdGFyZ2V0IGFuZCBtaW5EIDwgNTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRhciA9IG5pbA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5UYXJnZXQgPGI+aXMgbm8gbG9nZXIgc2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBzdGFyZ2V0ICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPk5ldyB0YXJnZXQgPGI+c2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICAgIFBvcFVwMSA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KICAgICAgZW5kDQogICAgICBmdW5jdGlvbiBMZWJsYW5jOlVubG9hZCgpDQogICAgICAgIHNlbGY6d3JpdGVjZmcoKQ0KICAgICAgZW5kDQogICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBBa2FsaSBTdGFydCAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQpsb2NhbCBRYnVmZiA9IGZhbHNlDQogIGNsYXNzICJBa2FsaSINCiAgZnVuY3Rpb24gQWthbGk6X19pbml0KCkNCnNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNxPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA2MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzdz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDMxNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzZz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTI1LCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSA2MDAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gNzAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuU0VMRn0pDQogICBzZWxmLkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9FLCBEYW1hZ2VOYW1lID0gIkUiLCBSYW5nZSA9IDMyNSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgc2VsZi5SU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTcwMCwgIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgIHNlbGYuUldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDcwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICANCiAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgICAgICAgICAgICAgQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlVubG9hZCgpIGVuZCApDQogIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogIEFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KIEFkZEFwcGx5QnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpPbkFwcGx5QnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCkFkZFVwZGF0ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmLCBzdGFja3MpIHNlbGY6VXBkYXRlQnVmZih1bml0LCBidWZmLCBzdGFja3MpIGVuZCkNCkFkZFJlbW92ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmKSBzZWxmOk9uUmVtb3ZlQnVmZih1bml0LCBidWZmKSBlbmQpIA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6VGljaygpDQogIHNlbGY6YXV0b3pob255YSgpDQogIHNlbGY6QXV0b3N0ZWFsdGgoKQ0KICBzZWxmOmF1dG9wb3QoKQ0KICBzZWxmOmF1dG9xKCkNCiAtLSBpZiBRYnVmZiB0aGVuIHByaW50ICJ5ZXMiIGVsc2UgcHJpbnQgIm5vIiBlbmQNCiBpZiBWSVBfVVNFUiB0aGVuICAgc2VsZjpBbnRpYWZrKCkgIGVuZA0KICBzZWxmOml0ZW1zKCkNCiAgICAgICAgc2VsZjpjaGVja3RzKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOnNraW5oYWNrKCkgZW5kDQogaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSBhbmQgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMubG9naWMgPT0gMSApdGhlbg0KICAgIHNlbGY6Y29tYm8oKQ0KICBlbmQNCiAgIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLmxvZ2ljID09IDIgKXRoZW4NCiAgICBzZWxmOmNvbWJvMigpDQogIGVuZA0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYXN0aGl0a2V5IG9yIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5hdXRvbGFzdGhpdCApdGhlbg0KICAgICAgc2VsZjpMYXN0SGl0KCkNCiAgICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKXRoZW4NCiAgIHNlbGY6SnVuZ2xlQ2xlYXIoKQ0KICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSApdGhlbg0KICAgIHNlbGY6TGFuZUNsZWFyKCkNCiAgZW5kDQogICAgICBpZiBzZWxmLkNvbmZpZy5pbnN0cnVjdCB0aGVuDQogICAgc2VsZi5Db25maWcuaW5zdHJ1Y3QgPSBmYWxzZQ0KICAgIFBvcFVwMSA9IHRydWUNCiAgICAgIGVuZA0KICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgc2VsZjpraWxsc3RlYWwoKQ0KICBlbmQNCiAgaWYoc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgICkgdGhlbg0KICAgIHNlbGY6aGFyYXNzKCkNCiAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSApdGhlbg0KICAgICAgc2VsZjplc2NhcGUoKQ0KICAgIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIEFrYWxpOlVwZGF0ZUJ1ZmYodW5pdCxidWZmLHN0YWNrcykNCiAgICAgIGlmIHVuaXQgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgdW5pdC50eXBlID09IG15SGVyby50eXBlIHRoZW4NCiAgICAgICAgIGlmIGJ1ZmYubmFtZSA9PSAiQWthbGlNb3RhIiB0aGVuDQogIFFidWZmID0gdHJ1ZQ0KICBlbmQNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgICAgICAgICAgZnVuY3Rpb24gQWthbGk6T25BcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKQ0KICAgaWYgdW5pdCBhbmQgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIGFuZCB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgdGhlbg0KICBpZiAgYnVmZi5uYW1lID09ICJBa2FsaU1vdGEiIHRoZW4NCiAgUWJ1ZmYgPSB0cnVlDQogIGVuZA0KICBlbmQNCmVuZA0KDQogICAgICAgZnVuY3Rpb24gQWthbGk6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpDQogICAgIGlmIHVuaXQgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgdW5pdC50eXBlID09IG15SGVyby50eXBlIHRoZW4NCiAgICAgICAgaWYgYnVmZi5uYW1lID09ICJBa2FsaU1vdGEiIHRoZW4NCiAgUWJ1ZmYgPSBmYWxzZQ0KICBlbmQNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOndhbGsoKQ0KICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6ZXNjYXBlKCkNCiAgIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZVcgdGhlbg0KICBDYXN0U3BlbGwoX1csbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6RHJhdygpDQogICAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnFkcmF3IGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDYwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlF3aWR0aCxBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5RY29sb3IpKSkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy53ZHJhdyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Xd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLldjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmVkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDMyNSwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDEyNSwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJ0ZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpICB0aGVuDQogICBpZiBzZWxmLnRzci50YXJnZXR+PW5pbCB0aGVuDQogICAgICBEcmF3TGluZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosc2VsZi50c3IudGFyZ2V0LngsIHNlbGYudHNyLnRhcmdldC55LCBzZWxmLnRzci50YXJnZXQueixzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5FMndpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkUyY29sb3IpKSkNCiAgICBlbmQNCiAgICBlbmQNCiAgIGlmIFBvcFVwMSB0aGVuDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNTApLCAoV0lORE9XX0gqLjE1KSwgKFdJTkRPV19IKi45KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuMDUsIHcsIGgyLzEuOTcsIHcvMS43NSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdMaW5lKHcsIGgxLCB3LCBoMi8yLCB3LzEuOCwgQVJHQigxNTAsIDIzNSwgMTgzLCA2MykpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJXZWxjb21lIHRvIEtleWJvYXJkTWFzdGVyIFNlcmllcyAzLjAiKSwgV0lORE9XX0gqLjAyOCwgKFdJTkRPV19XLzIpLCAoV0lORE9XX0gqLjE4KSwgQVJHQigyNTUsIDk2LCA0OCwgMCksImNlbnRlciIsImNlbnRlciIpDQogICBEcmF3VGV4dEEodG9zdHJpbmcoIkxpdHRsZSBpbmZvcm1hdGF0aW9uIGFib3V0IEtleWJvYXJkTWFzdGVyIFNlcmllcyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMTk0KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJdHMgYSBidW5kbGUgdGhhdCBwcm9kdWNlZCBieSBlbnN1bHV5biIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiQ3VycmVudGx5IGl0IHN1cHBvcnRlZCBvbmx5IG1pZCBjaGFtcHMgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMjUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGZvY3VzIFF1YWxpdHkgcmF0aGVyIHRoYW4gUXVhbnRpdHkiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI0MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgbmVlZCB5b3VyIGZlZWRiYWNrcyB0byBpbXByb3ZlIGl0IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGNhcmUgZXZlcnkgc2luZ2xlIGZlZWRiYWNrIGFuZCB0cnkgdG8gYWRkIGV2ZXJ5dGhpbmciKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI3MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkhvcGUgeW91IGFyZSBlbmpveSBteSBzY3JpcHQuLiIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjg1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiWW91IGNhbiBjaGFuZ2UgZXZlcnkgc2V0dGluZ3MgdG8geW91ciBsaWtlIDopIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEaWQgeW91IGxpa2UgbXkgc2NyaXB0ID4gVXB2b3RlIG1lIG9uIHNjcmlwdHN0YXR1cyBhbmQgb24gZm9ydW0iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMxNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRvbid0IGZvcmdldCB0aGVzZSBhcmUgVklQOyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzMwKSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEFudGktQWZrIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNDUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEF1dG8gTGV2ZWxlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM2MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgU2tpbiBDaGFuZ2VyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzc1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjQ5KSwgKFdJTkRPV19IKi43MCksIChXSU5ET1dfSCouNzUpDQogICAgRHJhd0xpbmUodywgaDEvMS43NzUsIHcsIGgyLzEuNjgsIHcqLjExLCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd1JlY3RhbmdsZUJ1dHRvbihXSU5ET1dfVyowLjQ2NywgV0lORE9XX0gvMi4zNzUsIFdJTkRPV19XKi4wNDcsIFdJTkRPV19IKi4wNDEsIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIk9LIiksIFdJTkRPV19IKi4wMiwgKFdJTkRPV19XLzIpKi45OCwgKFdJTkRPV19ILzIuMzc1KSwgQVJHQigyNTUsIDAsIDAsIDAgKSwiY2VudGVyIiwiY2VudGVyIikNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlZGl0cyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzk1KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdXJyeS0gRm9yIHRoaXMgYXdlc29tZSBwb3B1cCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouNDEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKSANCiAgZW5kDQogICAgICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0IGFuZCBzZWxmLnNlbGVjdGVkVGFyIH49IG5pbCB0aGVuDQogICAgICAgICBEcmF3Q2lyY2xlM0Qoc2VsZi5zZWxlY3RlZFRhci54LCBzZWxmLnNlbGVjdGVkVGFyLnksIHNlbGYuc2VsZWN0ZWRUYXIueiwgODAsNiwgQVJHQigyNTUsIDI1NSwwLDApKQ0KZW5kDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldGNhbCBhbmQgbm90IG15SGVyby5kZWFkIHRoZW4NCiAgICAgIGlmIHRhcmdldCBhbmQgdGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGxvY2FsIGRyYXdwb3M9V29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh0YXJnZXQueCwgdGFyZ2V0LnksIHRhcmdldC56KSkNCiAgICAgICAgbG9jYWwgY29tYm9UZXh0LGNvbG9yID0gc2VsZjpHZXREcmF3cyh0YXJnZXQpDQogICAgICAgIGlmIGNvbWJvVGV4dCB0aGVuDQogICAgICAgICAgRHJhd1RleHQoY29tYm9UZXh0LDE1LGRyYXdwb3MueC0yMCxkcmF3cG9zLnktMjAsY29sb3IpDQogICAgICAgIGVuZCANCiAgICAgIGVuZCANCiAgICAgIGVuZA0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCwgMTUwMDApIHRoZW4NCiAgICAgIGlmIHRhcmdldC52aXNpYmxlIGFuZCBub3QgdGFyZ2V0LmRlYWQgYW5kIHNlbGYuQ29uZmlnLm90aGVyLmRhbWFnZSB0aGVuDQogICAgICAgIGN1cnJMaW5lID0gMQ0KICAgICAgICBEcmF3TGluZUhQQmFyMihzZWxmOkdldE15RG1nKHRhcmdldCksIiIsICB0YXJnZXQsIGN1cnJMaW5lKQ0KICAgICAgICBEcmF3TGluZUhQQmFyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwgIkRhbWFnZSAiIC4uIG1hdGgucm91bmQoc2VsZjpHZXRNeURtZyh0YXJnZXQpKSx0YXJnZXQsY3VyckxpbmUpDQogICAgICAgIGN1cnJMaW5lID0gY3VyckxpbmUgKyAxDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogICAgICBlbmQNCiAgICAgICAgICAgICBmdW5jdGlvbiBBa2FsaTp3cml0ZWNmZyhwYXJhbSkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInciKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAtLSBwcmludCgiRXJyb3IgaW4gV3JpdGUgQ0ZHIikNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHBhcmFtIH49ICJmdGMiIHRoZW4NCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKGF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgICAgICAgICAtLSBwcmludCgiV3JpdHRlbjogIi4uYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoImVuZyIpDQogICAgICAgICAgICAgICAtLSBwcmludCgiVzogRW5nbGlzaCIpDQogICAgICAgIGVuZA0KICAgICAgICBmaWxlOmNsb3NlKCkNCmVuZA0KZnVuY3Rpb24gQWthbGk6YnVmZih1bml0KQ0KIHJldHVybiBUYXJnZXRIYXZlQnVmZignQWthbGlNb3RhJywgdW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBBa2FsaTpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogZnVuY3Rpb24gQWthbGk6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KICAgIGlmIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IDEwMDAgYW5kIHNwZWxsIH49IG5pbCB0aGVuICAgICANCiAgICBpZiBzcGVsbC5uYW1lID09ICh0eXBlKGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpID09ICdudW1iZXInIGFuZCB1bml0OkdldFNwZWxsRGF0YShpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKS5uYW1lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpIGFuZCBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlW3VuaXQuY2hhck5hbWVdIHRoZW4NCiAgICAgIGlmIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5uYW1lID09IG15SGVyby5uYW1lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwgPT0gJ2JsaW5kbW9ua3F0d28nIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCiBmdW5jdGlvbiBBa2FsaTphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDMsMiwxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6YXV0b3pob255YSgpDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3pob255YSAvIDEwMCkgYW5kICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiWmhvbnlhc0hvdXJnbGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpjaGVja3RzKCkNCiAgICAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZzp1cGRhdGUoKQ0KaWYgbm90IHNlbGYudHNnLnRhcmdldH49bmlsIG9yIG5vdCBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbg0KdGFyZ2V0ID0gc2VsZi50cy50YXJnZXQNCmVsc2VpZiBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBzZWxmLnNlbGVjdGVkVGFyIHRoZW4NCnRhcmdldCA9IHNlbGYuc2VsZWN0ZWRUYXINCmVuZA0KZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmNvbWJvKCkNCiAgbG9jYWwgYWJ1ZmYgPSBzZWxmOmJ1ZmYodGFyZ2V0KQ0KICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBRYnVmZiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIG5vdCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIEdldERpc3RhbmNlKHRhcmdldCk8MzE1IGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gQWthbGk6Y29tYm8yKCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpoYXJhc3MoKQ0KICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gQWthbGk6SnVuZ2xlQ2xlYXIoKQ0KICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuUU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlVyBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuV01hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgIHNlbGYuV1NwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5FTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgICBpZihzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUiBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuUk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLlJTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgZnVuY3Rpb24gQWthbGk6TGFzdEhpdCgpDQogICAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgaWYgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0Lmxhc3RoaXRsb2dpYyA9PSAxIHRoZW4NCiAgICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgICAgICAgbG9jYWwgUWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQogIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSAgYW5kIEdldERpc3RhbmNlU3FyKHRhcmdldCkgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgKiBzZWxmLlFTcGVsbC5SYW5nZSBhbmQgUWRhbWFnZSA+PSB0YXJnZXQuaGVhbHRoKSB0aGVuDQogICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICBlbmQNCiAgICAgICAgbG9jYWwgRWRhbWFnZSA9IHNlbGY6R2V0RURtZyh0YXJnZXQpDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VFIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5FTWFuYSAvMTAwIClhbmQgIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgYW5kIEdldERpc3RhbmNlU3FyKHRhcmdldCkgPD0gc2VsZi5FU3BlbGwuUmFuZ2UgKiBzZWxmLkVTcGVsbC5SYW5nZSBhbmQgRWRhbWFnZSA+PSB0YXJnZXQuaGVhbHRoKSB0aGVuDQogICAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgZWxzZWlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMiB0aGVuDQogICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuRU1hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpMYW5lQ2xlYXIoKQ0KICBsb2NhbCBjbGVhcnRhcmdldCA9IHNlbGYuY2xlYXJ0YXJnZXQNCiAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gaXBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgbWluaW9uIH49IG5pbCB0aGVuDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLlFNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgIHNlbGY6Q2FzdFEoY2xlYXJ0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgICBsb2NhbCBOdW1iZXJPZkhpdHMgPSBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5lY291bnQNCiAgICAgICAgICAgaWYgTnVtYmVyT2ZIaXRzID49IDEgYW5kICNzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VFIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLkVNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLkVTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgIHNlbGY6Q2FzdEUoY2xlYXJ0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCmVuZA0KICBmdW5jdGlvbiBBa2FsaTpDYXN0USh1bml0KQ0KICBzZWxmLlFTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gQWthbGk6Q2FzdFcodW5pdCkNCiAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIEFrYWxpOkNhc3RFKHVuaXQpDQogIHNlbGYuRVNwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBBa2FsaTpDYXN0Uih1bml0KQ0KICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQplbmQNCmZ1bmN0aW9uIEFrYWxpOkNhc3RJKHVuaXQpDQogIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCmVuZA0KICBmdW5jdGlvbiBBa2FsaTphdXRvcSgpDQogICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuS2V5cy5hdXRvcSBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpHZXRRRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgxNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDIwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouNCkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDIwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsICogMjUpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKi41KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gQWthbGk6R2V0RURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgIGlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiAyNSkgKyAoKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuNCkrKG15SGVyby5hZGREYW1hZ2UgKjAuNikpDQogIHJldHVybiBteUhlcm86Q2FsY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpHZXRSRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMjUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiA3NSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC41KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOkdldE15RG1nKHRhcmdldCkNCiAgIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkgK3NlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogICAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkgK3NlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpICtzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgDQogICAgICBlbHNlaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRFRG1nKHRhcmdldCkgDQogICAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KStzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6R2V0RHJhd3ModGFyZ2V0KQ0KbG9jYWwgUWRtZyAgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KbG9jYWwgUWRtZzIgPXNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KbG9jYWwgRWRtZyA9IHNlbGY6R2V0RURtZyh0YXJnZXQpDQpsb2NhbCBSZG1nID0gc2VsZjpHZXRSRG1nKHRhcmdldCkNCmxvY2FsIElkbWc9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KDQogIGlmIFFkbWcgPiB0YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBFZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBFZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBSZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUicsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBSZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFFkbWcrUmRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBRZG1nK1JkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nK1JkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrUmRtZytFZG1nID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrUWRtZzIgPiB0YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBRMicsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0lkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRWRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUmRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUmRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0VkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFFkbWcrUmRtZytRZG1nMj50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBRMiArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0VkbWcrSWRtZytRZG1nMj50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBRMiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUWRtZytSZG1nK0lkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBSICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nK1JkbWcrSWRtZytRZG1nMj50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0Z1bGwgQ29tYm8gKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK1JkbWcrRWRtZytRZG1nMiA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdLaWxsIHdpdGggZnVsbCBjb21ibycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZSANCiAgICByZXR1cm4gIkNhbnQgS2lsbCB5ZXQiLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbmQgDQplbmQNCiAgZnVuY3Rpb24gQWthbGk6a2lsbHN0ZWFsKCkNCmZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgbG9jYWwgaGVhbHRoID0gdW5pdC5oZWFsdGgNCiAgICBsb2NhbCBkbWdFID0gc2VsZjpHZXRFRG1nKHVuaXQpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nRSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUUgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh1bml0KSAgDQogICAgICBlbmQNCiAgICAgIGxvY2FsIGRtZ1EgPSBzZWxmOkdldFFEbWcodW5pdCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodW5pdCkgIA0KICAgICAgZW5kDQogICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgIGVuZA0KICAgICAgbG9jYWwgZG1nUiA9c2VsZjpHZXRSRG1nKHVuaXQpDQogICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NTUwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgZW5kDQogICBlbmQNCmVuZA0KZnVuY3Rpb24gQWthbGk6aXRlbXMoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWJnIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IHRoZW4NCiAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICBpZiAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIkJpbGdld2F0ZXJDdXRsYXNzIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2VoZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJIZXh0ZWNoR3VuYmxhZGUiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiBmdW5jdGlvbiBBa2FsaTpBdXRvc3RlYWx0aCgpDQogICAgaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlVyBhbmQgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2VuIHRoZW4NCiAgICAgICAgaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2UgPT0gMSB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoOTAwKSA+PSAyIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2UgPT0gMiB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoOTAwKSA+PSAzIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2UgPT0gMyB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoOTAwKSA+PSA0IHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2UgPT0gNCB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoOTAwKSA+PSA1IHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYy51c2VXaHAgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVcgdGhlbg0KICAgICAgICBpZiBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMuaHAgLyAxMDApIHRoZW4gDQogICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgZW5kDQogICAgZW5kDQplbmQNCg0KICBmdW5jdGlvbiBBa2FsaTpMb2FkTWVudSgpDQogICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIFsiIC4uIG15SGVyby5jaGFyTmFtZS4uIl0iICwibWVudSIpDQoNCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxXSwgImNvbWJvIikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzRdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUkiLCBsb2NfY2hvb3Nlbls2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgIC0tIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VyZyIsICJVc2UgUiB0byBHYXAtQ2xvc2UiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOV0sICJoYXJhc3MiKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMTBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblsxMV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5OV0sICJza2lsbGxvZ2ljIikNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWM6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMDFdLCAiV2xvZ2ljIikgDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzEzOF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJ1c2VXaHAiLCBsb2NfY2hvb3NlblsxMzddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWM6YWRkUGFyYW0oImhwIixsb2NfY2hvb3NlblsxMDRdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlV2VuIiwgbG9jX2Nob29zZW5bMTM2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJ1c2VXZSIsIGxvY19jaG9vc2VuWzEzNl0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTMwXSwgbG9jX2Nob29zZW5bMTMxXSAsIGxvY19jaG9vc2VuWzEzMl0sbG9jX2Nob29zZW5bMTMzXSB9KQ0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzEwM10sICJSbG9naWMiKSANCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzEwM10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTM0XSwgbG9jX2Nob29zZW5bMTM1XX0pDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTRdLCAiZmFybSIpDQogICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE1XSwibGFuZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzE2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzE4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImVjb3VudCIsbG9jX2Nob29zZW5bMTgyXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMF0sImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyNV0sImxhc3RoaXQiKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJhdXRvbGFzdGhpdCIsbG9jX2Nob29zZW5bMTg5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzI2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlRSIsbG9jX2Nob29zZW5bMjhdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJsYXN0aGl0bG9naWMiLGxvY19jaG9vc2VuWzE5MV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTcyXSxsb2NfY2hvb3NlblsxOTBdLGxvY19jaG9vc2VuWzE3NF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblszNV0sICJraWxsc3RlYWwiKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsbG9jX2Nob29zZW5bMzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMzddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblszOV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzQwXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNDFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzBdLCJlc2NhcGUiKQ0KICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblszMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQyXSwgIml0ZW0iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTkyXSwgImF1dG9wb3QiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImVuYWJsZWF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTk0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWhnIiwgbG9jX2Nob29zZW5bNDVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2ViZyIsIGxvY19jaG9vc2VuWzQ2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzkyXSwgIm1pc2MiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjE5XSwgImdhcENsb3NlIikNCiAgICAgICAgICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKCJ3IiwgbG9jX2Nob29zZW5bMjIwXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKCJpbmZvMyIsIGxvY19jaG9vc2VuWzk4XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgZm9yIF8sIGVuZW15IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBpZiBpc0FHYXBjbG9zZXJVbml0W2VuZW15LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oZW5lbXkuY2hhck5hbWUsIGVuZW15LmNoYXJOYW1lIC4uICIgLSAiIC4uIGVuZW15OkdldFNwZWxsRGF0YShpc0FHYXBjbG9zZXJVbml0W2VuZW15LmNoYXJOYW1lXS5zcGVsbCkubmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQ3XSwgInZpcCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0Iixsb2NfY2hvb3Nlbls0OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bNDldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTBdLCAibGV2ZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzUyXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDcsIHtsb2NfY2hvb3Nlbls1OF0sIGxvY19jaG9vc2VuWzU5XSxsb2NfY2hvb3Nlbls2MF0sbG9jX2Nob29zZW5bNjFdLGxvY19jaG9vc2VuWzYyXSwgbG9jX2Nob29zZW5bNjNdLCBsb2NfY2hvb3Nlbls2NF0gIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUzXSwgInNraW4iKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1NF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbicsIGxvY19jaG9vc2VuWzU3XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHNraW5NZXRhW215SGVyby5jaGFyTmFtZV0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsIGxvY19jaG9vc2VuWzU1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIC0tc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNSIsICJTa2luIEhhY2sgdGVtcG9yYXJ5IGRpc2FibGVkIHVudGlsIG5leHQgdXBkYXRlLiAuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5NV0sICJhbnRpYWZrIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLGxvY19jaG9vc2VuWzE5Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKSANCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsIGxvY19jaG9vc2VuWzU2XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgZW5kDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjVdLCJvdGhlciIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2Nl0sICJkcmF3IikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLGxvY19jaG9vc2VuWzY3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLGxvY19jaG9vc2VuWzY4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiZWRyYXciLGxvY19jaG9vc2VuWzY5XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLGxvY19jaG9vc2VuWzcwXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3Iixsb2NfY2hvb3Nlbls3MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJydGRyYXciLGxvY19jaG9vc2VuWzIyNV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5OF0sICJjb2xvciIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJRY29sb3IiLCBsb2NfY2hvb3NlblsxOTldLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJXY29sb3IiLCBsb2NfY2hvb3NlblsyMDBdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFY29sb3IiLCBsb2NfY2hvb3NlblsyMDFdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJSY29sb3IiLCBsb2NfY2hvb3NlblsyMDJdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFMmNvbG9yIiwgbG9jX2Nob29zZW5bMjI2XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiQUFjb2xvciIsIGxvY19jaG9vc2VuWzIwNF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oInRhcmdldHNlbGVjdCIsIGxvY19jaG9vc2VuWzIwNV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMDZdLCAid2lkdGgiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiUXdpZHRoIiwgbG9jX2Nob29zZW5bMjEwXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiV3dpZHRoIiwgbG9jX2Nob29zZW5bMjExXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiRXdpZHRoIiwgbG9jX2Nob29zZW5bMjEyXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiUndpZHRoIiwgbG9jX2Nob29zZW5bMjEzXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiRTJ3aWR0aCIsIGxvY19jaG9vc2VuWzIyN10sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkFBd2lkdGgiLCBsb2NfY2hvb3NlblsyMDldLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJTVHdpZHRoIiwgbG9jX2Nob29zZW5bMjA4XSwgNCwgNiwgMSwgMTAsIDApICANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3M10sICJwZXJtYSIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hOmFkZFBhcmFtKCJwZXJtYSIsbG9jX2Nob29zZW5bNzRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Iixsb2NfY2hvb3Nlbls3NV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJkYW1hZ2UiLGxvY19jaG9vc2VuWzIxNF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXRjYWwiLGxvY19jaG9vc2VuWzc2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzddLCJ0YXJnZXRzZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oImluZm9LMiIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJ0cyIsbG9jX2Nob29zZW5bNzhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICBzZWxmLnRzLm5hbWUgID0gIkFrYWxpIg0KICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzKQ0KICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc5XSwgIktleXMiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMyIsbG9jX2Nob29zZW5bODBdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJjb21ib2tleSIsbG9jX2Nob29zZW5bODFdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgbG9jX2Nob29zZW5bODJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJoYXJhc3NrZXkiLCBsb2NfY2hvb3Nlbls4M10sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiQyIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImF1dG9xIiwgbG9jX2Nob29zZW5bOTFdLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s1IiwgbG9jX2Nob29zZW5bODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhbmVjbGVhcmtleSIsIGxvY19jaG9vc2VuWzg1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJqdW5nbGVjbGVhcmtleSIsIGxvY19jaG9vc2VuWzg2XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgICAgICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5Iixsb2NfY2hvb3NlblsyMTVdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlgiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzYiLCBsb2NfY2hvb3Nlbls4N10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImVzY2FwZWtleSIsIGxvY19jaG9vc2VuWzg4XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJZIikpDQogICAgLS1zZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5IiwgIkxhc3RoaXQgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0syIiwgbG9jX2Nob29zZW5bODldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzExMF0sICJLZXlzMiIpDQogICAgDQogICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5czIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImxhbmciLCBsb2NfY2hvb3NlblsxNjVdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE2Nl0sIGxvY19jaG9vc2VuWzE2N10sbG9jX2Nob29zZW5bMTY4XX0pDQogICAgICAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5zdHJ1Y3QiLCBsb2NfY2hvb3NlblsyMTZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICAgICAgDQogICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hLnBlcm1hIHRoZW4NCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikgZW5kLCAxKQ0KICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKSBlbmQsIDEuMikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKSBlbmQsIDEuMikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJhdXRvcSIpIGVuZCwgMS4yKQ0KZW5kDQogIGVuZA0KICAgICAgZnVuY3Rpb24gQWthbGk6YXV0b3BvdCgpDQogaWYgb3MuY2xvY2soKSAtIGxhc3RQb3Rpb24gPCAxNSB0aGVuIHJldHVybiBlbmQNCiAgZm9yIFNMT1QgPSBJVEVNXzEsIElURU1fNiBkbw0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoU0xPVCkubmFtZSA9PSAiUmVnZW5lcmF0aW9uUG90aW9uIiBhbmQgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90LmVuYWJsZWF1dG9wb3RocCB0aGVuDQogICAgICBpZiBteUhlcm86Q2FuVXNlU3BlbGwoU0xPVCkgPT0gUkVBRFkgYW5kIChteUhlcm8uaGVhbHRoIC8gbXlIZXJvLm1heEhlYWx0aCA8IHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5hdXRvcG90aHAgLzEwMCApICB0aGVuDQogICAgICAgIENhc3RTcGVsbChTTE9UKSANCiAgICAgICAgbGFzdFBvdGlvbiA9IG9zLmNsb2NrKCkgICAgICAgDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCiAgZnVuY3Rpb24gQWthbGk6cmdhcCgpDQogIGVuZA0KICAgICAgICBmdW5jdGlvbiBBa2FsaTpBbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmay5hbnRpYWZrIHRoZW4gcmV0dXJuIGVuZA0KICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQogIG15SGVybzpNb3ZlVG8obXlIZXJvLngsIG15SGVyby56KQ0KZW5kDQpmdW5jdGlvbiBBa2FsaTpXbmRNc2coTXNnLCBLZXkpDQppZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgICAgICAgICAgbG9jYWwgbWluRCA9IDEwDQogICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICBmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQoZW5lbXkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkQgPSBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpDQogICAgICAgICAgICAgICAgICAgICAgICBzdGFyZ2V0ID0gZW5lbXkNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQgICAgIA0KICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgaWYgc2VsZi5zZWxlY3RlZFRhciBhbmQgc3RhcmdldC5jaGFyTmFtZSA9PSBzZWxmLnNlbGVjdGVkVGFyLmNoYXJOYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRhciA9IG5pbA0KICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBzdGFyZ2V0ICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICBpZiBQb3BVcDEgdGhlbg0KICAgICAgUG9wVXAxID0gZmFsc2UNCiAgICBlbmQNCiAgZW5kDQogICAgZW5kDQogICAgICAgICAgZnVuY3Rpb24gQWthbGk6VW5sb2FkKCkNCiAgICAgICAgc2VsZjp3cml0ZWNmZygpDQogICAgICBlbmQNCiAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExpc3NhbmRyYSBTdGFydHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGNsYXNzICJMaXNzYW5kcmEiDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpfX2luaXQoKQ0KICAgc2VsZi50cz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgMTEwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgc2VsZi50c3c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDQ1MCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEwNTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogIHNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA1NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICBzZWxmLnRzZz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgMTIwMCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkgDQogICAgIHNlbGYuUVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1EsIERhbWFnZU5hbWUgPSAiUSIsIFJhbmdlID0gNzI1LCBXaWR0aCA9IDIwLCBEZWxheSA9IDAuMjUsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gNDUwLCBXaWR0aCA9IDAsIERlbGF5ID0gMC41LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgICBzZWxmLkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9FLCBEYW1hZ2VOYW1lID0gIkUiLCBSYW5nZSA9IDEwNTAsIFdpZHRoID0gMTEwLCBEZWxheSA9IC4yNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuTElORUFSfSkNCiAgICAgc2VsZi5SU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTU1MCwgV2lkdGggPSAwLCBEZWxheSA9IDAuMjUsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgc2VsZi5SU1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID01NTAsIFdpZHRoID0gMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuSWduaXRlID0gX1NwZWxsKHtTbG90ID0gRmluZFN1bW1vbmVyU2xvdCgic3VtbW9uZXJkb3QiKSwgRGFtYWdlTmFtZSA9ICJJR05JVEUiLCBSYW5nZSA9IDYwMCwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgLS18PiBNaW5pb24gTWFuYWdlcnMNCiAgICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuYWxseU1pbmlvbnMgICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9BTExZLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgICAgICAgIHByZWQgPSBWUHJlZGljdGlvbigpDQogICAgICAgICAgICBMYXN0X0xldmVsU3BlbGwgPSAwDQogICAgICAgICAgICBzZWxmOmZpbmRvcmJ3YWxrZXIoKQ0KICAgICAgICAgICAgICAgIHNwZWxscyA9IHt9DQogICAgICAgICAgICAgICAgc3BlbGxzLnEgPSB7IHJhbmdlTWF4ID0gOTI1fQ0KICAgICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlRpY2soKSBlbmQpDQogICAgICAgICAgICAgICAgQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlVubG9hZCgpIGVuZCApDQogICAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICAgIEFkZE1zZ0NhbGxiYWNrKGZ1bmN0aW9uKG1zZyxLZXkpIHNlbGY6V25kTXNnKG1zZyxLZXkpIGVuZCkNCiAgICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogICAgQWRkUHJvY2Vzc1NwZWxsQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSBlbmQpDQogICAgLS1BZGRBcHBseUJ1ZmZDYWxsYmFjayhmdW5jdGlvbihzb3VyY2UsIHVuaXQsIGJ1ZmYpIHNlbGY6T25BcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKSBlbmQpDQogICAgLS1BZGRVcGRhdGVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZiwgc3RhY2tzKSBzZWxmOlVwZGF0ZUJ1ZmYodW5pdCwgYnVmZiwgc3RhY2tzKSBlbmQpDQogICAgLS1BZGRSZW1vdmVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZikgc2VsZjpPblJlbW92ZUJ1ZmYodW5pdCwgYnVmZikgZW5kKSANCiAgICAgIGVuZA0KICAgICAgZnVuY3Rpb24gTGlzc2FuZHJhOlRpY2soKQ0KICAgICAgIHNlbGY6YXV0b3pob255YSgpDQogICAgICAgc2VsZjphdXRvcG90KCkNCiBpZiBWSVBfVVNFUiB0aGVuICAgc2VsZjpBbnRpYWZrKCkgIGVuZA0KICAgICAgIHNlbGY6aXRlbXMoKQ0KICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICAgICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjpza2luaGFjaygpIGVuZA0KICAgICAgIHNlbGY6YXV0b1IoKQ0KICAgICAgIHNlbGY6YXV0b3EoKQ0KICAgICAgIHNlbGY6Y2hlY2t0cygpDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICl0aGVuDQogICAgICBzZWxmOmNvbWJvKCkNCiAgICBlbmQNCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5pbnN0cnVjdCB0aGVuDQogICAgc2VsZi5Db25maWcuaW5zdHJ1Y3QgPSBmYWxzZQ0KICAgIFBvcFVwMSA9IHRydWUNCiAgZW5kDQogICAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKXRoZW4NCiAgICAgc2VsZjpKdW5nbGVDbGVhcigpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSApdGhlbg0KICAgICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICAgIGVuZA0KICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciApdGhlbg0KICAgICAgc2VsZjplbmdhZ2V3aXRocigpDQogICAgZW5kDQogICAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFzdGhpdGtleSBvciBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuYXV0b2xhc3RoaXQgKXRoZW4NCiAgICAgIHNlbGY6TGFzdEhpdCgpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSl0aGVuDQogICAgICBzZWxmOmVzY2FwZSgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICkgdGhlbg0KICAgICAgc2VsZjpraWxsc3RlYWwoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgICkgdGhlbg0KICAgICAgc2VsZjpoYXJhc3MoKQ0KICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpjaGVja3RzKCkNCiAgICAgICAgIHNlbGYudHM6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNnOnVwZGF0ZSgpDQogIGlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi50cy50YXJnZXQNCiAgZWxzZWlmIHNlbGYudHNnLnRhcmdldH49bmlsIG9yIHNlbGYuc2VsZWN0ZWRUYXIgdGhlbg0KICB0YXJnZXQgPSBzZWxmLnNlbGVjdGVkVGFyDQogIGVuZA0KICBlbmQNCiAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpMb2FkTWVudSgpDQogICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIgWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4iXSIgLCJtZW51IikNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMV0sICJjb21ibyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVciLCBsb2NfY2hvb3NlblszXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzRdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUkiLCBsb2NfY2hvb3Nlbls2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOV0sICJoYXJhc3MiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsxMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bMTFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzEyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJhdXRvcSIsIGxvY19jaG9vc2VuWzkxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5OV0sICJza2lsbGxvZ2ljIikNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzEwMl0sICJFbG9naWMiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYzphZGRQYXJhbSgiY29tYm8iLCBsb2NfY2hvb3NlblsxNDNdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMiwge2xvY19jaG9vc2VuWzE0NV0sIGxvY19jaG9vc2VuWzE0Nl0gfSkNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWM6YWRkUGFyYW0oImhhcmFzcyIsIGxvY19jaG9vc2VuWzE0NF0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTQ2XSwgbG9jX2Nob29zZW5bMTQ1XSB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYzphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJpbmZvRSIsIGxvY19jaG9vc2VuWzE1NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTAzXSwgIlJsb2dpYyIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJSbG9naWMiLCBsb2NfY2hvb3NlblsxNTVdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE0OV0sIGxvY19jaG9vc2VuWzE1MF0sIGxvY19jaG9vc2VuWzE1MV0gfSkNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWM6YWRkUGFyYW0oImVuYWJsZWF1dG9SIiwgbG9jX2Nob29zZW5bMTUyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiYXV0b1IiLCBsb2NfY2hvb3NlblsxNTNdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJpbmZvUjIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJpbmZvUiIsIGxvY19jaG9vc2VuWzE1Nl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblszMF0sImVzY2FwZSIpDQogICAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMzFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzMyXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE0XSwgImZhcm0iKQ0KICAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNV0sImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsxNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJxY291bnQiLGxvY19jaG9vc2VuWzE4MF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzE3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIndjb3VudCIsbG9jX2Nob29zZW5bMTgxXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlRSIsbG9jX2Nob29zZW5bMThdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiZWNvdW50Iixsb2NfY2hvb3NlblsxODJdLFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMTAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMF0sImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyNV0sImxhc3RoaXQiKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJhdXRvbGFzdGhpdCIsbG9jX2Nob29zZW5bMTg5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzI2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjddLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJsYXN0aGl0bG9naWMiLGxvY19jaG9vc2VuWzE5MV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTcyXSxsb2NfY2hvb3NlblsxOTBdLGxvY19jaG9vc2VuWzE3NF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzM1XSwgImtpbGxzdGVhbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMzddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzM5XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls0MF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNDFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQyXSwgIml0ZW0iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTkyXSwgImF1dG9wb3QiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImVuYWJsZWF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTk0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWhnIiwgbG9jX2Nob29zZW5bNDVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2ViZyIsIGxvY19jaG9vc2VuWzQ2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzkyXSwgIm1pc2MiKQ0KICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzkzXSwgImludGVycnVwdCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKCJyIiwgbG9jX2Nob29zZW5bOTddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKCJpbmZvMyIsIGxvY19jaG9vc2VuWzk4XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIGZvciBpLCBhIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgICAgICBpZiBJbnRlcnJ1cHRbYS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSwgc3BlbGwgaW4gcGFpcnMoSW50ZXJydXB0W2EuY2hhck5hbWVdLnN0b3ApIGRvDQogICAgICAgICAgICAgICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdDphZGRQYXJhbShzcGVsbC5zcGVsbE5hbWUsIGEuY2hhck5hbWUuLiIgLSAiLi5zcGVsbC5uYW1lLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIA0KICAgICAgICBlbmQNCiAgICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIxOV0sICJnYXBDbG9zZSIpDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgidyIsIGxvY19jaG9vc2VuWzIyMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgiZGVsYXkiLCBsb2NfY2hvb3NlblsyMjFdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDAsIDAsIDEwMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oImluZm8zIiwgbG9jX2Nob29zZW5bOThdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICBmb3IgXywgZW5lbXkgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGlmIGlzQUdhcGNsb3NlclVuaXRbZW5lbXkuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbShlbmVteS5jaGFyTmFtZSwgZW5lbXkuY2hhck5hbWUgLi4gIiAtICIgLi4gZW5lbXk6R2V0U3BlbGxEYXRhKGlzQUdhcGNsb3NlclVuaXRbZW5lbXkuY2hhck5hbWVdLnNwZWxsKS5uYW1lLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjIyXSwgImF1dG93IikNCiAgICBzZWxmLkNvbmZpZy5taXNjLmF1dG93OmFkZFBhcmFtKCJ1c2UiLCBsb2NfY2hvb3NlblsyMjNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgc2VsZi5Db25maWcubWlzYy5hdXRvdzphZGRQYXJhbSgiZW5lbXljb3VudCIsIGxvY19jaG9vc2VuWzIyNF0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTMwXSwgbG9jX2Nob29zZW5bMTMxXSAsIGxvY19jaG9vc2VuWzEzMl0sbG9jX2Nob29zZW5bMTMzXSB9KQ0KICAgIA0KICAgICAgICAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgICAgICAgIGlmIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0N10sICJ2aXAiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oInBhY2tldCIsbG9jX2Nob29zZW5bNDhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzQ5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUwXSwgImxldmVsIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzUxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3Nlbls1Ml0sIFNDUklQVF9QQVJBTV9MSVNULCA3LCB7bG9jX2Nob29zZW5bNThdLCBsb2NfY2hvb3Nlbls1OV0sbG9jX2Nob29zZW5bNjBdLGxvY19jaG9vc2VuWzYxXSxsb2NfY2hvb3Nlbls2Ml0sIGxvY19jaG9vc2VuWzYzXSwgbG9jX2Nob29zZW5bNjRdICB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1M10sICJza2luIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTRdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCBsb2NfY2hvb3Nlbls1N10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCBza2luTWV0YVtteUhlcm8uY2hhck5hbWVdKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgiaW5mbzUiLCBsb2NfY2hvb3Nlbls1NV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOTVdLCAiYW50aWFmayIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrOmFkZFBhcmFtKCJhbnRpYWZrIixsb2NfY2hvb3NlblsxOTZdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzMiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzQiLCBsb2NfY2hvb3Nlbls1Nl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIGVuZA0KICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY1XSwib3RoZXIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNob3cgRGFtYWdlIE9uIEhwIEJhciIsICJIUEJBUiIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjZdLCAiZHJhdyIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInFkcmF3Iixsb2NfY2hvb3Nlbls2N10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3Iixsb2NfY2hvb3Nlbls2OF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3Iixsb2NfY2hvb3Nlbls2OV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInJkcmF3Iixsb2NfY2hvb3Nlbls3MF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsbG9jX2Nob29zZW5bNzFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOThdLCAiY29sb3IiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUWNvbG9yIiwgbG9jX2Nob29zZW5bMTk5XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiV2NvbG9yIiwgbG9jX2Nob29zZW5bMjAwXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRWNvbG9yIiwgbG9jX2Nob29zZW5bMjAxXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUmNvbG9yIiwgbG9jX2Nob29zZW5bMjAyXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRTJjb2xvciIsIGxvY19jaG9vc2VuWzIwM10sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkFBY29sb3IiLCBsb2NfY2hvb3NlblsyMDRdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJ0YXJnZXRzZWxlY3QiLCBsb2NfY2hvb3NlblsyMDVdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjA2XSwgIndpZHRoIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlF3aWR0aCIsIGxvY19jaG9vc2VuWzIxMF0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIld3aWR0aCIsIGxvY19jaG9vc2VuWzIxMV0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkV3aWR0aCIsIGxvY19jaG9vc2VuWzIxMl0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlJ3aWR0aCIsIGxvY19jaG9vc2VuWzIxM10sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkFBd2lkdGgiLCBsb2NfY2hvb3NlblsyMDldLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJTVHdpZHRoIiwgbG9jX2Nob29zZW5bMjA4XSwgNCwgNiwgMSwgMTAsIDApIA0KICAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3M10sICJwZXJtYSIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hOmFkZFBhcmFtKCJwZXJtYSIsbG9jX2Nob29zZW5bNzRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Iixsb2NfY2hvb3Nlbls3NV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJkYW1hZ2UiLGxvY19jaG9vc2VuWzIxNF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXRjYWwiLGxvY19jaG9vc2VuWzc2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkgIA0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3N10sInRhcmdldHNlbCIpDQogICAgICBzZWxmLnRzLm5hbWUgID0gIkxpc3NhbmRyYSAiDQogICAgICBzZWxmLnRzcS5uYW1lID0gIkxpc3NhbmRyYSBRIFNraWxsIg0KICAgICAgc2VsZi50c3cubmFtZSA9ICJMaXNzYW5kcmEgVyBTa2lsbCINCiAgICAgIHNlbGYudHNlLm5hbWUgPSAiTGlzc2FuZHJhIEUgU2tpbGwiDQogICAgICBzZWxmLnRzci5uYW1lID0gIkxpc3NhbmRyYSBSIFNraWxsIg0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHMpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3EpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3cpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c2UpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3IpIA0KICAgICAgDQogICAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3OV0sICJLZXlzIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMyIsIGxvY19jaG9vc2VuWzgwXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJjb21ib2tleSIsIGxvY19jaG9vc2VuWzgxXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXlyIiwgbG9jX2Nob29zZW5bMTcwXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJVIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzQiLCBsb2NfY2hvb3Nlbls4Ml0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNza2V5IiwgbG9jX2Nob29zZW5bODNdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc3RvZ2xla2V5IiwgbG9jX2Nob29zZW5bMTY0XSwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNSIsIGxvY19jaG9vc2VuWzg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4NV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICAtLXNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLCAiTGFzdGhpdCBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlgiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNiIsIGxvY19jaG9vc2VuWzg3XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJlc2NhcGVrZXkiLCBsb2NfY2hvb3Nlbls4OF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzIiLCBsb2NfY2hvb3Nlbls4OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgDQogICAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMTBdLCAiS2V5czIiKQ0KICAgICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5czIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImxhbmciLCBsb2NfY2hvb3NlblsxNjVdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE2Nl0sIGxvY19jaG9vc2VuWzE2N10sbG9jX2Nob29zZW5bMTY4XX0pDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluc3RydWN0IiwgbG9jX2Nob29zZW5bMjE2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICANCiAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYS5wZXJtYSB0aGVuDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpIGVuZCwgMSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJjb21ib2tleSIpIGVuZCwgMS4yKSANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3N0b2dsZWtleSIpIGVuZCwgMS4yKSANCiAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKSBlbmQsIDEuMikNCiAgICANCiAgZW5kDQogIGVuZA0KICANCiAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTphdXRvcG90KCkNCmlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQogICBmdW5jdGlvbiBMaXNzYW5kcmE6aXRlbXMoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWJnIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IHRoZW4NCiAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICBpZiAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIkhleHRlY2hHdW5ibGFkZSIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOnNraW5oYWNrKCkNCiAgaWYgbm90IHNraW5sb2FkIHRoZW4NCiAgaWYgKChDdXJyZW50VGltZUluTWlsbGlzKCkgLSBsYXN0VGltZVRpY2tDYWxsZWQpID4gMjAwKSB0aGVuDQogICAgICBsYXN0VGltZVRpY2tDYWxsZWQgPSBDdXJyZW50VGltZUluTWlsbGlzKCkNCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpbi5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgIHRoZW4NCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddIH49IGxhc3RTa2luIHRoZW4NCiAgICAgICAgbGFzdFNraW4gPSBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgICAgICAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTp3cml0ZWNmZyhwYXJhbSkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInciKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAtLSBwcmludCgiRXJyb3IgaW4gV3JpdGUgQ0ZHIikNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHBhcmFtIH49ICJmdGMiIHRoZW4NCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKGF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgICAgICAgICAtLSBwcmludCgiV3JpdHRlbjogIi4uYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoImVuZyIpDQogICAgICAgICAgICAgICAtLSBwcmludCgiVzogRW5nbGlzaCIpDQogICAgICAgIGVuZA0KICAgICAgICBmaWxlOmNsb3NlKCkNCmVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b2xldmVsKCkNCmlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTEgPSAgIHsgMSwyLDMsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTEpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAyIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMiA9ICAgeyAxLDIsMywxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDMgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UzID0gIHsgMiwzLDEsMiwyLDQsMiwxLDIsMSw0LDEsMSwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTMpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA0IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNCA9ICB7IDIsMywxLDIsMiw0LDIsMywyLDMsNCwzLDMsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U0KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTUgPSAgeyAzLDEsMiwzLDMsNCwzLDIsMywyLDQsMiwyLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDYgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMywxLDIsMywzLDQsMywxLDMsMSw0LDEsMSwyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDcgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMSwzLDIsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTphdXRvemhvbnlhKCkNCiAgICBpZiBzZWxmLkNvbmZpZy5pdGVtLmVuYWJsZWF1dG96aG9ueWEgdGhlbg0KICAgICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgICBpZiBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuaXRlbS5hdXRvemhvbnlhIC8gMTAwKSBhbmQgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJaaG9ueWFzSG91cmdsYXNzIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTphdXRvUigpDQogICAgaWYgKCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5lbmFibGVhdXRvUiBhbmQgKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAyIG9yIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAxKSkgdGhlbg0KICAgICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLmF1dG9SIC8gMTAwKSB0aGVuIHNlbGY6Q2FzdFJTKG15SGVybykNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICANCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmVuZ2FnZXdpdGhyKCkNCiAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICBpZiBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciB0aGVuDQogICBzZWxmOndhbGsoKQ0KICAgZW5kDQogICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi50c3EudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgKXRoZW4NCiAgICAgICAgICAgICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSApIHRoZW4NCiAgICAgQ2FzdFNwZWxsKF9FLCB0YXJnZXQueCwgdGFyZ2V0LnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDEuNSkNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gTGlzc2FuZHJhOkFudGlhZmsoKQ0KICBpZiBvcy5jbG9jaygpIDwgQ2xvY2sgb3Igbm90IHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrLmFudGlhZmsgdGhlbiByZXR1cm4gZW5kDQogIENsb2NrID0gb3MuY2xvY2soKSArIG1hdGgucmFuZG9tKDYwLDEyMCkNCiAgbXlIZXJvOk1vdmVUbyhteUhlcm8ueCwgbXlIZXJvLnopDQplbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkRyYXcoKQ0KICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5xZHJhdyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MjUsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Rd2lkdGgsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUWNvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcud2RyYXcgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNDUwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguV3dpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5XY29sb3IpKSkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5lZHJhdyBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCAxMDUwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguRXdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5FY29sb3IpKSkNCiAgICBlbmQNCiAgICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJkcmF3IGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDU1MCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguUndpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5SY29sb3IpKSkNCiAgICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmFhZHJhdyB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTUwLCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5BQXdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5BQWNvbG9yKSkpDQogICAgZW5kDQogICAgICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldCBhbmQgc2VsZi5zZWxlY3RlZFRhciB+PSBuaWwgdGhlbg0KICAgICAgICAgRHJhd0NpcmNsZTNEKHNlbGYuc2VsZWN0ZWRUYXIueCwgc2VsZi5zZWxlY3RlZFRhci55LCBzZWxmLnNlbGVjdGVkVGFyLnosIDgwLCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5TVHdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci50YXJnZXRzZWxlY3QpKSkNCmVuZA0KIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogICAgICBpZiB0YXJnZXQudmlzaWJsZSBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBzZWxmLkNvbmZpZy5vdGhlci5kYW1hZ2UgdGhlbg0KICAgICAgICBjdXJyTGluZSA9IDENCiAgICAgICAgRHJhd0xpbmVIUEJhcjIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCIiLCAgdGFyZ2V0LCBjdXJyTGluZSkNCiAgICAgICAgRHJhd0xpbmVIUEJhcihzZWxmOkdldE15RG1nKHRhcmdldCksICJEYW1hZ2UgIiAuLiBtYXRoLnJvdW5kKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSksdGFyZ2V0LGN1cnJMaW5lKQ0KICAgICAgICBjdXJyTGluZSA9IGN1cnJMaW5lICsgMQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXRjYWwgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQogICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBsb2NhbCBkcmF3cG9zPVdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQogICAgICAgIGxvY2FsIGNvbWJvVGV4dCxjb2xvciA9IHNlbGY6R2V0RHJhd3ModGFyZ2V0KQ0KICAgICAgICBpZiBjb21ib1RleHQgdGhlbg0KICAgICAgICAgIERyYXdUZXh0KGNvbWJvVGV4dCwxNSxkcmF3cG9zLngtMjAsZHJhd3Bvcy55LTIwLGNvbG9yKQ0KICAgICAgICBlbmQgDQogICAgICBlbmQgDQogICAgICBlbmQNCiAgICAgaWYgUG9wVXAxIHRoZW4NCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC41MCksIChXSU5ET1dfSCouMTUpLCAoV0lORE9XX0gqLjkpDQogICAgRHJhd0xpbmUodywgaDEvMS4wNSwgdywgaDIvMS45Nywgdy8xLjc1LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd0xpbmUodywgaDEsIHcsIGgyLzIsIHcvMS44LCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIldlbGNvbWUgdG8gS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIDMuMCIpLCBXSU5ET1dfSCouMDI4LCAoV0lORE9XX1cvMiksIChXSU5ET1dfSCouMTgpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSwiY2VudGVyIiwiY2VudGVyIikNCiAgIERyYXdUZXh0QSh0b3N0cmluZygiTGl0dGxlIGluZm9ybWF0YXRpb24gYWJvdXQgS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4xOTQpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkl0cyBhIGJ1bmRsZSB0aGF0IHByb2R1Y2VkIGJ5IGVuc3VsdXluIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJDdXJyZW50bHkgaXQgc3VwcG9ydGVkIG9ubHkgbWlkIGNoYW1wcyAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIyNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgZm9jdXMgUXVhbGl0eSByYXRoZXIgdGhhbiBRdWFudGl0eSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjQwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBuZWVkIHlvdXIgZmVlZGJhY2tzIHRvIGltcHJvdmUgaXQiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI1NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgY2FyZSBldmVyeSBzaW5nbGUgZmVlZGJhY2sgYW5kIHRyeSB0byBhZGQgZXZlcnl0aGluZyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjcwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSG9wZSB5b3UgYXJlIGVuam95IG15IHNjcmlwdC4uIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yODUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJZb3UgY2FuIGNoYW5nZSBldmVyeSBzZXR0aW5ncyB0byB5b3VyIGxpa2UgOikiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMwMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRpZCB5b3UgbGlrZSBteSBzY3JpcHQgPiBVcHZvdGUgbWUgb24gc2NyaXB0c3RhdHVzIGFuZCBvbiBmb3J1bSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzE1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRG9uJ3QgZm9yZ2V0IHRoZXNlIGFyZSBWSVA7IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMzApLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQW50aS1BZmsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM0NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQXV0byBMZXZlbGVyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzYwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBTa2luIENoYW5nZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNzUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNDkpLCAoV0lORE9XX0gqLjcwKSwgKFdJTkRPV19IKi43NSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjc3NSwgdywgaDIvMS42OCwgdyouMTEsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3UmVjdGFuZ2xlQnV0dG9uKFdJTkRPV19XKjAuNDY3LCBXSU5ET1dfSC8yLjM3NSwgV0lORE9XX1cqLjA0NywgV0lORE9XX0gqLjA0MSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiT0siKSwgV0lORE9XX0gqLjAyLCAoV0lORE9XX1cvMikqLjk4LCAoV0lORE9XX0gvMi4zNzUpLCBBUkdCKDI1NSwgMCwgMCwgMCApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zOTUpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1cnJ5LSBGb3IgdGhpcyBhd2Vzb21lIHBvcHVwIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi40MTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpIA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpjb21ibygpDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi50c3EudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuY29tYm8gPT0gMSBhbmQgIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHRhcmdldC54LCB0YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMS41KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuY29tYm8gPT0gMiBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHRhcmdldCwgdGFyZ2V0LnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDIpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMyBvciBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICApdGhlbg0KICAgICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgbG9jYWwgZG1nUiA9Z2V0RG1nKCJSIix1bml0LG15SGVybykrICgobXlIZXJvLmFwKSowLjcwKSANCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBHZXREaXN0YW5jZSh1bml0KTw1NTApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgZWxzZWlmIChzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMiBhbmQgIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5hdXRvUiAvIDEwMCkpIHRoZW4gDQogICAgICAgc2VsZjpDYXN0UlMobXlIZXJvKQ0KICAgICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIA0KICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgIGVuZA0KICAgICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG93KCkNCiAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3cudXNlIHRoZW4NCiAgICAgICAgaWYgc2VsZi5Db25maWcubWlzYy5hdXRvdy5lbmVteWNvdW50ID09IDEgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDQzNSkgPj0gMiB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3cuZW5lbXljb3VudCA9PSAyIHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg0MzUpID49IDMgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVywgbXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5taXNjLmF1dG93LmVuZW15Y291bnQgPT0gMyB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNDM1KSA+PSA0IHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcubWlzYy5hdXRvdy5lbmVteWNvdW50ID09IDQgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDQzNSkgPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICANCiAgIGZ1bmN0aW9uIExpc3NhbmRyYTpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpDQppZiBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgc3BlbGwgPSBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0uc3RvcFtzcGVsbC5uYW1lXQ0KICAgICAgICBpZiBzcGVsbCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHRbc3BlbGwubmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KHVuaXQpIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IHNlbGYuUlNwZWxsLlJhbmdlICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQuciB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCiAgICBpZiB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCAxMDAwIGFuZCBzcGVsbCB+PSBuaWwgdGhlbiAgICAgDQogICAgaWYgc3BlbGwubmFtZSA9PSAodHlwZShpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSA9PSAnbnVtYmVyJyBhbmQgdW5pdDpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkubmFtZSBvciBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSBhbmQgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZVt1bml0LmNoYXJOYW1lXSB0aGVuDQogICAgICBpZiBzcGVsbC50YXJnZXQgfj0gbmlsIGFuZCBzcGVsbC50YXJnZXQubmFtZSA9PSBteUhlcm8ubmFtZSBvciBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsID09ICdibGluZG1vbmtxdHdvJyB0aGVuDQogICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9XLCB1bml0LngsIHVuaXQueillbmQgLHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2UuZGVsYXkvMTAwMCkgDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkdldFFEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDQwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsICogMzApICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKi42NSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpHZXRXRG1nKHRhcmdldCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQgDQogICBpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgzMCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9XKS5sZXZlbCAqIDQwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjQpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOkdldEVEbWcodGFyZ2V0KQ0KICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZCANCiAgIGlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDI1ICsgKG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsICogNDUpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuNikNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBMaXNzYW5kcmE6R2V0UkRtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgIGlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDUwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICogMTAwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjcpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBMaXNzYW5kcmE6R2V0TXlEbWcodGFyZ2V0KQ0KICAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkgDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpIA0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICAgIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRFRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpHZXREcmF3cyh0YXJnZXQpDQpsb2NhbCBxZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCmxvY2FsIHdkYW1hZ2UgPSBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KbG9jYWwgZWRhbWFnZSA9IHNlbGY6R2V0RURtZyh0YXJnZXQpDQpsb2NhbCByZGFtYWdlID0gc2VsZjpHZXRSRG1nKHRhcmdldCkNCmxvY2FsIElkbWc9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICANCiAgaWYgcWRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHdkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnVycsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiB3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnVyArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBlZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgZWRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICBlbHNlaWYgcmRhbWFnZSAgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUicsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiByZGFtYWdlICsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2UgK2VkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2UgK2VkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBlZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIFcnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgZWRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIFcgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBXJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStlZGFtYWdlPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK2VkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStlZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStlZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2UrZWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0tpbGwgd2l0aCBmdWxsIGNvbWJvJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlK2VkYW1hZ2UrcmRhbWFnZStJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRnVsbCBDb21ibyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZSANCiAgICByZXR1cm4gIkNhbnQgS2lsbCB5ZXQiLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbmQgDQplbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RRKHVuaXQpDQogICAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgICAgICAgICAgICAgICAgIHByZWQgPSBuaWwNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RRMih1bml0KQ0KICAgIGlmIFZhbGlkVGFyZ2V0KHVuaXQpIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIGlmIEdldERpc3RhbmNlKHVuaXQpIDwgc2VsZi5RU3BlbGwuUmFuZ2UgdGhlbg0KICAgICAgc2VsZjpDYXN0USh1bml0KQ0KICBlbHNlaWYgR2V0RGlzdGFuY2UodW5pdCkgPCBzcGVsbHMucS5yYW5nZU1heCB0aGVuDQogICAgICBsb2NhbCBjb2xsaXNpb24gPSBmYWxzZQ0KICAgICAgbG9jYWwgeCwgeiA9IDAsIDANCiAgICANCiAgICAgICAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgbWluaW9uIH49IG5pbCBhbmQgbm90IG1pbmlvbi5kZWFkIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4NCiAgICAgICAgICB4LCB6ID0gcG9pbnRPbkxpbmUobXlIZXJvLCB1bml0LCBtaW5pb24sIDApDQogICAgICAgICAgDQogICAgICAgICAgaWYgbWF0aC5zcXJ0KChtaW5pb24ueCAtIHgpIF4gMiArIChtaW5pb24ueiAtIHopIF4gMikgPCBzZWxmLlFTcGVsbC5XaWR0aCAvIDIgdGhlbg0KICAgICAgICAgICAgY29sbGlzaW9uID0gdHJ1ZQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgDQogICAgICBpZiBjb2xsaXNpb24gPT0gdHJ1ZSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCBzcGVsbHMucS5yYW5nZU1heCB0aGVuDQogICAgICAgIFBvc2l0aW9uID0gcHJlZDpHZXRQcmVkaWN0ZWRQb3ModW5pdCwgc2VsZi5RU3BlbGwuRGVsYXkgKyAoR2V0RGlzdGFuY2UodW5pdCkgLyBzZWxmLlFTcGVsbC5TcGVlZCkpDQogICAgICANCiAgICAgICAgbG9jYWwgY2FzdFggPSBteUhlcm8ueCArIHNlbGYuUVNwZWxsLlJhbmdlICogKChQb3NpdGlvbi54IC0gbXlIZXJvLngpIC8gR2V0RGlzdGFuY2UoUG9zaXRpb24pKQ0KICAgICAgICBsb2NhbCBjYXN0WiA9IG15SGVyby56ICsgc2VsZi5RU3BlbGwuUmFuZ2UqICgoUG9zaXRpb24ueiAtIG15SGVyby56KSAvIEdldERpc3RhbmNlKFBvc2l0aW9uKSkNCiAgICAgICAgQ2FzdFNwZWxsKF9RLCBjYXN0WCwgY2FzdFopDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdFcodW5pdCkNCiAgICBzZWxmLldTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RFKHVuaXQpDQogICAgc2VsZi5FU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0Uih1bml0KQ0KICAgIHNlbGYuUlNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0UlModW5pdCkNCiAgIENhc3RTcGVsbChfUiAsIG15SGVybykNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdEkodW5pdCkNCiAgICBzZWxmLklnbml0ZTpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6a2lsbHN0ZWFsKCkNCiAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgICBsb2NhbCBkbWdFID0gc2VsZjpHZXRFRG1nKHVuaXQpDQogICAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZG1nUSA9IHNlbGY6R2V0UURtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzcS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZG1nVyA9IHNlbGY6R2V0V0RtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVcgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZG1nUiA9c2VsZjpHZXRSRG1nKHVuaXQpDQogICAgICAgIGlmKHNlbGYudHNyLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw1NTApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgICAgZW5kDQogICAgIGVuZA0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTplc2NhcGUoKQ0KICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZUUgIHRoZW4NCiAgaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgKSB0aGVuDQogICAgIENhc3RTcGVsbChfRSxtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDEuNSkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgdGhlbiANCiAgc2VsZjp3YWxrKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5IGFuZCBzZWxmLkNvbmZpZy5lc2NhcGUudXNlVyBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgdGhlbg0KICBDYXN0U3BlbGwoX1csdHN3LnRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6d2FsaygpDQogICAgbXlIZXJvOk1vdmVUbyhtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6aGFyYXNzKCkNCiAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSB0aGVuDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSApIHRoZW4gICAgICAgIA0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgICBlbmQgICANCiAgICAgICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSB0aGVuDQogICAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyApIHRoZW4gICAgICAgIA0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICBlbmQgIA0KICAgICAgICBlbmQgDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSAgdGhlbg0KICAgICAgICBpZihzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYy5oYXJhc3MgPT0gMSAgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApICBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgKSB0aGVuICAgICAgICANCiAgICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHRhcmdldC54LCB0YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMikNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSAgdGhlbg0KICAgICAgICAgICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuaGFyYXNzID09IDIgYW5kICAgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlRSApIHRoZW4gICAgICAgIA0KICAgICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgYW5kIHNlbGYudHNlLnRhcmdldH49bmlsKSB0aGVuDQogICAgIENhc3RTcGVsbChfRSwgdGFyZ2V0LngsIHRhcmdldC56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAxLjUpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZnVuY3Rpb24gTGlzc2FuZHJhOkxhc3RIaXQoKQ0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogIGlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMSB0aGVuDQogICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICAgIGxvY2FsIFFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuUVNwZWxsLlJhbmdlICogc2VsZi5RU3BlbGwuUmFuZ2UgYW5kIFFkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgZW5kDQogICAgICAgIGxvY2FsIFdkYW1hZ2UgPSBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuV01hbmEgLzEwMCApYW5kICBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuV1NwZWxsLlJhbmdlICogc2VsZi5XU3BlbGwuUmFuZ2UgYW5kIFdkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICBlbHNlaWYgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0Lmxhc3RoaXRsb2dpYyA9PSAyIHRoZW4NCiAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VXIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5XTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLldTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpMYW5lQ2xlYXIoKQ0KICAgbG9jYWwgY2xlYXJ0YXJnZXQgPSBzZWxmLmNsZWFydGFyZ2V0DQogIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KICAgICAgICBsb2NhbCBOdW1iZXJPZkhpdHMgPSBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5xY291bnQNCiAgICAgICAgICAgaWYgTnVtYmVyT2ZIaXRzID49IDEgYW5kICNzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLlFNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9ICBHZXRCZXN0TGluZUZhcm1Qb3NpdGlvbihzZWxmLlFTcGVsbC5SYW5nZSwgc2VsZi5RU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgKQ0KICAgICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgYW5kICBCZXN0SGl0ID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfUSwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgICBsb2NhbCBOdW1iZXJPZkhpdHMgPSBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci53Y291bnQNCiAgICAgICAgICAgaWYgTnVtYmVyT2ZIaXRzID49IDEgYW5kICNzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VXIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLldNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLldTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgIHNlbGY6Q2FzdFcoY2xlYXJ0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuZWNvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5FTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5FU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgIGxvY2FsIEJlc3RQb3MsIEJlc3RIaXQgPSBHZXRCZXN0TGluZUZhcm1Qb3NpdGlvbihzZWxmLkVTcGVsbC5SYW5nZSwgc2VsZi5FU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgKQ0KICAgICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgYW5kICBCZXN0SGl0ID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICAgaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgKSB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfRSwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDIpDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b3EoKQ0KICANCiAgICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy5hdXRvcSApIHRoZW4gICAgICAgIA0KICAgICAgICAgIHNlbGY6Q2FzdFEyKHRhcmdldCkNCiAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkp1bmdsZUNsZWFyKCkNCiAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuUU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlVyBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuV01hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgIHNlbGYuV1NwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5FTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgIGZ1bmN0aW9uIExpc3NhbmRyYTpXbmRNc2coTXNnLCBLZXkpDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuICAgICAgDQogICAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgICAgbG9jYWwgbWluRCA9IDEwDQogICAgICAgICAgICAgIGxvY2FsIHN0YXJnZXQgPSBuaWwNCiAgICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQoZW5lbXkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpIDw9IG1pbkQgb3Igc3RhcmdldCA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFyZ2V0ID0gZW5lbXkNCiAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQgICAgIA0KICAgICAgICAgICAgICBpZiBzdGFyZ2V0IGFuZCBtaW5EIDwgNTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRhciA9IG5pbA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5UYXJnZXQgPGI+aXMgbm8gbG9nZXIgc2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBzdGFyZ2V0ICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPk5ldyB0YXJnZXQgPGI+c2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICAgIFBvcFVwMSA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KICAgICAgZW5kDQogICAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpVbmxvYWQoKQ0KICAgICAgICBzZWxmOndyaXRlY2ZnKCkNCiAgICAgIGVuZA0KICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gVmlrdG9yIFN0YXJ0cyAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgY2xhc3MgIlZpa3RvciINCiBsb2NhbCBlYnVmZiA9IGZhbHNlDQogIHJlcXVpcmUgJ0hQcmVkaWN0aW9uJw0KICBmdW5jdGlvbiBWaWt0b3I6X19pbml0KCkNCiAgIHNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDUyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzcT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNjAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEyMDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c3I9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkgDQogICAgc2VsZi50c2c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEzMDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgICBzZWxmLlFTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9RLCBEYW1hZ2VOYW1lID0gIlEiLCBSYW5nZSA9IG1hdGguaHVnZSwgV2lkdGggPSAxLCBEZWxheSA9IDAsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gbWF0aC5odWdlLCBXaWR0aCA9IDEyNSwgRGVsYXkgPSAwLjUsIFNwZWVkID0gNzUwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuQ0lSQ1VMQVJ9KQ0KICAgICBzZWxmLkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9FLCBEYW1hZ2VOYW1lID0gIkUiLCBSYW5nZSA9IDEyMDAsIFdpZHRoID0gMTgwLCBEZWxheSA9IDAsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID03MDAsIFdpZHRoID0gMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IDEwMDAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5DSVJDVUxBUn0pDQogICAgIHNlbGYuSWduaXRlID0gX1NwZWxsKHtTbG90ID0gRmluZFN1bW1vbmVyU2xvdCgic3VtbW9uZXJkb3QiKSwgRGFtYWdlTmFtZSA9ICJJR05JVEUiLCBSYW5nZSA9IDYwMCwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgc2VsZi5IUHJlZCA9IEhQcmVkaWN0aW9uKCkNCiAgICAgc2VsZi5FID0ge1JhbmdlMSA9IDU1MCwgUmFuZ2UyID0gNzAwLCB3aWR0aCA9IDE4MCwgcmVhZHl9DQogICAgIHNlbGYuRVJhbmdlID0gc2VsZi5FLlJhbmdlMStzZWxmLkUuUmFuZ2UyDQogIC0tfD4gTWluaW9uIE1hbmFnZXJzDQogICAgICBzZWxmLmVuZW15TWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9ucyAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9KVU5HTEUsICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYub3RoZXJNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9PVEhFUiwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgICAgICAgICAgc2VsZjpMb2FkTWVudSgpDQogICAgICAgICAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICAgICAgICAgICAgTGFzdF9MZXZlbFNwZWxsID0gMA0KICAgICAgDQogICAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgICAgICAgICAgICAgICBBZGRVbmxvYWRDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VW5sb2FkKCkgZW5kICkNCiAgICBBZGREcmF3Q2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOkRyYXcoKSBlbmQpDQogICAgQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAgIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgICBBZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbih1bml0LCBzcGVsbCkgc2VsZjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkNCiAgICBBZGRBcHBseUJ1ZmZDYWxsYmFjayhmdW5jdGlvbihzb3VyY2UsIHVuaXQsIGJ1ZmYpIHNlbGY6QXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAgLS1BZGRVcGRhdGVCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOlVwZGF0ZUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKSBlbmQpDQogICAgLS1BZGRSZW1vdmVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZikgc2VsZjpPblJlbW92ZUJ1ZmYodW5pdCwgYnVmZikgZW5kKSANCiAgICAgIGVuZA0KICAtLSBoYW5kbGVzIHNjcmlwdCBsb2dpYywgYSBwdXJlIGhpZ2ggc3BlZWQgbG9vcA0KICBmdW5jdGlvbiBWaWt0b3I6VGljaygpDQogICAgICAgc2VsZjphdXRvemhvbnlhKCkNCiAgICAgICBzZWxmOkhhc2VidWZmKCkNCiAgICAgICBpZiBWSVBfVVNFUiB0aGVuICAgc2VsZjpBbnRpYWZrKCkgIGVuZA0KICAgICAgIHNlbGY6YXV0b3BvdCgpDQogICAgICAgc2VsZjppdGVtcygpDQogICAgICAgc2VsZjpjaGVja3RzKCkNCiAgICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICAgICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOnNraW5oYWNrKCkgZW5kDQogICBpZihzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgICAgc2VsZjpjb21ibygpDQogICAgZW5kDQogICAgIGlmKHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkubGFzdGhpdGtleSBvciBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuYXV0b2xhc3RoaXQgKXRoZW4NCiAgICAgIHNlbGY6TGFzdEhpdCgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuZmFybS5jbGVhcmtleS5sYW5lY2xlYXJrZXkpdGhlbg0KICAgICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuZmFybS5jbGVhcmtleS5qdW5nbGVjbGVhcmtleSl0aGVuDQogICAgICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgICBzZWxmOmtpbGxzdGVhbCgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuaGFyYXNzLmhhcmFzc2tleSBvciBzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNzdG9nbGUgKSB0aGVuDQogICAgICBzZWxmOmhhcmFzcygpDQogICAgZW5kDQogICAgIGlmIHNlbGYuQ29uZmlnLmluc3RydWN0IHRoZW4NCiAgICBzZWxmLkNvbmZpZy5pbnN0cnVjdCA9IGZhbHNlDQogICAgUG9wVXAxID0gdHJ1ZQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgICAgICAgZnVuY3Rpb24gVmlrdG9yOndyaXRlY2ZnKHBhcmFtKQ0KICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihTQ1JJUFRfUEFUSC4uIlxcIi4uImNvbmZpZy5jZmciLCAidyIpDQogICAgICAgIGlmIG5vdCBmaWxlIHRoZW4NCiAgICAgICAgICAgICAgIC0tIHByaW50KCJFcnJvciBpbiBXcml0ZSBDRkciKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgcGFyYW0gfj0gImZ0YyIgdGhlbg0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgICAgICAgIC0tIHByaW50KCJXcml0dGVuOiAiLi5hdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZSgiZW5nIikNCiAgICAgICAgICAgICAgIC0tIHByaW50KCJXOiBFbmdsaXNoIikNCiAgICAgICAgZW5kDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpjaGVja3RzKCkNCiAgICAgICAgIHNlbGYudHM6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNnOnVwZGF0ZSgpDQogIGlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi50c2UudGFyZ2V0DQogIGVsc2VpZiBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBzZWxmLnNlbGVjdGVkVGFyIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpMb2FkTWVudSgpDQogICAgICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIgWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4iXSIgLCJtZW51IikNCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMDVdLCAiaGl0IikNCiAgICAgICAgc2VsZi5Db25maWcuaGl0OmFkZFBhcmFtKCJFIiwgbG9jX2Nob29zZW5bMTYyXSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxLjYsIDEsIDMsIDIpDQogICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMV0sICJjb21ibyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJjb21ib2tleSIsIGxvY19jaG9vc2VuWzgxXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bMTU5XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjBdLGxvY19jaG9vc2VuWzIxN10sbG9jX2Nob29zZW5bMTcyXSB9KSANCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzldLCAiaGFyYXNzIikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NrZXkiLCBsb2NfY2hvb3Nlbls4M10sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiQyIpKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc3RvZ2xlIiwgbG9jX2Nob29zZW5bMTY0XSwgICBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsxMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMTJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiRSIsIGxvY19jaG9vc2VuWzE2M10sIFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMywgMikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCnNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTRdLCAiZmFybSIpDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE1XSwibGFuZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzE2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzE4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImVjb3VudCIsbG9jX2Nob29zZW5bMTgyXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMF0sImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyNV0sImxhc3RoaXQiKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJhdXRvbGFzdGhpdCIsbG9jX2Nob29zZW5bMTg5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzI2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlRSIsbG9jX2Nob29zZW5bMjhdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJsYXN0aGl0bG9naWMiLGxvY19jaG9vc2VuWzE5MV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTcyXSxsb2NfY2hvb3NlblsxOTBdLGxvY19jaG9vc2VuWzE3NF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjE4XSwiY2xlYXJrZXkiKQ0KICAgICAgc2VsZi5Db25maWcuZmFybS5jbGVhcmtleTphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5OmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4NV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuZmFybS5jbGVhcmtleTphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzVdLCAia2lsbHN0ZWFsIikNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsbG9jX2Nob29zZW5bMzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblszN10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMzldLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzQwXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUkiLCBsb2NfY2hvb3Nlbls0MV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNDJdLCAiaXRlbSIpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOTJdLCAiYXV0b3BvdCIpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiZW5hYmxlYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTkzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImVuYWJsZWF1dG96aG9ueWEiLCBsb2NfY2hvb3Nlbls0M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImF1dG96aG9ueWEiLCBsb2NfY2hvb3Nlbls0NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlaGciLCBsb2NfY2hvb3Nlbls0NV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWJnIiwgbG9jX2Nob29zZW5bNDZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTJdLCAibWlzYyIpDQogICAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTNdLCAiaW50ZXJydXB0IikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oInIiLCBsb2NfY2hvb3Nlbls5N10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oInciLCBsb2NfY2hvb3Nlbls5NV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oImluZm8zIiwgbG9jX2Nob29zZW5bOThdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgZm9yIGksIGEgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgIGlmIEludGVycnVwdFthLmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLCBzcGVsbCBpbiBwYWlycyhJbnRlcnJ1cHRbYS5jaGFyTmFtZV0uc3RvcCkgZG8NCiAgICAgICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKHNwZWxsLnNwZWxsTmFtZSwgYS5jaGFyTmFtZS4uIiAtICIuLnNwZWxsLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgDQogICAgICAgIGVuZA0KICAgICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIxOV0sICJnYXBDbG9zZSIpDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgidyIsIGxvY19jaG9vc2VuWzIyMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgiaW5mbzMiLCBsb2NfY2hvb3Nlbls5OF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIGZvciBfLCBlbmVteSBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgaWYgaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKGVuZW15LmNoYXJOYW1lLCBlbmVteS5jaGFyTmFtZSAuLiAiIC0gIiAuLiBlbmVteTpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0uc3BlbGwpLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQ3XSwgInZpcCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0Iixsb2NfY2hvb3Nlbls0OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bNDldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTBdLCAibGV2ZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzUyXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDcsIHtsb2NfY2hvb3Nlbls1OF0sIGxvY19jaG9vc2VuWzU5XSxsb2NfY2hvb3Nlbls2MF0sbG9jX2Nob29zZW5bNjFdLGxvY19jaG9vc2VuWzYyXSwgbG9jX2Nob29zZW5bNjNdLCBsb2NfY2hvb3Nlbls2NF0gIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUzXSwgInNraW4iKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1NF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbicsIGxvY19jaG9vc2VuWzU3XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHNraW5NZXRhW215SGVyby5jaGFyTmFtZV0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsIGxvY19jaG9vc2VuWzU1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIC0tc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNSIsICJTa2luIEhhY2sgdGVtcG9yYXJ5IGRpc2FibGVkIHVudGlsIG5leHQgdXBkYXRlLiAuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5NV0sICJhbnRpYWZrIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLGxvY19jaG9vc2VuWzE5Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKSANCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsIGxvY19jaG9vc2VuWzU2XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgZW5kDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjVdLCJvdGhlciIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2Nl0sICJkcmF3IikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLGxvY19jaG9vc2VuWzY3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLGxvY19jaG9vc2VuWzY4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiZWRyYXciLGxvY19jaG9vc2VuWzY5XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLGxvY19jaG9vc2VuWzcwXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3Iixsb2NfY2hvb3Nlbls3MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJydGRyYXciLGxvY19jaG9vc2VuWzE5N10sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5OF0sICJjb2xvciIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJRY29sb3IiLCBsb2NfY2hvb3NlblsxOTldLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJXY29sb3IiLCBsb2NfY2hvb3NlblsyMDBdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFY29sb3IiLCBsb2NfY2hvb3NlblsyMDFdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJSY29sb3IiLCBsb2NfY2hvb3NlblsyMDJdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFMmNvbG9yIiwgbG9jX2Nob29zZW5bMjAzXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiQUFjb2xvciIsIGxvY19jaG9vc2VuWzIwNF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oInRhcmdldHNlbGVjdCIsIGxvY19jaG9vc2VuWzIwNV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwNl0sICJ3aWR0aCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJRd2lkdGgiLCBsb2NfY2hvb3NlblsyMTBdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJXd2lkdGgiLCBsb2NfY2hvb3NlblsyMTFdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFd2lkdGgiLCBsb2NfY2hvb3NlblsyMTJdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJSd2lkdGgiLCBsb2NfY2hvb3NlblsyMTNdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFMndpZHRoIiwgbG9jX2Nob29zZW5bMjA3XSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiQUF3aWR0aCIsIGxvY19jaG9vc2VuWzIwOV0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlNUd2lkdGgiLCBsb2NfY2hvb3NlblsyMDhdLCA0LCA2LCAxLCAxMCwgMCkgICANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldCIsbG9jX2Nob29zZW5bNzVdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKSAgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJkYW1hZ2UiLGxvY19jaG9vc2VuWzIxNF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXRjYWwiLGxvY19jaG9vc2VuWzc2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkgDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3M10sICJwZXJtYSIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hOmFkZFBhcmFtKCJwZXJtYSIsbG9jX2Nob29zZW5bNzRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc3XSwidGFyZ2V0c2VsIikNCiAgICAgc2VsZi50cy5uYW1lICA9ICJWaWt0b3IiDQogICAgICBzZWxmLnRzcS5uYW1lID0gIlZpa3RvclEiDQogICAgICBzZWxmLnRzdy5uYW1lID0gIlZpa3RvclciDQogICAgICBzZWxmLnRzZS5uYW1lID0gIlZpa3RvckUiDQogICAgICBzZWxmLnRzci5uYW1lID0gIlZpa3RvclIiDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzdykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcikgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc5XSwgIktleXMiKQ0KICAgICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5cykNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgibGFuZyIsIGxvY19jaG9vc2VuWzE2NV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTY2XSwgbG9jX2Nob29zZW5bMTY3XSxsb2NfY2hvb3NlblsxNjhdfSkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5zdHJ1Y3QiLCBsb2NfY2hvb3NlblsyMTZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hLnBlcm1hIHRoZW4NCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikgZW5kLCAxKQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5jb21ibzpwZXJtYVNob3coImNvbWJva2V5IikgZW5kLCAxLjIpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLmhhcmFzczpwZXJtYVNob3coImhhcmFzc3RvZ2xlIikgZW5kLCAxLjIpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLmhhcmFzczpwZXJtYVNob3coImhhcmFzc2tleSIpIGVuZCwgMS4yKQ0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpEcmF3KCkNCiAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjAwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguUXdpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlFjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLld3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTIwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDUyNSwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucnRkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgIHRoZW4NCiAgIGlmIHNlbGYudHNlLnRhcmdldH49bmlsIHRoZW4NCiAgICAgIERyYXdMaW5lM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueixzZWxmLnRzZS50YXJnZXQueCwgc2VsZi50c2UudGFyZ2V0LnksIHNlbGYudHNlLnRhcmdldC56LHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkUyd2lkdGgsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRTJjb2xvcikpKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0IGFuZCBzZWxmLnNlbGVjdGVkVGFyIH49IG5pbCB0aGVuDQogICAgICAgICBEcmF3Q2lyY2xlM0Qoc2VsZi5zZWxlY3RlZFRhci54LCBzZWxmLnNlbGVjdGVkVGFyLnksIHNlbGYuc2VsZWN0ZWRUYXIueiwgODAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlNUd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLnRhcmdldHNlbGVjdCkpKQ0KZW5kDQogICBpZiBQb3BVcDEgdGhlbg0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjUwKSwgKFdJTkRPV19IKi4xNSksIChXSU5ET1dfSCouOSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjA1LCB3LCBoMi8xLjk3LCB3LzEuNzUsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3TGluZSh3LCBoMSwgdywgaDIvMiwgdy8xLjgsIEFSR0IoMTUwLCAyMzUsIDE4MywgNjMpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiV2VsY29tZSB0byBLZXlib2FyZE1hc3RlciBTZXJpZXMgMy4wIiksIFdJTkRPV19IKi4wMjgsIChXSU5ET1dfVy8yKSwgKFdJTkRPV19IKi4xOCksIEFSR0IoMjU1LCA5NiwgNDgsIDApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgRHJhd1RleHRBKHRvc3RyaW5nKCJMaXR0bGUgaW5mb3JtYXRhdGlvbiBhYm91dCBLZXlib2FyZE1hc3RlciBTZXJpZXMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjE5NCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSXRzIGEgYnVuZGxlIHRoYXQgcHJvZHVjZWQgYnkgZW5zdWx1eW4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkN1cnJlbnRseSBpdCBzdXBwb3J0ZWQgb25seSBtaWQgY2hhbXBzICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjI1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBmb2N1cyBRdWFsaXR5IHJhdGhlciB0aGFuIFF1YW50aXR5IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIG5lZWQgeW91ciBmZWVkYmFja3MgdG8gaW1wcm92ZSBpdCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjU1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBjYXJlIGV2ZXJ5IHNpbmdsZSBmZWVkYmFjayBhbmQgdHJ5IHRvIGFkZCBldmVyeXRoaW5nIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNzApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJIb3BlIHlvdSBhcmUgZW5qb3kgbXkgc2NyaXB0Li4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI4NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIllvdSBjYW4gY2hhbmdlIGV2ZXJ5IHNldHRpbmdzIHRvIHlvdXIgbGlrZSA6KSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzAwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRGlkIHlvdSBsaWtlIG15IHNjcmlwdCA+IFVwdm90ZSBtZSBvbiBzY3JpcHRzdGF0dXMgYW5kIG9uIGZvcnVtIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEb24ndCBmb3JnZXQgdGhlc2UgYXJlIFZJUDsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMzMCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBbnRpLUFmayIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzQ1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBdXRvIExldmVsZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNjApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIFNraW4gQ2hhbmdlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM3NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC40OSksIChXSU5ET1dfSCouNzApLCAoV0lORE9XX0gqLjc1KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuNzc1LCB3LCBoMi8xLjY4LCB3Ki4xMSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdSZWN0YW5nbGVCdXR0b24oV0lORE9XX1cqMC40NjcsIFdJTkRPV19ILzIuMzc1LCBXSU5ET1dfVyouMDQ3LCBXSU5ET1dfSCouMDQxLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJPSyIpLCBXSU5ET1dfSCouMDIsIChXSU5ET1dfVy8yKSouOTgsIChXSU5ET1dfSC8yLjM3NSksIEFSR0IoMjU1LCAwLCAwLCAwICksImNlbnRlciIsImNlbnRlciIpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdHMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM5NSksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVycnktIEZvciB0aGlzIGF3ZXNvbWUgcG9wdXAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjQxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkgDQogIGVuZA0KICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldGNhbCBhbmQgbm90IG15SGVyby5kZWFkIHRoZW4NCiAgICAgICAgbG9jYWwgZHJhd3Bvcz1Xb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnopKQ0KICAgICAgICBsb2NhbCBjb21ib1RleHQsY29sb3IgPSBzZWxmOkdldERyYXdzKHRhcmdldCkNCiAgICAgICAgaWYgY29tYm9UZXh0IHRoZW4NCiAgICAgICAgICBEcmF3VGV4dChjb21ib1RleHQsMTUsZHJhd3Bvcy54LTIwLGRyYXdwb3MueS0yMCxjb2xvcikNCiAgICAgICAgZW5kIA0KICAgICAgZW5kIA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwMCkgdGhlbg0KICAgICAgaWYgdGFyZ2V0LnZpc2libGUgYW5kIG5vdCB0YXJnZXQuZGVhZCBhbmQgc2VsZi5Db25maWcub3RoZXIuZGFtYWdlIHRoZW4NCiAgICAgICAgY3VyckxpbmUgPSAxDQogICAgICAgIERyYXdMaW5lSFBCYXIyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwiIiwgIHRhcmdldCwgY3VyckxpbmUpDQogICAgICAgIERyYXdMaW5lSFBCYXIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCAiRGFtYWdlICIgLi4gbWF0aC5yb3VuZChzZWxmOkdldE15RG1nKHRhcmdldCkpLHRhcmdldCxjdXJyTGluZSkNCiAgICAgICAgY3VyckxpbmUgPSBjdXJyTGluZSArIDENCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgICAgIGVuZA0KICANCiAgICBmdW5jdGlvbiBWaWt0b3I6YXV0b3BvdCgpDQogaWYgb3MuY2xvY2soKSAtIGxhc3RQb3Rpb24gPCAxNSB0aGVuIHJldHVybiBlbmQNCiAgZm9yIFNMT1QgPSBJVEVNXzEsIElURU1fNiBkbw0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoU0xPVCkubmFtZSA9PSAiUmVnZW5lcmF0aW9uUG90aW9uIiBhbmQgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90LmVuYWJsZWF1dG9wb3RocCB0aGVuDQogICAgICBpZiBteUhlcm86Q2FuVXNlU3BlbGwoU0xPVCkgPT0gUkVBRFkgYW5kIChteUhlcm8uaGVhbHRoIC8gbXlIZXJvLm1heEhlYWx0aCA8IHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5hdXRvcG90aHAgLzEwMCApICB0aGVuDQogICAgICAgIENhc3RTcGVsbChTTE9UKSANCiAgICAgICAgbGFzdFBvdGlvbiA9IG9zLmNsb2NrKCkgICAgICAgDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCiAgICBmdW5jdGlvbiBWaWt0b3I6aXRlbXMoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWJnIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IHRoZW4NCiAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICBpZiAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIkhleHRlY2hHdW5ibGFkZSIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gVmlrdG9yOnNraW5oYWNrKCkNCiAgaWYgbm90IHNraW5sb2FkIHRoZW4NCiAgaWYgKChDdXJyZW50VGltZUluTWlsbGlzKCkgLSBsYXN0VGltZVRpY2tDYWxsZWQpID4gMjAwKSB0aGVuDQogICAgICBsYXN0VGltZVRpY2tDYWxsZWQgPSBDdXJyZW50VGltZUluTWlsbGlzKCkNCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpbi5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgIHRoZW4NCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddIH49IGxhc3RTa2luIHRoZW4NCiAgICAgICAgbGFzdFNraW4gPSBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkhhc2VidWZmKCkNCiAgZm9yIGkgPSAxLCBteUhlcm8uYnVmZkNvdW50IGRvDQogICAgICAgIGxvY2FsIGJ1ZmYgPSBteUhlcm86Z2V0QnVmZihpKQ0KICAgICAgICBpZiBCdWZmSXNWYWxpZChidWZmKSB0aGVuDQogICAgICAgIGlmIGJ1ZmYubmFtZTpsb3dlcigpID09ICJ2aWt0b3JlYXVnIiB0aGVuDQogICAgICAgICAgICBlYnVmZiA9IHRydWUNCiAgICAgICAgZW5kDQplbmQNCmVuZA0KZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpBcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKQ0KICBpZiB1bml0ID09IG5pbCBvciBidWZmID09IG5pbCB0aGVuIHJldHVybiBlbmQgDQogIGlmIHVuaXQgYW5kIHVuaXQuaXNNZSBhbmQgYnVmZi5uYW1lID09ICJ2aWt0b3JlYXVnIiB0aGVuDQogIGVidWZmID0gdHJ1ZQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDMsMywyLDMsNCwzLDEsMywxLDQsMSwyLDEsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpzYXZlcigpDQogICAgZW5kDQogICAgZnVuY3Rpb24gVmlrdG9yOmFsd2F5c3IoKQ0KICAgIGlmIChzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IGFuZCBHZXREaXN0YW5jZShzZWxmLnRzci50YXJnZXQpPDcwMCApdGhlbg0KICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICBlbmQNCiAgICBlbmQNCiAgICAgICBmdW5jdGlvbiBWaWt0b3I6bmVlZHIoKQ0KICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiggc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwICl0aGVuDQogICAgICAgIGxvY2FsIGRhbWFnZXdpdGhyID1zZWxmOkdldFJEbWcodW5pdCkrc2VsZjpHZXRRRG1nKHVuaXQpICtzZWxmOkdldEVEbWcodW5pdCkgDQogICAgICAgIGxvY2FsIGRhbWFnZXdpdGhub3IgPSBzZWxmOkdldFFEbWcodW5pdCkgK3NlbGY6R2V0RURtZyh1bml0KSANCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkYW1hZ2V3aXRobm9yICl0aGVuDQogICAgICAgICAgc2VsZjpzYXZlcigpDQogICAgICAgZWxzZWlmKGhlYWx0aDxkYW1hZ2V3aXRociApdGhlbg0KICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgICAgIGZ1bmN0aW9uIFZpa3RvcjpraWxscigpDQogICAgICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmKCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IGFuZCBHZXREaXN0YW5jZSh1bml0KTw3MDAgKXRoZW4NCiAgICAgICAgbG9jYWwgZG1nUiA9c2VsZjpHZXRSRG1nKHVuaXQpDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nUiApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgIGVuZA0KICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpDQogaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgPiAxIHRoZW4NCmlmIEludGVycnVwdFt1bml0LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICBzcGVsbCA9IEludGVycnVwdFt1bml0LmNoYXJOYW1lXS5zdG9wW3NwZWxsLm5hbWVdDQogICAgICAgIGlmIHNwZWxsIH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdFtzcGVsbC5uYW1lXSB0aGVuDQogICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQodW5pdCkgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgc2VsZi5SU3BlbGwuUmFuZ2UgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdC5yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsID4gMSB0aGVuDQogICAgaWYgSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgIHNwZWxsID0gSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdLnN0b3Bbc3BlbGwubmFtZV0NCiAgICAgICAgaWYgc3BlbGwgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0W3NwZWxsLm5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBWYWxpZFRhcmdldCh1bml0KSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCBzZWxmLldTcGVsbC5SYW5nZSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0LncgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzZWxmOkNhc3RXKHVuaXQpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0gYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgMTAwMCBhbmQgc3BlbGwgfj0gbmlsIHRoZW4gICAgIA0KICAgIGlmIHNwZWxsLm5hbWUgPT0gKHR5cGUoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgPT0gJ251bWJlcicgYW5kIHVuaXQ6R2V0U3BlbGxEYXRhKGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgYW5kIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2VbdW5pdC5jaGFyTmFtZV0gdGhlbg0KICAgICAgaWYgc3BlbGwudGFyZ2V0IH49IG5pbCBhbmQgc3BlbGwudGFyZ2V0Lm5hbWUgPT0gbXlIZXJvLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCA9PSAnYmxpbmRtb25rcXR3bycgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCmVuZA0KICBmdW5jdGlvbiBWaWt0b3I6Y29tYm8oKQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNxLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMSB0aGVuDQogICAgICBzZWxmOmtpbGxyKCkNCiAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAyIHRoZW4NCiAgICAgIHNlbGY6bmVlZHIoKQ0KICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDMgdGhlbg0KICAgICAgc2VsZjphbHdheXNyKCkNCiAgICAgIGVuZA0KICAgIA0KICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgIGVuZA0KICAgICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkNhc3RRKHVuaXQpDQogICAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0Vyh1bml0KQ0KICAgIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdEUodW5pdCkNCiAgIA0KICAgIGlmIHVuaXQuZGVhZCBvciB1bml0LmhlYWx0aCA9PSAwIHRoZW4NCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIA0KICAgIGlmIEdldERpc3RhbmNlKHVuaXQsIG15SGVybykgPiBzZWxmLkUuUmFuZ2UxLTUgdGhlbg0KICAgICBFU3RhcnRQb3MgPSBDaXJjbGVJbnRlcnNlY3Rpb24obXlIZXJvLCB1bml0LCBteUhlcm8sIHNlbGYuRS5SYW5nZTEtNSkNCiAgICBlbHNlDQogICAgIEVTdGFydFBvcyA9IFZlY3Rvcih1bml0LngsIHVuaXQueSwgdW5pdC56KQ0KICAgIGVuZA0KICAgIA0KICAgICBFUG9zLCBFSGl0Q2hhbmNlID0gc2VsZi5IUHJlZDpHZXRQcmVkaWN0KHNlbGYuSFByZWQuUHJlc2V0c1snVmlrdG9yJ11bIkUiXSwgdW5pdCwgRVN0YXJ0UG9zKQ0KICAgIA0KICAgIGlmIG1vZGUgPT0gIkNvbWJvIiBhbmQgRUhpdENoYW5jZSA+PSBzZWxmLkNvbmZpZy5oaXQuRSBvciBtb2RlID09ICJIYXJhc3MiIGFuZCBFSGl0Q2hhbmNlID49IHNlbGYuQ29uZmlnLmhhcmFzcy5FIG9yICBtb2RlID09IG5pbCBhbmQgRUhpdENoYW5jZSA+IDEgdGhlbg0KICAgICAgQ2FzdFNwZWxsMyhfRSwgRDNEWFZFQ1RPUjMoRVN0YXJ0UG9zLngsIDAsIEVTdGFydFBvcy56KSwgRDNEWFZFQ1RPUjMoRVBvcy54LCAwLCBFUG9zLnopKQ0KICAgIGVuZA0KICAgIA0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0Uih1bml0KQ0KICAgIHNlbGYuUlNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0SSh1bml0KQ0KICAgIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpraWxsc3RlYWwoKQ0KICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgaGVhbHRoID0gdW5pdC5oZWFsdGgNCiAgICAgIGxvY2FsIGRtZ0UgPSBzZWxmOkdldEVEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c2UudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ0UgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VFIGFuZCBHZXREaXN0YW5jZSh1bml0KTw3MDAgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1EgPSBzZWxmOkdldFFEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpHZXRRRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyMCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDIwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouMiArICgobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjUpKQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpHZXRRMkRtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMjAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjIgKQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gVmlrdG9yOkdldEVEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBub3QgZWJ1ZmYgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuIA0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCAqIDQ1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjcpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2VpZiBlYnVmZiBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPS40KigoMjUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiA0NSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC43KSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIFZpa3RvcjpHZXRSRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBSZGFtYWdlID0gKDUwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICogMTAwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjU1KQ0KICBsb2NhbCBwZXJzZWNvbmQgPSAoIDE0KihteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDE1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjEpDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gUmRhbWFnZSArIHBlcnNlY29uZA0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6R2V0TXlEbWcodGFyZ2V0KQ0KICAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIFZpa3RvcjpHZXREcmF3cyh0YXJnZXQpDQpsb2NhbCBxZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCmxvY2FsIGVkYW1hZ2UgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KbG9jYWwgcmRhbWFnZSA9IHNlbGY6R2V0UkRtZyh0YXJnZXQpDQpsb2NhbCBJZG1nPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgDQogIGlmIHFkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBlZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgZWRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICBlbHNlaWYgcmRhbWFnZSAgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUicsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiByZGFtYWdlICsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2UgK2VkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2UgK2VkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZT50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcmRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0tpbGwgd2l0aCBmdWxsIGNvbWJvJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStlZGFtYWdlK3JkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdGdWxsIENvbWJvICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlIA0KICAgIHJldHVybiAiQ2FudCBLaWxsIHlldCIsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVuZCANCmVuZA0KICBmdW5jdGlvbiBWaWt0b3I6aGFyYXNzKCkNCiAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICBpZiBzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLmhhcmFzcy5oYXJhc3N0b2dsZSAgdGhlbg0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVEgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgICAgZW5kICAgDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlRSAgYW5kIFZhbGlkVGFyZ2V0KHNlbGYudHNlLnRhcmdldCwgc2VsZi5FUmFuZ2UpKSB0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgIGVuZA0KICANCiAgICAgICAgZW5kDQogICAgICBlbmQgICANCiAgICAgIGZ1bmN0aW9uIFZpa3RvcjpBbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmay5hbnRpYWZrIHRoZW4gcmV0dXJuIGVuZA0KICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQogIG15SGVybzpNb3ZlVG8obXlIZXJvLngsIG15SGVyby56KQ0KZW5kDQogICAgIGZ1bmN0aW9uIFZpa3RvcjpMYXN0SGl0KCkNCiAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDEgdGhlbg0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICAgICAgICBsb2NhbCBRZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApIGFuZCBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpICBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLlFTcGVsbC5SYW5nZSAqIHNlbGYuUVNwZWxsLlJhbmdlIGFuZCBRZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgIGVuZA0KICAgICAgICBsb2NhbCBFZGFtYWdlID0gc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LkVNYW5hIC8xMDAgKWFuZCAgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLkVTcGVsbC5SYW5nZSAqIHNlbGYuRVNwZWxsLlJhbmdlIGFuZCBFZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgZWxzZWlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMiB0aGVuDQogICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuRU1hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6TGFuZUNsZWFyKCkNCiAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gc2VsZi5jbGVhcnRhcmdldA0KICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5LmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuUU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICAgc2VsZjpDYXN0UShjbGVhcnRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLmVjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5LmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuRU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuRVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5FU3BlbGwuUmFuZ2UsIHNlbGYuRVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKQ0KICAgICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgYW5kICBCZXN0SGl0ID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfRSwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpKdW5nbGVDbGVhcigpDQogICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlFNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkuanVuZ2xlY2xlYXJrZXkgICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5XTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgc2VsZi5XU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZUUgYW5kIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLkVNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICBmdW5jdGlvbiBWaWt0b3I6V25kTXNnKE1zZywgS2V5KQ0KICAgICAgICBpZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRCA9IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIGFuZCBzdGFyZ2V0LmNoYXJOYW1lID09IHNlbGYuc2VsZWN0ZWRUYXIuY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgIGlmIFBvcFVwMSB0aGVuDQogICAgICBQb3BVcDEgPSBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgICAgIGVuZA0KICAgICAgICAgIGZ1bmN0aW9uIFZpa3RvcjpVbmxvYWQoKQ0KICAgICAgICBzZWxmOndyaXRlY2ZnKCkNCiAgICAgIGVuZA0KICBjbGFzcyAiRGlhbmEiDQogLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gRGlhbmEgU3RhcnRzICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBEaWFuYTpfX2luaXQoKQ0Kc2VsZi50cz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgODMwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDgzMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAyMDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzZT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgMzUwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c3I9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDgyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNnPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMDAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSA4MzAsIFdpZHRoID0gNzUsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSAyMDAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDIwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAzNTAsIENvbGxpc2lvbiA9IHRydWUsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID0gODI1LCAgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpUaWNrKCkgZW5kKQ0KICAgICAgICAgICAgICBBZGRVbmxvYWRDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VW5sb2FkKCkgZW5kICkNCiAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICBBZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgQWRkUHJvY2Vzc1NwZWxsQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSBlbmQpDQogIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAtLUFkZFVwZGF0ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmLCBzdGFja3MpIHNlbGY6VXBkYXRlQnVmZih1bml0LCBidWZmLCBzdGFja3MpIGVuZCkNCiAgLS1BZGRSZW1vdmVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZikgc2VsZjpPblJlbW92ZUJ1ZmYodW5pdCwgYnVmZikgZW5kKSANCiAgICBlbmQNCiAgICAgZnVuY3Rpb24gRGlhbmE6VGljaygpDQogIHNlbGY6YXV0b3pob255YSgpDQogIHNlbGY6YXV0b3EoKQ0KIGlmIFZJUF9VU0VSIHRoZW4gICBzZWxmOkFudGlhZmsoKSAgZW5kDQogIHNlbGY6YXV0b3BvdCgpDQogIC0tc2VsZjpnYXBjbG9zZSgpDQogIHNlbGY6aXRlbXMoKQ0KICAgICAgICBzZWxmOmNoZWNrdHMoKQ0KICAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6YXV0b2xldmVsKCkgZW5kDQogICAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKXRoZW4NCiAgIHNlbGY6SnVuZ2xlQ2xlYXIoKQ0KICBlbmQNCiAgIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDEgKXRoZW4NCiAgICBzZWxmOmNvbWJvMSgpDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFzdGhpdGtleSBvciBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuYXV0b2xhc3RoaXQgKXRoZW4NCiAgICAgIHNlbGY6TGFzdEhpdCgpDQogICAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmluc3RydWN0IHRoZW4NCiAgICBzZWxmLkNvbmZpZy5pbnN0cnVjdCA9IGZhbHNlDQogICAgUG9wVXAxID0gdHJ1ZQ0KICAgICAgZW5kDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAyICl0aGVuDQogICAgc2VsZjpjb21ibzIoKQ0KICBlbmQNCiAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSBhbmQgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMyApdGhlbg0KICAgIHNlbGY6Y29tYm8zKCkNCiAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgKXRoZW4NCiAgICBzZWxmOkxhbmVDbGVhcigpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgc2VsZjpraWxsc3RlYWwoKQ0KICBlbmQNCiAgaWYoc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgICkgdGhlbg0KICAgIHNlbGY6aGFyYXNzKCkNCiAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSApdGhlbg0KICAgICAgc2VsZjplc2NhcGUoKQ0KICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBEaWFuYTpEcmF3KCkNCiAgICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5xZHJhdyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA2MDAsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Rd2lkdGgsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUWNvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcud2RyYXcgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguV3dpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5XY29sb3IpKSkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5lZHJhdyBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCAxMjAwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguRXdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5FY29sb3IpKSkNCiAgICBlbmQNCiAgICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJkcmF3IGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguUndpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5SY29sb3IpKSkNCiAgICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmFhZHJhdyB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTI1LCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5BQXdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5BQWNvbG9yKSkpDQogICAgZW5kDQogICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXQgYW5kIHNlbGYuc2VsZWN0ZWRUYXIgfj0gbmlsIHRoZW4NCiAgICAgICAgIERyYXdDaXJjbGUzRChzZWxmLnNlbGVjdGVkVGFyLngsIHNlbGYuc2VsZWN0ZWRUYXIueSwgc2VsZi5zZWxlY3RlZFRhci56LCA4MCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguU1R3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IudGFyZ2V0c2VsZWN0KSkpDQplbmQNCiAgICBpZiBQb3BVcDEgdGhlbg0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjUwKSwgKFdJTkRPV19IKi4xNSksIChXSU5ET1dfSCouOSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjA1LCB3LCBoMi8xLjk3LCB3LzEuNzUsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3TGluZSh3LCBoMSwgdywgaDIvMiwgdy8xLjgsIEFSR0IoMTUwLCAyMzUsIDE4MywgNjMpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiV2VsY29tZSB0byBLZXlib2FyZE1hc3RlciBTZXJpZXMgMy4wIiksIFdJTkRPV19IKi4wMjgsIChXSU5ET1dfVy8yKSwgKFdJTkRPV19IKi4xOCksIEFSR0IoMjU1LCA5NiwgNDgsIDApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgRHJhd1RleHRBKHRvc3RyaW5nKCJMaXR0bGUgaW5mb3JtYXRhdGlvbiBhYm91dCBLZXlib2FyZE1hc3RlciBTZXJpZXMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjE5NCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSXRzIGEgYnVuZGxlIHRoYXQgcHJvZHVjZWQgYnkgZW5zdWx1eW4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkN1cnJlbnRseSBpdCBzdXBwb3J0ZWQgb25seSBtaWQgY2hhbXBzICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjI1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBmb2N1cyBRdWFsaXR5IHJhdGhlciB0aGFuIFF1YW50aXR5IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIG5lZWQgeW91ciBmZWVkYmFja3MgdG8gaW1wcm92ZSBpdCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjU1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBjYXJlIGV2ZXJ5IHNpbmdsZSBmZWVkYmFjayBhbmQgdHJ5IHRvIGFkZCBldmVyeXRoaW5nIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNzApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJIb3BlIHlvdSBhcmUgZW5qb3kgbXkgc2NyaXB0Li4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI4NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIllvdSBjYW4gY2hhbmdlIGV2ZXJ5IHNldHRpbmdzIHRvIHlvdXIgbGlrZSA6KSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzAwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRGlkIHlvdSBsaWtlIG15IHNjcmlwdCA+IFVwdm90ZSBtZSBvbiBzY3JpcHRzdGF0dXMgYW5kIG9uIGZvcnVtIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEb24ndCBmb3JnZXQgdGhlc2UgYXJlIFZJUDsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMzMCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBbnRpLUFmayIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzQ1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBdXRvIExldmVsZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNjApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIFNraW4gQ2hhbmdlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM3NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC40OSksIChXSU5ET1dfSCouNzApLCAoV0lORE9XX0gqLjc1KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuNzc1LCB3LCBoMi8xLjY4LCB3Ki4xMSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdSZWN0YW5nbGVCdXR0b24oV0lORE9XX1cqMC40NjcsIFdJTkRPV19ILzIuMzc1LCBXSU5ET1dfVyouMDQ3LCBXSU5ET1dfSCouMDQxLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJPSyIpLCBXSU5ET1dfSCouMDIsIChXSU5ET1dfVy8yKSouOTgsIChXSU5ET1dfSC8yLjM3NSksIEFSR0IoMjU1LCAwLCAwLCAwICksImNlbnRlciIsImNlbnRlciIpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdHMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM5NSksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVycnktIEZvciB0aGlzIGF3ZXNvbWUgcG9wdXAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjQxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkgDQogIGVuZA0KICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwMCkgdGhlbg0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXRjYWwgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQogICAgICAgIGxvY2FsIGRyYXdwb3M9V29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh0YXJnZXQueCwgdGFyZ2V0LnksIHRhcmdldC56KSkNCiAgICAgICAgbG9jYWwgY29tYm9UZXh0LGNvbG9yID0gc2VsZjpHZXREcmF3cyh0YXJnZXQpDQogICAgICAgIGlmIGNvbWJvVGV4dCB0aGVuDQogICAgICAgICAgRHJhd1RleHQoY29tYm9UZXh0LDE1LGRyYXdwb3MueC0yMCxkcmF3cG9zLnktMjAsY29sb3IpDQogICAgICAgIGVuZCANCiAgICAgIGVuZCANCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCwgMTUwMDApIHRoZW4NCiAgICAgIGlmIHRhcmdldC52aXNpYmxlIGFuZCBub3QgdGFyZ2V0LmRlYWQgYW5kIHNlbGYuQ29uZmlnLm90aGVyLmRhbWFnZSB0aGVuDQogICAgICAgIGN1cnJMaW5lID0gMQ0KICAgICAgICBEcmF3TGluZUhQQmFyMihzZWxmOkdldE15RG1nKHRhcmdldCksIiIsICB0YXJnZXQsIGN1cnJMaW5lKQ0KICAgICAgICBEcmF3TGluZUhQQmFyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwgIkRhbWFnZSAiIC4uIG1hdGgucm91bmQoc2VsZjpHZXRNeURtZyh0YXJnZXQpKSx0YXJnZXQsY3VyckxpbmUpDQogICAgICAgIGN1cnJMaW5lID0gY3VyckxpbmUgKyAxDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIERpYW5hOmtpbGxzdGVhbCgpDQpmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgICBsb2NhbCBkbWdRID0gc2VsZjpHZXRRRG1nKHVuaXQpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgICAgIGxvY2FsIGRtZ1cgPSBzZWxmOkdldFdEbWcodW5pdCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdXIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlVyAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MpdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1IgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDU1MCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgIGVuZA0KICAgZW5kDQplbmQNCiAgICAgICAgICBmdW5jdGlvbiBEaWFuYTp3cml0ZWNmZyhwYXJhbSkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInciKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAtLSBwcmludCgiRXJyb3IgaW4gV3JpdGUgQ0ZHIikNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHBhcmFtIH49ICJmdGMiIHRoZW4NCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKGF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgICAgICAgICAtLSBwcmludCgiV3JpdHRlbjogIi4uYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoImVuZyIpDQogICAgICAgICAgICAgIC0tICBwcmludCgiVzogRW5nbGlzaCIpDQogICAgICAgIGVuZA0KICAgICAgICBmaWxlOmNsb3NlKCkNCmVuZA0KZnVuY3Rpb24gRGlhbmE6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KIC0tW1sgaWYgc3BlbGwubmFtZSA9PSAiYXR0YWNrIiAgdGhlbg0KICAgICBpZiB1bml0IGFuZCB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgc3BlbGwgYW5kIHNwZWxsLnRhcmdldCBhbmQgc3BlbGwudGFyZ2V0IH49IG5pbCBhbmQgc3BlbGwudGFyZ2V0LmlzTWUgdGhlbg0KIGlmIChzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYy51c2VXIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsKSB0aGVuDQpzZWxmOkNhc3RXKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kXV0NCmlmIEludGVycnVwdFt1bml0LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICBzcGVsbCA9IEludGVycnVwdFt1bml0LmNoYXJOYW1lXS5zdG9wW3NwZWxsLm5hbWVdDQogICAgICAgIGlmIHNwZWxsIH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdFtzcGVsbC5uYW1lXSB0aGVuDQogICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQodW5pdCkgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgc2VsZi5FU3BlbGwuUmFuZ2UgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdC5yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VsZjpDYXN0RSh1bml0KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQogICAgICANCiAgICAgICAgZnVuY3Rpb24gRGlhbmE6Y2hlY2t0cygpDQogICAgICAgc2VsZi50czp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2c6dXBkYXRlKCkNCmlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCnRhcmdldCA9IHNlbGYudHMudGFyZ2V0DQplbHNlaWYgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igc2VsZi5zZWxlY3RlZFRhciB0aGVuDQp0YXJnZXQgPSBzZWxmLnNlbGVjdGVkVGFyDQplbmQNCmVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOndhbGsoKQ0KICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZnVuY3Rpb24gRGlhbmE6ZXNjYXBlKCkNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gRGlhbmE6aGFyYXNzKCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOmF1dG9xKCkNCiAgICAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmF1dG9xIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOkNhc3RRKHVuaXQpDQogIHNlbGYuUVNwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBEaWFuYTpDYXN0Vyh1bml0KQ0KICBzZWxmLldTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gRGlhbmE6Q2FzdEUodW5pdCkNCiAgc2VsZi5FU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIERpYW5hOkNhc3RSKHVuaXQpDQogIHNlbGYuUlNwZWxsOkNhc3QodW5pdCkNCmVuZA0KZnVuY3Rpb24gRGlhbmE6Q2FzdEkodW5pdCkNCiAgc2VsZi5JZ25pdGU6Q2FzdCh1bml0KQ0KZW5kDQpmdW5jdGlvbiBEaWFuYTpHZXRRRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDM1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouNykNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIERpYW5hOkdldFdEbWcodGFyZ2V0KQ0KICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9XKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZCANCiAgIGlmIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gMyooMTAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgKiAxMikgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC4yKQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQplbmQNCmZ1bmN0aW9uIERpYW5hOkdldFJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg0MCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDYwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjYpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gRGlhbmE6YXV0b3pob255YSgpDQogICAgaWYgc2VsZi5Db25maWcuaXRlbS5lbmFibGVhdXRvemhvbnlhIHRoZW4NCiAgICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3pob255YSAvIDEwMCkgYW5kICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiWmhvbnlhc0hvdXJnbGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogICAgZnVuY3Rpb24gRGlhbmE6aXRlbXMoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWJnIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IHRoZW4NCiAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICBpZiAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIkJpbGdld2F0ZXJDdXRsYXNzIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2VoZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJIZXh0ZWNoR3VuYmxhZGUiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgICAgICAgZnVuY3Rpb24gRGlhbmE6QW50aWFmaygpDQogIGlmIG9zLmNsb2NrKCkgPCBDbG9jayBvciBub3Qgc2VsZi5Db25maWcudmlwLmFudGlhZmsuYW50aWFmayB0aGVuIHJldHVybiBlbmQNCiAgQ2xvY2sgPSBvcy5jbG9jaygpICsgbWF0aC5yYW5kb20oNjAsMTIwKQ0KICBteUhlcm86TW92ZVRvKG15SGVyby54LCBteUhlcm8ueikNCmVuZA0KICAgICAgZnVuY3Rpb24gRGlhbmE6YXV0b3BvdCgpDQogaWYgb3MuY2xvY2soKSAtIGxhc3RQb3Rpb24gPCAxNSB0aGVuIHJldHVybiBlbmQNCiAgZm9yIFNMT1QgPSBJVEVNXzEsIElURU1fNiBkbw0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoU0xPVCkubmFtZSA9PSAiUmVnZW5lcmF0aW9uUG90aW9uIiBhbmQgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90LmVuYWJsZWF1dG9wb3RocCB0aGVuDQogICAgICBpZiBteUhlcm86Q2FuVXNlU3BlbGwoU0xPVCkgPT0gUkVBRFkgYW5kIChteUhlcm8uaGVhbHRoIC8gbXlIZXJvLm1heEhlYWx0aCA8IHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5hdXRvcG90aHAgLzEwMCApICB0aGVuDQogICAgICAgIENhc3RTcGVsbChTTE9UKSANCiAgICAgICAgbGFzdFBvdGlvbiA9IG9zLmNsb2NrKCkgICAgICAgDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCmZ1bmN0aW9uIERpYW5hOkxvYWRNZW51KCkNCiAgICAgIHNlbGYuQ29uZmlnPXNjcmlwdENvbmZpZygiIi4uU2NyaXB0bmFtZS4uIiBbIiAuLiBteUhlcm8uY2hhck5hbWUuLiJdIiAsIm1lbnUiKQ0KDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMV0sICJjb21ibyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVciLCBsb2NfY2hvb3NlblszXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzRdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUkiLCBsb2NfY2hvb3Nlbls2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICAtLXNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJsb2dpY2dhcCIsICJVc2UgUVIgdG8gZ2FwY2xvc2UiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJPbmx5IGlmIHRhcmdldCBLaWxsYWJsZSIsICJBbHdheXMiICwgIk5ldmVyIiB9KQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bN10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTM5XSwgbG9jX2Nob29zZW5bMTQwXSAsIGxvY19jaG9vc2VuWzE0MV0gfSkNCiAgICAgDQogICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5XSwgImhhcmFzcyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzEwXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVciLCBsb2NfY2hvb3NlblsxMV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzEyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgDQogICAgICANCiAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE0XSwgImZhcm0iKQ0KICAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNV0sImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsxNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJxY291bnQiLGxvY19jaG9vc2VuWzE4MF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzE3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIndjb3VudCIsbG9jX2Nob29zZW5bMTgxXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMF0sImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUiIsbG9jX2Nob29zZW5bMjRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIldNYW5hIixsb2NfY2hvb3NlblsxODZdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIlJNYW5hIixsb2NfY2hvb3NlblsxODhdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzI1XSwibGFzdGhpdCIpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImF1dG9sYXN0aGl0Iixsb2NfY2hvb3NlblsxODldLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJsYXN0aGl0bG9naWMiLGxvY19jaG9vc2VuWzE5MV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTcyXSxsb2NfY2hvb3NlblsxOTBdLGxvY19jaG9vc2VuWzE3NF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblszNV0sICJraWxsc3RlYWwiKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsbG9jX2Nob29zZW5bMzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMzddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls0MF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgDQogICAgLS1bWyAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRXNjYXBlIFNldHRpbmdzIiwiZXNjYXBlIikNCiAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlUiIsIlVzZSBSIE1pbmlvbiBUbyBFc2NhcGUiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VRUiIsIlVzZSBRUiBNaW5pb24gVG8gRXNjYXBlIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSldXQ0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQyXSwgIml0ZW0iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTkyXSwgImF1dG9wb3QiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImVuYWJsZWF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTk0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWhnIiwgbG9jX2Nob29zZW5bNDVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2ViZyIsIGxvY19jaG9vc2VuWzQ2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTJdLCAibWlzYyIpDQogICAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTNdLCAiaW50ZXJydXB0IikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oInIiLCBsb2NfY2hvb3Nlbls5Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oImluZm8zIiwgbG9jX2Nob29zZW5bOThdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgZm9yIGksIGEgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgIGlmIEludGVycnVwdFthLmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLCBzcGVsbCBpbiBwYWlycyhJbnRlcnJ1cHRbYS5jaGFyTmFtZV0uc3RvcCkgZG8NCiAgICAgICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKHNwZWxsLnNwZWxsTmFtZSwgYS5jaGFyTmFtZS4uIiAtICIuLnNwZWxsLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgDQogICAgICAgIGVuZA0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFBhcmFtKCJlbWF4IiwgbG9jX2Nob29zZW5bMTQyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5taXNjOmFkZFBhcmFtKCJ1c2VXIiwgIkF1dG8gVyBza2lsbCBpZiBlbmVteSBhdHRhY2tzLiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNDddLCAidmlwIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJwYWNrZXQiLGxvY19jaG9vc2VuWzQ4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzEiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3Nlbls0OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1MF0sICJsZXZlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bNTJdLCBTQ1JJUFRfUEFSQU1fTElTVCwgNywge2xvY19jaG9vc2VuWzU4XSwgbG9jX2Nob29zZW5bNTldLGxvY19jaG9vc2VuWzYwXSxsb2NfY2hvb3Nlbls2MV0sbG9jX2Nob29zZW5bNjJdLCBsb2NfY2hvb3Nlbls2M10sIGxvY19jaG9vc2VuWzY0XSAgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTNdLCAic2tpbiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzU0XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCdzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJywgbG9jX2Nob29zZW5bNTddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgc2tpbk1ldGFbbXlIZXJvLmNoYXJOYW1lXSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm81IiwgbG9jX2Nob29zZW5bNTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm81IiwgIlNraW4gSGFjayB0ZW1wb3JhcnkgZGlzYWJsZWQgdW50aWwgbmV4dCB1cGRhdGUuIC4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk1XSwgImFudGlhZmsiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuYW50aWFmazphZGRQYXJhbSgiYW50aWFmayIsbG9jX2Nob29zZW5bMTk2XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpIA0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgbG9jX2Nob29zZW5bNTZdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBlbmQNCiAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjVdLCJvdGhlciIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2Nl0sICJkcmF3IikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLGxvY19jaG9vc2VuWzY3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLGxvY19jaG9vc2VuWzY4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiZWRyYXciLGxvY19jaG9vc2VuWzY5XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLGxvY19jaG9vc2VuWzcwXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3Iixsb2NfY2hvb3Nlbls3MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5OF0sICJjb2xvciIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJRY29sb3IiLCBsb2NfY2hvb3NlblsxOTldLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJXY29sb3IiLCBsb2NfY2hvb3NlblsyMDBdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFY29sb3IiLCBsb2NfY2hvb3NlblsyMDFdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJSY29sb3IiLCBsb2NfY2hvb3NlblsyMDJdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJBQWNvbG9yIiwgbG9jX2Nob29zZW5bMjA0XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgidGFyZ2V0c2VsZWN0IiwgbG9jX2Nob29zZW5bMjA1XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwNl0sICJ3aWR0aCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJRd2lkdGgiLCBsb2NfY2hvb3NlblsyMTBdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJXd2lkdGgiLCBsb2NfY2hvb3NlblsyMTFdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFd2lkdGgiLCBsb2NfY2hvb3NlblsyMTJdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJSd2lkdGgiLCBsb2NfY2hvb3NlblsyMTNdLCA0LCAyLCAxLCAxMCwgMCkgIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiQUF3aWR0aCIsIGxvY19jaG9vc2VuWzIwOV0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlNUd2lkdGgiLCBsb2NfY2hvb3NlblsyMDhdLCA0LCA2LCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXQiLGxvY19jaG9vc2VuWzc1XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkgIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiZGFtYWdlIixsb2NfY2hvb3NlblsyMTRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Y2FsIixsb2NfY2hvb3Nlbls3Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpIA0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzNdLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLGxvY19jaG9vc2VuWzc0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc3XSwidGFyZ2V0c2VsIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSzIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgidHMiLGxvY19jaG9vc2VuWzc4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgc2VsZi50cy5uYW1lICA9ICJEaWFuYSINCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3OV0sICJLZXlzIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCBsb2NfY2hvb3Nlbls4MF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJva2V5IiwgbG9jX2Nob29zZW5bODFdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgbG9jX2Nob29zZW5bODJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJoYXJhc3NrZXkiLCBsb2NfY2hvb3Nlbls4M10sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiQyIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImF1dG9xIiwgbG9jX2Nob29zZW5bOTFdLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNSIsIGxvY19jaG9vc2VuWzg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFuZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODVdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJqdW5nbGVjbGVhcmtleSIsIGxvY19jaG9vc2VuWzg2XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s2IiwgbG9jX2Nob29zZW5bODddLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJlc2NhcGVrZXkiLCBsb2NfY2hvb3Nlbls4OF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICAgIC0tc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsICJMYXN0aGl0IEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMiIsIGxvY19jaG9vc2VuWzg5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMTBdLCAiS2V5czIiKQ0KICAgIA0KICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJsYW5nIiwgbG9jX2Nob29zZW5bMTY1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjZdLCBsb2NfY2hvb3NlblsxNjddLGxvY19jaG9vc2VuWzE2OF19KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbnN0cnVjdCIsIGxvY19jaG9vc2VuWzIxNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgICAgICANCiAgICAgaWYgc2VsZi5Db25maWcub3RoZXIucGVybWEucGVybWEgdGhlbg0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikgZW5kLCAxKQ0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKClzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKSBlbmQsIDEuMikNCiAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKXNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKSBlbmQsIDEuMikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJhdXRvcSIpIGVuZCwgMS4yKQ0KICBlbmQNCmVuZA0KLS1bW2Z1bmN0aW9uIERpYW5hOmdhcGNsb3NlKCkNCmxvY2FsIFFkbWc9Z2V0RG1nKCJRIix0YXJnZXQsbXlIZXJvKQ0KbG9jYWwgV2RtZz1nZXREbWcoIlciLHRhcmdldCxteUhlcm8pDQpsb2NhbCBFZG1nPWdldERtZygiRSIsdGFyZ2V0LG15SGVybykNCmxvY2FsIFJkbWc9Z2V0RG1nKCJSIix0YXJnZXQsbXlIZXJvKQ0KbG9jYWwgSWRtZz0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQpsb2NhbCBmdWxjb21ibz0gUWRtZyArIFdkbWcgKyBFZG1nICsgUmRtZw0KaWYgKHRhcmdldC5oZWFsdGggPCBmdWxjb21ibyBhbmQgc2VsZi5Db25maWcuY29tYm8ubG9naWNnYXAgPT0gMSBhbmQgR2V0RGlzdGFuY2UodW5pdCk+ODMwIGFuZCBzZWxmLnRzZy50YXJnZXR+PW5pbCkgdGhlbg0Kc2VsZjpDYXN0UVIobWluaW9uKQ0KZWxzZWlmICAoc2VsZi5Db25maWcuY29tYm8ubG9naWNnYXAgPT0gMiBhbmQgR2V0RGlzdGFuY2UodW5pdCk+ODMwIGFuZCBzZWxmLnRzZy50YXJnZXR+PW5pbCkgdGhlbg0Kc2VsZjpDYXN0UVIobWluaW9uKQ0KZW5kDQplbmRdXQ0KICBmdW5jdGlvbiBEaWFuYTpDYXN0UlEodW5pdCkNCiAgICAgICAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpIA0KICAgICBlbmQNCiAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpc2VsZjpDYXN0Uih0YXJnZXQpIGVuZCwgMC41KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOkNhc3RRUih1bml0KQ0KICBsb2NhbCBhYnVmZiA9IHNlbGY6YnVmZihtaW5pb24pDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0UShtaW5pb24pDQogICAgIGVuZA0KICAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgYWJ1ZmYgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIobWluaW9uKQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiBmdW5jdGlvbiBEaWFuYTpjb21ibzEoKQ0KICAgIHNlbGY6Q2FzdFJRKHRhcmdldCkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgR2V0RGlzdGFuY2UodGFyZ2V0KT4yODAgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZWxzZWlmIG5vdCBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZW5kDQogICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBEaWFuYTpjb21ibzIoKQ0KICBsb2NhbCBhYnVmZiA9IHNlbGY6YnVmZih0YXJnZXQpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIGFidWZmIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIG5vdCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgZW5kDQogICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuZW1heCB0aGVuDQogICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpPjI4MCBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSAgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVsc2VpZiBub3Qgc2VsZi5Db25maWcubWlzYy5lbWF4IHRoZW4NCiAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gRGlhbmE6Y29tYm8zKCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuZW1heCB0aGVuDQogICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpPjI4MCBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSApdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZWxzZWlmIG5vdCBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZW5kDQogICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOmJ1ZmYodW5pdCkNCiByZXR1cm4gVGFyZ2V0SGF2ZUJ1ZmYoJ2RpYW5hbW9vbmxpZ2h0JywgdW5pdCkNCmVuZA0KZnVuY3Rpb24gRGlhbmE6V25kTXNnKE1zZywgS2V5KQ0KaWYgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4gICAgICANCiAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgbG9jYWwgc3RhcmdldCA9IG5pbA0KICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykgPD0gbWluRCBvciBzdGFyZ2V0ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgIGlmIHN0YXJnZXQgYW5kIG1pbkQgPCA1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPlRhcmdldCA8Yj5pcyBubyBsb2dlciBzZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+TmV3IHRhcmdldCA8Yj5zZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICAgIFBvcFVwMSA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOkdldE15RG1nKHRhcmdldCkNCiAgIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgDQogICAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgDQogICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkgK3NlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSANCiAgICAgIGVsc2VpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFdEbWcodGFyZ2V0KSANCiAgICAgIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gRGlhbmE6R2V0RHJhd3ModGFyZ2V0KQ0KbG9jYWwgcWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQpsb2NhbCB3ZGFtYWdlID0gc2VsZjpHZXRXRG1nKHRhcmdldCkNCmxvY2FsIHJkYW1hZ2UgPSBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KbG9jYWwgSWRtZz0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogIA0KICBpZiBxZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdXJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHdkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnVyArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgZWxzZWlmIHJkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcmRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICt3ZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIFcgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2U+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdLaWxsIHdpdGggZnVsbCBjb21ibycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZStyZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRnVsbCBDb21ibyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZSANCiAgICByZXR1cm4gIkNhbnQgS2lsbCB5ZXQiLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbmQgDQplbmQNCmZ1bmN0aW9uIERpYW5hOnNraW5oYWNrKCkNCiAgaWYgbm90IHNraW5sb2FkIHRoZW4NCiAgaWYgKChDdXJyZW50VGltZUluTWlsbGlzKCkgLSBsYXN0VGltZVRpY2tDYWxsZWQpID4gMjAwKSB0aGVuDQogICAgICBsYXN0VGltZVRpY2tDYWxsZWQgPSBDdXJyZW50VGltZUluTWlsbGlzKCkNCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpbi5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgIHRoZW4NCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddIH49IGxhc3RTa2luIHRoZW4NCiAgICAgICAgbGFzdFNraW4gPSBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiBmdW5jdGlvbiBEaWFuYTphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gRGlhbmE6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5RTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VXIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5XTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgc2VsZi5XU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLkVNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgIGlmKHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VSIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5STWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuUlNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIERpYW5hOkxhc3RIaXQoKQ0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogIGlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMSB0aGVuDQogICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICAgIGxvY2FsIFFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuUVNwZWxsLlJhbmdlICogc2VsZi5RU3BlbGwuUmFuZ2UgYW5kIFFkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgIGVsc2VpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDIgdGhlbg0KICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBEaWFuYTpMYW5lQ2xlYXIoKQ0KICAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gc2VsZi5jbGVhcnRhcmdldA0KICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIud2NvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5XTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5XU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RXKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnFjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuUU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5RU3BlbGwuUmFuZ2UsIHNlbGYuUVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZnVuY3Rpb24gRGlhbmE6VW5sb2FkKCkNCiAgICAgICAgc2VsZjp3cml0ZWNmZygpDQogICAgICBlbmQNCiAgICAgICAgZnVuY3Rpb24gcG9pbnRPbkxpbmUobXlIZXJvLCB1bml0LCBtaW5pb24sIGV4dHJhKQ0KICAgIGxvY2FsIHRvbWluaW9uID0ge3ggPSBtaW5pb24ueCAtIHVuaXQueCwgeiA9IG1pbmlvbi56IC0gdW5pdC56fQ0KICAgIGxvY2FsIHRvbXlIZXJvID0ge3ggPSBteUhlcm8ueCAtIHVuaXQueCwgeiA9IG15SGVyby56IC0gdW5pdC56fQ0KDQogICAgbG9jYWwgbWFnaXR1ZGVUb215SGVybyA9IHRvbXlIZXJvLnggXiAyICsgdG9teUhlcm8ueiBeIDINCiAgICBsb2NhbCBkb3RQID0gdG9taW5pb24ueCAqIHRvbXlIZXJvLnggKyB0b21pbmlvbi56ICogdG9teUhlcm8ueg0KDQogICAgbG9jYWwgZGlzdGFuY2UgPSBkb3RQIC8gbWFnaXR1ZGVUb215SGVybw0KDQogICAgcmV0dXJuIHVuaXQueCArIHRvbXlIZXJvLnggKiAoZGlzdGFuY2UgKyBleHRyYSksIHVuaXQueiArIHRvbXlIZXJvLnogKiAoZGlzdGFuY2UgKyBleHRyYSkNCmVuZA0KZnVuY3Rpb24gRHJhd0xpbmVIUEJhcihkYW1hZ2UsIHRleHQsIHVuaXQsIGVuZW15dGVhbSkNCiAgICBpZiB1bml0LmRlYWQgb3Igbm90IHVuaXQudmlzaWJsZSB0aGVuIHJldHVybiBlbmQNCiAgICBsb2NhbCBwID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh1bml0LngsIHVuaXQueSwgdW5pdC56KSkNCiAgICBpZiBub3QgT25TY3JlZW4ocC54LCBwLnkpIHRoZW4gcmV0dXJuIGVuZA0KICAgIGxvY2FsIHRoZWRtZyA9IDANCiAgICBsb2NhbCBsaW5lID0gMg0KICAgIGxvY2FsIGxpbmVQb3NBICA9IHt4ID0gMCwgeSA9IDAgfQ0KICAgIGxvY2FsIGxpbmVQb3NCICA9IHt4ID0gMCwgeSA9IDAgfQ0KICAgIGxvY2FsIFRleHRQb3MgICA9IHt4ID0gMCwgeSA9IDAgfQ0KICAgIA0KICAgIA0KICAgIGlmIGRhbWFnZSA+PSB1bml0Lm1heEhlYWx0aCB0aGVuDQogICAgICAgIHRoZWRtZyA9IHVuaXQubWF4SGVhbHRoIC0gMQ0KICAgIGVsc2UNCiAgICAgICAgdGhlZG1nID0gZGFtYWdlDQogICAgZW5kDQogICAgDQogICAgdGhlZG1nID0gbWF0aC5yb3VuZCh0aGVkbWcpDQogICAgDQogICAgbG9jYWwgU3RhcnRQb3MsIEVuZFBvcyA9IEdldEhQQmFyUG9zKHVuaXQpDQogICAgbG9jYWwgUmVhbF9YID0gU3RhcnRQb3MueCArIDI0DQogICAgbG9jYWwgT2Zmc19YID0gKFJlYWxfWCArICgodW5pdC5oZWFsdGggLSB0aGVkbWcpIC8gdW5pdC5tYXhIZWFsdGgpICogKEVuZFBvcy54IC0gU3RhcnRQb3MueCAtIDIpKQ0KICAgIGlmIE9mZnNfWCA8IFJlYWxfWCB0aGVuIE9mZnNfWCA9IFJlYWxfWCBlbmQgDQogICAgbG9jYWwgbXl0cmFucyA9IDM1MCAtIG1hdGgucm91bmQoMjU1KigodW5pdC5oZWFsdGgtdGhlZG1nKS91bml0Lm1heEhlYWx0aCkpDQogICAgaWYgbXl0cmFucyA+PSAyNTUgdGhlbiBteXRyYW5zPTI1NCBlbmQNCiAgICBsb2NhbCBteV9ibHVlcGFydCA9IG1hdGgucm91bmQoNDAwKigodW5pdC5oZWFsdGgtdGhlZG1nKS91bml0Lm1heEhlYWx0aCkpDQogICAgaWYgbXlfYmx1ZXBhcnQgPj0gMjU1IHRoZW4gbXlfYmx1ZXBhcnQ9MjU0IGVuZA0KDQogICAgDQogICAgaWYgZW5lbXl0ZWFtIHRoZW4NCiAgICAgICAgbGluZVBvc0EueCA9IE9mZnNfWC0xNTANCiAgICAgICAgbGluZVBvc0EueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKSAgICANCiAgICAgICAgbGluZVBvc0IueCA9IE9mZnNfWC0xNTANCiAgICAgICAgbGluZVBvc0IueSA9IChTdGFydFBvcy55LTEwKQ0KICAgICAgICBUZXh0UG9zLnggPSBPZmZzX1gtMTQ4DQogICAgICAgIFRleHRQb3MueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKQ0KICAgIGVsc2UNCiAgICAgICAgbGluZVBvc0EueCA9IE9mZnNfWC0xMjUNCiAgICAgICAgbGluZVBvc0EueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKSAgICANCiAgICAgICAgbGluZVBvc0IueCA9IE9mZnNfWC0xMjUNCiAgICAgICAgbGluZVBvc0IueSA9IChTdGFydFBvcy55LTE1KQ0KICAgIA0KICAgICAgICBUZXh0UG9zLnggPSBPZmZzX1gtMTIyDQogICAgICAgIFRleHRQb3MueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKQ0KICAgIGVuZA0KDQogICAgRHJhd0xpbmUobGluZVBvc0EueCwgbGluZVBvc0EueSwgbGluZVBvc0IueCwgbGluZVBvc0IueSAsIDIsIEFSR0IobXl0cmFucywgMjU1LCBteV9ibHVlcGFydCwgMCkpDQogICAgRHJhd1RleHQodG9zdHJpbmcodGhlZG1nKS4uIiAiLi50b3N0cmluZyh0ZXh0KSwgMTUsIFRleHRQb3MueCwgVGV4dFBvcy55ICwgQVJHQihteXRyYW5zLCAyNTUsIG15X2JsdWVwYXJ0LCAwKSkNCmVuZA0KDQoNCmZ1bmN0aW9uIERyYXdMaW5lSFBCYXIyKGRhbWFnZSwgdGV4dCwgdW5pdCwgbGluZSkNCiAgbG9jYWwgdGhlZG1nID0gMA0KICBpZiBkYW1hZ2UgPj0gdW5pdC5tYXhIZWFsdGggdGhlbg0KICAgIHRoZWRtZyA9IHVuaXQubWF4SGVhbHRoLTENCiAgZWxzZQ0KICAgIHRoZWRtZz1kYW1hZ2UNCiAgZW5kDQogIGxvY2FsIFN0YXJ0UG9zLCBFbmRQb3MgPSBHZXRIUEJhclBvcyh1bml0KQ0KICBsb2NhbCBSZWFsX1ggPSBTdGFydFBvcy54KzI0DQogIGxvY2FsIE9mZnNfWCA9IChSZWFsX1ggKyAoKHVuaXQuaGVhbHRoLXRoZWRtZykvdW5pdC5tYXhIZWFsdGgpICogKEVuZFBvcy54IC0gU3RhcnRQb3MueCAtIDIpKQ0KICBpZiBPZmZzX1ggPCBSZWFsX1ggdGhlbg0KICAgIE9mZnNfWCA9IFJlYWxfWA0KICBlbmQNCiAgRHJhd0xpbmUoT2Zmc19YLTE1MCwgU3RhcnRQb3MueS0obGluZSoxNSksIFN0YXJ0UG9zLngtMjAsIFN0YXJ0UG9zLnktKGxpbmUqMTUpLCAxMCwgQVJHQigxNDAsIDAsIDAsIDApKQ0KZW5kDQpsb2NhbCBmbG9vciA9IG1hdGguZmxvb3INCmZ1bmN0aW9uIERyYXdSZWN0YW5nbGVCdXR0b24oeCwgeSwgdywgaCwgY29sb3IpDQogICAgbG9jYWwgcG9pbnRzID0ge30NCiAgICBwb2ludHNbMV0gPSBEM0RYVkVDVE9SMihmbG9vcih4KSwgZmxvb3IoeSkpDQogICAgcG9pbnRzWzJdID0gRDNEWFZFQ1RPUjIoZmxvb3IoeCArIHcpLCBmbG9vcih5KSkNCiAgbG9jYWwgcG9pbnRzMiA9IHt9DQogIHBvaW50czJbMV0gPSBEM0RYVkVDVE9SMihmbG9vcih4KSwgZmxvb3IoeSAtIGgvMikpDQogIHBvaW50czJbMl0gPSBEM0RYVkVDVE9SMihmbG9vcih4ICsgdyksIGZsb29yKHkgLSBoLzIpKQ0KICBwb2ludHMyWzNdID0gRDNEWFZFQ1RPUjIoZmxvb3IoeCArIHcpLCBmbG9vcih5ICsgaC8yKSkNCiAgcG9pbnRzMls0XSA9IEQzRFhWRUNUT1IyKGZsb29yKHgpLCBmbG9vcih5ICsgaC8yKSkNCiAgbG9jYWwgdCA9IEdldEN1cnNvclBvcygpDQogIHBvbHlnb24gPSBQb2x5Z29uKFBvaW50KHBvaW50czJbMV0ueCwgcG9pbnRzMlsxXS55KSwgUG9pbnQocG9pbnRzMlsyXS54LCBwb2ludHMyWzJdLnkpLCBQb2ludChwb2ludHMyWzNdLngsIHBvaW50czJbM10ueSksIFBvaW50KHBvaW50czJbNF0ueCwgcG9pbnRzMls0XS55KSkNCiAgaWYgcG9seWdvbjpjb250YWlucyhQb2ludCh0LngsIHQueSkpIHRoZW4NCiAgICBEcmF3TGluZXMyKHBvaW50cywgZmxvb3IoaCksIGNvbG9yKQ0KICBlbHNlDQogICAgRHJhd0xpbmVzMihwb2ludHMsIGZsb29yKGgpLCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzICkpDQogIGVuZA0KZW5kDQoNCiAgICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBTaW1wbGVMaWIgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBSZXF1aXJlU2ltcGxlTGliKCkNCiAgICAgIGlmIEZpbGVFeGlzdChMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiKSBhbmQgbm90IEZpbGVFeGlzdChTQ1JJUFRfUEFUSC4uIlNpbXBsZUxpYi5sdWEiKSB0aGVuDQogICAgICAgICAgcmVxdWlyZSAiU2ltcGxlTGliIg0KICAgICAgICAgIGlmIF9HLlNpbXBsZUxpYlZlcnNpb24gPT0gbmlsIHRoZW4gDQogICAgICAgICAgICAgIHByaW50KCJZb3VyIFNpbXBsZUxpYiBmaWxlIGlzIHdyb25nLiIpDQogICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGlmIF9HLlNpbXBsZUxpYlZlcnNpb24gPCAxLjAyIHRoZW4NCiAgICAgICAgICAgICAgcHJpbnQoIllvdSBuZWVkIHRoZSBsYXN0ZXN0IHZlcnNpb24gb2YgU2ltcGxlTGliLiIpDQogICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICBlbHNlaWYgRmlsZUV4aXN0KExJQl9QQVRILi4iU2ltcGxlTGliLmx1YSIpIGFuZCBGaWxlRXhpc3QoU0NSSVBUX1BBVEguLiJTaW1wbGVMaWIubHVhIikgdGhlbg0KICAgICAgICAgIHByaW50KCJTaW1wbGVMaWIubHVhIHNob3VsZCBub3QgYmUgaW4gQ3VzdG9tIFNjcmlwdCAoT25seSBvbiBDb21tb24gZm9sZGVyKSwgZGVsZXRlIGl0IGZyb20gdGhlcmUuLi4iKQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgZWxzZQ0KICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIEJhc2U2NEVuY29kZTIoZGF0YSkNCiAgICAgICAgICAgICAgbG9jYWwgYj0nQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycNCiAgICAgICAgICAgICAgcmV0dXJuICgoZGF0YTpnc3ViKCcuJywgZnVuY3Rpb24oeCkNCiAgICAgICAgICAgICAgICAgIGxvY2FsIHIsYj0nJyx4OmJ5dGUoKQ0KICAgICAgICAgICAgICAgICAgZm9yIGk9OCwxLC0xIGRvIHI9ci4uKGIlMl5pLWIlMl4oaS0xKT4wIGFuZCAnMScgb3IgJzAnKSBlbmQNCiAgICAgICAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICAgICAgICBlbmQpLi4nMDAwMCcpOmdzdWIoJyVkJWQlZD8lZD8lZD8lZD8nLCBmdW5jdGlvbih4KQ0KICAgICAgICAgICAgICAgICAgaWYgKCN4IDwgNikgdGhlbiByZXR1cm4gJycgZW5kDQogICAgICAgICAgICAgICAgICBsb2NhbCBjPTANCiAgICAgICAgICAgICAgICAgIGZvciBpPTEsNiBkbyBjPWMrKHg6c3ViKGksaSk9PScxJyBhbmQgMl4oNi1pKSBvciAwKSBlbmQNCiAgICAgICAgICAgICAgICAgIHJldHVybiBiOnN1YihjKzEsYysxKQ0KICAgICAgICAgICAgICBlbmQpLi4oeyAnJywgJz09JywgJz0nIH0pWyNkYXRhJTMrMV0pDQogICAgICAgICAgZW5kDQogICAgICAgICAgbG9jYWwgU2F2ZVBhdGggPSBMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiDQogICAgICAgICAgbG9jYWwgU2NyaXB0UGF0aCA9ICcvQm9ML1RDUFVwZGF0ZXIvR2V0U2NyaXB0NS5waHA/c2NyaXB0PScuLkJhc2U2NEVuY29kZTIoInJhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFjaGljYW8vQm9ML21hc3Rlci9TaW1wbGVMaWIubHVhIikuLicmcmFuZD0nLi5tYXRoLnJhbmRvbSg5OTk5OTk5OSkNCiAgICAgICAgICBsb2NhbCBHb3RTY3JpcHQgPSBmYWxzZQ0KICAgICAgICAgIGxvY2FsIEx1YVNvY2tldCA9IG5pbA0KICAgICAgICAgIGxvY2FsIFNvY2tldCA9IG5pbA0KICAgICAgICAgIGxvY2FsIFNpemUgPSBuaWwNCiAgICAgICAgICBsb2NhbCBSZWN2U3RhcnRlZCA9IGZhbHNlDQogICAgICAgICAgbG9jYWwgUmVjZWl2ZSwgU3RhdHVzLCBTbmlwcGVkID0gbmlsLCBuaWwsIG5pbA0KICAgICAgICAgIGxvY2FsIFN0YXJ0ZWQgPSBmYWxzZQ0KICAgICAgICAgIGxvY2FsIEZpbGUgPSAiIg0KICAgICAgICAgIGxvY2FsIE5ld0ZpbGUgPSAiIg0KICAgICAgICAgIGlmIG5vdCBMdWFTb2NrZXQgdGhlbg0KICAgICAgICAgICAgICBMdWFTb2NrZXQgPSByZXF1aXJlKCJzb2NrZXQiKQ0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgU29ja2V0OmNsb3NlKCkNCiAgICAgICAgICAgICAgU29ja2V0ID0gbmlsDQogICAgICAgICAgICAgIFNpemUgPSBuaWwNCiAgICAgICAgICAgICAgUmVjdlN0YXJ0ZWQgPSBmYWxzZQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIFNvY2tldCA9IEx1YVNvY2tldC50Y3AoKQ0KICAgICAgICAgIGlmIG5vdCBTb2NrZXQgdGhlbg0KICAgICAgICAgICAgICBwcmludCgnU29ja2V0IEVycm9yJykNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIFNvY2tldDpzZXR0aW1lb3V0KDAsICdiJykNCiAgICAgICAgICAgICAgU29ja2V0OnNldHRpbWVvdXQoOTk5OTk5OTksICd0JykNCiAgICAgICAgICAgICAgU29ja2V0OmNvbm5lY3QoJ3N4LWJvbC5ldScsIDgwKQ0KICAgICAgICAgICAgICBTdGFydGVkID0gZmFsc2UNCiAgICAgICAgICAgICAgRmlsZSA9ICIiDQogICAgICAgICAgZW5kDQogICAgICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgaWYgR290U2NyaXB0IHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgICBSZWNlaXZlLCBTdGF0dXMsIFNuaXBwZWQgPSBTb2NrZXQ6cmVjZWl2ZSgxMDI0KQ0KICAgICAgICAgICAgICBpZiBTdGF0dXMgPT0gJ3RpbWVvdXQnIGFuZCBub3QgU3RhcnRlZCB0aGVuDQogICAgICAgICAgICAgICAgICBTdGFydGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgcHJpbnQoIkRvd25sb2FkaW5nIGEgbGlicmFyeSBjYWxsZWQgU2ltcGxlTGliLiBQbGVhc2Ugd2FpdC4uLiIpDQogICAgICAgICAgICAgICAgICBTb2NrZXQ6c2VuZCgiR0VUICIuLlNjcmlwdFBhdGguLiIgSFRUUC8xLjFcclxuSG9zdDogc3gtYm9sLmV1XHJcblxyXG4iKQ0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgaWYgKFJlY2VpdmUgb3IgKCNTbmlwcGVkID4gMCkpIGFuZCBub3QgUmVjdlN0YXJ0ZWQgdGhlbg0KICAgICAgICAgICAgICAgICAgUmVjdlN0YXJ0ZWQgPSB0cnVlDQogICAgICAgICAgICAgIGVuZA0KICANCiAgICAgICAgICAgICAgRmlsZSA9IEZpbGUgLi4gKFJlY2VpdmUgb3IgU25pcHBlZCkNCiAgICAgICAgICAgICAgaWYgRmlsZTpmaW5kKCc8L3NpJy4uJ3plPicpIHRoZW4NCiAgICAgICAgICAgICAgICAgIGlmIG5vdCBTaXplIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICBTaXplID0gdG9udW1iZXIoRmlsZTpzdWIoRmlsZTpmaW5kKCc8c2knLi4nemU+JykgKyA2LCBGaWxlOmZpbmQoJzwvc2knLi4nemU+JykgLSAxKSkNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgaWYgRmlsZTpmaW5kKCc8c2NyJy4uJ2lwdD4nKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgXywgU2NyaXB0RmluZCA9IEZpbGU6ZmluZCgnPHNjcicuLidpcHQ+JykNCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBTY3JpcHRFbmQgPSBGaWxlOmZpbmQoJzwvc2NyJy4uJ2lwdD4nKQ0KICAgICAgICAgICAgICAgICAgICAgIGlmIFNjcmlwdEVuZCB0aGVuIFNjcmlwdEVuZCA9IFNjcmlwdEVuZCAtIDEgZW5kDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgRG93bmxvYWRlZFNpemUgPSBGaWxlOnN1YihTY3JpcHRGaW5kICsgMSxTY3JpcHRFbmQgb3IgLTEpOmxlbigpDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGlmIEZpbGU6ZmluZCgnPC9zY3InLi4naXB0PicpIHRoZW4NCiAgICAgICAgICAgICAgICAgIGxvY2FsIGEsYiA9IEZpbGU6ZmluZCgnXHJcblxyXG4nKQ0KICAgICAgICAgICAgICAgICAgRmlsZSA9IEZpbGU6c3ViKGEsLTEpDQogICAgICAgICAgICAgICAgICBOZXdGaWxlID0gJycNCiAgICAgICAgICAgICAgICAgIGZvciBsaW5lLGNvbnRlbnQgaW4gaXBhaXJzKEZpbGU6c3BsaXQoJ1xuJykpIGRvDQogICAgICAgICAgICAgICAgICAgICAgaWYgY29udGVudDpsZW4oKSA+IDUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICBOZXdGaWxlID0gTmV3RmlsZSAuLiBjb250ZW50DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGxvY2FsIEhlYWRlckVuZCwgQ29udGVudFN0YXJ0ID0gTmV3RmlsZTpmaW5kKCc8c2MnLi4ncmlwdD4nKQ0KICAgICAgICAgICAgICAgICAgbG9jYWwgQ29udGVudEVuZCwgXyA9IE5ld0ZpbGU6ZmluZCgnPC9zY3InLi4naXB0PicpDQogICAgICAgICAgICAgICAgICBpZiBub3QgQ29udGVudFN0YXJ0IG9yIG5vdCBDb250ZW50RW5kIHRoZW4NCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBuZXdmID0gTmV3RmlsZTpzdWIoQ29udGVudFN0YXJ0ICsgMSxDb250ZW50RW5kIC0gMSkNCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBuZXdmID0gbmV3Zjpnc3ViKCdccicsJycpDQogICAgICAgICAgICAgICAgICAgICAgaWYgbmV3ZjpsZW4oKSB+PSBTaXplIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3ZiA9IEJhc2U2NERlY29kZShuZXdmKQ0KICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGUobG9hZChuZXdmKSkgfj0gJ2Z1bmN0aW9uJyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmID0gaW8ub3BlbihTYXZlUGF0aCwgIncrYiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgIGY6d3JpdGUobmV3ZikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZjpjbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJSZXF1aXJlZCBsaWJyYXJ5IGRvd25sb2FkZWQuIFBsZWFzZSByZWxvYWQgd2l0aCAyeCBGOS4iKQ0KICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBHb3RTY3JpcHQgPSB0cnVlDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZCkNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIGVuZA0KICBlbmQNCg0KIA0KIA0KICANCiAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IE9yYldhbGtzICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICANCiAgZnVuY3Rpb24gVmlrdG9yOmZpbmRvcmJ3YWxrZXIoKQ0KICBpZiBfRy5SZWJvcm5fTG9hZGVkIHRoZW4NCiAgICAgIFNBQz10cnVlIGFuZA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDgpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICBlbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgYW5kIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAgICAgIFN4T3JiPXRydWUgYW5kIA0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDQpDQogICAgICByZXF1aXJlKCJTeE9yYldhbGsiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJTeE9yYldhbGsiLCJvcmJXYWxrIikgZW5kLDUpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIF9HLlN4T3JiOkxvYWRUb01lbnUoc2VsZi5Db25maWcub3JiV2FsaykgZW5kLDUpDQogICAgZWxzZWlmIFNBQ349dHJ1ZSBhbmQgU3hPcmJ+PSB0cnVlIHRoZW4NCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIlN4T3JiIG9yIFNBQzpSIGlzIHJlcXVpcmVkLiIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOmZpbmRvcmJ3YWxrZXIoKQ0KaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgICBTQUM9dHJ1ZSBhbmQNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgICBTeE9yYj10cnVlIGFuZCANCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gRGlhbmE6ZmluZG9yYndhbGtlcigpDQogaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgICBTQUM9dHJ1ZSBhbmQNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgICBTeE9yYj10cnVlIGFuZCANCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmZpbmRvcmJ3YWxrZXIoKQ0KICAgaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgICBTQUM9dHJ1ZSBhbmQNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgICBTeE9yYj10cnVlIGFuZCANCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpmaW5kb3Jid2Fsa2VyKCkNCiAgIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgIGVsc2VpZiBub3QgX0cuUmVib3JuX0xvYWRlZCBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KICAgICAgU3hPcmI9dHJ1ZSBhbmQgDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgNCkNCiAgICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlN4T3JiV2FsayIsIm9yYldhbGsiKSBlbmQsNSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBlbmQNCiAgZW5kDQogDQogZnVuY3Rpb24gT25VbmxvYWQoKQ0KICBpZiBWSVBfVVNFUiBhbmQgbm90IHNraW5sb2FkICB0aGVuDQogICAgU2VuZFNraW5QYWNrZXQobXlIZXJvLmNoYXJOYW1lLCBuaWwsIG15SGVyby5uZXR3b3JrSUQpDQogIGVuZA0KZW5k=="), nil, "bt", _ENV))()
-- easy cp