
--[[
One Click to Challenger
Keyboard Master Series by Ensuluyn
Current Leauge Of Legends Version :5.23
Current Script Version :2.06
Last Update: 24.11.2015
--Credits to Nebelwolfi for mentoring <3
]]

assert(load(Base64Decode("ICANCiAgDQogIC0tIE9uZSBDbGljayB0byBDaGFsbGVuZ2VyDQogIC0tIEtleWJvYXJkIE1hc3RlciBTZXJpZXMgYnkgRW5zdWx1eW4NCiAgDQogIC0tQ3JlZGl0cyB0byBOZWJlbHdvbGZpIGZvciBtZW50b3JpbmcgPDMNCiAgDQogIGxvY2FsIFZlcnNpb24gPSAiMi4wNiIgIA0KICBsb2NhbCBMVmVyc2lvbiA9ICI1LjIzIg0KICBsb2NhbCBTY3JpcHRuYW1lID0gIktleWJvYXJkIE1hc3RlciBTZXJpZXMiDQogIGxvY2FsIEF1dGhvciA9ICJFbnN1bHV5biINCiAgbG9jYWwgbGlzdCA9ICJMZWJsYW5jICwgTGlzc2FuZHJhICwgVmlrdG9yLCBBa2FsaSINCiAgbG9jYWwgbGluayA9ICJHbyB0byBodHRwOi8vZm9ydW0uYm90b2ZsZWdlbmRzLmNvbS9mb3J1bS8yMC1jaGFtcGlvbi1zY3JpcHRzLyB0aGVuIHlvdSBjYW4gc2VlIG15IHRvcGljICIuLlNjcmlwdG5hbWUuLiIgb24gdGhlIGZpcnN0IG9yIHNlY29uZCBwYWdlLiINCiAgbG9jYWwgZGF0ZSA9ICIxNC4xMS4yMDE1Ig0KICBnbG9iYWxfdGlja3MgPSAwDQogIC0tIHN0YXJ0aW5nIHNjcmlwdA0KICAtLWF1dG8gdXBkYXRlDQogIGxvY2FsIHZlcnNpb24gPSAyLjA2DQogIGxvY2FsIGF1dGhvciA9ICJFbnN1bHV5biINCiAgbG9jYWwgU0NSSVBUX05BTUUgPSAiS2V5Ym9hcmRNYXN0ZXJTZXJpZXMiDQogIGxvY2FsIEFVVE9VUERBVEUgPSB0cnVlDQogIGxvY2FsIFVQREFURV9IT1NUID0gInJhdy5naXRodWIuY29tIg0KICBsb2NhbCBVUERBVEVfUEFUSCA9ICIvTG9uc2VtYXJpYS9zY3JpcHRzL21hc3Rlci9LZXlib2FyZE1hc3RlclNlcmllcy5sdWEiLi4iP3JhbmQ9Ii4ubWF0aC5yYW5kb20oMSwxMDAwMCkNCiAgbG9jYWwgVVBEQVRFX0ZJTEVfUEFUSCA9IFNDUklQVF9QQVRILi5HZXRDdXJyZW50RW52KCkuRklMRV9OQU1FDQogIGxvY2FsIFVQREFURV9VUkwgPSAiaHR0cHM6Ly8iLi5VUERBVEVfSE9TVC4uVVBEQVRFX1BBVEgNCiAgZnVuY3Rpb24gU2F5KHRleHQpDQogICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPktleWJvYXJkIE1hc3RlciBTZXJpZXM6PC9iPjwvZm9udD4gPGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IiAuLiB0ZXh0IC4uICI8L2ZvbnQ+IikNCiAgZW5kDQogIA0KICBpZiBBVVRPVVBEQVRFIHRoZW4NCiAgICBsb2NhbCBTZXJ2ZXJEYXRhID0gR2V0V2ViUmVzdWx0KFVQREFURV9IT1NULCAiL0xvbnNlbWFyaWEvc2NyaXB0cy9tYXN0ZXIvdmVyc2lvbi9CdW5kbGUudmVyc2lvbiIpDQogICAgaWYgU2VydmVyRGF0YSB0aGVuDQogICAgICBTZXJ2ZXJWZXJzaW9uID0gdHlwZSh0b251bWJlcihTZXJ2ZXJEYXRhKSkgPT0gIm51bWJlciIgYW5kIHRvbnVtYmVyKFNlcnZlckRhdGEpIG9yIG5pbA0KICAgICAgaWYgU2VydmVyVmVyc2lvbiB0aGVuDQogICAgICAgIGlmIHRvbnVtYmVyKHZlcnNpb24pIDwgU2VydmVyVmVyc2lvbiB0aGVuDQogICAgICAgICAgU2F5KCJOZXcgdmVyc2lvbiBhdmFpbGFibGUgIi4uU2VydmVyVmVyc2lvbikNCiAgICAgICAgICBTYXkoIlVwZGF0aW5nLCBwbGVhc2UgZG9uJ3QgcHJlc3MgRjkiKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgRG93bmxvYWRGaWxlKFVQREFURV9VUkwsIFVQREFURV9GSUxFX1BBVEgsIGZ1bmN0aW9uICgpIFNheSgiU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuICgiLi52ZXJzaW9uLi4iID0+ICIuLlNlcnZlclZlcnNpb24uLiIpLCBwcmVzcyBGOSB0d2ljZSB0byBsb2FkIHRoZSB1cGRhdGVkIHZlcnNpb24uIikgZW5kKSBlbmQsIDMpDQogICAgICAgIGVsc2UNCiAgICAgICAgICBTYXkoIi1XZWxjb21lLCBZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICh2Ii4uU2VydmVyVmVyc2lvbi4uIikgb2YgIi4uU2NyaXB0bmFtZS4uIiAsIHVwZGF0ZWQgYXQgKCIuLmRhdGUuLiIpIGJ5ICIgLi4gYXV0aG9yKQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgIGVsc2UgDQogICAgICBTYXkoIkVycm9yIGRvd25sb2FkaW5nIHZlcnNpb24gaW5mbyIpDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBPbkxvYWQoKQ0KICAgICAgICAgIGlmIG5vdCBSZXF1aXJlU2ltcGxlTGliKCkgdGhlbiByZXR1cm4gZW5kDQogICAgICAgICAgaXRlbWZpeCgpDQogICAgICAgICAgIGlmIF9HW215SGVyby5jaGFyTmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgICAgX0dbbXlIZXJvLmNoYXJOYW1lXSgpDQogICAgICAgICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFNraW4gSGFjayBjdXJyZW50bHkgZGlzYWJsZWQgdW50aWwgdGhlIG5leHQgdXBkYXRlIikgZW5kLCAxNCkNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+IDpUaGlzIGNoYW1waW9uIGlzIG5vdCBzdXBwb3J0ZWQuIEN1cnJlbnRseSBzdXBwb3J0ZWQgY2hhbXBpb25zIGFyZTogIi4ubGlzdC4uIiAiICkNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+RmVlbCBmcmVlIHRvIGNoZWNrIG15IGZvcnVtIHRvcGljIGFuZCBhc2sgYSBuZXcgY2hhbXBpb24gb3IgZ2l2ZSBmZWVkYmFjayIpIGVuZCwgMC41KQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj4iLi5saW5rLi4iIikgZW5kLCAwLjUpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIFN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIFN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIFN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIFN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICBjbGFzcyAiTGVibGFuYyINCiAgZnVuY3Rpb24gTGVibGFuYzpfX2luaXQoKQ0KICBzZWxmLnRzPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA1MjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgIHNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA2MDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDkyNSwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzcj0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTI1LCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgICBzZWxmLnRzZz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTUwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSA3MDAsIFdpZHRoID0gMSwgRGVsYXkgPSAwLCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDYwMCwgV2lkdGggPSAxMjUsIERlbGF5ID0gMC41LCBTcGVlZCA9IDEzMDAsIFJhZGl1cyA9IDI1MCAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9FLCBEYW1hZ2VOYW1lID0gIkUiLCBSYW5nZSA9IDkyNSwgV2lkdGggPSA1NSwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IDE2MDAsIENvbGxpc2lvbiA9IHRydWUsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgICBzZWxmLlJTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9NjAwLCBXaWR0aCA9IDEyNSwgRGVsYXkgPSAwLjUsIFNwZWVkID0gMTMwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuSWduaXRlID0gX1NwZWxsKHtTbG90ID0gRmluZFN1bW1vbmVyU2xvdCgic3VtbW9uZXJkb3QiKSwgRGFtYWdlTmFtZSA9ICJJR05JVEUiLCBSYW5nZSA9IDYwMCwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgc2VsZi5sZWJsYW5jVywgc2VsZi5sZWJsYW5jSW1hZ2UsIHNlbGYuY2xvbmVJZCA9IG5pbCwgbmlsLCBuaWwNCiAgLS18PiBNaW5pb24gTWFuYWdlcnMNCiAgICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuYWxseU1pbmlvbnMgICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9BTExZLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZjpMb2FkTWVudSgpDQogICAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICAgICAgTGFzdF9MZXZlbFNwZWxsID0gMA0KICAgICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgICAgLS1pZiBWSVBfVVNFUiB0aGVuICBzZWxmOnNraW5oYWNrKCkgZW5kDQogICAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgICBBZGREcmF3Q2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOkRyYXcoKSBlbmQpDQogICAgQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAgIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgICAtLUFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAgIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAgIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYsIHN0YWNrcykgc2VsZjpVcGRhdGVCdWZmKHVuaXQsIGJ1ZmYsIHN0YWNrcykgZW5kKQ0KICAgIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIExlYmxhbmM6TG9hZE1lbnUoKQ0KICAgICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIiLCJtZW51IikNCiAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkNvbWJvIFNldHRpbmdzIiwgImNvbWJvIikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVEiLCAiVXNlIFEgaW4gQ29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgIlVzZSBXIGluIENvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsICJVc2UgRSBpbiBjb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVIiLCAiVXNlIFIgaW4gY29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgIlVzZSBJZ25pdGUgaWYgdGFyZ2V0IGtpbGxhYmxlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJnYXBjbG9zZSIsICJVc2UgVyBhcyBhIGdhcGNsb3NlICggQmV0YSApIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImxvZ2ljIiwgIkNvbWJvIGxvZ2ljIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiUT5FPlc+UiIsICJRPlI+RT5XIiwgIkU+UT5XPlIiLCAiRT5XPlE+UiIgLCJSYW5kb20gU2tpbGwgT3JkZXIifSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkU3ViTWVudSgiVyBTa2lsbCB0dXJuIGJhY2sgc2V0dGluZ3MiLCAidHVybnciKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzEiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFE+RT5XPlIgbW9kZSAiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oIncyIiwiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBRPlI+RT5XIG1vZGUgIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3MyIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gRT5RPlc+UiBtb2RlICIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzQiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIEU+Vz5RPlIgbW9kZSAiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oInc1IiwiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBSYW5kb20gU2tpbGwgT3JkZXIgbW9kZSAiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkhhcmFzcyBTZXR0aW5ncyIsICJoYXJhc3MiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCAiSGFyYXNzIFdpdGggUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VXIiwgIkhhcmFzcyBXaXRoIFciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiTGFuZUNsZWFyIFNldHRpbmdzIiwibGFuZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIiwiVXNlIFcgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VSIiwiVXNlIFIgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmxhbmVjbGVhcjphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiSnVuZ2xlQ2xlYXIgU2V0dGluZ3MiLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24ganVuZ2xlY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsIlVzZSBXIG9uIExhbmVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIiwiVXNlIEUgb24ganVuZ2xlY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRXNjYXBlIFNldHRpbmdzIiwiZXNjYXBlIikNCiAgICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VXIiwiVXNlIFcgV2hpbGUgRXNjYXBlIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VSIiwiVXNlIFIgV2hpbGUgRXNjYXBlIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJLaWxsU3RlYWwgU2V0dGluZ3MiLCAia2lsbHN0ZWFsIikNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsIktpbGxzdGVhbCBPbi9PZmYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVEiLCAiU3RlYWwgV2l0aCBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVciLCAiU3RlYWwgV2l0aCBXIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUUiLCAiU3RlYWwgV2l0aCBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCAiU3RlYWwgV2l0aCBSIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVFXIiwgIlN0ZWFsIFdpdGggUVciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsICJTdGVhbCBXaXRoIElnbml0ZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkl0ZW0gU2V0dGluZ3MiLCAiaXRlbSIpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImVuYWJsZWF1dG96aG9ueWEiLCAiQXV0byBaaG9ueWEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgIlpob255YSBpZiBIZWFsdGggdW5kZXIgLT4gJSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIGlmIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiVklQIFNldHRpbmdzIiwgInZpcCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0IiwiVXNlIFBhY2tldCBDYXN0aW5nIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzEiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzIiLCAiVG8gdXNlIHZpcCBzZXR0aW5ncywgUGFja2V0IENhc3Rpbmcgc2hvdWxkIGJlIG9wZW4uIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJBdXRvIExldmVsIFNldHRpbmdzIiwgImxldmVsIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJrZXkiLCJVc2UgQXV0byBMZXZlbCIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImxvZ2ljIiwgIlNlbGVjdCBTa2lsbCBPcmRlciIsIFNDUklQVF9QQVJBTV9MSVNULCA3LCB7IkZvY3VzIFE+Vz5FIiwgIkZvY3VzIFE+RT5XIiwiRm9jdXMgVz5RPkUiLCJGb2N1cyBXPkU+USIsIkZvY3VzIEU+Vz5RIiwgIkZvY3VzIEU+UT5XIiwgIlNtYXJ0IiAgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIlNraW4gSGFjayBTZXR0aW5ncyIsICJza2luIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsIlVzZSBTa2luIEhhY2siLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCAiU2VsZWN0IFNraW4iLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJPcmlnaW5hbCIsICJXaWNrZWQgTGVCbGFuYyAiLCJQcmVzdGlnaW91cyBMZUJsYW5jIiwiTWlzdGxldG9lIExlQmxhbmMiLCJSYXZlbmJvcm4gTGVibGFuYyIsIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNCIsICJUbyB1c2Ugc2tpbiBoYWNrLCBZb3UgbmVlZCB0byAyeCBGOSBhZnRlciB5b3Ugc2VsZWN0IHRoZSBza2luIHlvdSBkZXNpcmUuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsICJNYWtlIHN1cmUgdGhhdCB1c2luZyBwYWNrZXQgY2FzdGluZyBpcyBPTi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm81IiwgIlNraW4gSGFjayB0ZW1wb3JhcnkgZGlzYWJsZWQgdW50aWwgbmV4dCB1cGRhdGUuIC4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgLS1bW3NlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJBbnRpLUFGSyBTZXR0aW5ncyIsICJhbnRpYWZrIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLCJVc2UgQW50aSBBZmsiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgXV0NCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsICJUbyB1c2UgdmlwIHNldHRpbmdzLCBZb3UgbmVlZCB0byBiZSBhIFZJUCB1c2VyIG9uIEJPTCBjb21tdW5pdHkuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgZW5kDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkRyYXcgU2V0dGluZ3MiLCJvdGhlciIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2tpbGwgRHJhd2luZyBTZXR0aW5ncyIsICJkcmF3IikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLCJRIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLCJXIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiZWRyYXciLCJFIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLCJSIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3IiwiQXV0byBBdHRhY2sgUmFuZ2UiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oImNvbWJvbW9kZSIsIkRyYXcgQ29tYm8gTW9kZSIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIkRyYXcgUGVybWFib3giLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLCJEcmF3IFBlcm1hYm94ICggTmVlZHMgMnggRjkgKSIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXQiLCJEcmF3IGNpcmNsZSBmb3IgdGFyZ2V0IHNlbGVjdGVkIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldGNhbCIsIlRhcmdldCBjYWxjdWxhdGlvbiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJUYXJnZXRzZWxlY3RvcnMiLCJ0YXJnZXRzZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oImluZm9LMiIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJ0cyIsIkxlZnQgQ2xpY2sgRm9yIFRhcmdldCBTZWxlY3Rpb24iLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIHNlbGYudHMubmFtZSAgPSAiTGVibGFuYyINCiAgICAgIHNlbGYudHNxLm5hbWUgPSAiTGVibGFuY1EiDQogICAgICBzZWxmLnRzdy5uYW1lID0gIkxlYmxhbmNXIg0KICAgICAgc2VsZi50c2UubmFtZSA9ICJMZWJsYW5jRSINCiAgICAgIHNlbGYudHNyLm5hbWUgPSAiTGVibGFuY1IiDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzdykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcikgDQogICAgICANCiAgICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJLZXlzIFNldHRpbmdzIiwgIktleXMiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0szIiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1Db21ibyBLZXkgU2V0dGluZ3MtLS0tLS0tLS0tLS0tLS0tLS0+IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJjb21ib2tleSIsICJDb21ibyBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJvbmx5ZSIsICJPbmx5IHVzZSBFIFNraWxsIChPbmx5IFN0dW4pIiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTixmYWxzZSwgc3RyaW5nLmJ5dGUoIk8iKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJvbW9kZSIsICIgU2VsZWN0IENvbWJvbW9kZSBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLGZhbHNlLCBzdHJpbmcuYnl0ZSgiMiIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1IYXJhc3MgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNza2V5IiwgIlNtYXJ0IEhhcmFzcyBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICAgLS0gc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNzdG9nbGVrZXkiLCAiSGFyYXNzIFRvZ2xlIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJUIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzUiLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNsZWFyIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFuZWNsZWFya2V5IiwgIkxhbmVDbGVhciBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImp1bmdsZWNsZWFya2V5IiwgIkp1bmdsZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWiIpKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5IiwgIkxhc3RoaXQgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzYiLCAiPC0tLS0tLS0tLS0tLS0tLS0tLU90aGVyIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgIkVzY2FwZSBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0syIiwgIk1ha2UgU3VyZSBUaGF0IFlvdXIgT3Jid2Fsa2VyIEtleXMgYXJlIFNhbWUgQXMgSGVyZSIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiT3J3V2Fsa2VyS2V5IFNldHRpbmdzIiwgIktleXMyIikNCiAgICAgIA0KICAgICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5czIpDQogICAgICAgDQogICAgICAgDQogICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIucGVybWEucGVybWEgdGhlbg0KICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikgZW5kLCAxKQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKSAgZW5kLCAxLjIpDQogICAgICAtLXNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3N0b2dsZWtleSIpDQogICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNza2V5IikgIGVuZCwgMS4yKQ0KICAgIGVuZA0KICBlbmQNCiAgLS1kcmF3aW5nIHNldHRpbmdzIHN0YXJ0DQogIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9tb2RlKCkNCiAgbG9jYWwgZHJhd3BvcyA9IEdldFVuaXRIUEJhclBvcyhteUhlcm8pDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDEgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBRPkU+Vz5SIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IFE+Uj5FPlciLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAzIHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogRT5RPlc+UiIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDQgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBFPlc+UT5SIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNSB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IFJhbmRvbSBTa2lsbCBPcmRlciIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkRyYXcoKQ0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci5jb21ib21vZGUgdGhlbg0KICBsb2NhbCBkcmF3cG9zID0gR2V0VW5pdEhQQmFyUG9zKG15SGVybykNCiAgc2VsZjpjb21ib21vZGUoKQ0KICBlbmQNCiAgICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5xZHJhdyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA2NTAsIDEscmVkKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDYwMCwgMSwgcmVkKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmVkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDkyNSwgMSwgcmVkKQ0KICAgIGVuZA0KICAgIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucmRyYXcgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLDEsIHJlZCkNCiAgICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmFhZHJhdyB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTUwLDEsIEFSR0IoMjU1LCAyNTUsMCwwKSkNCiAgICBlbmQNCiAgICAgICAgICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0IGFuZCBzZWxmLnNlbGVjdGVkVGFyIH49IG5pbCB0aGVuDQogICAgICAgICBEcmF3Q2lyY2xlM0Qoc2VsZi5zZWxlY3RlZFRhci54LCBzZWxmLnNlbGVjdGVkVGFyLnksIHNlbGYuc2VsZWN0ZWRUYXIueiwgODAsNiwgQVJHQigyNTUsIDI1NSwwLDApKQ0KZW5kDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldGNhbCBhbmQgbm90IG15SGVyby5kZWFkIHRoZW4NCiAgICAgIGlmIHRhcmdldCBhbmQgdGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGxvY2FsIGRyYXdwb3M9V29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh0YXJnZXQueCwgdGFyZ2V0LnksIHRhcmdldC56KSkNCiAgICAgICAgbG9jYWwgY29tYm9UZXh0LGNvbG9yID0gc2VsZjpHZXREcmF3cyh0YXJnZXQpDQogICAgICAgIGlmIGNvbWJvVGV4dCB0aGVuDQogICAgICAgICAgRHJhd1RleHQoY29tYm9UZXh0LDE1LGRyYXdwb3MueC0yMCxkcmF3cG9zLnktMjAsY29sb3IpDQogICAgICAgIGVuZCANCiAgICAgIGVuZCANCiAgICAgIGVuZA0KICAgICAgZW5kDQogDQogIC0tZHJhd2luZyBzZXR0aW5ncyBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpHZXREcmF3cyh0YXJnZXQpDQpEbWc9e1E9c2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBnZXREbWcoIlEiLHRhcmdldCxteUhlcm8pb3IgMCxRMj1nZXREbWcoIlEiLHRhcmdldCxteUhlcm8sMilvciAwLFc9c2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBnZXREbWcoIlciLHRhcmdldCxteUhlcm8pb3IgMCxFPXNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgZ2V0RG1nKCJFIix0YXJnZXQsbXlIZXJvKW9yIDAsUj1zZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIGdldERtZygiUiIsdGFyZ2V0LG15SGVybylvciAwLFIyPWdldERtZygiUiIsdGFyZ2V0LG15SGVybywyKW9yIDAsST1zZWxmLklnbml0ZTpJc1JlYWR5KCkgYW5kIGdldERtZygiSUdOSVRFIix0YXJnZXQsbXlIZXJvKW9yIDB9DQogIGlmIERtZy5RID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRG1nLlErIERtZy5JPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBEbWcuVyA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdXJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIERtZy5XKyBEbWcuST50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRG1nLkUgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBEbWcuRSsgRG1nLkk+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIERtZy5RK0RtZy5RMitEbWcuVyA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIERtZy5RK0RtZy5RMitEbWcuRSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIERtZy5RK0RtZy5RMitEbWcuVysgRG1nLkk+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIERtZy5RK0RtZy5RMitEbWcuRSsgRG1nLkk+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIERtZy5RK0RtZy5RMitEbWcuRStEbWcuVyA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBEbWcuUStEbWcuUTIrRG1nLkUrRG1nLlcrIERtZy5JPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRG1nLlErRG1nLlIrRG1nLlIyK0RtZy5RMitEbWcuRStEbWcuVyA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIFcgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRG1nLlErRG1nLlIrRG1nLlIyK0RtZy5RMitEbWcuRStEbWcuVysgRG1nLkk+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIFcgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlIA0KICAgIHJldHVybiAiQ2FudCBLaWxsIHlldCIsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVuZCANCmVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlRpY2soKQ0KICAgICAgIHNlbGY6YXV0b3pob255YSgpDQogICAgICAgIHNlbGY6Y2hlY2t0cygpDQogICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICANCiAgICAgICBzZWxmOmdhcGNsb3NlKCkNCiAgIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICApdGhlbg0KICAgICAgc2VsZjpjb21ibygpDQogICAgZW5kDQogICAgIGlmKHNlbGYuQ29uZmlnLktleXMub25seWUgICApdGhlbg0KICAgICAgc2VsZjpvbmx5ZSgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgKXRoZW4NCiAgICAgIHNlbGY6TGFuZUNsZWFyKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSApdGhlbg0KICAgICAgc2VsZjplc2NhcGUoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApdGhlbg0KICAgICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgICBzZWxmOmtpbGxzdGVhbCgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgICApIHRoZW4NCiAgICAgIHNlbGY6aGFyYXNzKCkNCiAgICBlbmQNCiAgICAgIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNoZWNrdHMoKQ0KICAgICAgICAgc2VsZi50czp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2c6dXBkYXRlKCkNCiAgaWYgbm90IHNlbGYudHNnLnRhcmdldH49bmlsIG9yIG5vdCBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbg0KICB0YXJnZXQgPSBzZWxmLnRzdy50YXJnZXQNCiAgZWxzZWlmIHNlbGYudHNnLnRhcmdldH49bmlsIG9yIHNlbGYuc2VsZWN0ZWRUYXIgdGhlbg0KICB0YXJnZXQgPSBzZWxmLnNlbGVjdGVkVGFyDQogIGVuZA0KICBlbmQNCiAgbG9jYWwgc2tpbnNQQiA9IHt9Ow0KICBsb2NhbCBza2luT2JqZWN0UG9zID0gbmlsOw0KICBsb2NhbCBza2luSGVhZGVyID0gbmlsOw0KICBsb2NhbCBkaXNwZWxsSGVhZGVyID0gbmlsOw0KICBsb2NhbCBza2luSCA9IG5pbDsNCiAgbG9jYWwgc2tpbkhQb3MgPSBuaWw7DQogIGZ1bmN0aW9uIExlYmxhbmM6c2tpbmhhY2soKQ0KICBpZiBub3Qgc2VsZi5Db25maWcudmlwLnBhY2tldCB0aGVuIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQlsxXSwgbXlIZXJvLm5ldHdvcmtJRCk7IGVsc2UNCiAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6b25seWUoKQ0KICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMub25seWUgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RShzZWxmLnRzZS50YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzphbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmayB0aGVuIHJldHVybiBlbmQNCiAgICAgIENsb2NrID0gb3MuY2xvY2soKSArIG1hdGgucmFuZG9tKDYwLDEyMCkNCiAgbXlIZXJvOk1vdmVUbyhteUhlcm8ueCwgbXlIZXJvLnopDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvKCkNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9RRVdSKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvUVJFVygpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAzIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib0VRV1IoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNCBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9FV1FSKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOnJhbmRvbWNvbWJvKCkNCiAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgIGVuZA0KICAgICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib1FSRVcoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MiB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdFFSKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRUnVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdEVXKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzIgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRUih0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UUV1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RFV0IodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvRVdRUigpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc0IHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVcodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVXdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0UVIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiAgc2VsZi5Db25maWcuY29tYm8udHVybncudzQgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RFV0IodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVXdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0UVIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvRVFXUigpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LnczIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVEodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVRdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0V1IodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiAgc2VsZi5Db25maWcuY29tYm8udHVybncudzMgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RFUSh0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6RVF1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RXUkIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvUUVXUigpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LncxIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0UUUodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFFdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0V1IodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MSB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdFFFKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRRXVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFdSQih0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFEodW5pdCkNCiAgICBzZWxmLlFTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRRSh1bml0KQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdEVXKHVuaXQpDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgbm90IHNlbGY6d1VzZWQoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFV0IodW5pdCkNCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpyYW5kb21jb21ibygpDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpICAgICANCiAgICAgICAgICBlbmQNCiAgICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KSAgICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UVIodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUih1bml0KQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KClhbmQgbm90IHNlbGY6d1VzZWQoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSBhbmQgbm90IHNlbGY6clVzZWQoKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0V1JCKHVuaXQpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSBhbmQgbm90IHNlbGY6clVzZWQoKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UVdIKCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRV0sodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUVcgYW5kICBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRVyBhbmQgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFUSh1bml0KQ0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0Vyh1bml0KQ0KICAgIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFKHVuaXQpDQogICBzZWxmLkVTcGVsbDpDYXN0KHVuaXQpDQogICAgDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0Uih1bml0KQ0KICAgIHNlbGYuUlNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RJKHVuaXQpDQogICAgc2VsZi5JZ25pdGU6Q2FzdCh1bml0KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpraWxsc3RlYWwoKQ0KICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgaGVhbHRoID0gdW5pdC5oZWFsdGgNCiAgICAgIGxvY2FsIGRtZ0UgPSBnZXREbWcoIkUiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNSkgKyAoZ2V0RG1nKCJFIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjUpKQ0KICAgICAgICBpZihzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nRSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUUgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1EgPSBnZXREbWcoIlEiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNDApDQogICAgICAgIGlmKHNlbGYudHNxLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIGhlYWx0aDxkbWdRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICAgbG9jYWwgZG1nUVcgPSBnZXREbWcoIlEiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNDApKyhnZXREbWcoIlciLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNjApKyhnZXREbWcoIlEiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNDApKSkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCBhbmQgIGhlYWx0aDxkbWdRIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUVcgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFFXSyh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICAgICAgICBsb2NhbCBkbWdXID0gZ2V0RG1nKCJXIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjYwKQ0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVcgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZG1nUiA9Z2V0RG1nKCJSIix1bml0LG15SGVybykrKChteUhlcm8uYXApKjAuNjApIA0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6aGFyYXNzKCkNCiAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIHRoZW4NCiAgICBzZWxmOkNhc3RRV0goKQ0KICAgICAgZW5kICAgDQogICBlbmQNCiAgIGZ1bmN0aW9uIExlYmxhbmM6TGFuZUNsZWFyKCkNCiAgbG9jYWwgY2xlYXJ0YXJnZXQgPSBzZWxmLmNsZWFydGFyZ2V0DQogIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcubGFuZWNsZWFyLnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcubGFuZWNsZWFyLk1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICAgc2VsZjpDYXN0UShjbGVhcnRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmxhbmVjbGVhci51c2VXIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmxhbmVjbGVhci5NYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLldTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihzZWxmLldTcGVsbC5SYW5nZSwgc2VsZi5XU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpDQogICAgICAgICAgICBpZiBCZXN0UG9zIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfVywgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmxhbmVjbGVhci51c2VSIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmxhbmVjbGVhci5NYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLldTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihzZWxmLldTcGVsbC5SYW5nZSwgc2VsZi5XU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpDQogICAgICAgICAgICBpZiBCZXN0UG9zIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfUiwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZCAgICAgICAgDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMZWJsYW5jOkp1bmdsZUNsZWFyKCkNCiAgbG9jYWwgY2xlYXJ0YXJnZXQgPSBuaWwNCiAgICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwganVuZ2xlbWluaW9uIGluIGlwYWlycyhzZWxmLmp1bmdsZU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQoanVuZ2xlbWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IGp1bmdsZW1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG90aGVybWluaW9uIGluIGlwYWlycyhzZWxmLm90aGVyTWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChvdGhlcm1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBvdGhlcm1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgaWYgY2xlYXJ0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEoY2xlYXJ0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0VyhjbGVhcnRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGNsZWFydGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyLk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKGNsZWFydGFyZ2V0KQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6d1VzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jVyA9IG15SGVybzpHZXRTcGVsbERhdGEoX1cpDQogICAgaWYgbGVibGFuY1cubmFtZSA9PSAibGVibGFuY3NsaWRlcmV0dXJuIiB0aGVuIA0KICAgICAgcmV0dXJuIHRydWUgDQogICAgZWxzZSANCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpyVXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNSID0gbXlIZXJvOkdldFNwZWxsRGF0YShfUikNCiAgICBpZiBsZWJsYW5jUi5uYW1lID09ICJMZWJsYW5jU2xpZGVNIiB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlFFdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNRID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLkVTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1EgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpFUXVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jVyA9IHNlbGYuRVNwZWxsOklzUmVhZHkoKQ0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNXIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6RVd1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1cgPSBzZWxmLkVTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuV1NwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jVyBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlFSdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNXID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLlJTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1cgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgbG9jYWwgc3BlbGxMZXZlbCA9IDANCiAgZnVuY3Rpb24gTGVibGFuYzphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAyLDEsMywyLDEsNCwyLDIsMSwzLDQsMiwxLDEsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzphdXRvemhvbnlhKCkNCiAgICBpZiBzZWxmLkNvbmZpZy5pdGVtLmVuYWJsZWF1dG96aG9ueWEgdGhlbg0KICAgICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgICBpZiBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuaXRlbS5hdXRvemhvbnlhIC8gMTAwKSBhbmQgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJaaG9ueWFzSG91cmdsYXNzIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOmVzY2FwZWZvcmdhcCgpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkNvbmZpZy5jb21iby5nYXBjbG9zZSBhbmQgbm90IHNlbGY6d1VzZWQoKSB0aGVuDQogIENhc3RTcGVsbChfVyxtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzplc2NhcGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSAgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VXIGFuZCBub3Qgc2VsZjp3VXNlZCgpIHRoZW4NCiAgQ2FzdFNwZWxsKF9XLG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICB0aGVuIA0KICBzZWxmOndhbGsoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIGFuZCBzZWxmLkNvbmZpZy5lc2NhcGUudXNlUiBhbmQgbm90ICBzZWxmOnJVc2VkKCkgdGhlbg0KICBDYXN0U3BlbGwoX1IsbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6d2FsaygpDQogICAgbXlIZXJvOk1vdmVUbyhtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmdhcGNsb3NlKCkNCiAgaWYgdGFyZ2V0IGFuZCBHZXREaXN0YW5jZSh0YXJnZXQsbXlIZXJvKT44MDAgdGhlbiANCiAgc2VsZjplc2NhcGVmb3JnYXAoKQ0KICAgICAgZW5kIA0KICANCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6VEFSR0VUQ1MoKQ0KICAgICAgbG9jYWwgVGFyZ2V0ID0gbmlsDQogICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIHRoZW4gVGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICAgICAgZWxzZSBUYXJnZXQgPSBzZWxmLnRzdy50YXJnZXQNCiAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpXbmRNc2coTXNnLCBLZXkpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuY29tYm9tb2RlIHRoZW4NCiAgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPSBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyArMQ0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA+IDUgdGhlbiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9IDEgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRCA9IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIGFuZCBzdGFyZ2V0LmNoYXJOYW1lID09IHNlbGYuc2VsZWN0ZWRUYXIuY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogIC0tIEFsbCBjbGFzc2ljIG5lY2Vzc2VyaWVzIHN0YXJ0DQogIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxlQmxhbmMgRW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MZUJsYW5jIEVuZGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGVCbGFuYyBFbmRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxlQmxhbmMgRW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICBjbGFzcyAiQWthbGkiDQogIGZ1bmN0aW9uIEFrYWxpOl9faW5pdCgpDQpzZWxmLnRzPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzcT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNjAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c3c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAzMjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzcj0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c2c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDkyNSwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgIHNlbGYuUVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1EsIERhbWFnZU5hbWUgPSAiUSIsIFJhbmdlID0gNjAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDcwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAzMjUsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID03MDAsICBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICAgIC0tIGlmIFZJUF9VU0VSIHRoZW4gIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICBBZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgLS1BZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbih1bml0LCBzcGVsbCkgc2VsZjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkNCiAgLS1BZGRBcHBseUJ1ZmZDYWxsYmFjayhmdW5jdGlvbihzb3VyY2UsIHVuaXQsIGJ1ZmYpIHNlbGY6T25BcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKSBlbmQpDQogIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYsIHN0YWNrcykgc2VsZjpVcGRhdGVCdWZmKHVuaXQsIGJ1ZmYsIHN0YWNrcykgZW5kKQ0KICAtLUFkZFJlbW92ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmKSBzZWxmOk9uUmVtb3ZlQnVmZih1bml0LCBidWZmKSBlbmQpIA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6VGljaygpDQogIHNlbGY6YXV0b3pob255YSgpDQogIHNlbGY6QXV0b3N0ZWFsdGgoKQ0KICBzZWxmOmF1dG9xKCkNCiAgICAgICAgc2VsZjpjaGVja3RzKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLmxvZ2ljID09IDEgKXRoZW4NCiAgICBzZWxmOmNvbWJvKCkNCiAgZW5kDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5sb2dpYyA9PSAyICl0aGVuDQogICAgc2VsZjpjb21ibzIoKQ0KICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKXRoZW4NCiAgIHNlbGY6SnVuZ2xlQ2xlYXIoKQ0KICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSApdGhlbg0KICAgIHNlbGY6TGFuZUNsZWFyKCkNCiAgZW5kDQogIGlmKHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApIHRoZW4NCiAgICBzZWxmOmtpbGxzdGVhbCgpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgKSB0aGVuDQogICAgc2VsZjpoYXJhc3MoKQ0KICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICl0aGVuDQogICAgICBzZWxmOmVzY2FwZSgpDQogICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOndhbGsoKQ0KICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6ZXNjYXBlKCkNCiAgIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZVcgdGhlbg0KICBDYXN0U3BlbGwoX1csbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6RHJhdygpDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5xZHJhdyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjAwLCAxLHJlZCkNCiAgZW5kDQoNCiAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy53ZHJhdyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLCAxLCByZWQpDQogIGVuZA0KDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDMyNSwgMSwgcmVkKQ0KICBlbmQNCiAgDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucmRyYXcgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwxLCByZWQpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmFhZHJhdyB0aGVuDQogICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDEwMCwxLCBBUkdCKDI1NSwgMjU1LDAsMCkpDQogIGVuZA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldCBhbmQgc2VsZi5zZWxlY3RlZFRhciB+PSBuaWwgdGhlbg0KICAgICAgICAgRHJhd0NpcmNsZTNEKHNlbGYuc2VsZWN0ZWRUYXIueCwgc2VsZi5zZWxlY3RlZFRhci55LCBzZWxmLnNlbGVjdGVkVGFyLnosIDgwLDYsIEFSR0IoMjU1LCAyNTUsMCwwKSkNCmVuZA0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXRjYWwgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQogICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBsb2NhbCBkcmF3cG9zPVdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQogICAgICAgIGxvY2FsIGNvbWJvVGV4dCxjb2xvciA9IHNlbGY6R2V0RHJhd3ModGFyZ2V0KQ0KICAgICAgICBpZiBjb21ib1RleHQgdGhlbg0KICAgICAgICAgIERyYXdUZXh0KGNvbWJvVGV4dCwxNSxkcmF3cG9zLngtMjAsZHJhd3Bvcy55LTIwLGNvbG9yKQ0KICAgICAgICBlbmQgDQogICAgICBlbmQgDQogICAgICBlbmQNCiAgICAgIGVuZA0KIA0KZnVuY3Rpb24gQWthbGk6YnVmZih1bml0KQ0KIHJldHVybiBUYXJnZXRIYXZlQnVmZignQWthbGlNb3RhJywgdW5pdCkNCmVuZA0KDQogIGZ1bmN0aW9uIEFrYWxpOnNraW5oYWNrKCkNCmlmIG5vdCBzZWxmLkNvbmZpZy52aXAucGFja2V0IHRoZW4gU2VuZFNraW5QYWNrZXQobXlIZXJvLmNoYXJOYW1lLCBza2luc1BCWzFdLCBteUhlcm8ubmV0d29ya0lEKTsgZWxzZQ0KaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQpTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KZW5kDQplbmQNCmVuZA0KDQogZnVuY3Rpb24gQWthbGk6YXV0b2xldmVsKCkNCmlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTEgPSAgIHsgMSwyLDMsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTEpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAyIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMiA9ICAgeyAxLDIsMywxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDMgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UzID0gIHsgMiwzLDEsMiwyLDQsMiwxLDIsMSw0LDEsMSwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTMpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA0IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNCA9ICB7IDIsMywxLDIsMiw0LDIsMywyLDMsNCwzLDMsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U0KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTUgPSAgeyAzLDEsMiwzLDMsNCwzLDIsMywyLDQsMiwyLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDYgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMywxLDIsMywzLDQsMywxLDMsMSw0LDEsMSwyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDcgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMSwzLDIsMSwxLDQsMSwzLDEsMyw0LDMsMywyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmF1dG96aG9ueWEoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLmVuYWJsZWF1dG96aG9ueWEgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6Y2hlY2t0cygpDQogICAgICAgc2VsZi50czp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2c6dXBkYXRlKCkNCmlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCnRhcmdldCA9IHNlbGYudHMudGFyZ2V0DQplbHNlaWYgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igc2VsZi5zZWxlY3RlZFRhciB0aGVuDQp0YXJnZXQgPSBzZWxmLnNlbGVjdGVkVGFyDQplbmQNCmVuZA0KICBmdW5jdGlvbiBBa2FsaTpjb21ibygpDQogIGxvY2FsIGFidWZmID0gc2VsZjpidWZmKHRhcmdldCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgYWJ1ZmYgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgbm90IHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgICAgICBpZihzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBBa2FsaTpjb21ibzIoKQ0KICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIG5vdCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmhhcmFzcygpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBBa2FsaTpKdW5nbGVDbGVhcigpDQogICBsb2NhbCBjbGVhcnRhcmdldCA9IG5pbA0KICAgICAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gaXBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZvciBpLCBqdW5nbGVtaW5pb24gaW4gaXBhaXJzKHNlbGYuanVuZ2xlTWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChqdW5nbGVtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0ganVuZ2xlbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwgb3RoZXJtaW5pb24gaW4gaXBhaXJzKHNlbGYub3RoZXJNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG90aGVybWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG90aGVybWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEoY2xlYXJ0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUiBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIoY2xlYXJ0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUoY2xlYXJ0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6TGFuZUNsZWFyKCkNCiAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gbmlsDQogICAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIGp1bmdsZW1pbmlvbiBpbiBpcGFpcnMoc2VsZi5qdW5nbGVNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KGp1bmdsZW1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBqdW5nbGVtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZvciBpLCBvdGhlcm1pbmlvbiBpbiBpcGFpcnMoc2VsZi5vdGhlck1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQob3RoZXJtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gb3RoZXJtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGlmIGNsZWFydGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEoY2xlYXJ0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVIgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKGNsZWFydGFyZ2V0KQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgY2xlYXJ0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RShjbGVhcnRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpDYXN0USh1bml0KQ0KICBzZWxmLlFTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gQWthbGk6Q2FzdFcodW5pdCkNCiAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIEFrYWxpOkNhc3RFKHVuaXQpDQogIHNlbGYuRVNwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBBa2FsaTpDYXN0Uih1bml0KQ0KICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQplbmQNCmZ1bmN0aW9uIEFrYWxpOkNhc3RJKHVuaXQpDQogIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCmVuZA0KICBmdW5jdGlvbiBBa2FsaTphdXRvcSgpDQogICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuS2V5cy5hdXRvcSBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpHZXREcmF3cyh0YXJnZXQpDQpsb2NhbCBRZG1nPWdldERtZygiUSIsdGFyZ2V0LG15SGVybykNCmxvY2FsIFFkbWcyPShteUhlcm8uYXAqMC41KQ0KbG9jYWwgRWRtZz1nZXREbWcoIkUiLHRhcmdldCxteUhlcm8pDQpsb2NhbCBSZG1nPWdldERtZygiUiIsdGFyZ2V0LG15SGVybykNCmxvY2FsIElkbWc9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICANCiAgaWYgUWRtZyA+IHRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIEVkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIEVkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFJkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFJkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUWRtZytSZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0VkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFFkbWcrUmRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0VkbWcrUmRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytSZG1nK0VkbWcgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytRZG1nMiA+IHRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrSWRtZytRZG1nMj50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBRMiArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBFZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBFZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBSZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUicsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBSZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytRZG1nMj50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBRMiArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUWRtZytSZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytJZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBRZG1nK1JkbWcrSWRtZytRZG1nMj50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBRMiArIFIgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0VkbWcrUmRtZytJZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgUiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK1JkbWcrRWRtZytRZG1nMiA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiAoUWRtZytFZG1nK1JkbWcrSWRtZytRZG1nMikrKFFkbWcrRWRtZytSZG1nK0lkbWcrUWRtZzIpID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0tpbGwgV2l0aCAyIENvbWJvJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlIA0KICAgIHJldHVybiAiQ2FudCBLaWxsIHlldCIsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVuZCANCmVuZA0KICBmdW5jdGlvbiBBa2FsaTpraWxsc3RlYWwoKQ0KZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBsb2NhbCBoZWFsdGggPSB1bml0LmhlYWx0aA0KICAgIGxvY2FsIGRtZ0UgPSBnZXREbWcoIkUiLCB1bml0LCBteUhlcm8pDQogICAgICBpZihzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nRSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUUgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh1bml0KSAgDQogICAgICBlbmQNCiAgICAgIGxvY2FsIGRtZ1EgPSBnZXREbWcoIlEiLCB1bml0LCBteUhlcm8pIA0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdSID1nZXREbWcoIlIiLHVuaXQsbXlIZXJvKQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1IgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDU1MCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgIGVuZA0KICAgZW5kDQplbmQNCmZ1bmN0aW9uIEFrYWxpOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiSGV4dGVjaEd1bmJsYWRlIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogZnVuY3Rpb24gQWthbGk6QXV0b3N0ZWFsdGgoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVcgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlbiB0aGVuDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDEgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gMiB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDIgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gMyB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDMgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gNCB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDQgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2hwIGFuZCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYy51c2VXIHRoZW4NCiAgICAgICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLmhwIC8gMTAwKSB0aGVuIA0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCiAgZnVuY3Rpb24gQWthbGk6TG9hZE1lbnUoKQ0KICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIiwibWVudSIpDQoNCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkNvbWJvIFNldHRpbmdzIiwgImNvbWJvIikNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgIlVzZSBRIGluIENvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCAiVXNlIEUgaW4gY29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsICJVc2UgUiBpbiBjb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgIlVzZSBJZ25pdGUgaWYgdGFyZ2V0IGtpbGxhYmxlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkhhcmFzcyBTZXR0aW5ncyIsICJoYXJhc3MiKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgIkhhcmFzcyBXaXRoIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCAiSGFyYXNzIFdpdGggRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJTa2lsbCBMb2dpY3MiLCAic2tpbGxsb2dpYyIpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljOmFkZFN1Yk1lbnUoIlcgU2tpbGwgTG9naWMiLCAiV2xvZ2ljIikgDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlVyIsICJVc2UgU3RlYWx0aCAoVykiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlV2hwIiwgIlVzZSBTdGVhbHRoIGlmIGhlYWx0ICUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWM6YWRkUGFyYW0oImhwIiwiSGVhbHRoIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJ1c2VXZW4iLCAiVXNlIFN0ZWFsdGggaWYgZW5lbXkgPiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlV2UiLCAiVXNlIFN0ZWFsdGggaWYgZW5lbXkgPiIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IjIgZW5lbXkiLCAiMyBlbmVteSIgLCAiNCBlbmVteSIsIjUgZW5lbXkiIH0pDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljOmFkZFN1Yk1lbnUoIlIgU2tpbGwgTG9naWMiLCAiUmxvZ2ljIikgDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgibG9naWMiLCAiUiBTa2lsbCBMb2dpYyIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlVzZSBSIGlmIFEgaXMgb24gdGFyZ2V0IiwgIlJ1c2ggU2tpbGxzIiB9KQ0KICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkZhcm0gU2V0dGluZ3MiLCAiZmFybSIpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUoIkxhbmVDbGVhciBTZXR0aW5ncyIsImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZUUiLCJVc2UgRSBvbiBMYW5lY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlUiIsIlVzZSBSIG9uIExhbmVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KCJKdW5nbGVDbGVhciBTZXR0aW5ncyIsImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsIlVzZSBRIG9uIEp1bmdsZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlRSIsIlVzZSBFIG9uIEp1bmdsZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUiIsIlVzZSBSIG9uIEp1bmdsZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiS2lsbFN0ZWFsIFNldHRpbmdzIiwgImtpbGxzdGVhbCIpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oImtzIiwiS2lsbHN0ZWFsIE9uL09mZiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVEiLCAiU3RlYWwgV2l0aCBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgIlN0ZWFsIFdpdGggRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUiIsICJTdGVhbCBXaXRoIFIiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUkiLCAiU3RlYWwgV2l0aCBJZ25pdGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkVzY2FwZSBTZXR0aW5ncyIsImVzY2FwZSIpDQogICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVciLCJVc2UgVyBXaGlsZSBFc2NhcGUiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkl0ZW0gU2V0dGluZ3MiLCAiaXRlbSIpDQogICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgIkF1dG8gWmhvbnlhIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImF1dG96aG9ueWEiLCAiWmhvbnlhIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlaGciLCAiVXNlIEhleHRlY2ggR3VuYmxhZGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2ViZyIsICJVc2UgQmlsZ2V3YXRlciBDdXRsYXNzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgDQogICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJWSVAgU2V0dGluZ3MiLCAidmlwIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0IiwiVXNlIFBhY2tldCBDYXN0aW5nIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsICJUbyB1c2UgdmlwIHNldHRpbmdzLCBQYWNrZXQgQ2FzdGluZyBzaG91bGQgYmUgb3Blbi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJBdXRvIExldmVsIFNldHRpbmdzIiwgImxldmVsIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5IiwiVXNlIEF1dG8gTGV2ZWwiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCAiU2VsZWN0IFNraWxsIE9yZGVyIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHsiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciLCJTbWFydCIgIH0pDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudSgiU2tpbiBIYWNrIFNldHRpbmdzIiwgInNraW4iKQ0KICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsIlVzZSBTa2luIEhhY2siLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCdzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJywgIlNlbGVjdCBTa2luIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiT3JpZ2luYWwiLCAiIE51cnNlIEFrYWxpICIsIkFsbC1zdGFyIEFrYWxpIiwiIEJsb29kIE1vb24gQWthbGkiLCJIZWFkaHVudGVyIEFrYWxpIiwiU3RpbmdlciBBa2FsaSIgfSkNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNCIsICJUbyB1c2Ugc2tpbiBoYWNrLCBZb3UgbmVlZCB0byAyeCBGOSBhZnRlciB5b3Ugc2VsZWN0IHRoZSBza2luIHlvdSBkZXNpcmUuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgiaW5mbzUiLCAiTWFrZSBzdXJlIHRoYXQgdXNpbmcgcGFja2V0IGNhc3RpbmcgaXMgT04uIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgLS1bW3NlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJBbnRpLUFGSyBTZXR0aW5ncyIsICJhbnRpYWZrIikNCiAgICAgIHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrOmFkZFBhcmFtKCJhbnRpYWZrIiwiVXNlIEFudGkgQWZrIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpIF1dDQogICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsICJUbyB1c2UgdmlwIHNldHRpbmdzLCBZb3UgbmVlZCB0byBiZSBhIFZJUCB1c2VyIG9uIEJPTCBjb21tdW5pdHkuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgIGVuZA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRHJhdyBTZXR0aW5ncyIsIm90aGVyIikNCiAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTa2lsbCBEcmF3aW5nIFNldHRpbmdzIiwgImRyYXciKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLCJRIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3IiwiVyBTa2lsbCBEcmF3aW5ncyIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJlZHJhdyIsIkUgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLCJSIFNraWxsIERyYXdpbmdzIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsIkF1dG8gQXR0YWNrIFJhbmdlIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJEcmF3IFBlcm1hYm94IiwgInBlcm1hIikNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hOmFkZFBhcmFtKCJwZXJtYSIsIkRyYXcgUGVybWFib3ggKCBOZWVkcyAyeCBGOSApIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXQiLCJEcmF3IGNpcmNsZSBmb3IgdGFyZ2V0IHNlbGVjdGVkIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXRjYWwiLCJUYXJnZXQgY2FsY3VsYXRpb24iLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlRhcmdldHNlbGVjdG9ycyIsInRhcmdldHNlbCIpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oImluZm9LMiIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oInRzIiwiTGVmdCBDbGljayBGb3IgVGFyZ2V0IFNlbGVjdGlvbiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgc2VsZi50cy5uYW1lICA9ICJBa2FsaSINCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiS2V5cyBTZXR0aW5ncyIsICJLZXlzIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNvbWJvIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLT4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJjb21ib2tleSIsICJDb21ibyBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1IYXJhc3MgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc2tleSIsICJTbWFydCBIYXJhc3MgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiYXV0b3EiLCAiQXV0byBIYXJhc3MgUSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJUIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s1IiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1DbGVhciBLZXkgU2V0dGluZ3MtLS0tLS0tLS0tLS0tLS0tLS0tLT4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCAiTGFuZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImp1bmdsZWNsZWFya2V5IiwgIkp1bmdsZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNiIsICI8LS0tLS0tLS0tLS0tLS0tLS0tT3RoZXIgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgIkVzY2FwZSBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICAtLXNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLCAiTGFzdGhpdCBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlgiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzIiLCAiTWFrZSBTdXJlIFRoYXQgWW91ciBPcmJ3YWxrZXIgS2V5cyBhcmUgU2FtZSBBcyBIZXJlIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiT3J3V2Fsa2VyS2V5IFNldHRpbmdzIiwgIktleXMyIikNCiAgICANCiAgICBPcmJ3YWxrTWFuYWdlcjpMb2FkQ29tbW9uS2V5cyhzZWxmLkNvbmZpZy5LZXlzMikNCiAgICANCiAgICAgDQogICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hLnBlcm1hIHRoZW4NCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikgZW5kLCAxKQ0KICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKSBlbmQsIDEuMikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKSBlbmQsIDEuMikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJhdXRvcSIpIGVuZCwgMS4yKQ0KZW5kDQogIGVuZA0KZnVuY3Rpb24gQWthbGk6V25kTXNnKE1zZywgS2V5KQ0KaWYgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4gICAgICANCiAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgbG9jYWwgc3RhcmdldCA9IG5pbA0KICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykgPD0gbWluRCBvciBzdGFyZ2V0ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgIGlmIHN0YXJnZXQgYW5kIG1pbkQgPCA1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPlRhcmdldCA8Yj5pcyBubyBsb2dlciBzZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+TmV3IHRhcmdldCA8Yj5zZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxpc2FuZHJhIHN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MaXNhbmRyYSBzdGFydGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgc3RhcnRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxpc2FuZHJhIHN0YXJ0aW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICBjbGFzcyAiTGlzc2FuZHJhIg0KICBmdW5jdGlvbiBMaXNzYW5kcmE6X19pbml0KCkNCiAgIHNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDU1MCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgc2VsZi50c3c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDQ1MCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEwNTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogIHNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA1NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgICBzZWxmLlFTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9RLCBEYW1hZ2VOYW1lID0gIlEiLCBSYW5nZSA9IDcyNSwgV2lkdGggPSAyMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDQ1MCwgV2lkdGggPSAwLCBEZWxheSA9IDAuNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAxMDUwLCBXaWR0aCA9IDExMCwgRGVsYXkgPSAuMjUsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID01NTAsIFdpZHRoID0gMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuUlNTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9NTUwLCBXaWR0aCA9IDAsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogIC0tfD4gTWluaW9uIE1hbmFnZXJzDQogICAgICBzZWxmLmVuZW15TWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9ucyAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9KVU5HTEUsICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYub3RoZXJNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9PVEhFUiwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgICAgICBzZWxmOkxvYWRNZW51KCkNCiAgICAgICAgICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgICAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICAgICAgICAgICAgICAtLSBpZiBWSVBfVVNFUiB0aGVuICAgc2VsZjpza2luaGFjaygpIGVuZA0KICAgICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlRpY2soKSBlbmQpDQogICAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICAgIC0tQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAgIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgICAtLUFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAgIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAgIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYsIHN0YWNrcykgc2VsZjpVcGRhdGVCdWZmKHVuaXQsIGJ1ZmYsIHN0YWNrcykgZW5kKQ0KICAgIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpUaWNrKCkNCiAgICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgIHNlbGY6ZW5nYWdld2l0aHIoKQ0KICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICAgICAgIHNlbGY6YXV0b1IoKQ0KICAgICAgIHNlbGY6YXV0b3EoKQ0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSApdGhlbg0KICAgICAgc2VsZjpjb21ibygpDQogICAgZW5kDQogICAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKXRoZW4NCiAgICAgc2VsZjpKdW5nbGVDbGVhcigpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSApdGhlbg0KICAgICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICAgIGVuZA0KICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciApdGhlbg0KICAgICAgc2VsZjplbmdhZ2V3aXRocigpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSl0aGVuDQogICAgICBzZWxmOmVzY2FwZSgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICkgdGhlbg0KICAgICAgc2VsZjpraWxsc3RlYWwoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgICkgdGhlbg0KICAgICAgc2VsZjpoYXJhc3MoKQ0KICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6TG9hZE1lbnUoKQ0KICAgICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIiLCJtZW51IikNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkNvbWJvIFNldHRpbmdzIiwgImNvbWJvIikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVEiLCAiVXNlIFEgaW4gQ29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgIlVzZSBXIGluIENvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsICJVc2UgRSBpbiBjb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVIiLCAiVXNlIFIgaW4gY29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgIlVzZSBJZ25pdGUgaWYgdGFyZ2V0IGtpbGxhYmxlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICANCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkhhcmFzcyBTZXR0aW5ncyIsICJoYXJhc3MiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCAiSGFyYXNzIFdpdGggUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VXIiwgIkhhcmFzcyBXaXRoIFciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlRSIsICJIYXJhc3MgV2l0aCBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJhdXRvcSIsICJBdXRvIEhhcmFzcyB3aXRoIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlNraWxsIExvZ2ljcyIsICJza2lsbGxvZ2ljIikNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYzphZGRTdWJNZW51KCJFIFNraWxsIExvZ2ljIiwgIkVsb2dpYyIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJjb21ibyIsICJFIExvZ2ljIGZvciBjb21ibyBtb2RlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHsiRW5nYWdlIHdpdGggc2Vjb25kIEUiLCAiRG8gbm90IHVzZSBTZWNvbmQgRSAoIFJlY29tZW5kZWQpIiB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYzphZGRQYXJhbSgiaGFyYXNzIiwgIkUgTG9naWMgZm9yIEhhcmFzcyBtb2RlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiRG8gbm90IHVzZSBTZWNvbmQgRSAoIFJlY29tZW5kZWQpIiwgIkVuZ2FnZSB3aXRoIHNlY29uZCBFIiB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYzphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJpbmZvRSIsICJFbmdhZ2Ugd2l0aCBzZWNvbmQgRSBvcHRpb24gaXMgc3RpbGwgb24gQmV0YS4uIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWM6YWRkU3ViTWVudSgiUiBTa2lsbCBMb2dpYyIsICJSbG9naWMiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiUmxvZ2ljIiwgIlIgTG9naWMgZm9yIGNvbWJvIG1vZGUiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJTbWFydCIsICJzYXZlIGZvciB5b3Vyc2VsZiIsICJVc2UgZm9yIGVuZW15IiB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiZW5hYmxlYXV0b1IiLCAiQXV0byBSIGZvciB5b3Vyc2VsZiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWM6YWRkUGFyYW0oImF1dG9SIiwgIkF1dG9SIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiaW5mb1IyIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiaW5mb1IiLCAiRm9yIHVzaW5nIFNtYXJ0IFIgbG9naWMsIEF1dG9SIHNob3VsZCBiZSBvcGVuLi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYzphZGRTdWJNZW51KCJXIFNraWxsIExvZ2ljIiwgIldsb2dpYyIpIA0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlVyIsICJVc2UgVyBmb3IgQW50aSBHYXBDbG9zZSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJpbmZvdzIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJpbmZvVzMiLCAiVGhpcyBGdW5jdGlvbiBpcyBvbiBiZXRhLi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJFc2NhcGUgU2V0dGluZ3MiLCJlc2NhcGUiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZUUiLCJVc2UgRSBXaGlsZSBFc2NhcGUiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVciLCJVc2UgVyBXaGlsZSBFc2NhcGUiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRmFybSBTZXR0aW5ncyIsICJmYXJtIikNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudSgiTGFuZUNsZWFyIFNldHRpbmdzIiwibGFuZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVEiLCJVc2UgUSBvbiBMYW5lY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlVyIsIlVzZSBXIG9uIExhbmVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIiwiVXNlIEUgb24gTGFuZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudSgiSnVuZ2xlQ2xlYXIgU2V0dGluZ3MiLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLCJVc2UgUSBvbiBqdW5nbGVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVciLCJVc2UgVyBvbiBqdW5nbGVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLCJVc2UgRSBvbiBqdW5nbGVjbGVhciIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIC0tc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KCJMYXN0aGl0IFNldHRpbmdzIiwibGFzdGhpdCIpDQogICAgICAgIC0tc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24gTGFzdGhpdCIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIC0tc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VXIiwiVXNlIFcgb24gTGFzdGhpdCIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIC0tc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VFIiwiVXNlIEUgb24gTGFzdGhpdCIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIC0tc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiS2lsbFN0ZWFsIFNldHRpbmdzIiwgImtpbGxzdGVhbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLCJLaWxsc3RlYWwgT24vT2ZmIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgIlN0ZWFsIFdpdGggUSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgIlN0ZWFsIFdpdGggRSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VSIiwgIlN0ZWFsIFdpdGggUiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VJIiwgIlN0ZWFsIFdpdGggSWduaXRlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiSXRlbSBTZXR0aW5ncyIsICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsICJBdXRvIFpob255YSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImF1dG96aG9ueWEiLCAiWmhvbnlhIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgICAgICAgaWYgVklQX1VTRVIgdGhlbg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJWSVAgU2V0dGluZ3MiLCAidmlwIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJwYWNrZXQiLCJVc2UgUGFja2V0IENhc3RpbmciLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsICJUbyB1c2UgdmlwIHNldHRpbmdzLCBQYWNrZXQgQ2FzdGluZyBzaG91bGQgYmUgb3Blbi4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIkF1dG8gTGV2ZWwgU2V0dGluZ3MiLCAibGV2ZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImtleSIsIlVzZSBBdXRvIExldmVsIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCAiU2VsZWN0IFNraWxsIE9yZGVyIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDcsIHsiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciICwgIlNtYXJ0IiAgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIlNraW4gSGFjayBTZXR0aW5ncyIsICJza2luIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsIlVzZSBTa2luIEhhY2siLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCAiU2VsZWN0IFNraW4iLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJPcmlnaW5hbCIsICJCbG9vZHN0b25lIExpc3NhbmRyYSAiLCJCbGFkZSBRdWVlbiBMaXNzYW5kcmEifSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSBza2luIGhhY2ssIFlvdSBuZWVkIHRvIDJ4IEY5IGFmdGVyIHlvdSBzZWxlY3QgdGhlIHNraW4geW91IGRlc2lyZS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm81IiwgIk1ha2Ugc3VyZSB0aGF0IHVzaW5nIHBhY2tldCBjYXN0aW5nIGlzIE9OLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLVtbc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIkFudGktQUZLIFNldHRpbmdzIiwgImFudGlhZmsiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuYW50aWFmazphZGRQYXJhbSgiYW50aWFmayIsIlVzZSBBbnRpIEFmayIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKSBdXQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFlvdSBuZWVkIHRvIGJlIGEgVklQIHVzZXIgb24gQk9MIGNvbW11bml0eS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBlbmQNCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRHJhdyBTZXR0aW5ncyIsIm90aGVyIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTaG93IERhbWFnZSBPbiBIcCBCYXIiLCAiSFBCQVIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyLkhQQkFSOmFkZFBhcmFtKCJrZXkiLCJPTi9PRkYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTa2lsbCBEcmF3aW5nIFNldHRpbmdzIiwgImRyYXciKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJxZHJhdyIsIlEgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJ3ZHJhdyIsIlcgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJlZHJhdyIsIkUgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJyZHJhdyIsIlIgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJhYWRyYXciLCJBdXRvIEF0dGFjayBSYW5nZSIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICANCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlRhcmdldHNlbGVjdG9ycyIsInRhcmdldHNlbCIpDQogICAgICBzZWxmLnRzLm5hbWUgID0gIkxpc3NhbmRyYSBHZW5lcmFsIg0KICAgICAgc2VsZi50c3EubmFtZSA9ICJMaXNzYW5kcmEgUSBTa2lsbCINCiAgICAgIHNlbGYudHN3Lm5hbWUgPSAiTGlzc2FuZHJhIFcgU2tpbGwiDQogICAgICBzZWxmLnRzZS5uYW1lID0gIkxpc3NhbmRyYSBFIFNraWxsIg0KICAgICAgc2VsZi50c3IubmFtZSA9ICJMaXNzYW5kcmEgUiBTa2lsbCINCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNxKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHN3KQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNlKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNyKSANCiAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiS2V5cyBTZXR0aW5ncyIsICJLZXlzIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMyIsICI8LS0tLS0tLS0tLS0tLS0tLS0tQ29tYm8gS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tPiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLCAiQ29tYm8gS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXlyIiwgIlN0YXJ0IEVuZ2FnZSBXaXRoIFlvdXIgVWx0aSAiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlUiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNCIsICI8LS0tLS0tLS0tLS0tLS0tLS0tSGFyYXNzIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLT4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc2tleSIsICJTbWFydCBIYXJhc3MgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJoYXJhc3N0b2dsZWtleSIsICJIYXJhc3MgVG9nbGUgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNSIsICI8LS0tLS0tLS0tLS0tLS0tLS0tQ2xlYXIgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCAiTGFuZUNsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCAiSnVuZ2xlQ2xlYXIgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJaIikpDQogICAgICAtLXNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLCAiTGFzdGhpdCBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlgiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNiIsICI8LS0tLS0tLS0tLS0tLS0tLS0tT3RoZXIgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJlc2NhcGVrZXkiLCAiRXNjYXBlIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzIiLCAiTWFrZSBTdXJlIFRoYXQgWW91ciBPcmJ3YWxrZXIgS2V5cyBhcmUgU2FtZSBBcyBIZXJlIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICANCiAgICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJPcmJ3YWxrZXIgS2V5IFNldHRpbmdzIiwgIktleXMyIikNCiAgICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czI6YWRkUGFyYW0oImluZm9LNCIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXMyOmFkZFBhcmFtKCJpbmZvSzIyIiwgIk1ha2UgU3VyZSBUaGF0IFlvdXIgU2NyaXB0IEtleXMgYXJlIFNhbWUgQXMgSGVyZSIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIiwgIiAgICAgICAgICAgICAgICAgU2NyaXB0IFZlcnNpb246ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsICIgICAgICAgICAgICBTY3JpcHQgd2FzIG1hZGUgYnkgICIuLkF1dGhvci4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCAiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICANCiAgICAgICBzZWxmLkNvbmZpZzpwZXJtYVNob3coImluZm9ib3giKQ0KICAgICAgIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJjb21ib2tleSIpDQogICAgICAgc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImhhcmFzc3RvZ2xla2V5IikNCiAgICAgICBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNza2V5IikNCiAgICANCiAgDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6c2tpbmhhY2soKQ0KICBpZiBub3Qgc2VsZi5Db25maWcudmlwLnBhY2tldCB0aGVuIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQlsxXSwgbXlIZXJvLm5ldHdvcmtJRCk7IGVsc2UNCiAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDMsMiwxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICANCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG9SKCkNCiAgICBpZiAoIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLmVuYWJsZWF1dG9SIGFuZCAoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDIgb3Igc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDEpKSB0aGVuDQogICAgICBpZiBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuYXV0b1IgLyAxMDApIHRoZW4gc2VsZjpDYXN0UlMobXlIZXJvKQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6ZW5nYWdld2l0aHIoKQ0KICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgIGlmIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyIHRoZW4NCiAgIHNlbGY6d2FsaygpDQogICBlbmQNCiAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEoc2VsZi50c3EudGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciApdGhlbg0KICAgICAgICAgICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZICkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHNlbGYudHNlLnRhcmdldC54LCBzZWxmLnRzZS50YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMS41KQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHNlbGYudHN3LnRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ciApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIoc2VsZi50c3IudGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpEcmF3KCkNCiAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzI1LCAxLHJlZCkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy53ZHJhdyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCAxMDUwLCAxLCByZWQpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNDIwLCAxLCByZWQpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA1MDAsMSwgcmVkKQ0KICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuYWFkcmF3IHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA1NTAsMSwgQVJHQigyNTUsIDI1NSwwLDApKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmFudGlnYXB3KCkNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVcgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0VyhzZWxmLnRzdy50YXJnZXQpDQogICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpjb21ibygpDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi50c3EudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEoc2VsZi50c3EudGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuY29tYm8gPT0gMSBhbmQgIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHNlbGYudHNlLnRhcmdldC54LCBzZWxmLnRzZS50YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMS41KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuY29tYm8gPT0gMiBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHNlbGYudHNlLnRhcmdldC54LCBzZWxmLnRzZS50YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMikNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0VyhzZWxmLnRzdy50YXJnZXQpDQogICAgICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAzIG9yIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLlJsb2dpYyA9PSAxIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICBsb2NhbCBkbWdSID1nZXREbWcoIlIiLHVuaXQsbXlIZXJvKSsgKChteUhlcm8uYXApKjAuNzApIA0KICAgICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgICAgaWYoaGVhbHRoPGRtZ1IgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIEdldERpc3RhbmNlKHVuaXQpPDU1MCl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgZWxzZWlmIChzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMiBhbmQgIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5hdXRvUiAvIDEwMCkpIHRoZW4gDQogICAgICAgc2VsZjpDYXN0UlMobXlIZXJvKQ0KICAgICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIA0KICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgIGVuZA0KICAgICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RRKHVuaXQpDQogICAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0Vyh1bml0KQ0KICAgIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdEUodW5pdCkNCiAgICBzZWxmLkVTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RSKHVuaXQpDQogICAgc2VsZi5SU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RSUyh1bml0KQ0KICAgQ2FzdFNwZWxsKF9SICwgbXlIZXJvKQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0SSh1bml0KQ0KICAgIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpraWxsc3RlYWwoKQ0KICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgaGVhbHRoID0gdW5pdC5oZWFsdGgNCiAgICAgIGxvY2FsIGRtZ0UgPSBnZXREbWcoIkUiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNikgDQogICAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZG1nUSA9IGdldERtZygiUSIsIHVuaXQsIG15SGVybykgKyAoKG15SGVyby5hcCkqMC42NSkNCiAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1cgPSBnZXREbWcoIlciLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNDApDQogICAgICAgIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlVyBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBkbWdSID1nZXREbWcoIlIiLHVuaXQsbXlIZXJvKSsoKG15SGVyby5hcCkqMC43MCkgDQogICAgICAgIGlmKHNlbGYudHNyLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw1NTApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgICAgZW5kDQogICAgIGVuZA0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTplc2NhcGUoKQ0KICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZUUgIHRoZW4NCiAgaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgKSB0aGVuDQogICAgIENhc3RTcGVsbChfRSxtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDEuNSkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgdGhlbiANCiAgc2VsZjp3YWxrKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5IGFuZCBzZWxmLkNvbmZpZy5lc2NhcGUudXNlVyBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgdGhlbg0KICBDYXN0U3BlbGwoX1csdHN3LnRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6d2FsaygpDQogICAgbXlIZXJvOk1vdmVUbyhtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6aGFyYXNzKCkNCiAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSB0aGVuDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSApIHRoZW4gICAgICAgIA0KICAgICAgICAgIHNlbGY6Q2FzdFEoc2VsZi50c3EudGFyZ2V0KQ0KICAgICAgICBlbmQgICANCiAgICAgICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSB0aGVuDQogICAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyApIHRoZW4gICAgICAgIA0KICAgICAgICAgIHNlbGY6Q2FzdFcoc2VsZi50c3cudGFyZ2V0KQ0KICAgICAgICBlbmQgIA0KICAgICAgICBlbmQgDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSAgdGhlbg0KICAgICAgICBpZihzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYy5oYXJhc3MgPT0gMSAgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApICBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgKSB0aGVuICAgICAgICANCiAgICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHNlbGYudHNlLnRhcmdldC54LCBzZWxmLnRzZS50YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMikNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuS2V5cy5oYXJhc3N0b2dsZWtleSAgdGhlbg0KICAgICAgICAgICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuaGFyYXNzID09IDIgYW5kICAgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlRSApIHRoZW4gICAgICAgIA0KICAgICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgYW5kIHNlbGYudHNlLnRhcmdldH49bmlsKSB0aGVuDQogICAgIENhc3RTcGVsbChfRSwgc2VsZi50c2UudGFyZ2V0LngsIHNlbGYudHNlLnRhcmdldC56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAxLjUpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6TGFuZUNsZWFyKCkNCiAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gbmlsDQogIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5NYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RMaW5lRmFybVBvc2l0aW9uKHNlbGYuUVNwZWxsLlJhbmdlLCBzZWxmLlFTcGVsbC5XaWR0aCwgc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyApDQogICAgICAgIGlmIEJlc3RQb3MgIGFuZCBCZXN0SGl0ID4gMCB0aGVuDQogICAgICAgICBDYXN0U3BlbGwoX1EsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcoY2xlYXJ0YXJnZXQpDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTphdXRvcSgpDQogIA0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLmF1dG9xICkgdGhlbiAgICAgICAgDQogICAgICAgICAgc2VsZjpDYXN0UShzZWxmLnRzcS50YXJnZXQpDQogICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpKdW5nbGVDbGVhcigpDQogIGxvY2FsIGNsZWFydGFyZ2V0ID0gbmlsDQogICAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIGp1bmdsZW1pbmlvbiBpbiBpcGFpcnMoc2VsZi5qdW5nbGVNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KGp1bmdsZW1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBqdW5nbGVtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZvciBpLCBvdGhlcm1pbmlvbiBpbiBpcGFpcnMoc2VsZi5vdGhlck1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQob3RoZXJtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gb3RoZXJtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGlmIGNsZWFydGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0UShjbGVhcnRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGNsZWFydGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VXIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0VyhjbGVhcnRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGNsZWFydGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RShjbGVhcnRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MaXNhbmRyYSBlbmRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUxpc2FuZHJhIGVuZGluZy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tTGlzYW5kcmEgZW5kaW5nLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1MaXNhbmRyYSBlbmRpbmctLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIA0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1WaWt0b3IgU3RhcnQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVZpa3RvciBTdGFydC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tVmlrdG9yIFN0YXJ0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1WaWt0b3IgU3RhcnQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQogIGNsYXNzICJWaWt0b3IiDQogIHJlcXVpcmUgJ0hQcmVkaWN0aW9uJw0KICBmdW5jdGlvbiBWaWt0b3I6X19pbml0KCkNCiAgIHNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDUyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzcT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNjAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEyMDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c3I9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkgDQogICAgIHNlbGYuUVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1EsIERhbWFnZU5hbWUgPSAiUSIsIFJhbmdlID0gbWF0aC5odWdlLCBXaWR0aCA9IDEsIERlbGF5ID0gMCwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IHRydWUsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IG1hdGguaHVnZSwgV2lkdGggPSAxMjUsIERlbGF5ID0gMC41LCBTcGVlZCA9IDc1MCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLkNJUkNVTEFSfSkNCiAgICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAxMjAwLCBXaWR0aCA9IDkwLCBEZWxheSA9IDAsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSB0cnVlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuTElORUFSfSkNCiAgICAgc2VsZi5SU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTcwMCwgV2lkdGggPSAwLCBEZWxheSA9IDAuMjUsIFNwZWVkID0gMTAwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLkNJUkNVTEFSfSkNCiAgICAgc2VsZi5JZ25pdGUgPSBfU3BlbGwoe1Nsb3QgPSBGaW5kU3VtbW9uZXJTbG90KCJzdW1tb25lcmRvdCIpLCBEYW1hZ2VOYW1lID0gIklHTklURSIsIFJhbmdlID0gNjAwLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLkhQcmVkID0gSFByZWRpY3Rpb24oKQ0KICAgICBzZWxmLkUgPSB7UmFuZ2UxID0gNTUwLCBSYW5nZTIgPSA3MDAsIHdpZHRoID0gMTgwLCByZWFkeX0NCiAgICAgc2VsZi5FUmFuZ2UgPSBzZWxmLkUuUmFuZ2UxK3NlbGYuRS5SYW5nZTINCiAgLS18PiBNaW5pb24gTWFuYWdlcnMNCiAgICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuYWxseU1pbmlvbnMgICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9BTExZLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgICAgICAgICBzZWxmOkxvYWRNZW51KCkNCiAgICAgICAgICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgICAgICAgICAgICBMYXN0X0xldmVsU3BlbGwgPSAwDQogICAgICAgICAtLSBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpUaWNrKCkgZW5kKQ0KICAgIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgICAtLUFkZE1zZ0NhbGxiYWNrKGZ1bmN0aW9uKG1zZyxLZXkpIHNlbGY6V25kTXNnKG1zZyxLZXkpIGVuZCkNCiAgICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogICAgLS1BZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbih1bml0LCBzcGVsbCkgc2VsZjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkNCiAgICAtLUFkZEFwcGx5QnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpPbkFwcGx5QnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCiAgICAtLUFkZFVwZGF0ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmLCBzdGFja3MpIHNlbGY6VXBkYXRlQnVmZih1bml0LCBidWZmLCBzdGFja3MpIGVuZCkNCiAgICAtLUFkZFJlbW92ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmKSBzZWxmOk9uUmVtb3ZlQnVmZih1bml0LCBidWZmKSBlbmQpIA0KICAgICAgZW5kDQogIC0tIGhhbmRsZXMgc2NyaXB0IGxvZ2ljLCBhIHB1cmUgaGlnaCBzcGVlZCBsb29wDQogIGZ1bmN0aW9uIFZpa3RvcjpUaWNrKCkNCiAgICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6YXV0b2xldmVsKCkgZW5kDQogICBpZihzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgICAgc2VsZjpjb21ibygpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcubGFuZWNsZWFyLmxhbmVjbGVhcmtleSl0aGVuDQogICAgICBzZWxmOkxhbmVDbGVhcigpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci5qdW5nbGVjbGVhcmtleSl0aGVuDQogICAgICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgICBzZWxmOmtpbGxzdGVhbCgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuaGFyYXNzLmhhcmFzc2tleSBvciBzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNzdG9nbGUgKSB0aGVuDQogICAgICBzZWxmOmhhcmFzcygpDQogICAgZW5kDQogICAgICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkxvYWRNZW51KCkNCiAgICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIiwibWVudSIpDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkhpdGNoYW5jZSIsICJoaXQiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oaXQ6YWRkUGFyYW0oIkUiLCAiRSBIaXRDaGFuY2UgKERlZmF1bHQgdmFsdWUgPSAxLjYpIiwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxLjYsIDEsIDMsIDIpDQogICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkNvbWJvIFNldHRpbmdzIiwgImNvbWJvIikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImNvbWJva2V5IiwgIkNvbWJvIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVEiLCAiVXNlIFEgaW4gQ29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgIlVzZSBXIGluIENvbWJvIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsICJVc2UgRSBpbiBjb21ibyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVIiLCAiVXNlIFIgaW4gY29tYm8iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgIlVzZSBJZ25pdGUgaWYgdGFyZ2V0IGtpbGxhYmxlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgibG9naWMiLCAiVWx0aSBMb2dpYyIsIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7IlVzZSBVbHRpIElmIFRhcmdldCBJcyBLaWxsYWJsZSIsfSkgLS0oIlVzZSBVbHRpIERpcmVjdGx5IiB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiTWFuYSIsIk1hbmEgTWFuYWdlciAlIixTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiSGFyYXNzIFNldHRpbmdzIiwgImhhcmFzcyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiaGFyYXNza2V5IiwgIlNtYXJ0IEhhcmFzcyBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3N0b2dsZSIsICJTbWFydCBBdXRvIEhhcmFzcyIsICAgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgIkhhcmFzcyBXaXRoIFEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlRSIsICJIYXJhc3MgV2l0aCBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oIkUiLCAiRSBIaXRDaGFuY2UgKERlZmF1bHQgdmFsdWUgPSAyKSIsIFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMywgMikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIiwiTWFuYSBNYW5hZ2VyICUiLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJMYW5lQ2xlYXIgU2V0dGluZ3MiLCJsYW5lY2xlYXIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5sYW5lY2xlYXI6YWRkUGFyYW0oImxhbmVjbGVhcmtleSIsICJMYW5lIENsZWFyIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgICBzZWxmLkNvbmZpZy5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVEiLCJVc2UgUSBvbiBMYW5lY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZUUiLCJVc2UgRSBvbiBMYW5lY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5sYW5lY2xlYXI6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkp1bmdsZUNsZWFyIFNldHRpbmdzIiwianVuZ2xlY2xlYXIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCAiSnVuZ2xlQ2xlYXIgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgICAgIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIiwiVXNlIFEgb24ganVuZ2xlY2xlYXIiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlRSIsIlVzZSBFIG9uIGp1bmdsZWNsZWFyIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuanVuZ2xlY2xlYXI6YWRkUGFyYW0oIk1hbmEiLCJNYW5hIE1hbmFnZXIgJSIsU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJLaWxsU3RlYWwgU2V0dGluZ3MiLCAia2lsbHN0ZWFsIikNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsIktpbGxzdGVhbCBPbi9PZmYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVEiLCAiU3RlYWwgV2l0aCBRIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUUiLCAiU3RlYWwgV2l0aCBFIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCAiU3RlYWwgV2l0aCBSIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUkiLCAiU3RlYWwgV2l0aCBJZ25pdGUiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJJdGVtIFNldHRpbmdzIiwgIml0ZW0iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgIkF1dG8gWmhvbnlhIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsICJaaG9ueWEgaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICAgICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlZJUCBTZXR0aW5ncyIsICJ2aXAiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oInBhY2tldCIsIlVzZSBQYWNrZXQgQ2FzdGluZyIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8yIiwgIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFBhY2tldCBDYXN0aW5nIHNob3VsZCBiZSBvcGVuLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudSgiQXV0byBMZXZlbCBTZXR0aW5ncyIsICJsZXZlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5IiwiVXNlIEF1dG8gTGV2ZWwiLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJsb2dpYyIsICJTZWxlY3QgU2tpbGwgT3JkZXIiLCBTQ1JJUFRfUEFSQU1fTElTVCwgNywgeyJGb2N1cyBRPlc+RSIsICJGb2N1cyBRPkU+VyIsIkZvY3VzIFc+UT5FIiwiRm9jdXMgVz5FPlEiLCJGb2N1cyBFPlc+USIsICJGb2N1cyBFPlE+VyIsICJTbWFydCIgIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KCJTa2luIEhhY2sgU2V0dGluZ3MiLCAic2tpbiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLCJVc2UgU2tpbiBIYWNrIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCdzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJywgIlNlbGVjdCBTa2luIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiT3JpZ2luYWwiLCAiRnVsbCBNYWNoaW5lIFZpa3RvciAiLCJQcm90b3R5cGUgVmlrdG9yICIsIkNyZWF0b3IgVmlrdG9yICIgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSBza2luIGhhY2ssIFlvdSBuZWVkIHRvIDJ4IEY5IGFmdGVyIHlvdSBzZWxlY3QgdGhlIHNraW4geW91IGRlc2lyZS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm81IiwgIk1ha2Ugc3VyZSB0aGF0IHVzaW5nIHBhY2tldCBjYXN0aW5nIGlzIE9OLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLVtbc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUoIkFudGktQUZLIFNldHRpbmdzIiwgImFudGlhZmsiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuYW50aWFmazphZGRQYXJhbSgiYW50aWFmayIsIlVzZSBBbnRpIEFmayIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKSBdXQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFlvdSBuZWVkIHRvIGJlIGEgVklQIHVzZXIgb24gQk9MIGNvbW11bml0eS4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBlbmQNCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRHJhdyBTZXR0aW5ncyIsIm90aGVyIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTaG93IERhbWFnZSBPbiBIcCBCYXIiLCAiSFBCQVIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyLkhQQkFSOmFkZFBhcmFtKCJrZXkiLCJPTi9PRkYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTa2lsbCBEcmF3aW5nIFNldHRpbmdzIiwgImRyYXciKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJxZHJhdyIsIlEgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJ3ZHJhdyIsIlcgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJlZHJhdyIsIkUgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJyZHJhdyIsIlIgU2tpbGwgRHJhd2luZ3MiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJhYWRyYXciLCJBdXRvIEF0dGFjayBSYW5nZSIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiVGFyZ2V0c2VsZWN0b3JzIiwidGFyZ2V0c2VsIikNCiAgICAgc2VsZi50cy5uYW1lICA9ICJWaWt0b3IiDQogICAgICBzZWxmLnRzcS5uYW1lID0gIlZpa3RvclEiDQogICAgICBzZWxmLnRzdy5uYW1lID0gIlZpa3RvclciDQogICAgICBzZWxmLnRzZS5uYW1lID0gIlZpa3RvckUiDQogICAgICBzZWxmLnRzci5uYW1lID0gIlZpa3RvclIiDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzdykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcikgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJLZXlzIFNldHRpbmdzIiwgIktleXMiKQ0KICAgICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5cykNCiAgICAgICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLCAiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2lvbjogICIuLlZlcnNpb24uLiAiICAgICAgICAgIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgIiAgICAgICAgICAgIFNjcmlwdCB3YXMgbWFkZSBieSAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsICIgICAgICAgTGVhdWdlIE9mIExlZ2VuZHMgVmVyc2lvbjogICIuLkxWZXJzaW9uLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIA0KICAgICAgIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpDQogICAgICAgc2VsZi5Db25maWcuY29tYm86cGVybWFTaG93KCJjb21ib2tleSIpDQogICAgICAgc2VsZi5Db25maWcuaGFyYXNzOnBlcm1hU2hvdygiaGFyYXNzdG9nbGUiKQ0KICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczpwZXJtYVNob3coImhhcmFzc2tleSIpDQogICAgDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6RHJhdygpDQogICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnFkcmF3IGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDYwMCwgMSxyZWQpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcud2RyYXcgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLCAxLCByZWQpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTIwMCwgMSwgcmVkKQ0KICAgIGVuZA0KICAgIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucmRyYXcgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLDEsIHJlZCkNCiAgICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmFhZHJhdyB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTI1LDEsIEFSR0IoMjU1LCAyNTUsMCwwKSkNCiAgICBlbmQNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBWaWt0b3I6c2tpbmhhY2soKQ0KICBpZiBub3Qgc2VsZi5Db25maWcudmlwLnBhY2tldCB0aGVuIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQlsxXSwgbXlIZXJvLm5ldHdvcmtJRCk7IGVsc2UNCiAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDMsMywyLDMsNCwzLDEsMywxLDQsMSwyLDEsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3Rvcjpvbmx5cigpDQogICAgaWYgKHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgYW5kIEdldERpc3RhbmNlKHNlbGYudHNyLnRhcmdldCk8NzAwICl0aGVuDQogICAgICBzZWxmOkNhc3RSKHNlbGYudHNyLnRhcmdldCkNCiAgICAgIGVuZA0KICAgIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6Y29tYm8oKQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNxLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0UShzZWxmLnRzcS50YXJnZXQpDQogICAgICBlbmQNCiAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUoc2VsZi50c2UudGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcoc2VsZi50c3cudGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZiggc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgbG9jYWwgZG1nUiA9Z2V0RG1nKCJSIix1bml0LG15SGVybykrICgobXlIZXJvLmFwKSowLjU1KSANCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAxIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBHZXREaXN0YW5jZSh1bml0KTw3MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgICBlbmQNCiAgICAgICBlbmQNCiAgICAgICBpZiAoc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiBhbmQgc2VsZi50c3IudGFyZ2V0fj1uaWwpIHRoZW4NCiAgICAgICBzZWxmOm9ubHlyKCkNCiAgICAgIGVuZA0KICAgIA0KICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgIGVuZA0KICAgICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0USh1bml0KQ0KICAgIHNlbGYuUVNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdFcodW5pdCkNCiAgICBzZWxmLldTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICANCiAgZnVuY3Rpb24gVmlrdG9yOkNhc3RFKHVuaXQpDQogICANCiAgICBpZiB1bml0LmRlYWQgb3IgdW5pdC5oZWFsdGggPT0gMCB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICANCiAgICBpZiBHZXREaXN0YW5jZSh1bml0LCBteUhlcm8pID4gc2VsZi5FLlJhbmdlMS01IHRoZW4NCiAgICAgRVN0YXJ0UG9zID0gQ2lyY2xlSW50ZXJzZWN0aW9uKG15SGVybywgdW5pdCwgbXlIZXJvLCBzZWxmLkUuUmFuZ2UxLTUpDQogICAgZWxzZQ0KICAgICBFU3RhcnRQb3MgPSBWZWN0b3IodW5pdC54LCB1bml0LnksIHVuaXQueikNCiAgICBlbmQNCiAgICANCiAgICAgRVBvcywgRUhpdENoYW5jZSA9IHNlbGYuSFByZWQ6R2V0UHJlZGljdChzZWxmLkhQcmVkLlByZXNldHNbJ1Zpa3RvciddWyJFIl0sIHVuaXQsIEVTdGFydFBvcykNCiAgICANCiAgICBpZiBtb2RlID09ICJDb21ibyIgYW5kIEVIaXRDaGFuY2UgPj0gc2VsZi5Db25maWcuaGl0LkUgb3IgbW9kZSA9PSAiSGFyYXNzIiBhbmQgRUhpdENoYW5jZSA+PSBzZWxmLkNvbmZpZy5oYXJhc3MuRSBvciAgbW9kZSA9PSBuaWwgYW5kIEVIaXRDaGFuY2UgPiAxIHRoZW4NCiAgICAgIENhc3RTcGVsbDMoX0UsIEQzRFhWRUNUT1IzKEVTdGFydFBvcy54LCAwLCBFU3RhcnRQb3MueiksIEQzRFhWRUNUT1IzKEVQb3MueCwgMCwgRVBvcy56KSkNCiAgICBlbmQNCiAgICANCiAgZW5kDQogIA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdFIodW5pdCkNCiAgICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdEkodW5pdCkNCiAgICBzZWxmLklnbml0ZTpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6a2lsbHN0ZWFsKCkNCiAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgICBsb2NhbCBkbWdFID0gZ2V0RG1nKCJFIiwgdW5pdCwgbXlIZXJvKSArICgobXlIZXJvLmFwKSowLjcpICsgKChnZXREbWcoIkUiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuNykpKjAuNCkNCiAgICAgICAgaWYoc2VsZi50c2UudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ0UgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VFIGFuZCBHZXREaXN0YW5jZSh1bml0KTw3MDAgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1EgPSBnZXREbWcoIlEiLCB1bml0LCBteUhlcm8pICsgKChteUhlcm8uYXApKjAuMzApDQogICAgICAgIGlmKHNlbGYudHNxLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBkbWdSID1nZXREbWcoIlIiLHVuaXQsbXlIZXJvKSsoKG15SGVyby5hcCkqMC41NSkgDQogICAgICAgIGlmKHNlbGYudHNyLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw3MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgICAgZW5kDQogICAgIGVuZA0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIFZpa3RvcjpoYXJhc3MoKQ0KICAgIHNlbGYudHM6dXBkYXRlKCkNCiAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLmhhcmFzcy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuaGFyYXNzLmhhcmFzc3RvZ2xlICB0aGVuDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSApIHRoZW4gICAgICAgIA0KICAgICAgICAgIHNlbGY6Q2FzdFEoc2VsZi50c3EudGFyZ2V0KQ0KICAgICAgICBlbmQgICANCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgYW5kIHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFICBhbmQgVmFsaWRUYXJnZXQoc2VsZi50c2UudGFyZ2V0LCBzZWxmLkVSYW5nZSkpIHRoZW4NCiAgICAgICAgc2VsZjpDYXN0RShzZWxmLnRzZS50YXJnZXQpDQogICAgZW5kDQogIA0KICAgICAgICBlbmQNCiAgICAgIGVuZCAgIA0KICAgDQogIGZ1bmN0aW9uIFZpa3RvcjpMYW5lQ2xlYXIoKQ0KICAgbG9jYWwgY2xlYXJ0YXJnZXQgPSBuaWwNCiAgICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwganVuZ2xlbWluaW9uIGluIGlwYWlycyhzZWxmLmp1bmdsZU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQoanVuZ2xlbWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IGp1bmdsZW1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG90aGVybWluaW9uIGluIGlwYWlycyhzZWxmLm90aGVyTWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChvdGhlcm1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBvdGhlcm1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgaWYgY2xlYXJ0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5sYW5lY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcubGFuZWNsZWFyLmxhbmVjbGVhcmtleSkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcubGFuZWNsZWFyLk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKGNsZWFydGFyZ2V0KQ0KICAgICAgICBlbmQNCiAgICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmxhbmVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5sYW5lY2xlYXIubGFuZWNsZWFya2V5KSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5sYW5lY2xlYXIuTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5FU3BlbGwuUmFuZ2UsIHNlbGYuRVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgYW5kIEJlc3RIaXQgPj0gMSB0aGVuDQogICAgICAgICBDYXN0U3BlbGwoX0UsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpKdW5nbGVDbGVhcigpDQogICBsb2NhbCBjbGVhcnRhcmdldCA9IG5pbA0KICAgICAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIGZvciBpLCBqdW5nbGVtaW5pb24gaW4gaXBhaXJzKHNlbGYuanVuZ2xlTWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChqdW5nbGVtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0ganVuZ2xlbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBpZiBjbGVhcnRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyLmp1bmdsZWNsZWFya2V5KSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5qdW5nbGVjbGVhci5NYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0UShjbGVhcnRhcmdldCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmIGNsZWFydGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuanVuZ2xlY2xlYXIuanVuZ2xlY2xlYXJrZXkpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmp1bmdsZWNsZWFyLk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKGNsZWFydGFyZ2V0KQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICBmdW5jdGlvbiBpdGVtZml4KCkNCiAgDQogICAgSXRlbU5hbWVzICAgICAgID0gew0KICAgICAgWzMzMDNdICAgICAgICA9ICJBcmNoQW5nZWxzRHVtbXlTcGVsbCIsDQogICAgICBbMzAwN10gICAgICAgID0gIkFyY2hBbmdlbHNEdW1teVNwZWxsIiwNCiAgICAgIFszMTQ0XSAgICAgICAgPSAiQmlsZ2V3YXRlckN1dGxhc3MiLA0KICAgICAgWzMxODhdICAgICAgICA9ICJJdGVtQmxhY2tmaXJlVG9yY2giLA0KICAgICAgWzMxNTNdICAgICAgICA9ICJJdGVtU3dvcmRPZkZlYXN0QW5kRmFtaW5lIiwNCiAgICAgIFszNDA1XSAgICAgICAgPSAiVHJpbmtldFN3ZWVwZXJMdmwxIiwNCiAgICAgIFszNDExXSAgICAgICAgPSAiVHJpbmtldE9yYkx2bDEiLA0KICAgICAgWzMxNjZdICAgICAgICA9ICJUcmlua2V0VG90ZW1MdmwxIiwNCiAgICAgIFszNDUwXSAgICAgICAgPSAiT2RpblRyaW5rZXRSZXZpdmUiLA0KICAgICAgWzIwNDFdICAgICAgICA9ICJJdGVtQ3J5c3RhbEZsYXNrIiwNCiAgICAgIFsyMDU0XSAgICAgICAgPSAiSXRlbUtpbmdQb3JvU25hY2siLA0KICAgICAgWzIxMzhdICAgICAgICA9ICJFbGl4aXJPZklyb24iLA0KICAgICAgWzIxMzddICAgICAgICA9ICJFbGl4aXJPZlJ1aW4iLA0KICAgICAgWzIxMzldICAgICAgICA9ICJFbGl4aXJPZlNvcmNlcnkiLA0KICAgICAgWzIxNDBdICAgICAgICA9ICJFbGl4aXJPZldyYXRoIiwNCiAgICAgIFszMTg0XSAgICAgICAgPSAiT2RpbkVudHJvcGljQ2xheW1vcmUiLA0KICAgICAgWzIwNTBdICAgICAgICA9ICJJdGVtTWluaVdhcmQiLA0KICAgICAgWzM0MDFdICAgICAgICA9ICJIZWFsdGhCb21iIiwNCiAgICAgIFszMzYzXSAgICAgICAgPSAiVHJpbmtldE9yYkx2bDMiLA0KICAgICAgWzMwOTJdICAgICAgICA9ICJJdGVtR2xhY2lhbFNwaWtlQ2FzdCIsDQogICAgICBbMzQ2MF0gICAgICAgID0gIkFzY1dhcnAiLA0KICAgICAgWzMzNjFdICAgICAgICA9ICJUcmlua2V0VG90ZW1MdmwzIiwNCiAgICAgIFszMzYyXSAgICAgICAgPSAiVHJpbmtldFRvdGVtTHZsNCIsDQogICAgICBbMzE1OV0gICAgICAgID0gIkhleHRlY2hTd2VlcGVyIiwNCiAgICAgIFsyMDUxXSAgICAgICAgPSAiSXRlbUhvcm4iLA0KICAgICAgLS1bMjAwM10gICAgICA9ICJSZWdlbmVyYXRpb25Qb3Rpb24iLA0KICAgICAgWzMxNDZdICAgICAgICA9ICJIZXh0ZWNoR3VuYmxhZGUiLA0KICAgICAgWzMxODddICAgICAgICA9ICJIZXh0ZWNoU3dlZXBlciIsDQogICAgICBbMzE5MF0gICAgICAgID0gIklyb25TdHlsdXMiLA0KICAgICAgWzIwMDRdICAgICAgICA9ICJGbGFza09mQ3J5c3RhbFdhdGVyIiwNCiAgICAgIFszMTM5XSAgICAgICAgPSAiSXRlbU1lcmN1cmlhbCIsDQogICAgICBbMzIyMl0gICAgICAgID0gIkl0ZW1Nb3JlbGxvc0JhbmUiLA0KICAgICAgWzMwNDJdICAgICAgICA9ICJNdXJhbWFuYSIsDQogICAgICBbMzA0M10gICAgICAgID0gIk11cmFtYW5hIiwNCiAgICAgIFszMTgwXSAgICAgICAgPSAiT2R5bnNWZWlsIiwNCiAgICAgIFszMDU2XSAgICAgICAgPSAiSXRlbUZhaXRoU2hha2VyIiwNCiAgICAgIFsyMDQ3XSAgICAgICAgPSAiT3JhY2xlRXh0cmFjdFNpZ2h0IiwNCiAgICAgIFszMzY0XSAgICAgICAgPSAiVHJpbmtldFN3ZWVwZXJMdmwzIiwNCiAgICAgIFsyMDUyXSAgICAgICAgPSAiSXRlbVBvcm9TbmFjayIsDQogICAgICBbMzE0MF0gICAgICAgID0gIlF1aWNrc2lsdmVyU2FzaCIsDQogICAgICBbMzE0M10gICAgICAgID0gIlJhbmR1aW5zT21lbiIsDQogICAgICBbMzA3NF0gICAgICAgID0gIkl0ZW1UaWFtYXRDbGVhdmUiLA0KICAgICAgWzM4MDBdICAgICAgICA9ICJJdGVtUmlnaHRlb3VzR2xvcnkiLA0KICAgICAgWzIwNDVdICAgICAgICA9ICJJdGVtR2hvc3RXYXJkIiwNCiAgICAgIFszMzQyXSAgICAgICAgPSAiVHJpbmtldE9yYkx2bDEiLA0KICAgICAgWzMwNDBdICAgICAgICA9ICJJdGVtU2VyYXBoc0VtYnJhY2UiLA0KICAgICAgWzMwNDhdICAgICAgICA9ICJJdGVtU2VyYXBoc0VtYnJhY2UiLA0KICAgICAgWzIwNDldICAgICAgICA9ICJJdGVtR2hvc3RXYXJkIiwNCiAgICAgIFszMzQ1XSAgICAgICAgPSAiT2RpblRyaW5rZXRSZXZpdmUiLA0KICAgICAgWzIwNDRdICAgICAgICA9ICJTaWdodFdhcmQiLA0KICAgICAgWzMzNDFdICAgICAgICA9ICJUcmlua2V0U3dlZXBlckx2bDEiLA0KICAgICAgWzMwNjldICAgICAgICA9ICJzaHVyZWx5YXNjcmVzdCIsDQogICAgICBbMzU5OV0gICAgICAgID0gIkthbGlzdGFQU3BlbGxDYXN0IiwNCiAgICAgIFszMTg1XSAgICAgICAgPSAiSGV4dGVjaFN3ZWVwZXIiLA0KICAgICAgWzMwNzddICAgICAgICA9ICJJdGVtVGlhbWF0Q2xlYXZlIiwNCiAgICAgIFsyMDA5XSAgICAgICAgPSAiSXRlbU1pbmlSZWdlblBvdGlvbiIsDQogICAgICBbMjAxMF0gICAgICAgID0gIkl0ZW1NaW5pUmVnZW5Qb3Rpb24iLA0KICAgICAgWzMwMjNdICAgICAgICA9ICJJdGVtV3JhaXRoQ29sbGFyIiwNCiAgICAgIFszMjkwXSAgICAgICAgPSAiSXRlbVdyYWl0aENvbGxhciIsDQogICAgICBbMjA0M10gICAgICAgID0gIlZpc2lvbldhcmQiLA0KICAgICAgWzMzNDBdICAgICAgICA9ICJUcmlua2V0VG90ZW1MdmwxIiwNCiAgICAgIFszMDkwXSAgICAgICAgPSAiWmhvbnlhc0hvdXJnbGFzcyIsDQogICAgICBbMzE1NF0gICAgICAgID0gIndyaWdnbGVsYW50ZXJuIiwNCiAgICAgIFszMTQyXSAgICAgICAgPSAiWW91bXVzQmxhZGUiLA0KICAgICAgWzMxNTddICAgICAgICA9ICJaaG9ueWFzSG91cmdsYXNzIiwNCiAgICAgIFszNTEyXSAgICAgICAgPSAiSXRlbVZvaWRHYXRlIiwNCiAgICAgIFszMTMxXSAgICAgICAgPSAiSXRlbVNvVEQiLA0KICAgICAgWzMxMzddICAgICAgICA9ICJJdGVtRGVydmlzaEJsYWRlIiwNCiAgICAgIFszMzUyXSAgICAgICAgPSAiUmVsaWNTcG90dGVyIiwNCiAgICAgIFszMzUwXSAgICAgICAgPSAiVHJpbmtldFRvdGVtTHZsMiIsDQogICAgfQ0KICAgIA0KICAgIF9HLklURU1fMSAgICAgICA9IDA2DQogICAgX0cuSVRFTV8yICAgICAgID0gMDcNCiAgICBfRy5JVEVNXzMgICAgICAgPSAwOA0KICAgIF9HLklURU1fNCAgICAgICA9IDA5DQogICAgX0cuSVRFTV81ICAgICAgID0gMTANCiAgICBfRy5JVEVNXzYgICAgICAgPSAxMQ0KICAgIF9HLklURU1fNyAgICAgICA9IDEyDQogICAgDQogICAgX19fR2V0SW52ZW50b3J5U2xvdEl0ZW0gPSByYXdnZXQoX0csICJHZXRJbnZlbnRvcnlTbG90SXRlbSIpDQogICAgX0cuR2V0SW52ZW50b3J5U2xvdEl0ZW0gPSBHZXRTbG90SXRlbQ0KICAgIA0KICAgIA0KICBlbmQNCiAgX0cuTGV2ZWxTcGVsbCA9IGZ1bmN0aW9uKGlkKQ0KICBsb2NhbCBvZmZzZXRzID0geyANCiAgICBbX1FdID0gMHg2MSwNCiAgICBbX1ddID0gMHg4MSwNCiAgICBbX0VdID0gMHhBMSwNCiAgICBbX1JdID0gMHhDMSwNCiAgfQ0KICBsb2NhbCBwID0gQ0xvTFBhY2tldCgweDAwMzMpDQogIHAudlRhYmxlID0gMHhFNTU2RTgNCiAgcDpFbmNvZGVGKG15SGVyby5uZXR3b3JrSUQpDQogIHA6RW5jb2RlMSgweDczKQ0KICBmb3IgaSA9IDEsIDQgZG8gcDpFbmNvZGUxKDB4RjkpIGVuZA0KICBmb3IgaSA9IDEsIDQgZG8gcDpFbmNvZGUxKDB4MUUpIGVuZA0KICBwOkVuY29kZTEob2Zmc2V0c1tpZF0pDQogIGZvciBpID0gMSwgNCBkbyBwOkVuY29kZTEoMHg5OSkgZW5kDQogIGZvciBpID0gMSwgNCBkbyBwOkVuY29kZTEoMHgwMCkgZW5kDQogIFNlbmRQYWNrZXQocCkNCmVuZA0KICBmdW5jdGlvbiBDaXJjbGVJbnRlcnNlY3Rpb24odjEsIHYyLCBjLCByYWRpdXMpDQogICAgYXNzZXJ0KFZlY3RvclR5cGUodjEpIGFuZCBWZWN0b3JUeXBlKHYyKSBhbmQgVmVjdG9yVHlwZShjKSBhbmQgdHlwZShyYWRpdXMpID09ICJudW1iZXIiLCAiQ2lyY2xlSW50ZXJzZWN0aW9uOiB3cm9uZyBhcmd1bWVudCB0eXBlcyAoPFZlY3Rvcj4sIDxWZWN0b3I+LCA8VmVjdG9yPiwgaW50ZWdlciBleHBlY3RlZCkiKQ0KICAgIA0KICAgIGxvY2FsIHgxLCB5MSwgeDIsIHkyLCB4MywgeTMgPSB2MS54LCB2MS56IG9yIHYxLnksIHYyLngsIHYyLnogb3IgdjIueSwgYy54LCBjLnogb3IgYy55DQogICAgbG9jYWwgciA9IHJhZGl1cw0KICAgIGxvY2FsIHhwLCB5cCwgeG0sIHltID0gbmlsLCBuaWwsIG5pbCwgbmlsDQogICAgbG9jYWwgSXNPblNlZ21lbnQgPSBuaWwNCiAgICANCiAgICBpZiB4MSA9PSB4MiB0aGVuDQogICAgDQogICAgICBsb2NhbCBCID0gbWF0aC5zcXJ0KHJeMi0oeDEteDMpXjIpDQogICAgICANCiAgICAgIHhwLCB5cCwgeG0sIHltID0geDEsIHkzK0IsIHgxLCB5My1CDQogICAgZWxzZQ0KICAgIA0KICAgICAgbG9jYWwgbSA9ICh5Mi15MSkvKHgyLXgxKQ0KICAgICAgbG9jYWwgbiA9IHkxLW0qeDENCiAgICAgIGxvY2FsIEEgPSB4My1tKihuLXkzKQ0KICAgICAgbG9jYWwgQiA9IG1hdGguc3FydChBXjItKDErbV4yKSooeDNeMi1yXjIrKG4teTMpXjIpKQ0KICAgICAgDQogICAgICB4cCwgeG0gPSAoQStCKS8oMSttXjIpLCAoQS1CKS8oMSttXjIpDQogICAgICB5cCwgeW0gPSBtKnhwK24sIG0qeG0rbg0KICAgIGVuZA0KICAgIA0KICAgIGlmIHgxIDw9IHgyIHRoZW4NCiAgICAgIElzT25TZWdtZW50ID0geDEgPD0geHAgYW5kIHhwIDw9IHgyDQogICAgZWxzZQ0KICAgICAgSXNPblNlZ21lbnQgPSB4MiA8PSB4cCBhbmQgeHAgPD0geDEgICAgICAgIA0KICAgIGVuZA0KICAgICAgaWYgSXNPblNlZ21lbnQgdGhlbg0KICAgICAgcmV0dXJuIFZlY3Rvcih4cCwgMCwgeXApDQogICAgZWxzZQ0KICAgICAgcmV0dXJuIFZlY3Rvcih4bSwgMCwgeW0pDQogICAgZW5kDQogICAgDQogIGVuZA0KICBmdW5jdGlvbiBHZXRCZXN0TGluZUZhcm1Qb3NpdGlvbihyYW5nZSwgd2lkdGgsIG9iamVjdHMpDQogICAgICBsb2NhbCBCZXN0UG9zIA0KICAgICAgbG9jYWwgQmVzdEhpdCA9IDANCiAgICAgIGZvciBpLCBvYmplY3QgaW4gaXBhaXJzKG9iamVjdHMpIGRvDQogICAgICAgICAgbG9jYWwgRW5kUG9zID0gVmVjdG9yKG15SGVyby5wb3MpICsgcmFuZ2UgKiAoVmVjdG9yKG9iamVjdCkgLSBWZWN0b3IobXlIZXJvLnBvcykpOm5vcm1hbGl6ZWQoKQ0KICAgICAgICAgIGxvY2FsIGhpdCA9IENvdW50T2JqZWN0c09uTGluZVNlZ21lbnQobXlIZXJvLnBvcywgRW5kUG9zLCB3aWR0aCwgb2JqZWN0cykNCiAgICAgICAgICBpZiBoaXQgPiBCZXN0SGl0IHRoZW4NCiAgICAgICAgICAgICAgQmVzdEhpdCA9IGhpdA0KICAgICAgICAgICAgICBCZXN0UG9zID0gVmVjdG9yKG9iamVjdCkNCiAgICAgICAgICAgICAgaWYgQmVzdEhpdCA9PSAjb2JqZWN0cyB0aGVuDQogICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICANCiAgICAgIHJldHVybiBCZXN0UG9zLCBCZXN0SGl0DQogIGVuZA0KICANCiAgZnVuY3Rpb24gQ291bnRPYmplY3RzT25MaW5lU2VnbWVudChTdGFydFBvcywgRW5kUG9zLCB3aWR0aCwgb2JqZWN0cykNCiAgICAgIGxvY2FsIG4gPSAwDQogICAgICBmb3IgaSwgb2JqZWN0IGluIGlwYWlycyhvYmplY3RzKSBkbw0KICAgICAgICAgIGxvY2FsIHBvaW50U2VnbWVudCwgcG9pbnRMaW5lLCBpc09uU2VnbWVudCA9IFZlY3RvclBvaW50UHJvamVjdGlvbk9uTGluZVNlZ21lbnQoU3RhcnRQb3MsIEVuZFBvcywgb2JqZWN0KQ0KICAgICAgICAgIGlmIGlzT25TZWdtZW50IGFuZCBHZXREaXN0YW5jZVNxcihwb2ludFNlZ21lbnQsIG9iamVjdCkgPCB3aWR0aCAqIHdpZHRoIHRoZW4NCiAgICAgICAgICAgICAgbiA9IG4gKyAxDQogICAgICAgICAgZW5kDQogICAgICBlbmQNCiAgDQogICAgICByZXR1cm4gbg0KICBlbmQNCiAgZnVuY3Rpb24gQ291bnRPYmplY3RzTmVhclBvcyhwb3MsIHJhbmdlLCByYWRpdXMsIG9iamVjdHMpDQogICAgICBsb2NhbCBuID0gMA0KICAgICAgZm9yIGksIG9iamVjdCBpbiBpcGFpcnMob2JqZWN0cykgZG8NCiAgICAgICAgICBpZiBHZXREaXN0YW5jZVNxcihwb3MsIG9iamVjdCkgPD0gcmFkaXVzICogcmFkaXVzIHRoZW4NCiAgICAgICAgICAgICAgbiA9IG4gKyAxDQogICAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIHJldHVybiBuDQogIGVuZA0KICBmdW5jdGlvbiBHZXRCZXN0Q2lyY3VsYXJGYXJtUG9zaXRpb24ocmFuZ2UsIHJhZGl1cywgb2JqZWN0cykNCiAgICAgIGxvY2FsIEJlc3RQb3MgDQogICAgICBsb2NhbCBCZXN0SGl0ID0gMA0KICAgICAgZm9yIGksIG9iamVjdCBpbiBpcGFpcnMob2JqZWN0cykgZG8NCiAgICAgICAgICBsb2NhbCBoaXQgPSBDb3VudE9iamVjdHNOZWFyUG9zKG9iamVjdC5wb3Mgb3Igb2JqZWN0LCByYW5nZSwgcmFkaXVzLCBvYmplY3RzKQ0KICAgICAgICAgIGlmIGhpdCA+IEJlc3RIaXQgdGhlbg0KICAgICAgICAgICAgICBCZXN0SGl0ID0gaGl0DQogICAgICAgICAgICAgIEJlc3RQb3MgPSBWZWN0b3Iob2JqZWN0KQ0KICAgICAgICAgICAgICBpZiBCZXN0SGl0ID09ICNvYmplY3RzIHRoZW4NCiAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICByZXR1cm4gQmVzdFBvcywgQmVzdEhpdA0KICBlbmQNCiAgZnVuY3Rpb24gUmVxdWlyZVNpbXBsZUxpYigpDQogICAgICBpZiBGaWxlRXhpc3QoTElCX1BBVEguLiJTaW1wbGVMaWIubHVhIikgYW5kIG5vdCBGaWxlRXhpc3QoU0NSSVBUX1BBVEguLiJTaW1wbGVMaWIubHVhIikgdGhlbg0KICAgICAgICAgIHJlcXVpcmUgIlNpbXBsZUxpYiINCiAgICAgICAgICBpZiBfRy5TaW1wbGVMaWJWZXJzaW9uID09IG5pbCB0aGVuIA0KICAgICAgICAgICAgICBwcmludCgiWW91ciBTaW1wbGVMaWIgZmlsZSBpcyB3cm9uZy4iKQ0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBpZiBfRy5TaW1wbGVMaWJWZXJzaW9uIDwgMS4wMiB0aGVuDQogICAgICAgICAgICAgIHByaW50KCJZb3UgbmVlZCB0aGUgbGFzdGVzdCB2ZXJzaW9uIG9mIFNpbXBsZUxpYi4iKQ0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICBlbmQNCiAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgZWxzZWlmIEZpbGVFeGlzdChMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiKSBhbmQgRmlsZUV4aXN0KFNDUklQVF9QQVRILi4iU2ltcGxlTGliLmx1YSIpIHRoZW4NCiAgICAgICAgICBwcmludCgiU2ltcGxlTGliLmx1YSBzaG91bGQgbm90IGJlIGluIEN1c3RvbSBTY3JpcHQgKE9ubHkgb24gQ29tbW9uIGZvbGRlciksIGRlbGV0ZSBpdCBmcm9tIHRoZXJlLi4uIikNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIGVsc2UNCiAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBCYXNlNjRFbmNvZGUyKGRhdGEpDQogICAgICAgICAgICAgIGxvY2FsIGI9J0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nDQogICAgICAgICAgICAgIHJldHVybiAoKGRhdGE6Z3N1YignLicsIGZ1bmN0aW9uKHgpDQogICAgICAgICAgICAgICAgICBsb2NhbCByLGI9JycseDpieXRlKCkNCiAgICAgICAgICAgICAgICAgIGZvciBpPTgsMSwtMSBkbyByPXIuLihiJTJeaS1iJTJeKGktMSk+MCBhbmQgJzEnIG9yICcwJykgZW5kDQogICAgICAgICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgICAgICAgZW5kKS4uJzAwMDAnKTpnc3ViKCclZCVkJWQ/JWQ/JWQ/JWQ/JywgZnVuY3Rpb24oeCkNCiAgICAgICAgICAgICAgICAgIGlmICgjeCA8IDYpIHRoZW4gcmV0dXJuICcnIGVuZA0KICAgICAgICAgICAgICAgICAgbG9jYWwgYz0wDQogICAgICAgICAgICAgICAgICBmb3IgaT0xLDYgZG8gYz1jKyh4OnN1YihpLGkpPT0nMScgYW5kIDJeKDYtaSkgb3IgMCkgZW5kDQogICAgICAgICAgICAgICAgICByZXR1cm4gYjpzdWIoYysxLGMrMSkNCiAgICAgICAgICAgICAgZW5kKS4uKHsgJycsICc9PScsICc9JyB9KVsjZGF0YSUzKzFdKQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGxvY2FsIFNhdmVQYXRoID0gTElCX1BBVEguLiJTaW1wbGVMaWIubHVhIg0KICAgICAgICAgIGxvY2FsIFNjcmlwdFBhdGggPSAnL0JvTC9UQ1BVcGRhdGVyL0dldFNjcmlwdDUucGhwP3NjcmlwdD0nLi5CYXNlNjRFbmNvZGUyKCJyYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2phY2hpY2FvL0JvTC9tYXN0ZXIvU2ltcGxlTGliLmx1YSIpLi4nJnJhbmQ9Jy4ubWF0aC5yYW5kb20oOTk5OTk5OTkpDQogICAgICAgICAgbG9jYWwgR290U2NyaXB0ID0gZmFsc2UNCiAgICAgICAgICBsb2NhbCBMdWFTb2NrZXQgPSBuaWwNCiAgICAgICAgICBsb2NhbCBTb2NrZXQgPSBuaWwNCiAgICAgICAgICBsb2NhbCBTaXplID0gbmlsDQogICAgICAgICAgbG9jYWwgUmVjdlN0YXJ0ZWQgPSBmYWxzZQ0KICAgICAgICAgIGxvY2FsIFJlY2VpdmUsIFN0YXR1cywgU25pcHBlZCA9IG5pbCwgbmlsLCBuaWwNCiAgICAgICAgICBsb2NhbCBTdGFydGVkID0gZmFsc2UNCiAgICAgICAgICBsb2NhbCBGaWxlID0gIiINCiAgICAgICAgICBsb2NhbCBOZXdGaWxlID0gIiINCiAgICAgICAgICBpZiBub3QgTHVhU29ja2V0IHRoZW4NCiAgICAgICAgICAgICAgTHVhU29ja2V0ID0gcmVxdWlyZSgic29ja2V0IikNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIFNvY2tldDpjbG9zZSgpDQogICAgICAgICAgICAgIFNvY2tldCA9IG5pbA0KICAgICAgICAgICAgICBTaXplID0gbmlsDQogICAgICAgICAgICAgIFJlY3ZTdGFydGVkID0gZmFsc2UNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBTb2NrZXQgPSBMdWFTb2NrZXQudGNwKCkNCiAgICAgICAgICBpZiBub3QgU29ja2V0IHRoZW4NCiAgICAgICAgICAgICAgcHJpbnQoJ1NvY2tldCBFcnJvcicpDQogICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICBTb2NrZXQ6c2V0dGltZW91dCgwLCAnYicpDQogICAgICAgICAgICAgIFNvY2tldDpzZXR0aW1lb3V0KDk5OTk5OTk5LCAndCcpDQogICAgICAgICAgICAgIFNvY2tldDpjb25uZWN0KCdzeC1ib2wuZXUnLCA4MCkNCiAgICAgICAgICAgICAgU3RhcnRlZCA9IGZhbHNlDQogICAgICAgICAgICAgIEZpbGUgPSAiIg0KICAgICAgICAgIGVuZA0KICAgICAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpDQogICAgICAgICAgICAgIGlmIEdvdFNjcmlwdCB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgICAgUmVjZWl2ZSwgU3RhdHVzLCBTbmlwcGVkID0gU29ja2V0OnJlY2VpdmUoMTAyNCkNCiAgICAgICAgICAgICAgaWYgU3RhdHVzID09ICd0aW1lb3V0JyBhbmQgbm90IFN0YXJ0ZWQgdGhlbg0KICAgICAgICAgICAgICAgICAgU3RhcnRlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgIHByaW50KCJEb3dubG9hZGluZyBhIGxpYnJhcnkgY2FsbGVkIFNpbXBsZUxpYi4gUGxlYXNlIHdhaXQuLi4iKQ0KICAgICAgICAgICAgICAgICAgU29ja2V0OnNlbmQoIkdFVCAiLi5TY3JpcHRQYXRoLi4iIEhUVFAvMS4xXHJcbkhvc3Q6IHN4LWJvbC5ldVxyXG5cclxuIikNCiAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGlmIChSZWNlaXZlIG9yICgjU25pcHBlZCA+IDApKSBhbmQgbm90IFJlY3ZTdGFydGVkIHRoZW4NCiAgICAgICAgICAgICAgICAgIFJlY3ZTdGFydGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICBlbmQNCiAgDQogICAgICAgICAgICAgIEZpbGUgPSBGaWxlIC4uIChSZWNlaXZlIG9yIFNuaXBwZWQpDQogICAgICAgICAgICAgIGlmIEZpbGU6ZmluZCgnPC9zaScuLid6ZT4nKSB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBub3QgU2l6ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgU2l6ZSA9IHRvbnVtYmVyKEZpbGU6c3ViKEZpbGU6ZmluZCgnPHNpJy4uJ3plPicpICsgNiwgRmlsZTpmaW5kKCc8L3NpJy4uJ3plPicpIC0gMSkpDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGlmIEZpbGU6ZmluZCgnPHNjcicuLidpcHQ+JykgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIF8sIFNjcmlwdEZpbmQgPSBGaWxlOmZpbmQoJzxzY3InLi4naXB0PicpDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgU2NyaXB0RW5kID0gRmlsZTpmaW5kKCc8L3NjcicuLidpcHQ+JykNCiAgICAgICAgICAgICAgICAgICAgICBpZiBTY3JpcHRFbmQgdGhlbiBTY3JpcHRFbmQgPSBTY3JpcHRFbmQgLSAxIGVuZA0KICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIERvd25sb2FkZWRTaXplID0gRmlsZTpzdWIoU2NyaXB0RmluZCArIDEsU2NyaXB0RW5kIG9yIC0xKTpsZW4oKQ0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBpZiBGaWxlOmZpbmQoJzwvc2NyJy4uJ2lwdD4nKSB0aGVuDQogICAgICAgICAgICAgICAgICBsb2NhbCBhLGIgPSBGaWxlOmZpbmQoJ1xyXG5cclxuJykNCiAgICAgICAgICAgICAgICAgIEZpbGUgPSBGaWxlOnN1YihhLC0xKQ0KICAgICAgICAgICAgICAgICAgTmV3RmlsZSA9ICcnDQogICAgICAgICAgICAgICAgICBmb3IgbGluZSxjb250ZW50IGluIGlwYWlycyhGaWxlOnNwbGl0KCdcbicpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgIGlmIGNvbnRlbnQ6bGVuKCkgPiA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3RmlsZSA9IE5ld0ZpbGUgLi4gY29udGVudA0KICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBsb2NhbCBIZWFkZXJFbmQsIENvbnRlbnRTdGFydCA9IE5ld0ZpbGU6ZmluZCgnPHNjJy4uJ3JpcHQ+JykNCiAgICAgICAgICAgICAgICAgIGxvY2FsIENvbnRlbnRFbmQsIF8gPSBOZXdGaWxlOmZpbmQoJzwvc2NyJy4uJ2lwdD4nKQ0KICAgICAgICAgICAgICAgICAgaWYgbm90IENvbnRlbnRTdGFydCBvciBub3QgQ29udGVudEVuZCB0aGVuDQogICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3ZiA9IE5ld0ZpbGU6c3ViKENvbnRlbnRTdGFydCArIDEsQ29udGVudEVuZCAtIDEpDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3ZiA9IG5ld2Y6Z3N1YignXHInLCcnKQ0KICAgICAgICAgICAgICAgICAgICAgIGlmIG5ld2Y6bGVuKCkgfj0gU2l6ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG5ld2YgPSBCYXNlNjREZWNvZGUobmV3ZikNCiAgICAgICAgICAgICAgICAgICAgICBpZiB0eXBlKGxvYWQobmV3ZikpIH49ICdmdW5jdGlvbicgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZiA9IGlvLm9wZW4oU2F2ZVBhdGgsICJ3K2IiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBmOndyaXRlKG5ld2YpDQogICAgICAgICAgICAgICAgICAgICAgICAgIGY6Y2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiUmVxdWlyZWQgbGlicmFyeSBkb3dubG9hZGVkLiBQbGVhc2UgcmVsb2FkIHdpdGggMnggRjkuIikNCiAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgR290U2NyaXB0ID0gdHJ1ZQ0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQpDQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICBlbmQNCiAgZW5kDQogIA0KICAtLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tb3JiIHdhbGsgc2V0dGluZ3Mgc3RhcnQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCiAgDQogIGZ1bmN0aW9uIFZpa3RvcjpmaW5kb3Jid2Fsa2VyKCkNCiAgIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICBlbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgYW5kIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAgICAgIFN4T3JiPXRydWUgYW5kIA0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDQpDQogICAgICByZXF1aXJlKCJTeE9yYldhbGsiKQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBBa2FsaTpmaW5kb3Jid2Fsa2VyKCkNCmlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgIkN1cnJlbnQgT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICBTaWRhcyBBdXRvIENhcnJ5IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLCAiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2lvbjogICIuLlZlcnNpb24uLiAiICAgICAgICAgIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgIiAgICAgICAgICAgIFNjcmlwdCB3YXMgbWFkZSBieSAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsICIgICAgICAgTGVhdWdlIE9mIExlZ2VuZHMgVmVyc2lvbjogICIuLkxWZXJzaW9uLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgIGVsc2VpZiBub3QgX0cuUmVib3JuX0xvYWRlZCBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KICAgICAgU3hPcmI9dHJ1ZSBhbmQgDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgNCkNCiAgICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsICJDdXJyZW50IE9yYndhbGtlcjogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN4T3JiV2FsayIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIiwgIiAgICAgICAgICAgICAgICAgU2NyaXB0IFZlcnNpb246ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsICIgICAgICAgICAgICBTY3JpcHQgd2FzIG1hZGUgYnkgICIuLkF1dGhvci4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCAiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlN4T3JiV2FsayIsIm9yYldhbGsiKSBlbmQsNSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpmaW5kb3Jid2Fsa2VyKCkNCiAgIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICBlbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgYW5kIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAgICAgIFN4T3JiPXRydWUgYW5kIA0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDQpDQogICAgICByZXF1aXJlKCJTeE9yYldhbGsiKQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpmaW5kb3Jid2Fsa2VyKCkNCiAgIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgIkN1cnJlbnQgT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICBTaWRhcyBBdXRvIENhcnJ5IiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLCAiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2lvbjogICIuLlZlcnNpb24uLiAiICAgICAgICAgIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgIiAgICAgICAgICAgIFNjcmlwdCB3YXMgbWFkZSBieSAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsICIgICAgICAgTGVhdWdlIE9mIExlZ2VuZHMgVmVyc2lvbjogICIuLkxWZXJzaW9uLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgIGVsc2VpZiBub3QgX0cuUmVib3JuX0xvYWRlZCBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KICAgICAgU3hPcmI9dHJ1ZSBhbmQgDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgNCkNCiAgICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsICJDdXJyZW50IE9yYndhbGtlcjogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN4T3JiV2FsayIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIiwgIiAgICAgICAgICAgICAgICAgU2NyaXB0IFZlcnNpb246ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsICIgICAgICAgICAgICBTY3JpcHQgd2FzIG1hZGUgYnkgICIuLkF1dGhvci4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCAiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlN4T3JiV2FsayIsIm9yYldhbGsiKSBlbmQsNSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBlbmQNCiAgZW5kDQogIC0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1vcmIgd2FsayBzZXR0aW5ncyBzdGFydC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KICAgZnVuY3Rpb24gRHJhd2RtZ2xpYigpDQogICAgaWYoRmlsZUV4aXN0KExJQl9QQVRILi4iRHJhd0RhbWFnZUxpYi5sdWEiKSl0aGVuDQogICAgICBjaGVjaz0xDQogICAgZWxzZQ0KICAgICAgY2hlY2s9MA0KICAgIGVuZCANCiAgICAgaWYgX1JlcXVpcmVkKCk6QWRkKHtOYW1lID0gIkRyYXdEYW1hZ2VMaWIiLCBVcmwgPSAicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9pbm5lcm91dC9Cb3RPZkxlZ2VuZHMvbWFzdGVyL0RyYXdEYW1hZ2VMaWIubHVhIn0pOkNoZWNrKCk6SXNEb3dubG9hZGluZygpIHRoZW4gcmV0dXJuIGVuZCANCiAgZW5kDQogIGZ1bmN0aW9uIENpcmNsZUludGVyc2VjdGlvbih2MSwgdjIsIGMsIHJhZGl1cykNCiAgICBhc3NlcnQoVmVjdG9yVHlwZSh2MSkgYW5kIFZlY3RvclR5cGUodjIpIGFuZCBWZWN0b3JUeXBlKGMpIGFuZCB0eXBlKHJhZGl1cykgPT0gIm51bWJlciIsICJDaXJjbGVJbnRlcnNlY3Rpb246IHdyb25nIGFyZ3VtZW50IHR5cGVzICg8VmVjdG9yPiwgPFZlY3Rvcj4sIDxWZWN0b3I+LCBpbnRlZ2VyIGV4cGVjdGVkKSIpDQogICAgDQogICAgbG9jYWwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MyA9IHYxLngsIHYxLnogb3IgdjEueSwgdjIueCwgdjIueiBvciB2Mi55LCBjLngsIGMueiBvciBjLnkNCiAgICBsb2NhbCByID0gcmFkaXVzDQogICAgbG9jYWwgeHAsIHlwLCB4bSwgeW0gPSBuaWwsIG5pbCwgbmlsLCBuaWwNCiAgICBsb2NhbCBJc09uU2VnbWVudCA9IG5pbA0KICAgIA0KICAgIGlmIHgxID09IHgyIHRoZW4NCiAgICANCiAgICAgIGxvY2FsIEIgPSBtYXRoLnNxcnQocl4yLSh4MS14MyleMikNCiAgICAgIA0KICAgICAgeHAsIHlwLCB4bSwgeW0gPSB4MSwgeTMrQiwgeDEsIHkzLUINCiAgICBlbHNlDQogICAgDQogICAgICBsb2NhbCBtID0gKHkyLXkxKS8oeDIteDEpDQogICAgICBsb2NhbCBuID0geTEtbSp4MQ0KICAgICAgbG9jYWwgQSA9IHgzLW0qKG4teTMpDQogICAgICBsb2NhbCBCID0gbWF0aC5zcXJ0KEFeMi0oMSttXjIpKih4M14yLXJeMisobi15MyleMikpDQogICAgICANCiAgICAgIHhwLCB4bSA9IChBK0IpLygxK21eMiksIChBLUIpLygxK21eMikNCiAgICAgIHlwLCB5bSA9IG0qeHArbiwgbSp4bStuDQogICAgZW5kDQogICAgDQogICAgaWYgeDEgPD0geDIgdGhlbg0KICAgICAgSXNPblNlZ21lbnQgPSB4MSA8PSB4cCBhbmQgeHAgPD0geDINCiAgICBlbHNlDQogICAgICBJc09uU2VnbWVudCA9IHgyIDw9IHhwIGFuZCB4cCA8PSB4MSAgICAgICAgDQogICAgZW5kDQogICAgICBpZiBJc09uU2VnbWVudCB0aGVuDQogICAgICByZXR1cm4gVmVjdG9yKHhwLCAwLCB5cCkNCiAgICBlbHNlDQogICAgICByZXR1cm4gVmVjdG9yKHhtLCAwLCB5bSkNCiAgICBlbmQNCiAgICANCiAgZW5kDQogIA0KICAtLWlza2V5ZG93bmZpeCBzdGFydA0KICBsb2NhbCBvcmlnaW5hbEtEID0gX0cuSXNLZXlEb3duOw0KICBfRy5Jc0tleURvd24gPSBmdW5jdGlvbih0aGVLZXkpDQogICAgaWYgKHR5cGUodGhlS2V5KSB+PSAnbnVtYmVyJykgdGhlbg0KICAgICAgbG9jYWwgdGhlTnVtYmVyID0gdG9udW1iZXIodGhlS2V5KTsNCiAgICAgIGlmICh0aGVOdW1iZXIgfj0gbmlsKSB0aGVuDQogICAgICAgIHJldHVybiBvcmlnaW5hbEtEKHRoZU51bWJlcik7DQogICAgICBlbHNlDQogICAgICAgIHJldHVybiBvcmlnaW5hbEtEKEdldEtleSh0aGVLZXkpKTsNCiAgICAgIGVuZDsNCiAgICBlbHNlDQogICAgICByZXR1cm4gb3JpZ2luYWxLRCh0aGVLZXkpOw0KICAgIGVuZDsNCiAgZW5kOw0KICAtLWlza2V5ZG93bmZpeCBlbmQNCiAgLS0gQWxsIGNsYXNzaWMgbmVjZXNzZXJpZXMgZW5kDQogIC0tc2tpbmhhY2sNCiAgZnVuY3Rpb24gU2VuZFNraW5QYWNrZXQobU9iamVjdCwgc2tpblBCLCBuZXR3b3JrSUQpDQogIGlmIChzdHJpbmcuZmluZChHZXRHYW1lVmVyc2lvbigpLCAnUmVsZWFzZXMvNS4yMicpIH49IG5pbCkgdGhlbg0KICAgIGxvY2FsIG1QID0gQ0xvTFBhY2tldCgweDEwRSk7DQoNCiAgICBtUC52VGFibGUgPSAweEZEMTdEMDsNCg0KICAgIG1QOkVuY29kZUYobmV0d29ya0lEKTsNCiAgICANCiAgICBtUDpFbmNvZGUxKDB4MDApOw0KICAgIA0KICAgIGlmIChza2luUEIgPT0gbmlsKSB0aGVuDQogICAgICBtUDpFbmNvZGU0KDB4RTRFNEU0RTQpOw0KICAgIGVsc2UNCiAgICAgIG1QOkVuY29kZTEoc2tpblBCKTsNCiAgICAgIGZvciBJID0gMSwgMyBkbw0KICAgICAgICBtUDpFbmNvZGUxKHNraW5IKTsNCiAgICAgIGVuZDsNCiAgICBlbmQ7DQoNCiAgICBmb3IgSSA9IDEsIHN0cmluZy5sZW4obU9iamVjdCkgZG8NCiAgICAgIG1QOkVuY29kZTEoc3RyaW5nLmJ5dGUoc3RyaW5nLnN1YihtT2JqZWN0LCBJLCBJKSkpOw0KICAgIGVuZDsNCg0KICAgIGZvciBJID0gMSwgKDE2IC0gc3RyaW5nLmxlbihtT2JqZWN0KSkgZG8NCiAgICAgIG1QOkVuY29kZTEoMHgwMCk7DQogICAgZW5kOw0KDQogICAgbVA6RW5jb2RlNCgweDAwMDAwMDBFKTsNCiAgICBtUDpFbmNvZGU0KDB4MDAwMDAwMEYpOw0KICAgIG1QOkVuY29kZTQoMHgwMDAwMDAwMCk7DQogICAgbVA6RW5jb2RlNCgweDAwMDAwMDAwKTsNCiAgICBtUDpFbmNvZGUyKDB4MDAwMCk7DQogICAgDQogICAgbVA6SGlkZSgpOw0KICAgIFJlY3ZQYWNrZXQobVApOw0KICBlbHNlaWYgKHN0cmluZy5maW5kKEdldEdhbWVWZXJzaW9uKCksICdSZWxlYXNlcy81LjIxJykgfj0gbmlsKSB0aGVuDQogICAgICBsb2NhbCBtUCA9IENMb0xQYWNrZXQoMHgxMkEpOw0KDQogICAgICBtUC52VGFibGUgPSAweEVBMjk4QzsNCg0KICAgICAgbVA6RW5jb2RlRihuZXR3b3JrSUQpOw0KICAgICAgDQogICAgICBtUDpFbmNvZGU0KDB4MDAwMDAwMDApOw0KICAgICAgbVA6RW5jb2RlMigweDAwMDApOw0KDQogICAgICBmb3IgSSA9IDEsIHN0cmluZy5sZW4obU9iamVjdCkgZG8NCiAgICAgICAgbVA6RW5jb2RlMShzdHJpbmcuYnl0ZShzdHJpbmcuc3ViKG1PYmplY3QsIEksIEkpKSk7DQogICAgICBlbmQ7DQoNCiAgICAgIGZvciBJID0gMSwgKDE2IC0gc3RyaW5nLmxlbihtT2JqZWN0KSkgZG8NCiAgICAgICAgbVA6RW5jb2RlMSgweDAwKTsNCiAgICAgIGVuZDsNCg0KICAgICAgbVA6RW5jb2RlNCgweDAwMDAwMDBFKTsNCiAgICAgIG1QOkVuY29kZTQoMHgwMDAwMDAwRik7DQogICAgICBpZiAoc2tpblBCID09IG5pbCkgdGhlbg0KICAgICAgICBtUDpFbmNvZGU0KDB4NEU0RTRFNEUpOw0KICAgICAgZWxzZQ0KICAgICAgICBtUDpFbmNvZGUxKHNraW5QQik7DQogICAgICAgIGZvciBJID0gMSwgMyBkbw0KICAgICAgICAgIG1QOkVuY29kZTEoc2tpbkgpOw0KICAgICAgICBlbmQ7DQogICAgICBlbmQ7DQogICAgICBtUDpFbmNvZGU0KDB4MDAwMDAwMDApOw0KICAgICAgbVA6RW5jb2RlMSgweDAwKTsNCg0KICAgICAgbVA6SGlkZSgpOw0KICAgICAgUmVjdlBhY2tldChtUCk7DQogIGVuZDsNCmVuZDsNCiAgaWYgKHN0cmluZy5maW5kKEdldEdhbWVWZXJzaW9uKCksICdSZWxlYXNlcy81LjIyJykgfj0gbmlsKSB0aGVuDQogIHNraW5zUEIgPSB7DQogICAgWzFdID0gMHhDQSwNCiAgICBbMl0gPSAweDIwLA0KICAgIFszXSA9IDB4M0MsDQogICAgWzRdID0gMHg3NSwNCiAgICBbNV0gPSAweDdCLA0KICAgIFs2XSA9IDB4QjQsDQogICAgWzddID0gMHhDOCwNCiAgICBbOF0gPSAweENFLA0KICAgIFs5XSA9IDB4RDQsDQogICAgWzEwXSA9IDB4RDcsDQogICAgWzExXSA9IDB4REQsDQogICAgWzEyXSA9IDB4RjksDQogIH07DQogIHNraW5PYmplY3RQb3MgPSAxMTsNCiAgc2tpbkhlYWRlciA9IDB4MTBFOw0KICBkaXNwZWxsSGVhZGVyID0gMHg4MzsNCiAgc2tpbkggPSAweENBOw0KICBza2luSFBvcyA9IDc7DQplbHNlaWYgKHN0cmluZy5maW5kKEdldEdhbWVWZXJzaW9uKCksICdSZWxlYXNlcy81LjIxJykgfj0gbmlsKSB0aGVuDQogICAgc2tpbnNQQiA9IHsNCiAgICAgIFsxXSA9IDB4NTIsDQogICAgICBbMl0gPSAweDNFLA0KICAgICAgWzNdID0gMHg0MiwNCiAgICAgIFs0XSA9IDB4NUUsDQogICAgICBbNV0gPSAweDYyLA0KICAgICAgWzZdID0gMHhBRSwNCiAgICAgIFs3XSA9IDB4QjIsDQogICAgICBbOF0gPSAweEJFLA0KICAgICAgWzldID0gMHhDMiwNCiAgICAgIFsxMF0gPSAweENFLA0KICAgICAgWzExXSA9IDB4RDIsDQogICAgICBbMTJdID0gMHhERSwNCiAgICB9Ow0KICAgIHNraW5PYmplY3RQb3MgPSAxMjsNCiAgICBza2luSGVhZGVyID0gMHgxMkE7DQogICAgZGlzcGVsbEhlYWRlciA9IDB4Nzk7DQogICAgc2tpbkggPSAweDUyOw0KICAgIHNraW5IUG9zID0gMzY7DQplbmQ7=="), nil, "bt", _ENV))()

-- ---------------------------easy copy line-----------------------------