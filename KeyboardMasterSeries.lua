
--[[
One Click to Challenger
Keyboard Master Series by Ensuluyn
Current Leauge Of Legends Version :5.24
Current Script Version :3.1
Last Update: 26.12.2015
--Credits to Nebelwolfi for mentoring <3
]]

assert(load(Base64Decode("DQogIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFNjcmlwdCBTdGFydCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICANCiAgbG9jYWwgVmVyc2lvbiA9ICIzLjAxIiAgDQogIGxvY2FsIExWZXJzaW9uID0gIjUuMjQiDQogIGxvY2FsIFNjcmlwdG5hbWUgPSAiS2V5Ym9hcmQgTWFzdGVyIFNlcmllcyINCiAgbG9jYWwgQXV0aG9yID0gIkVuc3VsdXluIg0KICBsb2NhbCBsaXN0ID0gIkxlYmxhbmMgLCBMaXNzYW5kcmEgLCBWaWt0b3IsIEFrYWxpLCBEaWFuYSINCiAgbG9jYWwgbGluayA9ICJHbyB0byBodHRwOi8vZm9ydW0uYm90b2ZsZWdlbmRzLmNvbS9mb3J1bS8yMC1jaGFtcGlvbi1zY3JpcHRzLyB0aGVuIHlvdSBjYW4gc2VlIG15IHRvcGljICIuLlNjcmlwdG5hbWUuLiIgb24gdGhlIGZpcnN0IG9yIHNlY29uZCBwYWdlLiINCiAgbG9jYWwgZGF0ZSA9ICIyNi4xMi4yMDE1Ig0KICBnbG9iYWxfdGlja3MgPSAwDQogIGxvY2FsIGxhc3RUaW1lVGlja0NhbGxlZCA9IDANCiBsb2NhbCBza2lubG9hZCA9IGZhbHNlDQogICBpZiBza2lubG9hZCB0aGVuDQogIGxvY2FsIHNraW5zUEIgPSB7fTsNCiAgbG9jYWwgc2tpbk9iamVjdFBvcyA9IG5pbDsNCiAgbG9jYWwgc2tpbkhlYWRlciA9IG5pbDsNCiAgbG9jYWwgZGlzcGVsbEhlYWRlciA9IG5pbDsNCiAgbG9jYWwgc2tpbkggPSBuaWw7DQogIGxvY2FsIHNraW5IUG9zID0gbmlsOw0KICBlbmQNCiAgbG9jYWwgbGFuZyA9ICJlbmciDQpsb2NhbCBhdmFfbGFuZ3VhZ2VzID0geyJlbmciLCAidHIiLCJnciJ9DQoNCg0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gRW5nbGlzaCBUcmFuc2xhdGlvbiBkZXRhaWxzICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQpsb2NhbCBsb2NfZW5nID0gew0KLS1HZW5lcmFsIE1lbnUoQ29tYm8pIC8vIDggLy8gMQ0KIkNvbWJvIFNldHRpbmdzIiwgIlVzZSBRIGluIENvbWJvIiwgIlVzZSBXIGluIENvbWJvIiwgIlVzZSBFIGluIENvbWJvIiwgIlVzZSBSIGluIENvbWJvIiAsDQoiVXNlIElnbml0ZSBpZiB0YXJnZXQga2lsbGFibGUiLCJDb21ibyBsb2dpYyIsIk1hbmEgTWFuYWdlciAlIiwNCi0tR2VuZXJhbCBNZW51KEhhcmFzcykgLy8gNSAvLyA5DQoiSGFyYXNzIFNldHRpbmdzIiwiSGFyYXNzIFdpdGggUSIsIkhhcmFzcyBXaXRoIFciLCJIYXJhc3MgV2l0aCBFIiwiSGFyYXNzIFdpdGggUiIsDQotLUdlbmVyYWwgTWVudShDbGVhcikgLy8gMTYgLy8gMTQNCiJGYXJtIFNldHRpbmdzIiwiTGFuZUNsZWFyIFNldHRpbmdzIiwiVXNlIFEgb24gTGFuZWNsZWFyIiwiVXNlIFcgb24gTGFuZWNsZWFyIiwiVXNlIEUgb24gTGFuZWNsZWFyIiwiVXNlIFIgb24gTGFuZWNsZWFyIiwNCiJKdW5nbGVDbGVhciBTZXR0aW5ncyIsIlVzZSBRIG9uIGp1bmdsZWNsZWFyIiwiVXNlIFcgb24ganVuZ2xlY2xlYXIiLCJVc2UgRSBvbiBqdW5nbGVjbGVhciIsIlVzZSBSIG9uIGp1bmdsZWNsZWFyIiwNCiJMYXN0aGl0IFNldHRpbmdzIiwiVXNlIFEgb24gTGFzdGhpdCIsIlVzZSBXIG9uIExhc3RoaXQiLCJVc2UgRSBvbiBMYXN0aGl0IiwiVXNlIFIgb24gTGFzdGhpdCIsDQotLUdlbmVyYWwgTWVudShFc2NhcGUpIC8vIDUgLy8gMzANCiJFc2NhcGUgU2V0dGluZ3MiLCJVc2UgUSBXaGlsZSBFc2NhcGUiLCJVc2UgVyBXaGlsZSBFc2NhcGUiLCJVc2UgRSBXaGlsZSBFc2NhcGUiLCJVc2UgUiBXaGlsZSBFc2NhcGUiLA0KLS1HZW5lcmFsIE1lbnUoS2lsbHN0ZWFsKSAvLyA3IC8vIDM1DQoiS2lsbFN0ZWFsIFNldHRpbmdzIiwiS2lsbHN0ZWFsIE9uL09mZiIsIlN0ZWFsIFdpdGggUSIsIlN0ZWFsIFdpdGggVyIsIlN0ZWFsIFdpdGggRSIsIlN0ZWFsIFdpdGggUiIsIlN0ZWFsIFdpdGggSWduaXRlIiwNCi0tR2VuZXJhbCBNZW51KMSwdGVtIFNldHRpbmdzKSAvLyA1IC8vIDQyDQoiSXRlbSBTZXR0aW5ncyIsIkF1dG8gWmhvbnlhIiwgIlpob255YSBpZiBIZWFsdGggdW5kZXIgLT4gJSIsICJVc2UgSGV4dGVjaCBHdW5ibGFkZSIsICJVc2UgQmlsZ2V3YXRlciBDdXRsYXNzIiwNCi0tR2VuZXJhbCBNZW51KFbEsXAgU2V0dGluZ3MpIC8vIDE5IC8vIDQ3DQoiVklQIFNldHRpbmdzIiwiVXNlIFBhY2tldCBDYXN0aW5nIiwiVG8gdXNlIHZpcCBzZXR0aW5ncywgUGFja2V0IENhc3Rpbmcgc2hvdWxkIGJlIG9wZW4uIiwgIkF1dG8gTGV2ZWwgU2V0dGluZ3MiLCJVc2UgQXV0byBMZXZlbCIsDQoiU2VsZWN0IFNraWxsIE9yZGVyIiwiU2tpbiBIYWNrIFNldHRpbmdzIiwiVXNlIFNraW4gSGFjayIsIk1ha2Ugc3VyZSB0aGF0IHVzaW5nIHBhY2tldCBjYXN0aW5nIGlzIE9OLiIsDQoiVG8gdXNlIHZpcCBzZXR0aW5ncywgWW91IG5lZWQgdG8gYmUgYSBWSVAgdXNlciBvbiBCT0wgY29tbXVuaXR5LiIsIlNlbGVjdCBTa2luIiwNCiJGb2N1cyBRPlc+RSIsICJGb2N1cyBRPkU+VyIsIkZvY3VzIFc+UT5FIiwiRm9jdXMgVz5FPlEiLCJGb2N1cyBFPlc+USIsICJGb2N1cyBFPlE+VyIsICJTbWFydCIgLA0KLS1HZW5lcmFsIE1lbnUoRHJhdyBTZXR0aW5ncykgLy8gMTIgLy8gNjUNCiJEcmF3IFNldHRpbmdzIiwiU2tpbGwgRHJhd2luZyBTZXR0aW5ncyIsIlEgU2tpbGwgRHJhd2luZ3MiLCJXIFNraWxsIERyYXdpbmdzIiwiRSBTa2lsbCBEcmF3aW5ncyIsIlIgU2tpbGwgRHJhd2luZ3MiLCJBdXRvIEF0dGFjayBSYW5nZSIsDQoiRHJhdyBDb21ibyBNb2RlIiwiRHJhdyBQZXJtYWJveCIsIkRyYXcgUGVybWFib3ggKCBOZWVkcyAyeCBGOSApIiwiRHJhdyBjaXJjbGUgZm9yIHRhcmdldCBzZWxlY3RlZCIsIlRhcmdldCBjYWxjdWxhdGlvbiIsDQotLUdlbmVyYWwgTWVudShUYXJnZXQgU2VsZWN0b3JzKSAvLyAyIC8vIDc3DQoiVGFyZ2V0c2VsZWN0b3JzIiwiTGVmdCBDbGljayBGb3IgVGFyZ2V0IFNlbGVjdGlvbiIsDQotLUdlbmVyYWwgTWVudShLZXkgU2V0dGluZ3MpIC8vIDEzIC8vIDc5DQoiS2V5cyBTZXR0aW5ncyIsICI8LS0tLS0tLS0tLS0tLS0tLS0tQ29tYm8gS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkNvbWJvIEtleSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1IYXJhc3MgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tPiIsIA0KIlNtYXJ0IEhhcmFzcyBLZXkiLCI8LS0tLS0tLS0tLS0tLS0tLS0tQ2xlYXIgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiTGFuZUNsZWFyIEtleSIsIkp1bmdsZUNsZWFyIEtleSIsIA0KIjwtLS0tLS0tLS0tLS0tLS0tLS1PdGhlciBLZXkgU2V0dGluZ3MtLS0tLS0tLS0tLS0tLS0tLS0tLT4iLCJFc2NhcGUgS2V5IiwgIk1ha2UgU3VyZSBUaGF0IFlvdXIgT3Jid2Fsa2VyIEtleXMgYXJlIFNhbWUgQXMgSGVyZSIsIk9yd1dhbGtlcktleSBTZXR0aW5ncyIsDQoiQXV0byBIYXJhc3MgUSIsDQotLUdlbmVyYWwgTWVudShNaXNjIFNldHRpbmdzKSAvLyA3IC8vIDkyDQoiTWlzYyBTZXR0aW5ncyIsICJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIEF1dG8tSW50ZXJydXB0IiwiSW50ZXJydXB0IHdpdGggUSBTa2lsbCIsIkludGVycnVwdCB3aXRoIFcgU2tpbGwiLCJJbnRlcnJ1cHQgd2l0aCBFIFNraWxsIiwNCiJJbnRlcnJ1cHQgd2l0aCBSIFNraWxsIiwiICAgICAgICAgICAgICAgICAgW1N1cHBvcnRlZCBTa2lsbHNdIiwNCi0tIEdlbmVyYWwgTWVudShTa2lsbCBMb2dpYykgLy8gNiAvLyA5OQ0KIlNraWxsIExvZ2ljcyIsIlEgU2tpbGwgTG9naWMiLCJXIFNraWxsIExvZ2ljIiwiRSBTa2lsbCBMb2dpYyIsIlIgU2tpbGwgTG9naWMiLCJIZWFsdGggTWFuYWdlciAlIiwNCi0tIEdlbmVyYWwgTWVudShIaXRjaGFuY2UgU2V0dGluZ3MpIC8vIDUgLy8gMTA1DQoiSGl0Y2hhbmNlIiwiUSBIaXRjaGFuY2UiLCJXIEhpdGNoYW5jZSIsIkUgSGl0Y2hhbmNlIiwiUiBIaXRjaGFuY2UiLA0KLS0gR2VuZXJhbCBNZW51KE9yYndhbGsgU2V0dGluZ3MpIC8vIDUgIC8vIDExMA0KIk9yYldhbGtlcktleSBTZXR0aW5ncyIsDQoiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2lvbjogICIuLlZlcnNpb24uLiAiICAgICAgICAgIiwiICAgICAgICAgICAgU2NyaXB0IHdhcyBtYWRlIGJ5ICAiLi5BdXRob3IuLiAiICAgICAgICAgIiwNCiIgICAgICAgTGVhdWdlIE9mIExlZ2VuZHMgVmVyc2lvbjogICIuLkxWZXJzaW9uLi4gIiAgICAgICAgICIsIkN1cnJlbnQgT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICBTaWRhcyBBdXRvIENhcnJ5IiwNCiJDdXJyZW50IE9yYndhbGtlcjogICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN4T3JiV2FsayIsIA0KLS0gTGVibGFuYyBNZW51IC8vIDEzIC8vIDExNg0KIlE+RT5XPlIiLCAiUT5SPkU+VyIsICJFPlE+Vz5SIiwgIkU+Vz5RPlIiICwiUmFuZG9tIFNraWxsIE9yZGVyIiwiVyBTa2lsbCB0dXJuIGJhY2sgc2V0dGluZ3MiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFE+RT5XPlIgbW9kZSAiLA0KIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gUT5SPkU+VyBtb2RlICIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gRT5RPlc+UiBtb2RlICIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gRT5XPlE+UiBtb2RlICIsDQoiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBSYW5kb20gU2tpbGwgT3JkZXIgbW9kZSAiLCJTdGVhbCBXaXRoIFFXIiwiT25seSB1c2UgRSBTa2lsbCAoT25seSBTdHVuKSIsIiBTZWxlY3QgQ29tYm9tb2RlIEtleSIsDQotLSBBa2FsaSBNZW51IC8vIDkNCiIyIGVuZW15IiwgIjMgZW5lbXkiICwgIjQgZW5lbXkiLCI1IGVuZW15IiwiVXNlIFIgaWYgUSBpcyBvbiB0YXJnZXQiLCAiUnVzaCBTa2lsbHMiLCJVc2UgU3RlYWx0aCBpZiBlbmVteSA+IiwiVXNlIFN0ZWFsdGggaWYgaGVhbHQgJSIsIlVzZSBTdGVhbHRoIChXKSIsDQotLSBEaWFuYSBNZW51IC8vIDQNCiJTbWFydCBDb21ibyIsICJVc2UgUiBpZiB0YXJnZXQgbWFya2VkIiAsICJTcGFtIGV2ZXJ5dGhpbmcgZmFzdCIsIlVzZSBFIG9ubHkgaWYgZW5lbXkgZGlzdGFuY2UgPiAyODAiLA0KLS0gTGlzc2FuZHJhYSBNZW51IC8vIDE3DQoiRSBMb2dpYyBmb3IgY29tYm8gbW9kZSIsIkUgTG9naWMgZm9yIGhhcmFzcyBtb2RlIiwiRW5nYWdlIHdpdGggc2Vjb25kIEUiLCAiRG8gbm90IHVzZSBTZWNvbmQgRSAoIFJlY29tZW5kZWQpIiAsDQoiRG8gbm90IHVzZSBTZWNvbmQgRSAoIFJlY29tZW5kZWQpIiwgIkVuZ2FnZSB3aXRoIHNlY29uZCBFIiAsIlNtYXJ0IiwgInNhdmUgZm9yIHlvdXJzZWxmIiwgIlVzZSBmb3IgZW5lbXkiICwiQXV0byBSIGZvciB5b3Vyc2VsZiIsDQoiQXV0b1IgaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCAiRW5nYWdlIHdpdGggc2Vjb25kIEUgb3B0aW9uIGlzIHN0aWxsIG9uIEJldGEuLiIsICJSIExvZ2ljIGZvciBjb21ibyBtb2RlIiwgIkZvciB1c2luZyBTbWFydCBSIGxvZ2ljLCBBdXRvUiBzaG91bGQgYmUgb3Blbi4uIiwNCiJVc2UgVyBmb3IgQW50aSBHYXBDbG9zZSIsIlRoaXMgRnVuY3Rpb24gaXMgb24gYmV0YS4uIiwNCi0tIFZpa3RvciBNZW51IC8vIDUNCiJVbHRpIExvZ2ljIiwiVXNlIFVsdGkgSWYgVGFyZ2V0IElzIEtpbGxhYmxlIiwiVXNlIFVsdGkgRGlyZWN0bHkiICwiRSBIaXRDaGFuY2UgKERlZmF1bHQgdmFsdWUgPSAxLjYpIiwiRSBIaXRDaGFuY2UgKERlZmF1bHQgdmFsdWUgPSAyKSIsIlNtYXJ0IEF1dG8gSGFyYXNzIiwNCi0tIGxhbmd1YWdlIG1lbnUvLyA1DQoiTGFuZ3VhZ2UoTmVlZHMgMnhGOSkiLCJFbmdsaXNoIiwgIlR1cmtpc2giLCJHZXJtYW4iLCJLb3JlYW4iLA0KLS0gRXh0cmFzcy8vIA0KIlN0YXJ0IEVuZ2FnZSBXaXRoIFlvdXIgVWx0aSAiLA0KLS0gcmV3b3JrLy8gMTcxDQoiQXV0byBXIGJhY2sgaWYgaGVhbHRoID4iLCJBbHdheXMiLCJEZXBlbmRzIG9uIGxvY2FsIFNldHRpbmdzIiwiTmV2ZXIiLCJFbmVteSBOdW1iZXIiLCJBdXRvIFcgYmFjayBpZiBlbmVteSA+IiwiICAgICAgICAgICAgICAgICAgICAgICAgW0xvY2FsIFNldHRpbmdzXSIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gVz5SPlE+RSBtb2RlICIsDQoiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBXPlE+Uj5FIG1vZGUgIiwiTWluaW11bSBtaW5pb24gdG8gUSA+IiwiTWluaW11bSBtaW5pb24gdG8gVyA+IiwiTWluaW11bSBtaW5pb24gdG8gRSA+IiwiTWluaW11bSBtaW5pb24gdG8gUiA+IiwiICAgICAgICAgICAgICAgICAgICAgICAgW01hbmEgTWFuYWdlcl0iLA0KIlEgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiVyBTa2lsbCBNYW5hIE1hbmFnZXIgICUiLCJFIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlIgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiVXNlIEF1dG8gTGFzdGhpdCIsIk9ubHkgaWYgY2Fubm90IEFBIiwiTGFzdGhpdCBMb2dpYyIsIkF1dG8gUG90aW9uIiwiVXNlIEF1dG8gUG90aW9uIiwNCiJBdXRvIFBvdGlvbiBpZiBIZWFsdGggdW5kZXIgLT4gJSIsIkFudGktQUZLIFNldHRpbmdzIiwiVXNlIEFudGkgQWZrIiwiRSAtVGFyZ2V0IGRyYXciLCJDb2xvciBTZXR0aW5ncyIsIlEgQ29sb3IiLCJXIENvbG9yIiwiRSBDb2xvciIsIlIgQ29sb3IiLCJFIC1UYXJnZXQgQ29sb3IiLCJBdXRvIEF0dGFjayBDb2xvciIsDQoiU2VsZWN0ZWQgVGFyZ2V0IENvbG9yIiwiRHJhdyBXaWR0aCBTZXR0aW5ncyIsIkUgLVRhcmdldCBXaWR0aCIsIlNlbGVjdGVkIFRhcmdldCBXaWR0aCIsIkF1dG8gQXR0YWNrIFdpZHRoIiwiUSBTa2lsbCBXaWR0aCIsIlcgU2tpbGwgV2lkdGgiLCJFIFNraWxsIFdpZHRoIiwiUiBTa2lsbCBXaWR0aCIsIkRyYXcgRGFtYWdlIEluZGljYXRvciIsDQoiTGFzdGhpdCBLZXkiLCJDbGljayBGb3IgSW5zdHJ1Y3Rpb25zIiwiVXNlIGlmIG5lZWRlZCIsIkNsZWFyIEtleSBTZXR0aW5ncyIsIlsiIC4uIG15SGVyby5jaGFyTmFtZS4uICJdIC0gQW50aSBHYXAtQ2xvc2UiLCJHYXAtQ2xvc2UgV2l0aCBXIFNraWxsIiwiSHVtYW5pemVyIGZvciBBbnRpIEdhcCBDbG9zZSIsDQoiQXV0byBXIFNldHRpbmdzIiwiVXNlIEF1dG8gVyAiLCJBdXRvIFcgaWYgZW5lbXkgPiIsIlIgLVRhcmdldCBkcmF3IiwiUiAtVGFyZ2V0IENvbG9yIiwiUiAtVGFyZ2V0IFdpZHRoIg0KfQ0KDQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBUdXJraXNoIFRyYW5zbGF0aW9uIGRldGFpbHMgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCmxvY2FsIGxvY190ciA9IHsNCi0tR2VuZXJhbCBNZW51KENvbWJvKSAvLyA4DQoiS29tYm8gQXlhcmxhcmkiLCAiS29tYm9kYSBRIGt1bGxhbiIsICJLb21ib2RhIFcga3VsbGFuIiwgIktvbWJvZGEgRSBrdWxsYW4iLCAiS29tYm9kYSBSIGt1bGxhbiIgLA0KIkhlZGVmIG9sdWNla3NlIHR1dHVzdHVyIGt1bGxhbiIsIktvbWJvbnUgc2VjICIsIk1hbmEgTWVuYWplcmkgJSIsDQotLUdlbmVyYWwgTWVudShIYXJhc3MpIC8vIDUNCiJEdXJ0bWUgQXlhcmxhcmkiLCJSYWtpYmkgUSBpbGUgZHVydCIsIlJha2liaSBXIGlsZSBkdXJ0IiwiUmFraWJpIEUgaWxlIGR1cnQiLCJSYWtpYmkgUiBpbGUgZHVydCIsDQotLUdlbmVyYWwgTWVudShDbGVhcikgLy8gMTYNCiJGYXJtIEF5YXJsYXJpIiwiS29yaWRvciBUZW1pemxlbWUgQXlhcmxhcmkiLCJRIHNraWxpbmkgS3VsbGFuIiwiVyBza2lsaW5pIEt1bGxhbiIsIkUgc2tpbGluaSBLdWxsYW4iLCJSIHNraWxpbmkgS3VsbGFuIiwNCiJPcm1hbiBUZW1pemxlbWUgQXlhcmxhcmkiLCJRIHNraWxpbmkgS3VsbGFuIiwiVyBza2lsaW5pIEt1bGxhbiIsIkUgc2tpbGluaSBLdWxsYW4iLCJSIHNraWxpbmkgS3VsbGFuIiwNCiJTb24gVnVydXMgQXlhcmxhcmkiLCJRIHNraWxpbmkgS3VsbGFuIiwiVyBza2lsaW5pIEt1bGxhbiIsIkUgc2tpbGluaSBLdWxsYW4iLCJSIHNraWxpbmkgS3VsbGFuIiwNCi0tR2VuZXJhbCBNZW51KEVzY2FwZSkgLy8gNQ0KIkthY2lzIEF5YXJsYXJpIiwiS2FjYXJrZW4gUSBrdWxsYW4iLCJLYWNhcmtlbiBXIGt1bGxhbiIsIkthY2Fya2VuIEUga3VsbGFuIiwiS2FjYXJrZW4gUiBrdWxsYW4iLA0KLS1HZW5lcmFsIE1lbnUoS2lsbHN0ZWFsKSAvLyA3DQoiS2lsbCBDYWxtYSBBeWFybGFyaSIsIktpbGwgQ2FsbWEgS2FwYWxpIC8gQWNpayIsIlEgc2tpbGluaSBLdWxsYW4iLCJXIHNraWxpbmkgS3VsbGFuIiwiRSBza2lsaW5pIEt1bGxhbiIsIlIgc2tpbGluaSBLdWxsYW4iLCJUdXR1c3R1ciBLdWxsYW4iLA0KLS1HZW5lcmFsIE1lbnUoxLB0ZW0gU2V0dGluZ3MpIC8vIDUNCiJJdGVtIEF5YXJsYXJpIiwiT3RvbWF0aWsgWmhvbnlhIiwgIlpob255YSBFZ2VyIGNhbiAtPiAlIiwgIkhleHRlY2ggR3VuYmxhZGUga3VsbGFuIiwgIkJpbGdld2F0ZXIgQ3V0bGFzcyBrdWxsYW4iLA0KLS1HZW5lcmFsIE1lbnUoVsSxcCBTZXR0aW5ncykgLy8gMTkNCiJWSVAgQXlhcmxhcmkiLCJQYWNrZXQgQ2FzdGluZyBLdWxsYW4iLCJWaXAgYXlhcmxhcmluaSBrdWxsYW5tYWsgaWNpbiBwYWNrZXQgY2FzdGluZyBhY2lrIG9sbWFsaWRpci4iLCAiT3RvbWF0aWsgU2V2aXllIEF5YXJsYXJpIiwiT3RvbWF0aWsgU2V2aXllIiwNCiJZZXRlbmVrIER1emVuaW5pbiBTZWNpbiIsIktvc3R1bSBIYWNrIEF5YXJsYXJpIiwiS29zdHVtIEhhY2sgS3VsbGFuIiwiUGFja2V0IENhc3RpbmcgYWNpayBvbGR1Z3VuZGFuIGVtaW4gb2x1bnV6IiwNCiJWaXAgYXlhcmxhcmluaSBrdWxsYW5tYWsgaWNpbiBCT0wgVmlwIHV5ZXNpIG9sbWFuaXogZ2VyZWttZWt0ZWRpci4iLCJLb3N0dW0gc2VjIiwNCiJRPlc+RSAiLCAiUT5FPlciLCJXPlE+RSIsIlc+RT5RIiwiRT5XPlEiLCAiRT5RPlciLCAiQWtpbGxpIiAsDQotLUdlbmVyYWwgTWVudShEcmF3IFNldHRpbmdzKSAvLyAxMQ0KIkNpemltIEF5YXJsYXJpIiwiWWV0ZW5layBDaXppbSBBeWFybGFyaSIsIlEgWWV0ZW5layBtZW56aWxpbmkgY2l6IiwiVyBZZXRlbmVrIG1lbnppbGluaSBjaXoiLCJFIFlldGVuZWsgbWVuemlsaW5pIGNpeiIsIlIgWWV0ZW5layBtZW56aWxpbmkgY2l6IiwiT3RvbWF0aWsgU2FsZGlyaSBNZW56aWxpIiwNCiJLb21ibyBNb2R1bnUgQ2l6IiwiUGVybWFib3ggQ2l6IiwiUGVybWFib3ggQ2l6ICggMnggRjkgR2VyZWtpciApIiwiU2VjaWxpIGhlZGVmaSBkYWlyZSBpY2luZSBhbCIsIkhlZGVmIGhhc2FyIGhlc2FwbGEiLA0KLS1HZW5lcmFsIE1lbnUoVGFyZ2V0IFNlbGVjdG9ycykgLy8gMg0KIkhlZGVmIFNlY2ljaSIsIlNvbCB0aWsgaWxlIGhlZGVmIHNlYyIsDQotLUdlbmVyYWwgTWVudShLZXkgU2V0dGluZ3MpIC8vIDEzDQoiVHVzIEF5YXJsYXJpIiwgIjwtLS0tLS0tLS0tLS0tLS0tLS1Lb21ibyBUdXMgQXlhcmxhcmktLS0tLS0tLS0tLS0tLS0tLS0+IiwiS29tYm8gVHVzdSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1EdXJ0bWUgVHVzIEF5YXJpLS0tLS0tLS0tLS0tLS0tLS0tPiIsIA0KIkR1cnRtZSBUdXN1IiwiPC0tLS0tLS0tLS0tLS0tLS0tLVRlbWl6bGVtZSBUdXMgQXlhcmxhcmktLS0tLS0tLS0tLS0tLS0tLS0tLT4iLCJLb3JpZG9yIFRlbWl6bGVtZSBUdXN1IiwiT3JtYW4gVGVtaXpsZW1lIFR1c3UiLCANCiI8LS0tLS0tLS0tLS0tLS0tLS0tRGlnZXIgVHVzIEF5YXJsYXJpLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiS2FjaXMgVHVzdSIsICJPcmJ3YWxrZXIgVHVzbGFyaW5peiBCdXJheWxhIEF5bmkgT2xtYWxpZGlyLiIsIk9yd1dhbGtlcktleSBBeWFybGFyaSIsDQoiT3RvbWF0aWsgUSBEdXJ0bWUiLA0KLS1HZW5lcmFsIE1lbnUoTWlzYyBTZXR0aW5ncykgLy8gNw0KIkVrc3RyYSBBeWFybGFyIiwgIlsiIC4uIG15SGVyby5jaGFyTmFtZS4uICJdIC0gT3RvbWF0aWsgRHVyZHVybWEiLCJRIFlldGVuZWdpIGlsZSBkdXJkdXIiLCJXIFlldGVuZWdpIGlsZSBkdXJkdXIiLCJFIFlldGVuZWdpIGlsZSBkdXJkdXIiLA0KIlIgWWV0ZW5lZ2kgaWxlIGR1cmR1ciIsIiAgICAgICAgICAgICAgICAgIFtEZXN0ZWtsZW5lbiBZZXRlbmVrbGVyXSIsDQotLSBHZW5lcmFsIE1lbnUoU2tpbGwgTG9naWMpIC8vIDYNCiJZZXRlbmVrIEF5YXJsYXJpIiwiUSBZZXRlbmVnaSBBeWFybGFyaSIsIlcgWWV0ZW5lZ2kgQXlhcmxhcmkiLCJFIFlldGVuZWdpIEF5YXJsYXJpIiwiUiBZZXRlbmVnaSBBeWFybGFyaSIsIkhlYWx0aCBNZW5hamVyaSAlIiwNCi0tIEdlbmVyYWwgTWVudShIaXRjaGFuY2UgU2V0dGluZ3MpIC8vIDUNCiJUdXR0dXJtYSBPcmFuaSIsIlEgVHV0dHVybWEgT3JhbmkiLCJXIFR1dHR1cm1hIE9yYW5pIiwiRSBUdXR0dXJtYSBPcmFuaSIsIlIgVHV0dHVybWEgT3JhbmkiLA0KLS0gR2VuZXJhbCBNZW51KE9yYndhbGsgU2V0dGluZ3MpIC8vIDUNCiJPcmJXYWxrZXIgVHVzIEF5YXJsYXJpIiwNCiIgICAgICAgICAgICAgICAgIFNjcmlwdCBWZXJzaXlvbnU6ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIiAgICAgICAgICAgIFNjcmlwdCAiLi5BdXRob3IuLiAiIHRhcmFmaW5kYW4geWFwaWxtaXN0aXIuICAgICAgICAiLA0KIiAgICAgICBMZWF1Z2UgT2YgTGVnZW5kcyBWZXJzaXlvbnU6ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCJLdWxsYW5pbGFuIE9yYndhbGtlcjogICAgICAgICAgICAgICAgICAgICAgU2lkYXMgQXV0byBDYXJyeSIsDQoiS3VsbGFuaWxhbiBPcmJ3YWxrZXI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeE9yYldhbGsiLCANCi0tIExlYmxhbmMgTWVudSAvLyAxMw0KIlE+RT5XPlIiLCAiUT5SPkU+VyIsICJFPlE+Vz5SIiwgIkU+Vz5RPlIiICwiUmFzdGdlbGUgWWV0ZW5layBEdXplbmkiLCJXIHlldGVuZWdpIGdlcmkgZG9ubWUgYXlhcmxhcmkiLCIgUT5FPlc+UiBtb2R1bmRhIFcgeWVyaW5lIGdlcmkgZG9uICIsDQoiUT5SPkU+VyBtb2R1bmRhIFcgeWVyaW5lIGdlcmkgZG9uICIsIkU+UT5XPlIgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiIsIkU+Vz5RPlIgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiAiLA0KIlJhc3RnZWxlIFlldGVuZWsgbW9kdW5kYSBXIHllcmluZSBnZXJpIGTDtm4gIiwiUVcgaWxlIGNhbCIsIlNhZGVjZSBFIEt1bGxhbiAoU2FkZWNlIFNlcnNlbWxldCkiLCIgS29tYm8gTW9kdSBUdXN1IiwNCi0tIEFrYWxpIE1lbnUgLy8gOQ0KIjIgZHVzbWFuIiwgIjMgZHVzbWFuIiAsICI0IGR1c21hbiIsIjUgZHVzbWFuIiwiUSBIZWRlZnRleXNlIFIgS3VsbGFuIiwgIllldGVuZWtsZXJpIERpcmVrIEt1bGxhbiIsIkfDtnJ1bm1lemxpayhXKSBrdWxsYW4gaGVkZWYgPiIsIkfDtnJ1bm1lemxpayhXKSBrdWxsYW4gQ2FuICUiLA0KIkfDtnJ1bm1lemxpayhXKSBrdWxsYW4iLA0KLS0gRGlhbmEgTWVudSAvLyA0DQoiQWtpbGxpIEtvbWJvIiwgIkhlZGVmIGlzYXJldGxpIGlzZSBSIGt1bGxhbiIgLCAiQnV0dW4geWV0ZW5la2xlcmkgaGl6bGljYSBrdWxsYW4iLCJFIHlldGVuZWdpbmkgbWVzYWZlID4gMjgwIGt1bGxhbiIsDQotLSBMaXNzYW5kcmFhIE1lbnUgLy8gMTcNCiJLb21ibyBtb2R1IGljaW4gRSBheWFybGFyaSIsIkR1cnRtZSBtb2R1IGljaW4gRSBheWFybGFyaSIsIjIuIEUgaWxlIGJhc2xhIiwgIjIuIEUneWkga3VsbGFubWEgKCDDtm5lcmlsZW4pIiAsDQoiMi4gRSd5aSBrdWxsYW5tYSAob25lcmlsZW4pIiwgIjIuIEUgaWxlIGJhc2xhIiAsIkFraWxsaSIsICJLZW5kaW5pIGtvcnUiLCAiRHVzbWFuIGljaW4ga3VsbGFuIiAsIktlbmRpbmUgb3RvbWF0aWsgUiIsDQoiT3RvbWF0aWsgUiBjYW4gYWx0aW5kYXlzYSAtPiAlIiwgIjIuIEUgaWxlIGJhc2xhIGF5YXJpIHRlc3QgYXNhbWFzaW5kYWRpci4uIiwgIktvbWJvIG1vZHUgaWNpbiBSIGF5YXJsYXJpIiwgIkFraWxsaSBSIGF5YXJsYXJpIGnDp2luIGtlbmRpbmUgb3RvbWF0aWsgUiBhY2lrIG9sbWFsaWRpci4iLA0KIlcga3VsbGFuYXJhayBkdXNtYW5pIHV6YWsgdHV0IiwiQnUgb3plbGxpayBoYWxhIHRlc3QgYXNhbWFzaW5kYWRpci4uIiwNCi0tIFZpa3RvciBNZW51IC8vIDUNCiJVbHRpIEF5YXJsYXJpIiwiSGVkZWYgb2x1Y2VrIGlzZSBVbHRpIEt1bGxhbiIsIlVsdGl5aSBEaXJlayBLdWxsYW4iICwiRSBUdXR0dXJtYSBPcmFuaSAoTm9ybWFsaSA9IDEuNikiLCJFIFR1dHR1cm1hIE9yYW5pIChOb3JtYWxpID0gMikiLCJPdG9tYXRpayBkdXJ0bWUiLA0KLS0gbGFuZ3VhZ2UgbWVudS8vIDUNCiJEaWwgU2VjaW1pKDJ4RjkgR2VyZWttZWt0ZWRpci4pIiwiSW5naWxpemNlIiwgIlR1cmtjZSIsIkFsbWFuY2EiLCJLb3JlY2UiLA0KLS0gRXh0cmFzcy8vIA0KIktvbWJveXUgdWx0aSBpbGUgYmFzbGF0ICIsDQotLSByZXdvcmsvLyAxNzENCiJPdG9tYXRpayB3IGVnZXIgY2FuID4iLCJIZXIgemFtYW4iLCJMb2NhbCBBeWFybGFyYSBCYWdsaSIsIkFzbGEiLCJEdXNtYW4gU2F5aXNpIiwiT3RvbWF0aWsgVyBFZ2VyIER1c21hbiA+IiwiICAgICAgICAgICAgICAgICAgICAgICAgW0xvY2FsIEF5YXJsYXJdIiwiVz5SPlE+RSBtb2R1bmRhIFcgeWVyaW5lIGdlcmkgZG9uIiwNCiJXPlE+Uj5FIG1vZHVuZGEgVyB5ZXJpbmUgZ2VyaSBkb24gIiwiUSBpY2luIG1pbmltdW0gbWluaW9uICA+IiwiVyBpY2luIG1pbmltdW0gbWluaW9uICA+IiwiRSBpY2luIG1pbmltdW0gbWluaW9uICA+IiwiUiBpY2luIG1pbmltdW0gbWluaW9uID4iLCIgICAgICAgICAgICAgICAgICAgICAgICBbTWFuYSBNZW5hamVyaV0iLA0KIlEgWWV0ZW5lZ2kgTWFuYSBNZW5hamVyaSAgJSIsIlcgWWV0ZW5lZ2kgTWFuYSBNZW5hamVyaSAgJSIsIkUgWWV0ZW5lZ2kgTWFuYSBNZW5hamVyaSAgJSIsIlIgWWV0ZW5lZ2kgTWFuYSBNZW5hamVyaSAgJSIsIk90b21hdGlrIFNvbiBWdXJ1cyIsIkVnZXIgb3RvbWF0aWsgU2FsZGlyaSBZYXBhbWl5b3JzYSIsIlNvbiBWdXJ1cyBBeWFybGFyaSIsIk90b21hdGlrIFBvdCIsIk90b21hdGlrIFBvdCBLdWxsYW4iLA0KIkF1dG8gUG90aW9uIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwiQW50aS1BRksgQXlhcmxhcmkiLCJBbnRpIEFmayBLdWxsYW4iLCJFIC1IZWRlZiBDaXppbWkiLCJSZW5rIEF5YXJsYXJpIiwiUSBSZW5naSIsIlcgUmVuZ2kiLCJFIFJlbmdpIiwiUiBSZW5naSIsIkUgLUhlZGVmIFJlbmdpIiwiT3RvbWF0aWsgU2FsZGlyaSBSZW5naSIsDQoiU2VjaWxpIEthcmFrdGVyIFJlbmdpIiwiS2FsaW5saWsgQXlhcmxhcmkiLCJFIC1IZWRlZiBLYWxpbmxpayIsIlNlY2lsaSBLYXJha3RlciBLYWxpbmxpayIsIk90b21hdGlrIFNhbGRpcmkgS2FsaW5saWsiLCJRIFlldGVuZWdpIGthbGlubGlrIiwiVyBZZXRlbmVnaSBrYWxpbmxpayIsIkUgWWV0ZW5lZ2kga2FsaW5saWsiLA0KIlIgWWV0ZW5lZ2kga2FsaW5saWsiLCJIYXNhciBjaXppbWkgZ29zdGVyIiwNCiJTb24gdnVydXMgdHVzdSIsIlRhbGltYXRsYXIgaWNpbiB0aWtsYXlpbml6IiwiR2VyZWtsaSBpc2Uga3VsbGFuIiwiRmFybSBUdXMgQXlhcmxhcmkiLCJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIEFudGkgR2FwLUNsb3NlIiwiVyBZZXRlbmVnaSBpbGUgQW50aSBHYXAtQ2xvc2UiLCJBbnRpIEdhcC1DbG9zZSBpY2luIGluc2FubGFzdGlybWEiLA0KIk90b21hdGlrIFcgQXlhcmxhcmkiLCJPdG9tYXRpayBXIEt1bGxhbiAiLCJPdG9tYXRpayBXIEVnZXIgRHVzbWFuID4iLCJSIC1IZWRlZiBDaXppbSIsIlIgLUhlZGVmIFJlbmdpIiwiUiAtSGVkZWYgS2FsaW5saWsiDQp9DQotLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBHZXJtYW4gVHJhbnNsYXRpb24gZGV0YWlscyAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KbG9jYWwgbG9jX2dyID0gew0KLS1HZW5lcmFsIE1lbnUoQ29tYm8pIC8vIDggLy8gMQ0KIkNvbWJvIEVpbnN0ZWxsdW5nZW4iLCAiQmVudXR6ZSBRIGltIENvbWJvIE1vZHVzIiwgIkJlbnV0emUgVyBpbSBDb21ibyBNb2R1cyIsICJCZW51dHplIEUgaW0gQ29tYm8gTW9kdXMiLCAiQmVudXR6ZSBSIGltIENvbWJvIE1vZHVzIiAsDQoiQmVudXR6ZSBJZ25pdGUgd2VubiBkYXMgWmllbCBkYWR1cmNoIHN0aXJidCIsIkNvbWJvIExvZ2lrIiwiTWFuYSBNYW5hZ2VyICUiLA0KLS1HZW5lcmFsIE1lbnUoSGFyYXNzKSAvLyA1IC8vIDkNCiJIYXJhc3MgRWluc3RlbGx1bmdlbiIsIkhhcmFzcyBtaXQgUSIsIkhhcmFzcyBtaXQgVyIsIkhhcmFzcyBtaXQgRSIsIkhhcmFzcyBtaXQgUiIsDQotLUdlbmVyYWwgTWVudShDbGVhcikgLy8gMTYgLy8gMTQNCiJGYXJtIEVpbnN0ZWxsdW5nZW4iLCJMYW5lQ2xlYXIgRWluc3RlbGx1bmdlbiIsIkJlbnV0emUgUSBpbSBMYW5lY2xlYXIgTW9kdXMiLCJCZW51dHplIFcgaW0gTGFuZWNsZWFyIE1vZHVzIiwiQmVudXR6ZSBFIGltIExhbmVjbGVhciBNb2R1cyIsIkJlbnV0emUgaW0gTGFuZWNsZWFyIE1vZHVzIiwNCiJKdW5nbGVDbGVhciBFaW5zdGVsbHVuZ2VuIiwiQmVudXR6ZSBRIGltIGp1bmdsZWNsZWFyIE1vZHVzIiwiQmVudXR6ZSBXIGltIGp1bmdsZWNsZWFyIE1vZHVzIiwiQmVudXR6ZSBFIGltIGp1bmdsZWNsZWFyIE1vZHVzIiwiQmVudXR6ZSBSIGltIGp1bmdsZWNsZWFyIE1vZHVzIiwNCiJMYXN0aGl0IEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIFEgaW0gTGFzdGhpdCBNb2R1cyIsIkJlbnV0emUgVyBpbSBMYXN0aGl0IE1vZHVzIiwiQmVudXR6ZSBFIGltIExhc3RoaXQgTW9kdXMiLCJCZW51dHplIFIgaW0gTGFzdGhpdCBNb2R1cyIsDQotLUdlbmVyYWwgTWVudShFc2NhcGUpIC8vIDUgLy8gMzANCiJFc2NhcGUgRWluc3RlbGx1bmdlbiIsIkJlbnV0emUgUSBiZWltIEZsaWVoZW4iLCJCZW51dHplIFcgYmVpbSBGbGllaGVuIiwiQmVudXR6ZSBFIGJlaW0gRmxpZWhlbiIsIkJlbnV0emUgUiBiZWltIEZsaWVoZW4iLA0KLS1HZW5lcmFsIE1lbnUoS2lsbHN0ZWFsKSAvLyA3IC8vIDM1DQoiS2lsbFN0ZWFsIEVpbnN0ZWxsdW5nZW4iLCJLaWxsc3RlYWwgRWluL0F1cyIsIlN0aWVobCBtaXQgUSIsIlN0aWVobCBtaXQgVyIsIlN0aWVobCBtaXQgRSIsIlN0aWVobCBtaXQgUiIsIlN0aWVobCBtaXQgSWduaXRlIiwNCi0tR2VuZXJhbCBNZW51KGl0ZW0pIC8vIDUgLy8gNDINCiJJdGVtIEVpbnN0ZWxsdW5nZW4iLCJBdXRvIFpob255YSIsICJCZW51dHp0ZSBaaG9ueWEgd2VubiBMZWJlbiB1bnRlciAtPiAlIiwgIkJlbnV0emUgSGV4dGVjaCBHdW5ibGFkZSIsICJCZW51dHplIEJpbGdld2F0ZXIgQ3V0bGFzcyIsDQotLUdlbmVyYWwgTWVudSh2aXAgRWluc3RlbGx1bmdlbikgLy8gMTkgLy8gNDcNCiJWSVAgRWluc3RlbGx1bmdlbiIsIkJlbnV0emUgUGFja2V0IENhc3RpbmciLCJVbSBWSVAgRWluc3RlbGx1bmdlbiwgenUgYmVudXR6dGVuIG11c3MgUGFja2FnZSBDYXN0aW5nIG1vZ2xpY2ggc2VpbiIsICJBdXRvIExldmVsIEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIEF1dG8gTGV2ZWwiLA0KIlNlbGVjdCBTa2lsbCBPcmRlciIsIlNraW4gSGFjayBFaW5zdGVsbHVuZ2VuIiwiQmVudXR6ZSBTa2luIEhhY2siLCJTdGVsbGUgc2ljaGVyLCBkYXNzIFBhY2tldCBDYXN0aW5nIGFjdGl2aWVydCBpc3QiLA0KIlVtIFZJUCBFaW5zdGVsbHVuZ2VuIHp1IGJlbnV0enRlbiwgbXVzc3QgZHUgVklQIHNlaW4iLCJXYWhsZSBlaW5lbiBTa2luIiwNCiJGb2N1cyBRPlc+RSIsICJGb2N1cyBRPkU+VyIsIkZvY3VzIFc+UT5FIiwiRm9jdXMgVz5FPlEiLCJGb2N1cyBFPlc+USIsICJGb2N1cyBFPlE+VyIsICJTbWFydCIgLA0KLS1HZW5lcmFsIE1lbnUoR3JhcGhpayBFaW5zdGVsbHVuZ2VuKSAvLyAxMiAvLyA2NQ0KIkdyYXBoaWsgRWluc3RlbGx1bmdlbiIsIlNraWxsIEFuemVpZ2UgRWluc3RlbGx1bmdlbiIsIlEgQW56ZWlnZW4iLCJXICBBbnplaWdlbiIsIkUgQW56ZWlnZW4iLCJSIEFuemVpZ2VuIiwiU3RhbmRhcnQgQXR0YWNrZW4gUmVpY2h3ZWl0ZSIsDQoiWmVpZ2UgQ29tYm8gTW9kdXMiLCJaZWlnZSBQZXJtYWJveCIsIlplaWdlIFBlcm1hYm94ICggQmVub3RpZ3QgMnggRjkgKSIsIlplaWNobmUgWmlya2VsIHVtIGRlaW4gZ2V3YWhsdGVzIFppZWwiLCJaaWVsIGJlcmVjaG51bmciLA0KLS1HZW5lcmFsIE1lbnUoVGFyZ2V0IFNlbGVjdG9ycykgLy8gMiAvLyA3Nw0KIlppZWwgU29ydGllcnVuZyIsIkxpbmtzY2xpY2sgZnVyIG1hbnVlbGxlcyBBdXN3YWhsZW4gdm9uIFppZWxlbiIsDQotLUdlbmVyYWwgTWVudShLZXkgRWluc3RlbGx1bmdlbikgLy8gMTMgLy8gNzkNCiJLZXkgRWluc3RlbGx1bmdlbiIsICI8LS0tLS0tLS0tLS0tLS0tLS0tQ29tYm8gS2V5IEVpbnN0ZWxsdW5nZW4tLS0tLS0tLS0tLS0tLS0tLS0+IiwiQ29tYm8gS2V5IiwiPC0tLS0tLS0tLS0tLS0tLS0tLUhhcmFzcyBLZXkgRWluc3RlbGx1bmdlbi0tLS0tLS0tLS0tLS0tLS0tLT4iLCANCiJTbWFydCBIYXJhc3MgS2V5IiwiPC0tLS0tLS0tLS0tLS0tLS0tLUNsZWFyIEtleSBFaW5zdGVsbHVuZ2VuLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiTGFuZUNsZWFyIEtleSIsIkp1bmdsZUNsZWFyIEtleSIsIA0KIjwtLS0tLS0tLS0tLS0tLS0tLS1BbmRlcmUgS2V5IEVpbnN0ZWxsdW5nZW4tLS0tLS0tLS0tLS0tLS0tLS0tLT4iLCJFc2NhcGUgS2V5IiwgIlN0ZWxsZSBzaWNoZXIsIGRhc3MgZGVpbmUgT3Jid2Fsa2VyIEtleXMgZGllIGdsZWljaGVuIHdpZSBoaWVyIHNpbmQuIiwiT3J3V2Fsa2VyS2V5IEVpbnN0ZWxsdW5nZW4iLA0KIkF1dG8gSGFyYXNzIFEiLA0KLS1HZW5lcmFsIE1lbnUoTWlzYyBFaW5zdGVsbHVuZ2VuKSAvLyA3IC8vIDkyDQoiQW5kZXJlIEVpbnN0ZWxsdW5nZW4iLCAiWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4gIl0gLSBBdXRvLUFicmVjaGVuIiwiQWJydWNoIG1pdCBRIiwiQWJydWNoIG1pdCBXIiwiQWJydWNoIG1pdCBFIiwNCiJBYnJ1Y2ggbWl0IFIiLCIgICAgICAgICAgICAgICAgICBbU3VwcG9ydGVkIFNraWxsc10iLA0KLS0gR2VuZXJhbCBNZW51KFNraWxsIExvZ2ljKSAvLyA2IC8vIDk5DQoiU2tpbGwgTG9naWsiLCJRIExvZ2lrIiwiVyBMb2dpayIsIkUgTG9naWsiLCJSIExvZ2lrIiwiSGVhbHRoIE1hbmFnZXIgJSIsDQotLSBHZW5lcmFsIE1lbnUoSGl0Y2hhbmNlIEVpbnN0ZWxsdW5nZW4pIC8vIDUgLy8gMTA1DQoiVHJlZmZlcmNoYW5jZSIsIlEgVHJlZmZlcmNoYW5jZSIsIlcgVHJlZmZlcmNoYW5jZSIsIkUgVHJlZmZlcmNoYW5jZSIsIlIgVHJlZmZlcmNoYW5jZSIsDQotLSBHZW5lcmFsIE1lbnUoT3Jid2FsayBFaW5zdGVsbHVuZ2VuKSAvLyA1ICAvLyAxMTANCiJPcmJXYWxrZXJLZXkgRWluc3RlbGx1bmdlbiIsDQoiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2lvbjogICIuLlZlcnNpb24uLiAiICAgICAgICAgIiwiICAgICAgICAgICAgU2NyaXB0IHd1cmRlIGdlbWFjaHQgdm9uICAiLi5BdXRob3IuLiAiICAgICAgICAgIiwNCiIgICAgICAgTGVhdWdlIE9mIExlZ2VuZHMgVmVyc2lvbjogICIuLkxWZXJzaW9uLi4gIiAgICAgICAgICIsIkFrdHVlbGxlciBPcmJ3YWxrZXI6ICAgICAgICAgICAgICAgICAgICAgIFNpZGFzIEF1dG8gQ2FycnkiLA0KIkFrdHVlbGxlciBPcmJ3YWxrZXI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeE9yYldhbGsiLCANCi0tIExlYmxhbmMgTWVudSAvLyAxMyAvLyAxMTYNCiJRPkU+Vz5SIiwgIlE+Uj5FPlciLCAiRT5RPlc+UiIsICJFPlc+UT5SIiAsIlp1ZsOkbGxpZ2UgQmVudXR6dW5nIiwiVyBTa2lsbCB6dXJ1Y2trb21tIEVpbnN0ZWxsdW5nZW4iLCJHZWhlIHp1cnVjayB6dW0gVyBTcG90IGltIFE+RT5XPlIgbW9kdXMgIiwNCiJHZWhlIHp1cnVjayB6dW0gVyBTcG90IGltIFE+Uj5FPlcgbW9kdXMgIiwiR2VoZSB6dXJ1Y2sgenVtIFcgU3BvdCBpbSBFPlE+Vz5SIG1vZHVzICIsIkdlaGUgenVydWNrIHp1bSBXIFNwb3QgaW0gRT5XPlE+UiBtb2R1cyIsDQoiR2VoZSB6dXJ1Y2sgenVtIFcgU3BvdCBpbSBadWbDpGxsaWdlbiBNb2R1cyAiLCJTdGllaGwgbWl0IFFXIiwiQmVudXR6ZSBudXIgRSAoTnVyIFN0dW5uZW4pIiwiIFfDpGhsZSBDb21ib21vZHVzIEtleSIsDQotLSBBa2FsaSBNZW51IC8vIDkNCiIyIEdlZ25lciIsICIzIEdlZ25lciIgLCAiNCBHZWduZXIiLCI1IEdlZ25lciIsIkJlbnV0emUgUiB3ZW5uIFEgZGFzIFppZWwgZ2V0cm9mZmVuIGhhdCIsICJSdXNoIFNraWxscyIsIkJlbnV0emUgVmVyYmVyZ2VuIHdlbm4gZ2VnbmVyID4iLCJCZW51dHplIFZlcmJlcmdlbiB3ZW5uIExlYmVuICUiLCJCZW51dHplIFZlcmJlcmdlbiAoVykiLA0KLS0gRGlhbmEgTWVudSAvLyA0DQoiU21hcnQgQ29tYm8iLCAiQmVudXR6ZSBSIHdlbm4gWmllbCBtYXJraWVydCIgLCAiQmVudXR6dGUgYWxsZXMgc2NobmVsbCBoaW50ZXJlaW5hbmRlciIsIkJlbnV0emUgRSBudXIgd2VubiBkaWUgRGlzdGFueiB6dW0gZ2VnbmVyID4gMjgwIiwNCi0tIExpc3NhbmRyYWEgTWVudSAvLyAxNw0KIkUgTG9naWsgZnVyIGNvbWJvIG1vZHVzIiwiRSBMb2dpYyBmdXIgaGFyYXNzIG1vZHVzIiwiRW5nYWdlIG1pdCBad2VpdGVuIEUiLCAiQmVudXR6ZSBuaWNodCBkZW4gWndlaXRlbiBFICggRW1wZm9obGVuKSIgLA0KIkJlbnV0emUgbmljaHQgZGVuIFp3ZWl0ZW4gRSAoIEVtcGZvaGxlbikiLCAiRW5nYWdlIG1pdCBad2VpdGVuIEUiICwiU21hcnQiLCAiUmV0dGUgZGljaCBzZWxic3QiLCAiQmVudXR6ZSBnZWdlbiBHZWduZXIiICwiQXV0byBSIGZ1ciBkaWNoc2VsYnN0IiwNCiJBdXRvUiB3ZW5uIExlYmVuIHVudGVyIC0+ICUiLCAiRGllICdFbmdhZ2UgbWl0IFp3ZWl0ZW4gRScgT3B0aW9uIGlzdCBpbSBCZXRhIFN0YWRpdW0iLCAiUiBMb2dpayBmdXIgZGVuIGNvbWJvIG1vZHVzIiwgIlVtIFNtYXJ0IFIgTG9naWsgenUgYmVudXR6dGVuLCBzb2xsdGUgQXV0b1IgYWt0aXZpZXJ0IHNlaW4iLA0KIkJlbnV0emUgVyBmdXIgQW50aS1HYXBDbG9zZSIsIkRpZXNlIEZ1bmN0aW9uIGJlZmluZGV0IHNpY2ggaW4gZGVyIEJldGEgUGhhc2UiLA0KLS0gVmlrdG9yIE1lbnUgLy8gNQ0KIlVsdGkgTG9naWsiLCJCZW51dHplIFVsdGltYXRlIHdlbm4gZGFzIFppZWwgZGFkdXJjaCBzdHJpYnQiLCJCZW51dHplIGRpZSBVbHRpbWF0ZSBkaXJla3QiICwiRSBUcmVmZmVyd2Fyc2NoZWlubGljaGtlaXQgKFN0YW5kYXJ0IFdlcnQgPSAxLjYpIiwiRSBUcmVmZmVyd2Fyc2NoZWlubGljaGtlaXQgKFN0YW5kYXJ0IFdlcnQgPSAyKSIsIlNtYXJ0IEF1dG8gSGFyYXNzIiwNCi0tIGxhbmd1YWdlIG1lbnUvLyA1DQoiU3ByYWNoZW4oMnhGOSkiLCJFbmdsaXNoIiwgIlR1cmtpc2giLCJEZXV0c2NoIiwiS29yZWFuIiwNCi0tIEV4dHJhc3MvLyANCiJTdGFydGUgRW5nYW5nZSdzIG1pdCBkZWluZXIgVWx0aW1hdGUiLA0KLS0gcmV3b3JrLy8gMTcxDQoiQXV0byBXIGJhY2sgaWYgaGVhbHRoID4iLCJBbHdheXMiLCJEZXBlbmRzIG9uIGxvY2FsIFNldHRpbmdzIiwiTmV2ZXIiLCJFbmVteSBOdW1iZXIiLCJBdXRvIFcgYmFjayBpZiBlbmVteSA+IiwiICAgICAgICAgICAgICAgICAgICAgICAgW0xvY2FsIFNldHRpbmdzXSIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gVz5SPlE+RSBtb2RlICIsDQoiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBXPlE+Uj5FIG1vZGUgIiwiTWluaW11bSBtaW5pb24gdG8gUSA+IiwiTWluaW11bSBtaW5pb24gdG8gVyA+IiwiTWluaW11bSBtaW5pb24gdG8gRSA+IiwiTWluaW11bSBtaW5pb24gdG8gUiA+IiwiICAgICAgICAgICAgICAgICAgICAgICAgW01hbmEgTWFuYWdlcl0iLA0KIlEgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiVyBTa2lsbCBNYW5hIE1hbmFnZXIgICUiLCJFIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlIgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiVXNlIEF1dG8gTGFzdGhpdCIsIk9ubHkgaWYgY2Fubm90IEFBIiwiTGFzdGhpdCBMb2dpYyIsIkF1dG8gUG90aW9uIiwiVXNlIEF1dG8gUG90aW9uIiwNCiJBdXRvIFBvdGlvbiBpZiBIZWFsdGggdW5kZXIgLT4gJSIsIkFudGktQUZLIFNldHRpbmdzIiwiVXNlIEFudGkgQWZrIiwiRSAtVGFyZ2V0IGRyYXciLCJDb2xvciBTZXR0aW5ncyIsIlEgQ29sb3IiLCJXIENvbG9yIiwiRSBDb2xvciIsIlIgQ29sb3IiLCJFIC1UYXJnZXQgQ29sb3IiLCJBdXRvIEF0dGFjayBDb2xvciIsDQoiU2VsZWN0ZWQgVGFyZ2V0IENvbG9yIiwiRHJhdyBXaWR0aCBTZXR0aW5ncyIsIkUgLVRhcmdldCBXaWR0aCIsIlNlbGVjdGVkIFRhcmdldCBXaWR0aCIsIkF1dG8gQXR0YWNrIFdpZHRoIiwiUSBTa2lsbCBXaWR0aCIsIlcgU2tpbGwgV2lkdGgiLCJFIFNraWxsIFdpZHRoIiwiUiBTa2lsbCBXaWR0aCIsIkRyYXcgRGFtYWdlIEluZGljYXRvciIsDQoiTGFzdGhpdCBLZXkiLCJDbGljayBGb3IgSW5zdHJ1Y3Rpb25zIiwiVXNlIGlmIG5lZWRlZCIsIkNsZWFyIEtleSBTZXR0aW5ncyIsIlsiIC4uIG15SGVyby5jaGFyTmFtZS4uICJdIC0gQW50aSBHYXAtQ2xvc2UiLCJHYXAtQ2xvc2UgV2l0aCBXIFNraWxsIiwiSHVtYW5pemVyIGZvciBBbnRpIEdhcCBDbG9zZSIsDQoiQXV0byBXIFNldHRpbmdzIiwiVXNlIEF1dG8gVyAiLCJBdXRvIFcgaWYgZW5lbXkgPiIsIlIgLVRhcmdldCBkcmF3IiwiUiAtVGFyZ2V0IENvbG9yIiwiUiAtVGFyZ2V0IFdpZHRoIg0KfQ0KbG9jYWwgbG9jX2Nob29zZW4gPSB7fQ0KbG9jX2Nob29zZW4gPSBsb2NfZW5kIC0tIEZhbGxiYWNrIG9uIGVycm9ycw0KICAgICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gQXV0byBVcGRhdGUgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgbG9jYWwgdmVyc2lvbiA9IDMuMQ0KICBsb2NhbCBhdXRob3IgPSAiRW5zdWx1eW4iDQogIGxvY2FsIFNDUklQVF9OQU1FID0gIktleWJvYXJkTWFzdGVyU2VyaWVzIg0KICBsb2NhbCBBVVRPVVBEQVRFID0gdHJ1ZQ0KICBsb2NhbCBVUERBVEVfSE9TVCA9ICJyYXcuZ2l0aHViLmNvbSINCiAgbG9jYWwgVVBEQVRFX1BBVEggPSAiL0xvbnNlbWFyaWEvc2NyaXB0cy9tYXN0ZXIvS2V5Ym9hcmRNYXN0ZXJTZXJpZXMubHVhIi4uIj9yYW5kPSIuLm1hdGgucmFuZG9tKDEsMTAwMDApDQogIGxvY2FsIFVQREFURV9GSUxFX1BBVEggPSBTQ1JJUFRfUEFUSC4uR2V0Q3VycmVudEVudigpLkZJTEVfTkFNRQ0KICBsb2NhbCBVUERBVEVfVVJMID0gImh0dHBzOi8vIi4uVVBEQVRFX0hPU1QuLlVQREFURV9QQVRIDQogIGZ1bmN0aW9uIFNheSh0ZXh0KQ0KICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj5LZXlib2FyZCBNYXN0ZXIgU2VyaWVzOjwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiIgLi4gdGV4dCAuLiAiPC9mb250PiIpDQogIGVuZA0KICBpZiBBVVRPVVBEQVRFIHRoZW4NCiAgICBsb2NhbCBTZXJ2ZXJEYXRhID0gR2V0V2ViUmVzdWx0KFVQREFURV9IT1NULCAiL0xvbnNlbWFyaWEvc2NyaXB0cy9tYXN0ZXIvdmVyc2lvbi9CdW5kbGUudmVyc2lvbiIpDQogICAgaWYgU2VydmVyRGF0YSB0aGVuDQogICAgICBTZXJ2ZXJWZXJzaW9uID0gdHlwZSh0b251bWJlcihTZXJ2ZXJEYXRhKSkgPT0gIm51bWJlciIgYW5kIHRvbnVtYmVyKFNlcnZlckRhdGEpIG9yIG5pbA0KICAgICAgaWYgU2VydmVyVmVyc2lvbiB0aGVuDQogICAgICAgIGlmIHRvbnVtYmVyKHZlcnNpb24pIDwgU2VydmVyVmVyc2lvbiB0aGVuDQogICAgICAgICAgU2F5KCJOZXcgdmVyc2lvbiBhdmFpbGFibGUgIi4uU2VydmVyVmVyc2lvbikNCiAgICAgICAgICBTYXkoIlVwZGF0aW5nLCBwbGVhc2UgZG9uJ3QgcHJlc3MgRjkiKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgRG93bmxvYWRGaWxlKFVQREFURV9VUkwsIFVQREFURV9GSUxFX1BBVEgsIGZ1bmN0aW9uICgpIFNheSgiU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQuICgiLi52ZXJzaW9uLi4iID0+ICIuLlNlcnZlclZlcnNpb24uLiIpLCBwcmVzcyBGOSB0d2ljZSB0byBsb2FkIHRoZSB1cGRhdGVkIHZlcnNpb24uIikgZW5kKSBlbmQsIDMpDQogICAgICAgIGVsc2UNCiAgICAgICAgICBTYXkoIi1XZWxjb21lLCBZb3UgaGF2ZSBnb3QgdGhlIGxhdGVzdCB2ZXJzaW9uICh2Ii4uU2VydmVyVmVyc2lvbi4uIikgb2YgIi4uU2NyaXB0bmFtZS4uIiAsIHVwZGF0ZWQgYXQgKCIuLmRhdGUuLiIpIGJ5ICIgLi4gYXV0aG9yKQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgIGVsc2UgDQogICAgICBTYXkoIkVycm9yIGRvd25sb2FkaW5nIHZlcnNpb24gaW5mbyIpDQogICAgZW5kDQogIGVuZA0KICAgICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8IEtleU1hc3RlckxpYiBEb3dubG9hZCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGlmIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiS2V5Ym9hcmRNYXN0ZXJMaWIubHVhIikgdGhlbg0KICAgIHJlcXVpcmUoIktleWJvYXJkTWFzdGVyTGliIikNCiAgZWxzZQ0KICBza2lubG9hZCA9IHRydWUNCiAgICBEZWxheUFjdGlvbihEb3dubG9hZEZpbGUsIDAsIHsNCiAgICAgICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vTG9uc2VtYXJpYS9zY3JpcHRzL21hc3Rlci9LZXlib2FyZE1hc3RlckxpYi5sdWEiLA0KICAgICAgTElCX1BBVEguLiJcXEtleWJvYXJkTWFzdGVyTGliLmx1YSIsDQogICAgICBmdW5jdGlvbiAoKQ0KICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiIzAwRkZGRlwiPjxiPltLZXlib2FyZE1hc3RlckxpYl08L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5LZXlib2FyZE1hc3RlckxpYi5sdWEgaXMgbmVjZXNzZXJ5LCBwbGVhc2Ugd2FpdCB3aGlsZSBkb3dubG9hZGluZy48L2ZvbnQ+IikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpcHJpbnQoIjxmb250IGNvbG9yPVwiIzAwRkZGRlwiPjxiPltLZXlib2FyZE1hc3RlckxpYl08L2I+PC9mb250PiA8Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5LZXlib2FyZE1hc3RlckxpYi5sdWEgaGFzIGJlZW4gZG93bmxvYWRlZCwgUGxlYXNlIHJlbG9hZCAoMnhGOSk8L2ZvbnQ+IikgZW5kLCA1LjUpDQogICAgICBlbmQNCiAgICB9KQ0KICBlbmQNCiAgICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBPbmxvYWQgRnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGZ1bmN0aW9uIE9uTG9hZCgpDQogICAgICAgICAgaWYgbm90IFJlcXVpcmVTaW1wbGVMaWIoKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICBpdGVtZml4KCkNCiAgICAgICAgIHJlYWRjZmcoKQ0KICAgICAgICAgY2huZ2xhbmcoKQ0KICAgICAgICAgICBpZiBfR1tteUhlcm8uY2hhck5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICAgIF9HW215SGVyby5jaGFyTmFtZV0oKQ0KICAgICAgICAgICAgICAgICAtLSBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFNraW4gSGFjayBjdXJyZW50bHkgZGlzYWJsZWQgdW50aWwgdGhlIG5leHQgdXBkYXRlIikgZW5kLCAxNCkNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+IDpUaGlzIGNoYW1waW9uIGlzIG5vdCBzdXBwb3J0ZWQuIEN1cnJlbnRseSBzdXBwb3J0ZWQgY2hhbXBpb25zIGFyZTogIi4ubGlzdC4uIiAiICkNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+RmVlbCBmcmVlIHRvIGNoZWNrIG15IGZvcnVtIHRvcGljIGFuZCBhc2sgYSBuZXcgY2hhbXBpb24gb3IgZ2l2ZSBmZWVkYmFjayIpIGVuZCwgMC41KQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj4iLi5saW5rLi4iIikgZW5kLCAwLjUpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gU2NyaXB0U3RhdHVzLk5ldCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGFzc2VydChsb2FkKEJhc2U2NERlY29kZSgiRzB4MVlWSUFBUVFFQkFnQUdaTU5DaG9LQUFBQUFBQUFBQUFBQVFJS0FBQUFCZ0JBQUVGQUFBQWRRQUFCQmtCQUFHVUFBQUFLUUFDQkJrQkFBR1ZBQUFBS1FJQ0JId0NBQUFRQUFBQUVCZ0FBQUdOc1lYTnpBQVFOQUFBQVUyTnlhWEIwVTNSaGRIVnpBQVFIQUFBQVgxOXBibWwwQUFRTEFBQUFVMlZ1WkZWd1pHRjBaUUFDQUFBQUFnQUFBQWdBQUFBQ0FBb3RBQUFBaGtCQUFNYUFRQUFHd1VBQUJ3RkJBa0ZCQVFBZGdRQUJSc0ZBQUVjQndRS0JnUUVBWFlFQUFZYkJRQUNIQVVFRHdjRUJBSjJCQUFIR3dVQUF4d0hCQXdFQ0FnRGRnUUFCQnNKQUFBY0NRUVJCUWdJQUhZSUFBUllCQWdMZEFBQUJuWUFBQUFxQUFJQUtRQUNGaGdCREFNSEFBZ0NkZ0FBQkNvQ0FoUXFBdzRhR0FFUUF4OEJDQU1mQXd3SGRBSUFBbllBQUFBcUFnSWVNUUVRQUFZRUVBSjFBZ0FHR3dFUUE1UUFBQUoxQUFBRWZBSUFBRkFBQUFBUUZBQUFBYUhkcFpBQUVEUUFBQUVKaGMyVTJORVZ1WTI5a1pRQUVDUUFBQUhSdmMzUnlhVzVuQUFRREFBQUFiM01BQkFjQUFBQm5aWFJsYm5ZQUJCVUFBQUJRVWs5RFJWTlRUMUpmU1VSRlRsUkpSa2xGVWdBRUNRQUFBRlZUUlZKT1FVMUZBQVFOQUFBQVEwOU5VRlZVUlZKT1FVMUZBQVFRQUFBQVVGSlBRMFZUVTA5U1gweEZWa1ZNQUFRVEFBQUFVRkpQUTBWVFUwOVNYMUpGVmtsVFNVOU9BQVFFQUFBQVMyVjVBQVFIQUFBQWMyOWphMlYwQUFRSUFBQUFjbVZ4ZFdseVpRQUVDZ0FBQUdkaGJXVlRkR0YwWlFBQUJBUUFBQUIwWTNBQUJBY0FBQUJoYzNObGNuUUFCQXNBQUFCVFpXNWtWWEJrWVhSbEFBTUFBQUFBQUFEd1B3UVVBQUFBUVdSa1FuVm5jM0JzWVhSRFlXeHNZbUZqYXdBQkFBQUFDQUFBQUFnQUFBQUFBQU1GQUFBQUJRQUFBQXdBUUFDQlFBQUFIVUNBQVI4QWdBQUNBQUFBQkFzQUFBQlRaVzVrVlhCa1lYUmxBQU1BQUFBQUFBQUFRQUFBQUFBQkFBQUFBUUFRQUFBQVFHOWlablZ6WTJGMFpXUXViSFZoQUFVQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUNBQUFBQUFBQUFBQkFBQUFCUUFBQUhObGJHWUFBUUFBQUFBQUVBQUFBRUJ2WW1aMWMyTmhkR1ZrTG14MVlRQXRBQUFBQXdBQUFBTUFBQUFFQUFBQUJBQUFBQVFBQUFBRUFBQUFCQUFBQUFRQUFBQUVBQUFBQkFBQUFBVUFBQUFGQUFBQUJRQUFBQVVBQUFBRkFBQUFCUUFBQUFVQUFBQUZBQUFBQmdBQUFBWUFBQUFHQUFBQUJnQUFBQVVBQUFBREFBQUFBd0FBQUFZQUFBQUdBQUFBQmdBQUFBWUFBQUFHQUFBQUJnQUFBQVlBQUFBSEFBQUFCd0FBQUFjQUFBQUhBQUFBQndBQUFBY0FBQUFIQUFBQUJ3QUFBQWNBQUFBSUFBQUFDQUFBQUFnQUFBQUlBQUFBQWdBQUFBVUFBQUJ6Wld4bUFBQUFBQUF0QUFBQUFnQUFBR0VBQUFBQUFDMEFBQUFCQUFBQUJRQUFBRjlGVGxZQUNRQUFBQTRBQUFBQ0FBMFhBQUFBaHdCQUFJeEFRQUVCZ1FBQVFjRUFBSjFBQUFLSEFFQUFqQUJCQVFGQkFRQkhnVUVBZ2NFQkFNY0JRZ0FCd2dFQVFBS0FBSUhDQVFER1FrSUF4NExDQlFIREFnQVdBUU1DblVDQUFZY0FRQUNNQUVNQm5VQUFBUjhBZ0FBTkFBQUFCQVFBQUFCMFkzQUFCQWdBQUFCamIyNXVaV04wQUFRUkFBQUFjMk55YVhCMGMzUmhkSFZ6TG01bGRBQURBQUFBQUFBQVZFQUVCUUFBQUhObGJtUUFCQXNBQUFCSFJWUWdMM041Ym1NdEFBUUVBQUFBUzJWNUFBUUNBQUFBTFFBRUJRQUFBR2gzYVdRQUJBY0FBQUJ0ZVVobGNtOEFCQWtBQUFCamFHRnlUbUZ0WlFBRUpnQUFBQ0JJVkZSUUx6RXVNQTBLU0c5emREb2djMk55YVhCMGMzUmhkSFZ6TG01bGRBMEtEUW9BQkFZQUFBQmpiRzl6WlFBQUFBQUFBUUFBQUFBQUVBQUFBRUJ2WW1aMWMyTmhkR1ZrTG14MVlRQVhBQUFBQ2dBQUFBb0FBQUFLQUFBQUNnQUFBQW9BQUFBTEFBQUFDd0FBQUFzQUFBQUxBQUFBREFBQUFBd0FBQUFOQUFBQURRQUFBQTBBQUFBT0FBQUFEZ0FBQUE0QUFBQU9BQUFBQ3dBQUFBNEFBQUFPQUFBQURnQUFBQTRBQUFBQ0FBQUFCUUFBQUhObGJHWUFBQUFBQUJjQUFBQUNBQUFBWVFBQUFBQUFGd0FBQUFFQUFBQUZBQUFBWDBWT1ZnQUJBQUFBQVFBUUFBQUFRRzlpWm5WelkyRjBaV1F1YkhWaEFBb0FBQUFCQUFBQUFRQUFBQUVBQUFBQ0FBQUFDQUFBQUFJQUFBQUpBQUFBRGdBQUFBa0FBQUFPQUFBQUFBQUFBQUVBQUFBRkFBQUFYMFZPVmdBPSIpLCBuaWwsICJidCIsIF9FTlYpKSgpIFNjcmlwdFN0YXR1cygiVEdKSk9LSEdGSkYiKSANCg0KICAgZnVuY3Rpb24gY2huZ2xhbmcoKQ0KICAgICAgIC0tIHByaW50ICJkZW5lbTEyMyINCiAgICAgICAgaWYgbGFuZyA9PSAiZW5nIiB0aGVuDQogICAgICAgICAgICAgICAgbG9jX2Nob29zZW4gPSB7fQ0KICAgICAgICAgICAgICAgIGxvY19jaG9vc2VuID0gbG9jX2VuZw0KICAgICAgICBlbHNlaWYgbGFuZyA9PSAidHIiIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NfY2hvb3NlbiA9IHt9DQogICAgICAgICAgICAgICAtLSBwcmludCAiYXNkIg0KICAgICAgICAgICAgICAgIGxvY19jaG9vc2VuID0gbG9jX3RyDQogICAgICAgICAgICAgICAgZWxzZWlmIGxhbmcgPT0gImdyIiB0aGVuDQogICAgICAgICAgICAgICAgbG9jX2Nob29zZW4gPSB7fQ0KICAgICAgICAgICAgICAgIC0tcHJpbnQgImFzZCINCiAgICAgICAgICAgICAgICBsb2NfY2hvb3NlbiA9IGxvY19ncg0KICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcHJpbnQoIkVycm9yIGluIExvY2FsaXphdGlvbiBnb3Q6ICIuLmxhbmcpDQogICAgICAgIGVuZA0KZW5kDQpmdW5jdGlvbiByZWFkY2ZnKCkNCiAgICAgICAtLSBwcmludCgiUmVhZCBmaWxlIikNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInIiKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAgcHJpbnQoIkNyZWF0aW5nIEZpcnN0IFRpbWUgQ29uZmlnIikNCiAgICAgICAgICAgICAgICBMZWJsYW5jOndyaXRlY2ZnKCJmdGMiKQ0KICAgICAgICAgICAgICAgIFZpa3Rvcjp3cml0ZWNmZygiZnRjIikNCiAgICAgICAgICAgICAgICBBa2FsaTp3cml0ZWNmZygiZnRjIikNCiAgICAgICAgICAgICAgICBEaWFuYTp3cml0ZWNmZygiZnRjIikNCiAgICAgICAgICAgICAgICBMaXNzYW5kcmE6d3JpdGVjZmcoImZ0YyIpDQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KICAgICAgICBmb3IgbGluZSBpbiBmaWxlOmxpbmVzKCkgZG8gICAgICAgICAgICANCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGFuZyA9IGxpbmUNCiAgICAgICAgICAgICAgICAgICAgICAgLS0gcHJpbnQoIlJlYWQ6ICIuLmxhbmcpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBMZWJsYW5jIFN0YXJ0LSBWYXJpYWJsZXMgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KIGNsYXNzICJMZWJsYW5jIg0KICBmdW5jdGlvbiBMZWJsYW5jOl9faW5pdCgpDQogIHNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDUyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzcT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0KICAgc2VsZi50c3c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDYwMCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzZT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTI1LCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA5MjUsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgIHNlbGYudHNnPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA5NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgICBzZWxmLlFTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9RLCBEYW1hZ2VOYW1lID0gIlEiLCBSYW5nZSA9IDcwMCwgV2lkdGggPSAxLCBEZWxheSA9IDAsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gNjAwLCBXaWR0aCA9IDEyNSwgRGVsYXkgPSAwLjUsIFNwZWVkID0gMTMwMCwgUmFkaXVzID0gMjUwICwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuRVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX0UsIERhbWFnZU5hbWUgPSAiRSIsIFJhbmdlID0gOTI1LCBXaWR0aCA9IDU1LCBEZWxheSA9IDAuMjUsIFNwZWVkID0gMTYwMCwgQ29sbGlzaW9uID0gdHJ1ZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID02MDAsIFdpZHRoID0gMTI1LCBEZWxheSA9IDAuNSwgU3BlZWQgPSAxMzAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgc2VsZi5JZ25pdGUgPSBfU3BlbGwoe1Nsb3QgPSBGaW5kU3VtbW9uZXJTbG90KCJzdW1tb25lcmRvdCIpLCBEYW1hZ2VOYW1lID0gIklHTklURSIsIFJhbmdlID0gNjAwLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLmxlYmxhbmNXLCBzZWxmLmxlYmxhbmNJbWFnZSwgc2VsZi5jbG9uZUlkID0gbmlsLCBuaWwsIG5pbA0KICAtLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgICAgc2VsZi5lbmVteU1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0VORU1ZLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5hbGx5TWluaW9ucyAgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0FMTFksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLm90aGVyTWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fT1RIRVIsICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmOkxvYWRNZW51KCkgDQogICAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICAgICAgTGFzdF9MZXZlbFNwZWxsID0gMA0KICAgICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpUaWNrKCkgZW5kKQ0KICAgICAgICBBZGRVbmxvYWRDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VW5sb2FkKCkgZW5kICkNCiAgICBBZGREcmF3Q2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOkRyYXcoKSBlbmQpDQogICAgQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAgIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgICAtLUFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAgIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAgIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYsIHN0YWNrcykgc2VsZjpVcGRhdGVCdWZmKHVuaXQsIGJ1ZmYsIHN0YWNrcykgZW5kKQ0KICAgIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgICBlbmQNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgTWVudSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogICAgICBmdW5jdGlvbiBMZWJsYW5jOndyaXRlY2ZnKHBhcmFtKQ0KICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihTQ1JJUFRfUEFUSC4uIlxcIi4uImNvbmZpZy5jZmciLCAidyIpDQogICAgICAgIGlmIG5vdCBmaWxlIHRoZW4NCiAgICAgICAgICAgICAgIC0tIHByaW50KCJFcnJvciBpbiBXcml0ZSBDRkciKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgcGFyYW0gfj0gImZ0YyIgdGhlbg0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgICAgICAgIC0tcHJpbnQoIldyaXR0ZW46ICIuLmF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKCJlbmciKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIlc6IEVuZ2xpc2giKQ0KICAgICAgICBlbmQNCiAgICAgICAgZmlsZTpjbG9zZSgpDQplbmQNCiAgICAgIGZ1bmN0aW9uIExlYmxhbmM6TG9hZE1lbnUoKQ0KICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIFsiIC4uIG15SGVyby5jaGFyTmFtZS4uIl0iICwibWVudSIpDQogIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzFdLCAiY29tYm8iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiZ2FwY2xvc2UiLCAiVXNlIFcgYXMgYSBnYXBjbG9zZSAoIEJldGEgKSIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzExNl0sIGxvY19jaG9vc2VuWzExN10sIGxvY19jaG9vc2VuWzExOF0sIGxvY19jaG9vc2VuWzExOV0gLCJXPlI+UT5FIiwiVz5RPlI+RSIsbG9jX2Nob29zZW5bMTIwXX0pDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTIxXSwgInR1cm53IikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oIndiYWNraHAiLCBsb2NfY2hvb3NlblsxNzFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTczXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oImhwIixsb2NfY2hvb3NlblsxMDRdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3YmFja2NwIiwgbG9jX2Nob29zZW5bMTc2XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNzJdLGxvY19jaG9vc2VuWzE3M10sbG9jX2Nob29zZW5bMTc0XX0pDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJlbmVteSIsbG9jX2Nob29zZW5bMTc1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxMzBdLCBsb2NfY2hvb3NlblsxMzFdICwgbG9jX2Nob29zZW5bMTMyXSxsb2NfY2hvb3NlblsxMzNdIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE3N10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzEiLGxvY19jaG9vc2VuWzEyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzIiLGxvY19jaG9vc2VuWzEyM10sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzMiLGxvY19jaG9vc2VuWzEyNF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzQiLGxvY19jaG9vc2VuWzEyNV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzUiLGxvY19jaG9vc2VuWzE3OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzYiLGxvY19jaG9vc2VuWzE3OV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzciLGxvY19jaG9vc2VuWzEyNl0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOV0sICJoYXJhc3MiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsxMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bMTFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE0XSwgImZhcm0iKQ0KICAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNV0sImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsxNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsxN10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ3Y291bnQiLGxvY19jaG9vc2VuWzE4MV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVIiLGxvY19jaG9vc2VuWzE5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJyY291bnQiLGxvY19jaG9vc2VuWzE4M10sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIldNYW5hIixsb2NfY2hvb3NlblsxODZdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUk1hbmEiLGxvY19jaG9vc2VuWzE4OF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMF0sImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUiIsbG9jX2Nob29zZW5bMjRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIldNYW5hIixsb2NfY2hvb3NlblsxODZdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIlJNYW5hIixsb2NfY2hvb3NlblsxODhdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzI1XSwibGFzdGhpdCIpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImF1dG9sYXN0aGl0Iixsb2NfY2hvb3NlblsxODldLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyOF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImxhc3RoaXRsb2dpYyIsbG9jX2Nob29zZW5bMTkxXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNzJdLGxvY19jaG9vc2VuWzE5MF0sbG9jX2Nob29zZW5bMTc0XX0pDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblszMF0sImVzY2FwZSIpDQogICAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMzJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVIiLGxvY19jaG9vc2VuWzM0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzM1XSwgImtpbGxzdGVhbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMzddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzM4XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblszOV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNDBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUVciLCBsb2NfY2hvb3NlblsxMjddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0Ml0sICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5Ml0sICJhdXRvcG90IikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJlbmFibGVhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQ0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2VoZyIsIGxvY19jaG9vc2VuWzQ1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlYmciLCBsb2NfY2hvb3Nlbls0Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoNCiAgICAgICAgDQogICAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNDddLCAidmlwIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJwYWNrZXQiLGxvY19jaG9vc2VuWzQ4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzEiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3Nlbls0OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1MF0sICJsZXZlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bNTJdLCBTQ1JJUFRfUEFSQU1fTElTVCwgNywge2xvY19jaG9vc2VuWzU4XSwgbG9jX2Nob29zZW5bNTldLGxvY19jaG9vc2VuWzYwXSxsb2NfY2hvb3Nlbls2MV0sbG9jX2Nob29zZW5bNjJdLCBsb2NfY2hvb3Nlbls2M10sIGxvY19jaG9vc2VuWzY0XSAgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTNdLCAic2tpbiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzU0XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCdzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJywgbG9jX2Nob29zZW5bNTddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgc2tpbk1ldGFbbXlIZXJvLmNoYXJOYW1lXSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm81IiwgbG9jX2Nob29zZW5bNTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm81IiwgIlNraW4gSGFjayB0ZW1wb3JhcnkgZGlzYWJsZWQgdW50aWwgbmV4dCB1cGRhdGUuIC4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk1XSwgImFudGlhZmsiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuYW50aWFmazphZGRQYXJhbSgiYW50aWFmayIsbG9jX2Nob29zZW5bMTk2XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpIA0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgbG9jX2Nob29zZW5bNTZdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBlbmQNCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2NV0sIm90aGVyIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTaG93IERhbWFnZSBPbiBIcCBCYXIiLCAiSFBCQVIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyLkhQQkFSOmFkZFBhcmFtKCJrZXkiLCJPTi9PRkYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY2XSwgImRyYXciKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJxZHJhdyIsbG9jX2Nob29zZW5bNjddLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJ3ZHJhdyIsbG9jX2Nob29zZW5bNjhdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJlZHJhdyIsbG9jX2Nob29zZW5bNjldLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJyZHJhdyIsbG9jX2Nob29zZW5bNzBdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJhYWRyYXciLGxvY19jaG9vc2VuWzcxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInJ0ZHJhdyIsbG9jX2Nob29zZW5bMTk3XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk4XSwgImNvbG9yIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIlFjb2xvciIsIGxvY19jaG9vc2VuWzE5OV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIldjb2xvciIsIGxvY19jaG9vc2VuWzIwMF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkVjb2xvciIsIGxvY19jaG9vc2VuWzIwMV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIlJjb2xvciIsIGxvY19jaG9vc2VuWzIwMl0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkUyY29sb3IiLCBsb2NfY2hvb3NlblsyMDNdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJBQWNvbG9yIiwgbG9jX2Nob29zZW5bMjA0XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgidGFyZ2V0c2VsZWN0IiwgbG9jX2Nob29zZW5bMjA1XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwNl0sICJ3aWR0aCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJRd2lkdGgiLCBsb2NfY2hvb3NlblsyMTBdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJXd2lkdGgiLCBsb2NfY2hvb3NlblsyMTFdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFd2lkdGgiLCBsb2NfY2hvb3NlblsyMTJdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJSd2lkdGgiLCBsb2NfY2hvb3NlblsyMTNdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFMndpZHRoIiwgbG9jX2Nob29zZW5bMjA3XSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiQUF3aWR0aCIsIGxvY19jaG9vc2VuWzIwOF0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlNUd2lkdGgiLCBsb2NfY2hvb3NlblsyMDldLCA0LCA2LCAxLCAxMCwgMCkgICANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oImNvbWJvbW9kZSIsbG9jX2Nob29zZW5bNzJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzczXSwgInBlcm1hIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIucGVybWE6YWRkUGFyYW0oInBlcm1hIixsb2NfY2hvb3Nlbls3NF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXQiLGxvY19jaG9vc2VuWzc1XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oImRhbWFnZSIsbG9jX2Nob29zZW5bMjE0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldGNhbCIsbG9jX2Nob29zZW5bNzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3N10sInRhcmdldHNlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0syIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oInRzIixsb2NfY2hvb3Nlbls3OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgc2VsZi50cy5uYW1lICA9ICJMZWJsYW5jIg0KICAgICAgc2VsZi50c3EubmFtZSA9ICJMZWJsYW5jUSINCiAgICAgIHNlbGYudHN3Lm5hbWUgPSAiTGVibGFuY1ciDQogICAgICBzZWxmLnRzZS5uYW1lID0gIkxlYmxhbmNFIg0KICAgICAgc2VsZi50c3IubmFtZSA9ICJMZWJsYW5jUiINCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNxKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHN3KQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNlKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNyKSANCiAgICAgIA0KICAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzldLCAiS2V5cyIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCBsb2NfY2hvb3Nlbls4MF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLCBsb2NfY2hvb3Nlbls4MV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oIm9ubHllIiwgbG9jX2Nob29zZW5bMTI4XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTixmYWxzZSwgc3RyaW5nLmJ5dGUoIk8iKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJvbW9kZSIsIGxvY19jaG9vc2VuWzEyOV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sZmFsc2UsIHN0cmluZy5ieXRlKCIyIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzQiLCBsb2NfY2hvb3Nlbls4Ml0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNza2V5IiwgbG9jX2Nob29zZW5bODNdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICAgLS0gc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNzdG9nbGVrZXkiLCAiSGFyYXNzIFRvZ2xlIEtleSIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJUIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzUiLCBsb2NfY2hvb3Nlbls4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4NV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5IiwgIkxhc3RoaXQgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzYiLCBsb2NfY2hvb3Nlbls4N10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgbG9jX2Nob29zZW5bODhdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0syIiwgbG9jX2Nob29zZW5bODldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTEwXSwgIktleXMyIikNCiAgICAgIA0KICAgICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5czIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImxhbmciLCBsb2NfY2hvb3NlblsxNjVdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE2Nl0sIGxvY19jaG9vc2VuWzE2N10sbG9jX2Nob29zZW5bMTY4XX0pDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluc3RydWN0IiwgbG9jX2Nob29zZW5bMjE2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICANCiAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYS5wZXJtYSB0aGVuDQogICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZzpwZXJtYVNob3coImluZm9ib3giKSBlbmQsIDEpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJjb21ib2tleSIpICBlbmQsIDEuMikNCiAgICAgIC0tc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImhhcmFzc3RvZ2xla2V5IikNCiAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKSAgZW5kLCAxLjIpDQogICAgZW5kDQogIGVuZA0KIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgRHJhd2luZ3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvbW9kZSgpDQogIGxvY2FsIGRyYXdwb3MgPSBHZXRVbml0SFBCYXJQb3MobXlIZXJvKQ0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAxIHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogUT5FPlc+UiIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDIgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBRPlI+RT5XIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMyB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IEU+UT5XPlIiLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA0IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogRT5XPlE+UiIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA1IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogVz5SPlE+RSIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA2IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogVz5RPlI+RSIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDcgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBSYW5kb20gU2tpbGwgT3JkZXIiLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpEcmF3KCkNCiAgaWYgc2VsZi5Db25maWcub3RoZXIuY29tYm9tb2RlIHRoZW4NCiAgbG9jYWwgZHJhd3BvcyA9IEdldFVuaXRIUEJhclBvcyhteUhlcm8pDQogIHNlbGY6Y29tYm9tb2RlKCkNCiAgZW5kDQogICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjUwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguUXdpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlFjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDYwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLld3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgOTI1LCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguRXdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5FY29sb3IpKSkNCiAgICBlbmQNCiAgICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJkcmF3IGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguUndpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5SY29sb3IpKSkNCiAgICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmFhZHJhdyB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNTUwLCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5BQXdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5BQWNvbG9yKSkpDQogICAgZW5kDQogICAgICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldCBhbmQgc2VsZi5zZWxlY3RlZFRhciB+PSBuaWwgdGhlbg0KICAgICAgICAgRHJhd0NpcmNsZTNEKHNlbGYuc2VsZWN0ZWRUYXIueCwgc2VsZi5zZWxlY3RlZFRhci55LCBzZWxmLnNlbGVjdGVkVGFyLnosIDgwLCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5TVHdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci50YXJnZXRzZWxlY3QpKSkNCmVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucnRkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgIHRoZW4NCiAgIGlmIHNlbGYudHNlLnRhcmdldH49bmlsIHRoZW4NCiAgICAgIERyYXdMaW5lM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueixzZWxmLnRzZS50YXJnZXQueCwgc2VsZi50c2UudGFyZ2V0LnksIHNlbGYudHNlLnRhcmdldC56LHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkUyd2lkdGgsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRTJjb2xvcikpKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogICAgICBpZiB0YXJnZXQudmlzaWJsZSBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBzZWxmLkNvbmZpZy5vdGhlci5kYW1hZ2UgdGhlbg0KICAgICAgICBjdXJyTGluZSA9IDENCiAgICAgICAgRHJhd0xpbmVIUEJhcjIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCIiLCAgdGFyZ2V0LCBjdXJyTGluZSkNCiAgICAgICAgRHJhd0xpbmVIUEJhcihzZWxmOkdldE15RG1nKHRhcmdldCksICJEYW1hZ2UgIiAuLiBtYXRoLnJvdW5kKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSksdGFyZ2V0LGN1cnJMaW5lKQ0KICAgICAgICBjdXJyTGluZSA9IGN1cnJMaW5lICsgMQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXRjYWwgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQogICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBsb2NhbCBkcmF3cG9zPVdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQogICAgICAgIGxvY2FsIGNvbWJvVGV4dCxjb2xvciA9IHNlbGY6R2V0RHJhd3ModGFyZ2V0KQ0KICAgICAgICBpZiBjb21ib1RleHQgdGhlbg0KICAgICAgICAgIERyYXdUZXh0KGNvbWJvVGV4dCwxNSxkcmF3cG9zLngtMjAsZHJhd3Bvcy55LTIwLGNvbG9yKQ0KICAgICAgICBlbmQgDQogICAgICBlbmQgDQogICAgICBlbmQNCiAgICAgaWYgUG9wVXAxIHRoZW4NCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC41MCksIChXSU5ET1dfSCouMTUpLCAoV0lORE9XX0gqLjkpDQogICAgRHJhd0xpbmUodywgaDEvMS4wNSwgdywgaDIvMS45Nywgdy8xLjc1LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd0xpbmUodywgaDEsIHcsIGgyLzIsIHcvMS44LCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIldlbGNvbWUgdG8gS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIDMuMCIpLCBXSU5ET1dfSCouMDI4LCAoV0lORE9XX1cvMiksIChXSU5ET1dfSCouMTgpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSwiY2VudGVyIiwiY2VudGVyIikNCiAgIERyYXdUZXh0QSh0b3N0cmluZygiTGl0dGxlIGluZm9ybWF0YXRpb24gYWJvdXQgS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4xOTQpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkl0cyBhIGJ1bmRsZSB0aGF0IHByb2R1Y2VkIGJ5IGVuc3VsdXluIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJDdXJyZW50bHkgaXQgc3VwcG9ydGVkIG9ubHkgbWlkIGNoYW1wcyAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIyNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgZm9jdXMgUXVhbGl0eSByYXRoZXIgdGhhbiBRdWFudGl0eSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjQwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBuZWVkIHlvdXIgZmVlZGJhY2tzIHRvIGltcHJvdmUgaXQiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI1NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgY2FyZSBldmVyeSBzaW5nbGUgZmVlZGJhY2sgYW5kIHRyeSB0byBhZGQgZXZlcnl0aGluZyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjcwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSG9wZSB5b3UgYXJlIGVuam95IG15IHNjcmlwdC4uIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yODUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJZb3UgY2FuIGNoYW5nZSBldmVyeSBzZXR0aW5ncyB0byB5b3VyIGxpa2UgOikiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMwMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRpZCB5b3UgbGlrZSBteSBzY3JpcHQgPiBVcHZvdGUgbWUgb24gc2NyaXB0c3RhdHVzIGFuZCBvbiBmb3J1bSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzE1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRG9uJ3QgZm9yZ2V0IHRoZXNlIGFyZSBWSVA7IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMzApLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQW50aS1BZmsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM0NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQXV0byBMZXZlbGVyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzYwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBTa2luIENoYW5nZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNzUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNDkpLCAoV0lORE9XX0gqLjcwKSwgKFdJTkRPV19IKi43NSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjc3NSwgdywgaDIvMS42OCwgdyouMTEsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3UmVjdGFuZ2xlQnV0dG9uKFdJTkRPV19XKjAuNDY3LCBXSU5ET1dfSC8yLjM3NSwgV0lORE9XX1cqLjA0NywgV0lORE9XX0gqLjA0MSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiT0siKSwgV0lORE9XX0gqLjAyLCAoV0lORE9XX1cvMikqLjk4LCAoV0lORE9XX0gvMi4zNzUpLCBBUkdCKDI1NSwgMCwgMCwgMCApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zOTUpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1cnJ5LSBGb3IgdGhpcyBhd2Vzb21lIHBvcHVwIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi40MTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpIA0KICBlbmQNCiAgICAgIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkdldERyYXdzKHRhcmdldCkNCmxvY2FsIHFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KbG9jYWwgcTJkYW1hZ2UgPXNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KbG9jYWwgd2RhbWFnZSA9IHNlbGY6R2V0V0RtZyh0YXJnZXQpDQpsb2NhbCBlZGFtYWdlID0gc2VsZjpHZXRFRG1nKHRhcmdldCkNCmxvY2FsIHJkYW1hZ2UgPSBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KbG9jYWwgSWRtZz0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogIA0KICBpZiBxZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdXJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHdkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdXICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIGVkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBlZGFtYWdlICsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgIGVsc2VpZiByZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHJkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSArZWRhbWFnZSAgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSArZWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIGVkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBlZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIFcnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIFcgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK2VkYW1hZ2U+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrZWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrcmRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStxMmRhbWFnZStlZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrcmRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK2VkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK2VkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2Urd2RhbWFnZStlZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnS2lsbCB3aXRoIGZ1bGwgY29tYm8nLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3dkYW1hZ2UrZWRhbWFnZStyZGFtYWdlK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdGdWxsIENvbWJvICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlIA0KICAgIHJldHVybiAiQ2FudCBLaWxsIHlldCIsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVuZCANCmVuZA0KIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgVGljayBGdW5jdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGZ1bmN0aW9uIExlYmxhbmM6VGljaygpDQogICAgICAgc2VsZjphdXRvd2JhY2soKQ0KICAgICAgIHNlbGY6YXV0b3BvdCgpDQogICAgICAgc2VsZjpBbnRpYWZrKCkNCiAgICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgICBzZWxmOmNoZWNrdHMoKQ0KICAgICAgICBzZWxmOml0ZW1zKCkNCiAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6YXV0b2xldmVsKCkgZW5kDQogICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgICAtLXNlbGY6Z2FwY2xvc2UoKQ0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICl0aGVuDQogICAgICBzZWxmOmNvbWJvKCkNCiAgICBlbmQNCiAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYXN0aGl0a2V5IG9yIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5hdXRvbGFzdGhpdCApdGhlbg0KICAgICAgc2VsZjpMYXN0SGl0KCkNCiAgICBlbmQNCiAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5vbmx5ZSAgICl0aGVuDQogICAgICBzZWxmOm9ubHllKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSApdGhlbg0KICAgICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcuaW5zdHJ1Y3QgdGhlbg0KICAgIHNlbGYuQ29uZmlnLmluc3RydWN0ID0gZmFsc2UNCiAgICBQb3BVcDEgPSB0cnVlDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICl0aGVuDQogICAgICBzZWxmOmVzY2FwZSgpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICl0aGVuDQogICAgIHNlbGY6SnVuZ2xlQ2xlYXIoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApIHRoZW4NCiAgICAgIHNlbGY6a2lsbHN0ZWFsKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgICkgdGhlbg0KICAgICAgc2VsZjpoYXJhc3MoKQ0KICAgIGVuZA0KICAgICAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6YXV0b3diYWNrKCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubmFtZSA9PSAibGVibGFuY3NsaWRlcmV0dXJuIiB0aGVuICANCiAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncud2JhY2tocCA9PSAxIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IHRoZW4NCiAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5jb21iby50dXJudy5ocCAvIDEwMCkgdGhlbiANCiAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgIGVuZA0KICAgZW5kIA0KICAgZW5kIA0KICAgICAgICAgZnVuY3Rpb24gTGVibGFuYzpBbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmay5hbnRpYWZrIHRoZW4gcmV0dXJuIGVuZA0KICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQogIG15SGVybzpNb3ZlVG8obXlIZXJvLngsIG15SGVyby56KQ0KZW5kDQogICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLm5hbWUgPT0gImxlYmxhbmNzbGlkZXJldHVybiIgdGhlbiAgDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53YmFja2NwID09IDEgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LmVuZW15ID09IDEgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDU1MCkgPj0gMiB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy5lbmVteSA9PSAyIHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg1NTApID49IDMgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcuY29tYm8udHVybncuZW5lbXkgPT0gMyB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNTUwKSA+PSA0IHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1cpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LmVuZW15ID09IDQgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDU1MCkgPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICBlbmQNCmZ1bmN0aW9uIExlYmxhbmM6R2V0UURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMzAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjQpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDMwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsICogMjUpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuNCkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIExlYmxhbmM6R2V0V0RtZyh0YXJnZXQpDQogIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kIA0KICAgaWYgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoNDUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgKiA0MCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC42KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6R2V0RURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgIGlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gMiooMTUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiAyNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC41KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkdldEUyRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMTUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiAyNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC41KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gTGVibGFuYzpHZXRSRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lID09ICJMZWJsYW5jU291bFNoYWNrbGVNIiB0aGVuIA0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiAxMDApICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKi42KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lID09ICJMZWJsYW5jU2xpZGVNIiB0aGVuIA0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiAxNTApICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuOSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZSA9PSAiTGVibGFuY0NoYW9zT3JiTSIgdGhlbiANCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoKG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICogMTAwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkpICogLjYpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6R2V0TXlEbWcodGFyZ2V0KQ0KICAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkgKyBzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRFRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpKyBzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Y2hlY2t0cygpDQogICAgICAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZzp1cGRhdGUoKQ0KICBpZiBub3Qgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igbm90IHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuDQogIHRhcmdldCA9IHNlbGYudHN3LnRhcmdldA0KICBlbHNlaWYgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igc2VsZi5zZWxlY3RlZFRhciB0aGVuDQogIHRhcmdldCA9IHNlbGYuc2VsZWN0ZWRUYXINCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gTGVibGFuYzpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6b25seWUoKQ0KICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMub25seWUgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RShzZWxmLnRzZS50YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgQ29tYm8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvKCkNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9RRVdSKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvUVJFVygpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAzIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib0VRV1IoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNCBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9FV1FSKCkNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA1IGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib1dSUUUoKQ0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDYgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvV1FSRSgpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA3IGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpyYW5kb21jb21ibygpDQogIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICl0aGVuDQogICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9RUkVXKCkNCiAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzIgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRUih0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UVJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RFVyh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LncyIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0UVIodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFSdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0RVdCKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib0VXUVIoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NCB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdEVXKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpFV3VzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFFSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc0IHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVdCKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpFV3VzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFFSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib0VRV1IoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MyB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdEVRKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpFUXVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFdSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LnczIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVEodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVRdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0V1JCKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib1FFV1IoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MSB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdFFFKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRRXVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFdSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzEgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRRSh0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UUV1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RXUkIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9XUlFFKCkNCiAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzUgdGhlbg0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgIHRoZW4NCiAgc2VsZjpDYXN0V1IyKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UjJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RRRSh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc1IHRoZW4NCiAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgdGhlbg0KICBzZWxmOkNhc3RXUkIyKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UjJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RRRSh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogICAgICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvV1FSRSgpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc2IHRoZW4NCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApICB0aGVuDQogIHNlbGY6Q2FzdFdRKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UXVzZWQoKXRoZW4NCiAgc2VsZjpDYXN0UkUodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NiB0aGVuDQogICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIHRoZW4NCiAgc2VsZjpDYXN0V1FCKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UXVzZWQoKXRoZW4NCiAgc2VsZjpDYXN0UkUodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRKHVuaXQpDQogICAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UUUodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFVyh1bml0KQ0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIG5vdCBzZWxmOndVc2VkKCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0RVdCKHVuaXQpDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6cmFuZG9tY29tYm8oKQ0KICAgICAgICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NyB0aGVuDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpICAgICANCiAgICAgICAgICBlbmQNCiAgICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KSAgICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NyB0aGVuDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpICAgICANCiAgICAgICAgICBlbmQNCiAgICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBub3Qgc2VsZjp3VXNlZCgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KSAgICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UVIodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUih1bml0KQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KClhbmQgbm90IHNlbGY6d1VzZWQoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSBhbmQgbm90IHNlbGY6clVzZWQoKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUjIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpYW5kIG5vdCBzZWxmOndVc2VkKCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUSh1bml0KQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KClhbmQgbm90IHNlbGY6d1VzZWQoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RSRSh1bml0KQ0KICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpICAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUkIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIGFuZCBub3Qgc2VsZjpyVXNlZCgpICB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdSQjIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUUIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpICB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRV0goKQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFFXSyh1bml0KQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRVyBhbmQgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVFXIGFuZCBub3Qgc2VsZjp3VXNlZCgpIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0RVEodW5pdCkNCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFcodW5pdCkNCiAgICBzZWxmLldTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0RSh1bml0KQ0KICAgc2VsZi5FU3BlbGw6Q2FzdCh1bml0KQ0KICAgIA0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFIodW5pdCkNCiAgICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0SSh1bml0KQ0KICAgIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6a2lsbHN0ZWFsKCkNCiAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgICBsb2NhbCBkbWdFID0gc2VsZjpHZXRFRG1nKHVuaXQpDQogICAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgZG1nUSA9IHNlbGY6R2V0UURtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzcS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodW5pdCkgIA0KICAgICAgICBlbmQNCiAgICAgICAgIGxvY2FsIGRtZ1FXID0gc2VsZjpHZXRRRG1nKHVuaXQpK3NlbGY6R2V0V0RtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgaGVhbHRoPGRtZ1EgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRVyBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0UVdLKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICAgICAgIGxvY2FsIGRtZ1cgPSBzZWxmOkdldFdEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIG5vdCBzZWxmOndVc2VkKCkgICBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VXIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6aGFyYXNzKCkNCiAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIHRoZW4NCiAgICBzZWxmOkNhc3RRV0goKQ0KICAgICAgZW5kICAgDQogICBlbmQNCiAgIGZ1bmN0aW9uIExlYmxhbmM6TGFuZUNsZWFyKHRhYikgDQogIGxvY2FsIGNsZWFydGFyZ2V0ID0gc2VsZi5jbGVhcnRhcmdldA0KICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuUU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICAgc2VsZjpDYXN0UShjbGVhcnRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLndjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICANCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVcgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuV01hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuV1NwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdENpcmN1bGFyRmFybVBvc2l0aW9uKHNlbGYuV1NwZWxsLlJhbmdlLCBzZWxmLldTcGVsbC5XaWR0aCwgc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnJjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VSIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lID09ICJMZWJsYW5jU2xpZGVNIiBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5STWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5XU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgIGxvY2FsIEJlc3RQb3MsIEJlc3RIaXQgPSBHZXRCZXN0Q2lyY3VsYXJGYXJtUG9zaXRpb24oc2VsZi5XU3BlbGwuUmFuZ2UsIHNlbGYuV1NwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKQ0KICAgICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgYW5kIEJlc3RIaXQgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9SLCBCZXN0UG9zLngsIEJlc3RQb3MueikNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kICAgICANCiAgICAgICAgZW5kICAgDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6TGFzdEhpdCgpDQogICAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgaWYgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0Lmxhc3RoaXRsb2dpYyA9PSAxIHRoZW4NCiAgICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgICAgICAgbG9jYWwgUWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQogIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSAgYW5kIEdldERpc3RhbmNlU3FyKHRhcmdldCkgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgKiBzZWxmLlFTcGVsbC5SYW5nZSBhbmQgUWRhbWFnZSA+PSB0YXJnZXQuaGVhbHRoKSB0aGVuDQogICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICBlbmQNCiAgICAgICAgbG9jYWwgRWRhbWFnZSA9IHNlbGY6R2V0RTJEbWcodGFyZ2V0KQ0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuRU1hbmEgLzEwMCApYW5kICBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuRVNwZWxsLlJhbmdlICogc2VsZi5FU3BlbGwuUmFuZ2UgYW5kIEVkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICBlbHNlaWYgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0Lmxhc3RoaXRsb2dpYyA9PSAyIHRoZW4NCiAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VFIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5FTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLkVTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuUU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlVyBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuV01hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgIHNlbGYuV1NwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5FTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgICBpZihzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUiBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuUk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLlJTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6d1VzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jVyA9IG15SGVybzpHZXRTcGVsbERhdGEoX1cpDQogICAgaWYgbGVibGFuY1cubmFtZSA9PSAibGVibGFuY3NsaWRlcmV0dXJuIiB0aGVuIA0KICAgICAgcmV0dXJuIHRydWUgDQogICAgZWxzZSANCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpyVXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNSID0gbXlIZXJvOkdldFNwZWxsRGF0YShfUikNCiAgICBpZiBsZWJsYW5jUi5uYW1lID09ICJMZWJsYW5jU2xpZGVNIiB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlIydXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNRID0gc2VsZi5SU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNRICkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6UUV1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1EgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuRVNwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jUSBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6V1J1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1EgPSBzZWxmLldTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuUlNwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jUSBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICAgICAgZnVuY3Rpb24gTGVibGFuYzpXUXVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jUSA9IHNlbGYuV1NwZWxsOklzUmVhZHkoKQ0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNRIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogICAgICAgIGZ1bmN0aW9uIExlYmxhbmM6UXVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuUVNwZWxsOklzUmVhZHkoKQ0KICAgIGlmICggbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkVRdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNXID0gc2VsZi5FU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1cgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpFV3VzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jVyA9IHNlbGYuRVNwZWxsOklzUmVhZHkoKQ0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5XU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNXIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6UVJ1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1cgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuUlNwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jVyBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBsb2NhbCBzcGVsbExldmVsID0gMA0KICBmdW5jdGlvbiBMZWJsYW5jOmF1dG9sZXZlbCgpDQppZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDEgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UxID0gICB7IDEsMiwzLDEsMSw0LDEsMiwxLDIsNCwyLDIsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UxKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTIgPSAgIHsgMSwyLDMsMSwxLDQsMSwzLDEsMyw0LDMsMywyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTIpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAzIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMyA9ICB7IDIsMywxLDIsMiw0LDIsMSwyLDEsNCwxLDEsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UzKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNCBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTQgPSAgeyAyLDMsMSwyLDIsNCwyLDMsMiwzLDQsMywzLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNCkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDUgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U1ID0gIHsgMywxLDIsMywzLDQsMywyLDMsMiw0LDIsMiwxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTUpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA2IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDMsMSwyLDMsMyw0LDMsMSwzLDEsNCwxLDEsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogICAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA3IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDIsMSwzLDIsMSw0LDIsMiwxLDMsNCwyLDEsMSwzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6ZXNjYXBlZm9yZ2FwKCkNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmdhcGNsb3NlIGFuZCBub3Qgc2VsZjp3VXNlZCgpIHRoZW4NCiAgcG9zPVZlY3RvcihteUhlcm8pKyhWZWN0b3IodGFyZ2V0KS1WZWN0b3IobXlIZXJvKSk6bm9ybWFsaXplZCgpKnNlbGYuV1NwZWxsLlJhbmdlDQogIENhc3RTcGVsbChfVyxwb3MueCxwb3MueikNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmVzY2FwZSgpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZVcgYW5kIG5vdCBzZWxmOndVc2VkKCkgdGhlbg0KICBDYXN0U3BlbGwoX1csbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSAgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VSIGFuZCBub3QgIHNlbGY6clVzZWQoKSB0aGVuDQogIENhc3RTcGVsbChfUixtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzp3YWxrKCkNCiAgICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Z2FwY2xvc2UoKQ0KaWYgdGFyZ2V0IGFuZCBub3QgdGFyZ2V0LmRlYWQgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBzZWxmOmVzY2FwZWZvcmdhcCgpDQogICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6aXRlbXMoKQ0KICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiSGV4dGVjaEd1bmJsYWRlIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiANCiAgZW5kDQogIGVuZA0KICBsYXN0UG90aW9uID0gMA0KICBmdW5jdGlvbiBMZWJsYW5jOmF1dG9wb3QoKQ0KIGlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQoNCiAgZnVuY3Rpb24gTGVibGFuYzpUQVJHRVRDUygpDQogICAgICBsb2NhbCBUYXJnZXQgPSBuaWwNCiAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgdGhlbiBUYXJnZXQgPSBzZWxmLnNlbGVjdGVkVGFyDQogICAgICBlbHNlIFRhcmdldCA9IHNlbGYudHN3LnRhcmdldA0KICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOlduZE1zZyhNc2csIEtleSkNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5jb21ib21vZGUgdGhlbg0KICBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9IHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljICsxDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID4gNyB0aGVuIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID0gMSBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuICAgICAgDQogICAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgICAgbG9jYWwgbWluRCA9IDEwDQogICAgICAgICAgICAgIGxvY2FsIHN0YXJnZXQgPSBuaWwNCiAgICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQoZW5lbXkpIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpIDw9IG1pbkQgb3Igc3RhcmdldCA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBzdGFyZ2V0ID0gZW5lbXkNCiAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQgICAgIA0KICAgICAgICAgICAgICBpZiBzdGFyZ2V0IGFuZCBtaW5EIDwgNTAwIHRoZW4NCiAgICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRhciA9IG5pbA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5UYXJnZXQgPGI+aXMgbm8gbG9nZXIgc2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBzdGFyZ2V0ICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPk5ldyB0YXJnZXQgPGI+c2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICAgIFBvcFVwMSA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KICAgICAgZW5kDQogICAgICBmdW5jdGlvbiBMZWJsYW5jOlVubG9hZCgpDQogICAgICAgIHNlbGY6d3JpdGVjZmcoKQ0KICAgICAgZW5kDQogICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBBa2FsaSBTdGFydCAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGNsYXNzICJBa2FsaSINCiAgZnVuY3Rpb24gQWthbGk6X19pbml0KCkNCnNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNxPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA2MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzdz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDMyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzZz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTI1LCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSA2MDAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gNzAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuU0VMRn0pDQogICBzZWxmLkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9FLCBEYW1hZ2VOYW1lID0gIkUiLCBSYW5nZSA9IDMyNSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgc2VsZi5SU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTcwMCwgIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgIHNlbGYuUldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDcwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICANCiAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgICAgICAgICAgICAgQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlVubG9hZCgpIGVuZCApDQogIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogIEFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAtLUFkZEFwcGx5QnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpPbkFwcGx5QnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCiAgLS1BZGRVcGRhdGVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZiwgc3RhY2tzKSBzZWxmOlVwZGF0ZUJ1ZmYodW5pdCwgYnVmZiwgc3RhY2tzKSBlbmQpDQogIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpUaWNrKCkNCiAgc2VsZjphdXRvemhvbnlhKCkNCiAgc2VsZjpBdXRvc3RlYWx0aCgpDQogIHNlbGY6YXV0b3BvdCgpDQogIHNlbGY6YXV0b3EoKQ0KICAgICAgIHNlbGY6QW50aWFmaygpDQogIHNlbGY6aXRlbXMoKQ0KICAgICAgICBzZWxmOmNoZWNrdHMoKQ0KICAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6YXV0b2xldmVsKCkgZW5kDQogICAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5sb2dpYyA9PSAxICl0aGVuDQogICAgc2VsZjpjb21ibygpDQogIGVuZA0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSBhbmQgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMubG9naWMgPT0gMiApdGhlbg0KICAgIHNlbGY6Y29tYm8yKCkNCiAgZW5kDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhc3RoaXRrZXkgb3Igc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LmF1dG9sYXN0aGl0ICl0aGVuDQogICAgICBzZWxmOkxhc3RIaXQoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApdGhlbg0KICAgc2VsZjpKdW5nbGVDbGVhcigpDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICl0aGVuDQogICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICBlbmQNCiAgICAgIGlmIHNlbGYuQ29uZmlnLmluc3RydWN0IHRoZW4NCiAgICBzZWxmLkNvbmZpZy5pbnN0cnVjdCA9IGZhbHNlDQogICAgUG9wVXAxID0gdHJ1ZQ0KICAgICAgZW5kDQogIGlmKHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApIHRoZW4NCiAgICBzZWxmOmtpbGxzdGVhbCgpDQogIGVuZA0KICBpZihzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgKSB0aGVuDQogICAgc2VsZjpoYXJhc3MoKQ0KICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICl0aGVuDQogICAgICBzZWxmOmVzY2FwZSgpDQogICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOndhbGsoKQ0KICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6ZXNjYXBlKCkNCiAgIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZVcgdGhlbg0KICBDYXN0U3BlbGwoX1csbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6RHJhdygpDQogICAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnFkcmF3IGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDYwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlF3aWR0aCxBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5RY29sb3IpKSkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy53ZHJhdyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Xd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLldjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmVkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDMyNSwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDEyNSwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJ0ZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpICB0aGVuDQogICBpZiBzZWxmLnRzci50YXJnZXR+PW5pbCB0aGVuDQogICAgICBEcmF3TGluZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosc2VsZi50c3IudGFyZ2V0LngsIHNlbGYudHNyLnRhcmdldC55LCBzZWxmLnRzci50YXJnZXQueixzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5FMndpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkUyY29sb3IpKSkNCiAgICBlbmQNCiAgICBlbmQNCiAgIGlmIFBvcFVwMSB0aGVuDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNTApLCAoV0lORE9XX0gqLjE1KSwgKFdJTkRPV19IKi45KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuMDUsIHcsIGgyLzEuOTcsIHcvMS43NSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdMaW5lKHcsIGgxLCB3LCBoMi8yLCB3LzEuOCwgQVJHQigxNTAsIDIzNSwgMTgzLCA2MykpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJXZWxjb21lIHRvIEtleWJvYXJkTWFzdGVyIFNlcmllcyAzLjAiKSwgV0lORE9XX0gqLjAyOCwgKFdJTkRPV19XLzIpLCAoV0lORE9XX0gqLjE4KSwgQVJHQigyNTUsIDk2LCA0OCwgMCksImNlbnRlciIsImNlbnRlciIpDQogICBEcmF3VGV4dEEodG9zdHJpbmcoIkxpdHRsZSBpbmZvcm1hdGF0aW9uIGFib3V0IEtleWJvYXJkTWFzdGVyIFNlcmllcyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMTk0KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJdHMgYSBidW5kbGUgdGhhdCBwcm9kdWNlZCBieSBlbnN1bHV5biIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiQ3VycmVudGx5IGl0IHN1cHBvcnRlZCBvbmx5IG1pZCBjaGFtcHMgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMjUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGZvY3VzIFF1YWxpdHkgcmF0aGVyIHRoYW4gUXVhbnRpdHkiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI0MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgbmVlZCB5b3VyIGZlZWRiYWNrcyB0byBpbXByb3ZlIGl0IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGNhcmUgZXZlcnkgc2luZ2xlIGZlZWRiYWNrIGFuZCB0cnkgdG8gYWRkIGV2ZXJ5dGhpbmciKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI3MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkhvcGUgeW91IGFyZSBlbmpveSBteSBzY3JpcHQuLiIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjg1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiWW91IGNhbiBjaGFuZ2UgZXZlcnkgc2V0dGluZ3MgdG8geW91ciBsaWtlIDopIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEaWQgeW91IGxpa2UgbXkgc2NyaXB0ID4gVXB2b3RlIG1lIG9uIHNjcmlwdHN0YXR1cyBhbmQgb24gZm9ydW0iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMxNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRvbid0IGZvcmdldCB0aGVzZSBhcmUgVklQOyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzMwKSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEFudGktQWZrIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNDUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEF1dG8gTGV2ZWxlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM2MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgU2tpbiBDaGFuZ2VyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzc1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjQ5KSwgKFdJTkRPV19IKi43MCksIChXSU5ET1dfSCouNzUpDQogICAgRHJhd0xpbmUodywgaDEvMS43NzUsIHcsIGgyLzEuNjgsIHcqLjExLCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd1JlY3RhbmdsZUJ1dHRvbihXSU5ET1dfVyowLjQ2NywgV0lORE9XX0gvMi4zNzUsIFdJTkRPV19XKi4wNDcsIFdJTkRPV19IKi4wNDEsIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIk9LIiksIFdJTkRPV19IKi4wMiwgKFdJTkRPV19XLzIpKi45OCwgKFdJTkRPV19ILzIuMzc1KSwgQVJHQigyNTUsIDAsIDAsIDAgKSwiY2VudGVyIiwiY2VudGVyIikNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlZGl0cyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzk1KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdXJyeS0gRm9yIHRoaXMgYXdlc29tZSBwb3B1cCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouNDEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKSANCiAgZW5kDQogICAgICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0IGFuZCBzZWxmLnNlbGVjdGVkVGFyIH49IG5pbCB0aGVuDQogICAgICAgICBEcmF3Q2lyY2xlM0Qoc2VsZi5zZWxlY3RlZFRhci54LCBzZWxmLnNlbGVjdGVkVGFyLnksIHNlbGYuc2VsZWN0ZWRUYXIueiwgODAsNiwgQVJHQigyNTUsIDI1NSwwLDApKQ0KZW5kDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldGNhbCBhbmQgbm90IG15SGVyby5kZWFkIHRoZW4NCiAgICAgIGlmIHRhcmdldCBhbmQgdGFyZ2V0IH49IG5pbCB0aGVuDQogICAgICAgIGxvY2FsIGRyYXdwb3M9V29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh0YXJnZXQueCwgdGFyZ2V0LnksIHRhcmdldC56KSkNCiAgICAgICAgbG9jYWwgY29tYm9UZXh0LGNvbG9yID0gc2VsZjpHZXREcmF3cyh0YXJnZXQpDQogICAgICAgIGlmIGNvbWJvVGV4dCB0aGVuDQogICAgICAgICAgRHJhd1RleHQoY29tYm9UZXh0LDE1LGRyYXdwb3MueC0yMCxkcmF3cG9zLnktMjAsY29sb3IpDQogICAgICAgIGVuZCANCiAgICAgIGVuZCANCiAgICAgIGVuZA0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCwgMTUwMDApIHRoZW4NCiAgICAgIGlmIHRhcmdldC52aXNpYmxlIGFuZCBub3QgdGFyZ2V0LmRlYWQgYW5kIHNlbGYuQ29uZmlnLm90aGVyLmRhbWFnZSB0aGVuDQogICAgICAgIGN1cnJMaW5lID0gMQ0KICAgICAgICBEcmF3TGluZUhQQmFyMihzZWxmOkdldE15RG1nKHRhcmdldCksIiIsICB0YXJnZXQsIGN1cnJMaW5lKQ0KICAgICAgICBEcmF3TGluZUhQQmFyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwgIkRhbWFnZSAiIC4uIG1hdGgucm91bmQoc2VsZjpHZXRNeURtZyh0YXJnZXQpKSx0YXJnZXQsY3VyckxpbmUpDQogICAgICAgIGN1cnJMaW5lID0gY3VyckxpbmUgKyAxDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogICAgICBlbmQNCiAgICAgICAgICAgICBmdW5jdGlvbiBBa2FsaTp3cml0ZWNmZyhwYXJhbSkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInciKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAtLSBwcmludCgiRXJyb3IgaW4gV3JpdGUgQ0ZHIikNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHBhcmFtIH49ICJmdGMiIHRoZW4NCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKGF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgICAgICAgICAtLSBwcmludCgiV3JpdHRlbjogIi4uYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoImVuZyIpDQogICAgICAgICAgICAgICAtLSBwcmludCgiVzogRW5nbGlzaCIpDQogICAgICAgIGVuZA0KICAgICAgICBmaWxlOmNsb3NlKCkNCmVuZA0KZnVuY3Rpb24gQWthbGk6YnVmZih1bml0KQ0KIHJldHVybiBUYXJnZXRIYXZlQnVmZignQWthbGlNb3RhJywgdW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBBa2FsaTpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogZnVuY3Rpb24gQWthbGk6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KICAgIGlmIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IDEwMDAgYW5kIHNwZWxsIH49IG5pbCB0aGVuICAgICANCiAgICBpZiBzcGVsbC5uYW1lID09ICh0eXBlKGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpID09ICdudW1iZXInIGFuZCB1bml0OkdldFNwZWxsRGF0YShpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKS5uYW1lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpIGFuZCBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlW3VuaXQuY2hhck5hbWVdIHRoZW4NCiAgICAgIGlmIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5uYW1lID09IG15SGVyby5uYW1lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwgPT0gJ2JsaW5kbW9ua3F0d28nIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCiBmdW5jdGlvbiBBa2FsaTphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDMsMiwxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6YXV0b3pob255YSgpDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3pob255YSAvIDEwMCkgYW5kICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiWmhvbnlhc0hvdXJnbGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBBa2FsaTpjaGVja3RzKCkNCiAgICAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZzp1cGRhdGUoKQ0KaWYgbm90IHNlbGYudHNnLnRhcmdldH49bmlsIG9yIG5vdCBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbg0KdGFyZ2V0ID0gc2VsZi50cy50YXJnZXQNCmVsc2VpZiBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBzZWxmLnNlbGVjdGVkVGFyIHRoZW4NCnRhcmdldCA9IHNlbGYuc2VsZWN0ZWRUYXINCmVuZA0KZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmNvbWJvKCkNCiAgbG9jYWwgYWJ1ZmYgPSBzZWxmOmJ1ZmYodGFyZ2V0KQ0KICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBhYnVmZiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOmNvbWJvMigpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgbm90IHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgICAgICBpZihzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6aGFyYXNzKCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOkp1bmdsZUNsZWFyKCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlFNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLldNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICBzZWxmLldTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuRU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLkVTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICAgaWYoc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVIgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlJNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5SU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgIGZ1bmN0aW9uIEFrYWxpOkxhc3RIaXQoKQ0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogIGlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMSB0aGVuDQogICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICAgIGxvY2FsIFFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuUVNwZWxsLlJhbmdlICogc2VsZi5RU3BlbGwuUmFuZ2UgYW5kIFFkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgZW5kDQogICAgICAgIGxvY2FsIEVkYW1hZ2UgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuRU1hbmEgLzEwMCApYW5kICBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuRVNwZWxsLlJhbmdlICogc2VsZi5FU3BlbGwuUmFuZ2UgYW5kIEVkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgIGVsc2VpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDIgdGhlbg0KICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LkVNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6TGFuZUNsZWFyKCkNCiAgbG9jYWwgY2xlYXJ0YXJnZXQgPSBzZWxmLmNsZWFydGFyZ2V0DQogIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5RTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RRKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuZWNvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5FTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5FU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RFKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQplbmQNCiAgZnVuY3Rpb24gQWthbGk6Q2FzdFEodW5pdCkNCiAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIEFrYWxpOkNhc3RXKHVuaXQpDQogIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBBa2FsaTpDYXN0RSh1bml0KQ0KICBzZWxmLkVTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gQWthbGk6Q2FzdFIodW5pdCkNCiAgc2VsZi5SU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQpmdW5jdGlvbiBBa2FsaTpDYXN0SSh1bml0KQ0KICBzZWxmLklnbml0ZTpDYXN0KHVuaXQpDQplbmQNCiAgZnVuY3Rpb24gQWthbGk6YXV0b3EoKQ0KICAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLktleXMuYXV0b3EgYW5kICBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6R2V0UURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMTUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjQpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOkdldFEyRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyMCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDI1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouNSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIEFrYWxpOkdldEVEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg1ICsgKG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsICogMjUpICsgKChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjQpKyhteUhlcm8uYWRkRGFtYWdlICowLjYpKQ0KICByZXR1cm4gbXlIZXJvOkNhbGNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6R2V0UkRtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgIGlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDI1ICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICogNzUpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuNSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBBa2FsaTpHZXRNeURtZyh0YXJnZXQpDQogICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICtzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgK3NlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICtzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkrc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOkdldERyYXdzKHRhcmdldCkNCmxvY2FsIFFkbWcgID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCmxvY2FsIFFkbWcyID1zZWxmOkdldFEyRG1nKHRhcmdldCkNCmxvY2FsIEVkbWcgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KbG9jYWwgUmRtZyA9IHNlbGY6R2V0UkRtZyh0YXJnZXQpDQpsb2NhbCBJZG1nPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCg0KICBpZiBRZG1nID4gdGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRWRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUmRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUmRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0VkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBRZG1nK1JkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUWRtZytSZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytSZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK1JkbWcrRWRtZyA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK1FkbWcyID4gdGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTInLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytJZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIEVkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIEVkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFJkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFJkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBRZG1nK1JkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nK0lkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFFkbWcrUmRtZytJZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytSZG1nK0lkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdGdWxsIENvbWJvICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytSZG1nK0VkbWcrUWRtZzIgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnS2lsbCB3aXRoIGZ1bGwgY29tYm8nLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2UgDQogICAgcmV0dXJuICJDYW50IEtpbGwgeWV0IiwgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZW5kIA0KZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmtpbGxzdGVhbCgpDQpmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgbG9jYWwgZG1nRSA9IHNlbGY6R2V0RURtZyh1bml0KQ0KICAgICAgaWYoc2VsZi50c2UudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ0UgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VFICAgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodW5pdCkgIA0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdRID0gc2VsZjpHZXRRRG1nKHVuaXQpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1IgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDU1MCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgIGVuZA0KICAgZW5kDQplbmQNCmZ1bmN0aW9uIEFrYWxpOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiSGV4dGVjaEd1bmJsYWRlIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogZnVuY3Rpb24gQWthbGk6QXV0b3N0ZWFsdGgoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVcgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlbiB0aGVuDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDEgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gMiB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDIgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gMyB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDMgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gNCB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDQgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2hwIGFuZCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYy51c2VXIHRoZW4NCiAgICAgICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLmhwIC8gMTAwKSB0aGVuIA0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCiAgZnVuY3Rpb24gQWthbGk6TG9hZE1lbnUoKQ0KICAgICAgIHNlbGYuQ29uZmlnPXNjcmlwdENvbmZpZygiIi4uU2NyaXB0bmFtZS4uIiBbIiAuLiBteUhlcm8uY2hhck5hbWUuLiJdIiAsIm1lbnUiKQ0KDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMV0sICJjb21ibyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAtLSBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlcmciLCAiVXNlIFIgdG8gR2FwLUNsb3NlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgIA0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzldLCAiaGFyYXNzIikNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzEwXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMTFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTldLCAic2tpbGxsb2dpYyIpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTAxXSwgIldsb2dpYyIpIA0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWM6YWRkUGFyYW0oInVzZVciLCBsb2NfY2hvb3NlblsxMzhdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlV2hwIiwgbG9jX2Nob29zZW5bMTM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJocCIsbG9jX2Nob29zZW5bMTA0XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWM6YWRkUGFyYW0oInVzZVdlbiIsIGxvY19jaG9vc2VuWzEzNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlV2UiLCBsb2NfY2hvb3NlblsxMzZdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzMF0sIGxvY19jaG9vc2VuWzEzMV0gLCBsb2NfY2hvb3NlblsxMzJdLGxvY19jaG9vc2VuWzEzM10gfSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWM6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMDNdLCAiUmxvZ2ljIikgDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3NlblsxMDNdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzNF0sIGxvY19jaG9vc2VuWzEzNV19KQ0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE0XSwgImZhcm0iKQ0KICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNV0sImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsxNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsxOF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJlY291bnQiLGxvY19jaG9vc2VuWzE4Ml0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjBdLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzIxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyM10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjVdLCJsYXN0aGl0IikNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYXV0b2xhc3RoaXQiLGxvY19jaG9vc2VuWzE4OV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsyNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzI4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzVdLCAia2lsbHN0ZWFsIikNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMzldLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls0MF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzMwXSwiZXNjYXBlIikNCiAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMzJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0Ml0sICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5Ml0sICJhdXRvcG90IikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJlbmFibGVhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQ0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2VoZyIsIGxvY19jaG9vc2VuWzQ1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlYmciLCBsb2NfY2hvb3Nlbls0Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5Ml0sICJtaXNjIikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIxOV0sICJnYXBDbG9zZSIpDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgidyIsIGxvY19jaG9vc2VuWzIyMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgiaW5mbzMiLCBsb2NfY2hvb3Nlbls5OF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIGZvciBfLCBlbmVteSBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgaWYgaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKGVuZW15LmNoYXJOYW1lLCBlbmVteS5jaGFyTmFtZSAuLiAiIC0gIiAuLiBlbmVteTpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0uc3BlbGwpLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgICAgQ2xvY2sgPSBvcy5jbG9jaygpDQogICAgICAgIGlmIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0N10sICJ2aXAiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oInBhY2tldCIsbG9jX2Nob29zZW5bNDhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzQ5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUwXSwgImxldmVsIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzUxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3Nlbls1Ml0sIFNDUklQVF9QQVJBTV9MSVNULCA3LCB7bG9jX2Nob29zZW5bNThdLCBsb2NfY2hvb3Nlbls1OV0sbG9jX2Nob29zZW5bNjBdLGxvY19jaG9vc2VuWzYxXSxsb2NfY2hvb3Nlbls2Ml0sIGxvY19jaG9vc2VuWzYzXSwgbG9jX2Nob29zZW5bNjRdICB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1M10sICJza2luIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTRdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCBsb2NfY2hvb3Nlbls1N10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCBza2luTWV0YVtteUhlcm8uY2hhck5hbWVdKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgiaW5mbzUiLCBsb2NfY2hvb3Nlbls1NV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOTVdLCAiYW50aWFmayIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrOmFkZFBhcmFtKCJhbnRpYWZrIixsb2NfY2hvb3NlblsxOTZdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzMiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzQiLCBsb2NfY2hvb3Nlbls1Nl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIGVuZA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY1XSwib3RoZXIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNob3cgRGFtYWdlIE9uIEhwIEJhciIsICJIUEJBUiIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjZdLCAiZHJhdyIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInFkcmF3Iixsb2NfY2hvb3Nlbls2N10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3Iixsb2NfY2hvb3Nlbls2OF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3Iixsb2NfY2hvb3Nlbls2OV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInJkcmF3Iixsb2NfY2hvb3Nlbls3MF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsbG9jX2Nob29zZW5bNzFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicnRkcmF3Iixsb2NfY2hvb3NlblsyMjVdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOThdLCAiY29sb3IiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUWNvbG9yIiwgbG9jX2Nob29zZW5bMTk5XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiV2NvbG9yIiwgbG9jX2Nob29zZW5bMjAwXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRWNvbG9yIiwgbG9jX2Nob29zZW5bMjAxXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUmNvbG9yIiwgbG9jX2Nob29zZW5bMjAyXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRTJjb2xvciIsIGxvY19jaG9vc2VuWzIyNl0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkFBY29sb3IiLCBsb2NfY2hvb3NlblsyMDRdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJ0YXJnZXRzZWxlY3QiLCBsb2NfY2hvb3NlblsyMDVdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjA2XSwgIndpZHRoIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlF3aWR0aCIsIGxvY19jaG9vc2VuWzIxMF0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIld3aWR0aCIsIGxvY19jaG9vc2VuWzIxMV0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkV3aWR0aCIsIGxvY19jaG9vc2VuWzIxMl0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlJ3aWR0aCIsIGxvY19jaG9vc2VuWzIxM10sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkUyd2lkdGgiLCBsb2NfY2hvb3NlblsyMjddLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJBQXdpZHRoIiwgbG9jX2Nob29zZW5bMjA4XSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiU1R3aWR0aCIsIGxvY19jaG9vc2VuWzIwOV0sIDQsIDYsIDEsIDEwLCAwKSAgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzNdLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLGxvY19jaG9vc2VuWzc0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldCIsbG9jX2Nob29zZW5bNzVdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiZGFtYWdlIixsb2NfY2hvb3NlblsyMTRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Y2FsIixsb2NfY2hvb3Nlbls3Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc3XSwidGFyZ2V0c2VsIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSzIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgidHMiLGxvY19jaG9vc2VuWzc4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgc2VsZi50cy5uYW1lICA9ICJBa2FsaSINCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3OV0sICJLZXlzIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLGxvY19jaG9vc2VuWzgwXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLGxvY19jaG9vc2VuWzgxXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNCIsIGxvY19jaG9vc2VuWzgyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNza2V5IiwgbG9jX2Nob29zZW5bODNdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJhdXRvcSIsIGxvY19jaG9vc2VuWzkxXSwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNSIsIGxvY19jaG9vc2VuWzg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4NV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s2IiwgbG9jX2Nob29zZW5bODddLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJlc2NhcGVrZXkiLCBsb2NfY2hvb3Nlbls4OF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICAgIC0tc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsICJMYXN0aGl0IEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMiIsIGxvY19jaG9vc2VuWzg5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMTBdLCAiS2V5czIiKQ0KICAgIA0KICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJsYW5nIiwgbG9jX2Nob29zZW5bMTY1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjZdLCBsb2NfY2hvb3NlblsxNjddLGxvY19jaG9vc2VuWzE2OF19KQ0KICAgICAgICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluc3RydWN0IiwgbG9jX2Nob29zZW5bMjE2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgICAgIA0KICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYS5wZXJtYSB0aGVuDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpIGVuZCwgMSkNCiAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImNvbWJva2V5IikgZW5kLCAxLjIpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNza2V5IikgZW5kLCAxLjIpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiYXV0b3EiKSBlbmQsIDEuMikNCmVuZA0KICBlbmQNCiAgICAgIGZ1bmN0aW9uIEFrYWxpOmF1dG9wb3QoKQ0KIGlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQogIGZ1bmN0aW9uIEFrYWxpOnJnYXAoKQ0KICBlbmQNCiAgICAgICAgZnVuY3Rpb24gQWthbGk6QW50aWFmaygpDQogIGlmIG9zLmNsb2NrKCkgPCBDbG9jayBvciBub3Qgc2VsZi5Db25maWcudmlwLmFudGlhZmsuYW50aWFmayB0aGVuIHJldHVybiBlbmQNCiAgQ2xvY2sgPSBvcy5jbG9jaygpICsgbWF0aC5yYW5kb20oNjAsMTIwKQ0KICBteUhlcm86TW92ZVRvKG15SGVyby54LCBteUhlcm8ueikNCmVuZA0KZnVuY3Rpb24gQWthbGk6V25kTXNnKE1zZywgS2V5KQ0KaWYgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4gICAgICANCiAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgbG9jYWwgc3RhcmdldCA9IG5pbA0KICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykgPD0gbWluRCBvciBzdGFyZ2V0ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgIGlmIHN0YXJnZXQgYW5kIG1pbkQgPCA1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPlRhcmdldCA8Yj5pcyBubyBsb2dlciBzZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+TmV3IHRhcmdldCA8Yj5zZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICAgIFBvcFVwMSA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KICAgIGVuZA0KICAgICAgICAgIGZ1bmN0aW9uIEFrYWxpOlVubG9hZCgpDQogICAgICAgIHNlbGY6d3JpdGVjZmcoKQ0KICAgICAgZW5kDQogICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBMaXNzYW5kcmEgU3RhcnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBjbGFzcyAiTGlzc2FuZHJhIg0KICBmdW5jdGlvbiBMaXNzYW5kcmE6X19pbml0KCkNCiAgIHNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDExMDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogIHNlbGYudHNxPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogIHNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA0NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogIHNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMDUwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICBzZWxmLnRzcj0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNTUwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgc2VsZi50c2c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEyMDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgICBzZWxmLlFTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9RLCBEYW1hZ2VOYW1lID0gIlEiLCBSYW5nZSA9IDcyNSwgV2lkdGggPSAyMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDQ1MCwgV2lkdGggPSAwLCBEZWxheSA9IDAuNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAxMDUwLCBXaWR0aCA9IDExMCwgRGVsYXkgPSAuMjUsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID01NTAsIFdpZHRoID0gMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuUlNTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9NTUwLCBXaWR0aCA9IDAsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogIC0tfD4gTWluaW9uIE1hbmFnZXJzDQogICAgICBzZWxmLmVuZW15TWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9ucyAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9KVU5HTEUsICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYub3RoZXJNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9PVEhFUiwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgICAgICBzZWxmOkxvYWRNZW51KCkNCiAgICAgICAgICBwcmVkID0gVlByZWRpY3Rpb24oKQ0KICAgICAgICAgICAgTGFzdF9MZXZlbFNwZWxsID0gMA0KICAgICAgICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgICAgICAgICAgICBzcGVsbHMgPSB7fQ0KICAgICAgICAgICAgICAgIHNwZWxscy5xID0geyByYW5nZU1heCA9IDkyNX0NCiAgICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpUaWNrKCkgZW5kKQ0KICAgICAgICAgICAgICAgIEFkZFVubG9hZENhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpVbmxvYWQoKSBlbmQgKQ0KICAgIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgICBBZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogICAgLS1BZGRBbmltYXRpb25DYWxsYmFjayhmdW5jdGlvbih1bml0LCBhbmltYXRpb24pIHNlbGY6QW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbikgZW5kKQ0KICAgIEFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAgIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAgIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYsIHN0YWNrcykgc2VsZjpVcGRhdGVCdWZmKHVuaXQsIGJ1ZmYsIHN0YWNrcykgZW5kKQ0KICAgIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpUaWNrKCkNCiAgICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgIHNlbGY6YXV0b3BvdCgpDQogICAgICAgc2VsZjpBbnRpYWZrKCkNCiAgICAgICBzZWxmOml0ZW1zKCkNCiAgICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjphdXRvbGV2ZWwoKSBlbmQNCiAgICAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgICBzZWxmOmF1dG9SKCkNCiAgICAgICBzZWxmOmF1dG9xKCkNCiAgICAgICBzZWxmOmNoZWNrdHMoKQ0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSApdGhlbg0KICAgICAgc2VsZjpjb21ibygpDQogICAgZW5kDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuaW5zdHJ1Y3QgdGhlbg0KICAgIHNlbGYuQ29uZmlnLmluc3RydWN0ID0gZmFsc2UNCiAgICBQb3BVcDEgPSB0cnVlDQogIGVuZA0KICAgICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICl0aGVuDQogICAgIHNlbGY6SnVuZ2xlQ2xlYXIoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgKXRoZW4NCiAgICAgIHNlbGY6TGFuZUNsZWFyKCkNCiAgICBlbmQNCiAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgKXRoZW4NCiAgICAgIHNlbGY6ZW5nYWdld2l0aHIoKQ0KICAgIGVuZA0KICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhc3RoaXRrZXkgb3Igc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LmF1dG9sYXN0aGl0ICl0aGVuDQogICAgICBzZWxmOkxhc3RIaXQoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkpdGhlbg0KICAgICAgc2VsZjplc2NhcGUoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApIHRoZW4NCiAgICAgIHNlbGY6a2lsbHN0ZWFsKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSBvciBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc3RvZ2xla2V5ICApIHRoZW4NCiAgICAgIHNlbGY6aGFyYXNzKCkNCiAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6Y2hlY2t0cygpDQogICAgICAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZzp1cGRhdGUoKQ0KICBpZiBub3Qgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igbm90IHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuDQogIHRhcmdldCA9IHNlbGYudHMudGFyZ2V0DQogIGVsc2VpZiBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBzZWxmLnNlbGVjdGVkVGFyIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICBlbmQNCiAgZW5kDQogICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6TG9hZE1lbnUoKQ0KICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIFsiIC4uIG15SGVyby5jaGFyTmFtZS4uIl0iICwibWVudSIpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzFdLCAiY29tYm8iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzldLCAiaGFyYXNzIikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMTBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzExXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblsxMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiYXV0b3EiLCBsb2NfY2hvb3Nlbls5MV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTldLCAic2tpbGxsb2dpYyIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWM6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMDJdLCAiRWxvZ2ljIikNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWM6YWRkUGFyYW0oImNvbWJvIiwgbG9jX2Nob29zZW5bMTQzXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHtsb2NfY2hvb3NlblsxNDVdLCBsb2NfY2hvb3NlblsxNDZdIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJoYXJhc3MiLCBsb2NfY2hvb3NlblsxNDRdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE0Nl0sIGxvY19jaG9vc2VuWzE0NV0gfSkNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWM6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYzphZGRQYXJhbSgiaW5mb0UiLCBsb2NfY2hvb3NlblsxNTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzEwM10sICJSbG9naWMiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiUmxvZ2ljIiwgbG9jX2Nob29zZW5bMTU1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNDldLCBsb2NfY2hvb3NlblsxNTBdLCBsb2NfY2hvb3NlblsxNTFdIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJlbmFibGVhdXRvUiIsIGxvY19jaG9vc2VuWzE1Ml0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWM6YWRkUGFyYW0oImF1dG9SIiwgbG9jX2Nob29zZW5bMTUzXSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiaW5mb1IyIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiaW5mb1IiLCBsb2NfY2hvb3NlblsxNTZdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzBdLCJlc2NhcGUiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzMxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblszMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNF0sICJmYXJtIikNCiAgICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTVdLCJsYW5lY2xlYXIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMTZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgicWNvdW50Iixsb2NfY2hvb3NlblsxODBdLFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMTAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsxN10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ3Y291bnQiLGxvY19jaG9vc2VuWzE4MV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzE4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImVjb3VudCIsbG9jX2Nob29zZW5bMTgyXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjBdLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzIxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyM10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjVdLCJsYXN0aGl0IikNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYXV0b2xhc3RoaXQiLGxvY19jaG9vc2VuWzE4OV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsyNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzI3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblszNV0sICJraWxsc3RlYWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oImtzIixsb2NfY2hvb3NlblszNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblszOV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNDBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0Ml0sICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5Ml0sICJhdXRvcG90IikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJlbmFibGVhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQ0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2VoZyIsIGxvY19jaG9vc2VuWzQ1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlYmciLCBsb2NfY2hvb3Nlbls0Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIA0KICAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5Ml0sICJtaXNjIikNCiAgICAgIHNlbGYuQ29uZmlnLm1pc2M6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5M10sICJpbnRlcnJ1cHQiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdDphZGRQYXJhbSgiciIsIGxvY19jaG9vc2VuWzk3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdDphZGRQYXJhbSgiaW5mbzMiLCBsb2NfY2hvb3Nlbls5OF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBmb3IgaSwgYSBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgaWYgSW50ZXJydXB0W2EuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksIHNwZWxsIGluIHBhaXJzKEludGVycnVwdFthLmNoYXJOYW1lXS5zdG9wKSBkbw0KICAgICAgICAgICAgICAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oc3BlbGwuc3BlbGxOYW1lLCBhLmNoYXJOYW1lLi4iIC0gIi4uc3BlbGwubmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICANCiAgICAgICAgZW5kDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2M6YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMTldLCAiZ2FwQ2xvc2UiKQ0KICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oInciLCBsb2NfY2hvb3NlblsyMjBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oImRlbGF5IiwgbG9jX2Nob29zZW5bMjIxXSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAwLCAwLCAxMDAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKCJpbmZvMyIsIGxvY19jaG9vc2VuWzk4XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZm9yIF8sIGVuZW15IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBpZiBpc0FHYXBjbG9zZXJVbml0W2VuZW15LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oZW5lbXkuY2hhck5hbWUsIGVuZW15LmNoYXJOYW1lIC4uICIgLSAiIC4uIGVuZW15OkdldFNwZWxsRGF0YShpc0FHYXBjbG9zZXJVbml0W2VuZW15LmNoYXJOYW1lXS5zcGVsbCkubmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIyMl0sICJhdXRvdyIpDQogICAgc2VsZi5Db25maWcubWlzYy5hdXRvdzphZGRQYXJhbSgidXNlIiwgbG9jX2Nob29zZW5bMjIzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3c6YWRkUGFyYW0oImVuZW15Y291bnQiLCBsb2NfY2hvb3NlblsyMjRdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzMF0sIGxvY19jaG9vc2VuWzEzMV0gLCBsb2NfY2hvb3NlblsxMzJdLGxvY19jaG9vc2VuWzEzM10gfSkNCiAgICANCiAgICAgICAgICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNDddLCAidmlwIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJwYWNrZXQiLGxvY19jaG9vc2VuWzQ4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzEiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3Nlbls0OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1MF0sICJsZXZlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bNTJdLCBTQ1JJUFRfUEFSQU1fTElTVCwgNywge2xvY19jaG9vc2VuWzU4XSwgbG9jX2Nob29zZW5bNTldLGxvY19jaG9vc2VuWzYwXSxsb2NfY2hvb3Nlbls2MV0sbG9jX2Nob29zZW5bNjJdLCBsb2NfY2hvb3Nlbls2M10sIGxvY19jaG9vc2VuWzY0XSAgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTNdLCAic2tpbiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzU0XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCdzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJywgbG9jX2Nob29zZW5bNTddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgc2tpbk1ldGFbbXlIZXJvLmNoYXJOYW1lXSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm81IiwgbG9jX2Nob29zZW5bNTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm81IiwgIlNraW4gSGFjayB0ZW1wb3JhcnkgZGlzYWJsZWQgdW50aWwgbmV4dCB1cGRhdGUuIC4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk1XSwgImFudGlhZmsiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuYW50aWFmazphZGRQYXJhbSgiYW50aWFmayIsbG9jX2Nob29zZW5bMTk2XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpIA0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgbG9jX2Nob29zZW5bNTZdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBlbmQNCiAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2NV0sIm90aGVyIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTaG93IERhbWFnZSBPbiBIcCBCYXIiLCAiSFBCQVIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyLkhQQkFSOmFkZFBhcmFtKCJrZXkiLCJPTi9PRkYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY2XSwgImRyYXciKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJxZHJhdyIsbG9jX2Nob29zZW5bNjddLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJ3ZHJhdyIsbG9jX2Nob29zZW5bNjhdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJlZHJhdyIsbG9jX2Nob29zZW5bNjldLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJyZHJhdyIsbG9jX2Nob29zZW5bNzBdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJhYWRyYXciLGxvY19jaG9vc2VuWzcxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk4XSwgImNvbG9yIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIlFjb2xvciIsIGxvY19jaG9vc2VuWzE5OV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIldjb2xvciIsIGxvY19jaG9vc2VuWzIwMF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkVjb2xvciIsIGxvY19jaG9vc2VuWzIwMV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIlJjb2xvciIsIGxvY19jaG9vc2VuWzIwMl0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkUyY29sb3IiLCBsb2NfY2hvb3NlblsyMDNdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJBQWNvbG9yIiwgbG9jX2Nob29zZW5bMjA0XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgidGFyZ2V0c2VsZWN0IiwgbG9jX2Nob29zZW5bMjA1XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwNl0sICJ3aWR0aCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJRd2lkdGgiLCBsb2NfY2hvb3NlblsyMTBdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJXd2lkdGgiLCBsb2NfY2hvb3NlblsyMTFdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFd2lkdGgiLCBsb2NfY2hvb3NlblsyMTJdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJSd2lkdGgiLCBsb2NfY2hvb3NlblsyMTNdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJBQXdpZHRoIiwgbG9jX2Nob29zZW5bMjA4XSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiU1R3aWR0aCIsIGxvY19jaG9vc2VuWzIwOV0sIDQsIDYsIDEsIDEwLCAwKSANCiAgICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzNdLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLGxvY19jaG9vc2VuWzc0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldCIsbG9jX2Nob29zZW5bNzVdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiZGFtYWdlIixsb2NfY2hvb3NlblsyMTRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Y2FsIixsb2NfY2hvb3Nlbls3Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpICANCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzddLCJ0YXJnZXRzZWwiKQ0KICAgICAgc2VsZi50cy5uYW1lICA9ICJMaXNzYW5kcmEgIg0KICAgICAgc2VsZi50c3EubmFtZSA9ICJMaXNzYW5kcmEgUSBTa2lsbCINCiAgICAgIHNlbGYudHN3Lm5hbWUgPSAiTGlzc2FuZHJhIFcgU2tpbGwiDQogICAgICBzZWxmLnRzZS5uYW1lID0gIkxpc3NhbmRyYSBFIFNraWxsIg0KICAgICAgc2VsZi50c3IubmFtZSA9ICJMaXNzYW5kcmEgUiBTa2lsbCINCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNxKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHN3KQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNlKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNyKSANCiAgICAgIA0KICAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzldLCAiS2V5cyIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCBsb2NfY2hvb3Nlbls4MF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLCBsb2NfY2hvb3Nlbls4MV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJva2V5ciIsIGxvY19jaG9vc2VuWzE3MF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVSIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgbG9jX2Nob29zZW5bODJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc2tleSIsIGxvY19jaG9vc2VuWzgzXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJoYXJhc3N0b2dsZWtleSIsIGxvY19jaG9vc2VuWzE2NF0sIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJUIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzUiLCBsb2NfY2hvb3Nlbls4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFuZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODVdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImp1bmdsZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODZdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgICAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLGxvY19jaG9vc2VuWzIxNV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5IiwgIkxhc3RoaXQgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzYiLCBsb2NfY2hvb3Nlbls4N10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgbG9jX2Nob29zZW5bODhdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0syIiwgbG9jX2Nob29zZW5bODldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIA0KICAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTEwXSwgIktleXMyIikNCiAgICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJsYW5nIiwgbG9jX2Nob29zZW5bMTY1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjZdLCBsb2NfY2hvb3NlblsxNjddLGxvY19jaG9vc2VuWzE2OF19KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbnN0cnVjdCIsIGxvY19jaG9vc2VuWzIxNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgDQogICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIucGVybWEucGVybWEgdGhlbg0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZzpwZXJtYVNob3coImluZm9ib3giKSBlbmQsIDEpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKSBlbmQsIDEuMikgDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNzdG9nbGVrZXkiKSBlbmQsIDEuMikgDQogICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNza2V5IikgZW5kLCAxLjIpDQogICAgDQogIGVuZA0KICBlbmQNCiAgDQogICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b3BvdCgpDQppZiBvcy5jbG9jaygpIC0gbGFzdFBvdGlvbiA8IDE1IHRoZW4gcmV0dXJuIGVuZA0KICBmb3IgU0xPVCA9IElURU1fMSwgSVRFTV82IGRvDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTTE9UKS5uYW1lID09ICJSZWdlbmVyYXRpb25Qb3Rpb24iIGFuZCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuZW5hYmxlYXV0b3BvdGhwIHRoZW4NCiAgICAgIGlmIG15SGVybzpDYW5Vc2VTcGVsbChTTE9UKSA9PSBSRUFEWSBhbmQgKG15SGVyby5oZWFsdGggLyBteUhlcm8ubWF4SGVhbHRoIDwgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90LmF1dG9wb3RocCAvMTAwICkgIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKFNMT1QpIA0KICAgICAgICBsYXN0UG90aW9uID0gb3MuY2xvY2soKSAgICAgICANCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCmVuZA0KICAgZnVuY3Rpb24gTGlzc2FuZHJhOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiQmlsZ2V3YXRlckN1dGxhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWhnIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJIZXh0ZWNoR3VuYmxhZGUiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogICAgICAgICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6d3JpdGVjZmcocGFyYW0pDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKFNDUklQVF9QQVRILi4iXFwiLi4iY29uZmlnLmNmZyIsICJ3IikNCiAgICAgICAgaWYgbm90IGZpbGUgdGhlbg0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIkVycm9yIGluIFdyaXRlIENGRyIpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBwYXJhbSB+PSAiZnRjIiB0aGVuDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZShhdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIldyaXR0ZW46ICIuLmF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKCJlbmciKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIlc6IEVuZ2xpc2giKQ0KICAgICAgICBlbmQNCiAgICAgICAgZmlsZTpjbG9zZSgpDQplbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG9sZXZlbCgpDQppZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDEgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UxID0gICB7IDEsMiwzLDEsMSw0LDEsMiwxLDIsNCwyLDIsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UxKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTIgPSAgIHsgMSwyLDMsMSwxLDQsMSwzLDEsMyw0LDMsMywyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTIpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAzIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMyA9ICB7IDIsMywxLDIsMiw0LDIsMSwyLDEsNCwxLDEsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UzKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNCBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTQgPSAgeyAyLDMsMSwyLDIsNCwyLDMsMiwzLDQsMywzLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNCkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDUgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U1ID0gIHsgMywxLDIsMywzLDQsMywyLDMsMiw0LDIsMiwxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTUpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA2IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDMsMSwyLDMsMyw0LDMsMSwzLDEsNCwxLDEsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogICAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA3IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDEsMywyLDEsMSw0LDEsMiwxLDIsNCwyLDIsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b3pob255YSgpDQogICAgaWYgc2VsZi5Db25maWcuaXRlbS5lbmFibGVhdXRvemhvbnlhIHRoZW4NCiAgICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3pob255YSAvIDEwMCkgYW5kICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiWmhvbnlhc0hvdXJnbGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b1IoKQ0KICAgIGlmICggc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuZW5hYmxlYXV0b1IgYW5kIChzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMiBvciBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMSkpIHRoZW4NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5hdXRvUiAvIDEwMCkgdGhlbiBzZWxmOkNhc3RSUyhteUhlcm8pDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTplbmdhZ2V3aXRocigpDQogICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgaWYgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgdGhlbg0KICAgc2VsZjp3YWxrKCkNCiAgIGVuZA0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNxLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICl0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgKSB0aGVuDQogICAgIENhc3RTcGVsbChfRSwgdGFyZ2V0LngsIHRhcmdldC56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAxLjUpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIExpc3NhbmRyYTpBbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmay5hbnRpYWZrIHRoZW4gcmV0dXJuIGVuZA0KICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQogIG15SGVybzpNb3ZlVG8obXlIZXJvLngsIG15SGVyby56KQ0KZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpEcmF3KCkNCiAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzI1LCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguUXdpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlFjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDQ1MCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLld3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTA1MCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA1NTAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDU1MCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgICAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXQgYW5kIHNlbGYuc2VsZWN0ZWRUYXIgfj0gbmlsIHRoZW4NCiAgICAgICAgIERyYXdDaXJjbGUzRChzZWxmLnNlbGVjdGVkVGFyLngsIHNlbGYuc2VsZWN0ZWRUYXIueSwgc2VsZi5zZWxlY3RlZFRhci56LCA4MCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguU1R3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IudGFyZ2V0c2VsZWN0KSkpDQplbmQNCiBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwMCkgdGhlbg0KICAgICAgaWYgdGFyZ2V0LnZpc2libGUgYW5kIG5vdCB0YXJnZXQuZGVhZCBhbmQgc2VsZi5Db25maWcub3RoZXIuZGFtYWdlIHRoZW4NCiAgICAgICAgY3VyckxpbmUgPSAxDQogICAgICAgIERyYXdMaW5lSFBCYXIyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwiIiwgIHRhcmdldCwgY3VyckxpbmUpDQogICAgICAgIERyYXdMaW5lSFBCYXIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCAiRGFtYWdlICIgLi4gbWF0aC5yb3VuZChzZWxmOkdldE15RG1nKHRhcmdldCkpLHRhcmdldCxjdXJyTGluZSkNCiAgICAgICAgY3VyckxpbmUgPSBjdXJyTGluZSArIDENCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0Y2FsIGFuZCBub3QgbXlIZXJvLmRlYWQgdGhlbg0KICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgbG9jYWwgZHJhd3Bvcz1Xb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnopKQ0KICAgICAgICBsb2NhbCBjb21ib1RleHQsY29sb3IgPSBzZWxmOkdldERyYXdzKHRhcmdldCkNCiAgICAgICAgaWYgY29tYm9UZXh0IHRoZW4NCiAgICAgICAgICBEcmF3VGV4dChjb21ib1RleHQsMTUsZHJhd3Bvcy54LTIwLGRyYXdwb3MueS0yMCxjb2xvcikNCiAgICAgICAgZW5kIA0KICAgICAgZW5kIA0KICAgICAgZW5kDQogICAgIGlmIFBvcFVwMSB0aGVuDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNTApLCAoV0lORE9XX0gqLjE1KSwgKFdJTkRPV19IKi45KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuMDUsIHcsIGgyLzEuOTcsIHcvMS43NSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdMaW5lKHcsIGgxLCB3LCBoMi8yLCB3LzEuOCwgQVJHQigxNTAsIDIzNSwgMTgzLCA2MykpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJXZWxjb21lIHRvIEtleWJvYXJkTWFzdGVyIFNlcmllcyAzLjAiKSwgV0lORE9XX0gqLjAyOCwgKFdJTkRPV19XLzIpLCAoV0lORE9XX0gqLjE4KSwgQVJHQigyNTUsIDk2LCA0OCwgMCksImNlbnRlciIsImNlbnRlciIpDQogICBEcmF3VGV4dEEodG9zdHJpbmcoIkxpdHRsZSBpbmZvcm1hdGF0aW9uIGFib3V0IEtleWJvYXJkTWFzdGVyIFNlcmllcyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMTk0KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJdHMgYSBidW5kbGUgdGhhdCBwcm9kdWNlZCBieSBlbnN1bHV5biIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiQ3VycmVudGx5IGl0IHN1cHBvcnRlZCBvbmx5IG1pZCBjaGFtcHMgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMjUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGZvY3VzIFF1YWxpdHkgcmF0aGVyIHRoYW4gUXVhbnRpdHkiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI0MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgbmVlZCB5b3VyIGZlZWRiYWNrcyB0byBpbXByb3ZlIGl0IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGNhcmUgZXZlcnkgc2luZ2xlIGZlZWRiYWNrIGFuZCB0cnkgdG8gYWRkIGV2ZXJ5dGhpbmciKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI3MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkhvcGUgeW91IGFyZSBlbmpveSBteSBzY3JpcHQuLiIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjg1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiWW91IGNhbiBjaGFuZ2UgZXZlcnkgc2V0dGluZ3MgdG8geW91ciBsaWtlIDopIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEaWQgeW91IGxpa2UgbXkgc2NyaXB0ID4gVXB2b3RlIG1lIG9uIHNjcmlwdHN0YXR1cyBhbmQgb24gZm9ydW0iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMxNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRvbid0IGZvcmdldCB0aGVzZSBhcmUgVklQOyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzMwKSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEFudGktQWZrIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNDUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEF1dG8gTGV2ZWxlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM2MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgU2tpbiBDaGFuZ2VyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzc1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjQ5KSwgKFdJTkRPV19IKi43MCksIChXSU5ET1dfSCouNzUpDQogICAgRHJhd0xpbmUodywgaDEvMS43NzUsIHcsIGgyLzEuNjgsIHcqLjExLCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd1JlY3RhbmdsZUJ1dHRvbihXSU5ET1dfVyowLjQ2NywgV0lORE9XX0gvMi4zNzUsIFdJTkRPV19XKi4wNDcsIFdJTkRPV19IKi4wNDEsIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIk9LIiksIFdJTkRPV19IKi4wMiwgKFdJTkRPV19XLzIpKi45OCwgKFdJTkRPV19ILzIuMzc1KSwgQVJHQigyNTUsIDAsIDAsIDAgKSwiY2VudGVyIiwiY2VudGVyIikNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlZGl0cyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzk1KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdXJyeS0gRm9yIHRoaXMgYXdlc29tZSBwb3B1cCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouNDEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKSANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Y29tYm8oKQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNxLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmNvbWJvID09IDEgYW5kICAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgICAgQ2FzdFNwZWxsKF9FLCB0YXJnZXQueCwgdGFyZ2V0LnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDEuNSkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmNvbWJvID09IDIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgICAgQ2FzdFNwZWxsKF9FLCB0YXJnZXQsIHRhcmdldC56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAyKQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDMgb3Igc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDEgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ1IgPWdldERtZygiUiIsdW5pdCxteUhlcm8pKyAoKG15SGVyby5hcCkqMC43MCkgDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NTUwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgIGVsc2VpZiAoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDIgYW5kICBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuYXV0b1IgLyAxMDApKSB0aGVuIA0KICAgICAgIHNlbGY6Q2FzdFJTKG15SGVybykNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICANCiAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTphdXRvdygpDQogICBpZiBzZWxmLkNvbmZpZy5taXNjLmF1dG93LnVzZSB0aGVuDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3cuZW5lbXljb3VudCA9PSAxIHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg0MzUpID49IDIgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVywgbXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5taXNjLmF1dG93LmVuZW15Y291bnQgPT0gMiB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNDM1KSA+PSAzIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcubWlzYy5hdXRvdy5lbmVteWNvdW50ID09IDMgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDQzNSkgPj0gNCB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3cuZW5lbXljb3VudCA9PSA0IHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg0MzUpID49IDUgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVywgbXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgDQogICBmdW5jdGlvbiBMaXNzYW5kcmE6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KaWYgSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgIHNwZWxsID0gSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdLnN0b3Bbc3BlbGwubmFtZV0NCiAgICAgICAgaWYgc3BlbGwgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0W3NwZWxsLm5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBWYWxpZFRhcmdldCh1bml0KSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCBzZWxmLlJTcGVsbC5SYW5nZSAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0LnIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0gYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgMTAwMCBhbmQgc3BlbGwgfj0gbmlsIHRoZW4gICAgIA0KICAgIGlmIHNwZWxsLm5hbWUgPT0gKHR5cGUoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgPT0gJ251bWJlcicgYW5kIHVuaXQ6R2V0U3BlbGxEYXRhKGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgYW5kIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2VbdW5pdC5jaGFyTmFtZV0gdGhlbg0KICAgICAgaWYgc3BlbGwudGFyZ2V0IH49IG5pbCBhbmQgc3BlbGwudGFyZ2V0Lm5hbWUgPT0gbXlIZXJvLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCA9PSAnYmxpbmRtb25rcXR3bycgdGhlbg0KICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfVywgdW5pdC54LCB1bml0LnopZW5kICxzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlLmRlbGF5LzEwMDApIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpHZXRRRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg0MCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDMwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouNjUpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQpmdW5jdGlvbiBMaXNzYW5kcmE6R2V0V0RtZyh0YXJnZXQpDQogIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kIA0KICAgaWYgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMzAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgKiA0MCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC40KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpHZXRFRG1nKHRhcmdldCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQgDQogICBpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCAqIDQ1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjYpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOkdldFJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg1MCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDEwMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC43KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gTGlzc2FuZHJhOkdldE15RG1nKHRhcmdldCkNCiAgIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogICAgICBlbHNlaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogICAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6R2V0RHJhd3ModGFyZ2V0KQ0KbG9jYWwgcWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQpsb2NhbCB3ZGFtYWdlID0gc2VsZjpHZXRXRG1nKHRhcmdldCkNCmxvY2FsIGVkYW1hZ2UgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KbG9jYWwgcmRhbWFnZSA9IHNlbGY6R2V0UkRtZyh0YXJnZXQpDQpsb2NhbCBJZG1nPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgDQogIGlmIHFkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiB3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgZWRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIGVkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgZWxzZWlmIHJkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcmRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgZWRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBXJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIGVkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZT50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStlZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStyZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK2VkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStyZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlK2VkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdLaWxsIHdpdGggZnVsbCBjb21ibycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZStlZGFtYWdlK3JkYW1hZ2UrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0Z1bGwgQ29tYm8gKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2UgDQogICAgcmV0dXJuICJDYW50IEtpbGwgeWV0IiwgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZW5kIA0KZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0USh1bml0KQ0KICAgIHNlbGYuUVNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogICAgICAgICAgICAgICAgICBwcmVkID0gbmlsDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0UTIodW5pdCkNCiAgICBpZiBWYWxpZFRhcmdldCh1bml0KSBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBpZiBHZXREaXN0YW5jZSh1bml0KSA8IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodW5pdCkNCiAgZWxzZWlmIEdldERpc3RhbmNlKHVuaXQpIDwgc3BlbGxzLnEucmFuZ2VNYXggdGhlbg0KICAgICAgbG9jYWwgY29sbGlzaW9uID0gZmFsc2UNCiAgICAgIGxvY2FsIHgsIHogPSAwLCAwDQogICAgDQogICAgICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIG1pbmlvbiB+PSBuaWwgYW5kIG5vdCBtaW5pb24uZGVhZCBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuDQogICAgICAgICAgeCwgeiA9IHBvaW50T25MaW5lKG15SGVybywgdW5pdCwgbWluaW9uLCAwKQ0KICAgICAgICAgIA0KICAgICAgICAgIGlmIG1hdGguc3FydCgobWluaW9uLnggLSB4KSBeIDIgKyAobWluaW9uLnogLSB6KSBeIDIpIDwgc2VsZi5RU3BlbGwuV2lkdGggLyAyIHRoZW4NCiAgICAgICAgICAgIGNvbGxpc2lvbiA9IHRydWUNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIA0KICAgICAgaWYgY29sbGlzaW9uID09IHRydWUgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgc3BlbGxzLnEucmFuZ2VNYXggdGhlbg0KICAgICAgICBQb3NpdGlvbiA9IHByZWQ6R2V0UHJlZGljdGVkUG9zKHVuaXQsIHNlbGYuUVNwZWxsLkRlbGF5ICsgKEdldERpc3RhbmNlKHVuaXQpIC8gc2VsZi5RU3BlbGwuU3BlZWQpKQ0KICAgICAgDQogICAgICAgIGxvY2FsIGNhc3RYID0gbXlIZXJvLnggKyBzZWxmLlFTcGVsbC5SYW5nZSAqICgoUG9zaXRpb24ueCAtIG15SGVyby54KSAvIEdldERpc3RhbmNlKFBvc2l0aW9uKSkNCiAgICAgICAgbG9jYWwgY2FzdFogPSBteUhlcm8ueiArIHNlbGYuUVNwZWxsLlJhbmdlKiAoKFBvc2l0aW9uLnogLSBteUhlcm8ueikgLyBHZXREaXN0YW5jZShQb3NpdGlvbikpDQogICAgICAgIENhc3RTcGVsbChfUSwgY2FzdFgsIGNhc3RaKQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RXKHVuaXQpDQogICAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0RSh1bml0KQ0KICAgIHNlbGYuRVNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdFIodW5pdCkNCiAgICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdFJTKHVuaXQpDQogICBDYXN0U3BlbGwoX1IgLCBteUhlcm8pDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RJKHVuaXQpDQogICAgc2VsZi5JZ25pdGU6Q2FzdCh1bml0KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmtpbGxzdGVhbCgpDQogIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBoZWFsdGggPSB1bml0LmhlYWx0aA0KICAgICAgbG9jYWwgZG1nRSA9IHNlbGY6R2V0RURtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nRSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUUgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1EgPSBzZWxmOkdldFFEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1cgPSBzZWxmOkdldFdEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VXIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NTUwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6ZXNjYXBlKCkNCiAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VFICB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZICkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAxLjUpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5IHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZVcgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIHRoZW4NCiAgQ2FzdFNwZWxsKF9XLHRzdy50YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOndhbGsoKQ0KICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmhhcmFzcygpDQogICAgc2VsZi50czp1cGRhdGUoKQ0KICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgdGhlbg0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVEgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgICAgZW5kICAgDQogICAgICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgdGhlbg0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVcgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgICAgZW5kICANCiAgICAgICAgZW5kIA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgIHRoZW4NCiAgICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuaGFyYXNzID09IDEgIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFICkgdGhlbiAgICAgICAgDQogICAgICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgICAgQ2FzdFNwZWxsKF9FLCB0YXJnZXQueCwgdGFyZ2V0LnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDIpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgIHRoZW4NCiAgICAgICAgICAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmhhcmFzcyA9PSAyIGFuZCAgIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApICBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgKSB0aGVuICAgICAgICANCiAgICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHRhcmdldC54LCB0YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMS41KQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpMYXN0SGl0KCkNCiAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDEgdGhlbg0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICAgICAgICBsb2NhbCBRZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApIGFuZCBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpICBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLlFTcGVsbC5SYW5nZSAqIHNlbGYuUVNwZWxsLlJhbmdlIGFuZCBRZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgIGVuZA0KICAgICAgICBsb2NhbCBXZGFtYWdlID0gc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVcgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LldNYW5hIC8xMDAgKWFuZCAgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLldTcGVsbC5SYW5nZSAqIHNlbGYuV1NwZWxsLlJhbmdlIGFuZCBXZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgZWxzZWlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMiB0aGVuDQogICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuV01hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5XU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6TGFuZUNsZWFyKCkNCiAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gc2VsZi5jbGVhcnRhcmdldA0KICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIucWNvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5RTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgIGxvY2FsIEJlc3RQb3MsIEJlc3RIaXQgPSAgR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5RU3BlbGwuUmFuZ2UsIHNlbGYuUVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIud2NvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5XTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5XU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RXKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLmVjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICANCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuRU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuRVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5FU3BlbGwuUmFuZ2UsIHNlbGYuRVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZICkgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX0UsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAyKQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG9xKCkNCiAgDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MuYXV0b3EgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RRMih0YXJnZXQpDQogICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpKdW5nbGVDbGVhcigpDQogICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlFNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLldNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICBzZWxmLldTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuRU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLkVTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICBmdW5jdGlvbiBMaXNzYW5kcmE6V25kTXNnKE1zZywgS2V5KQ0KICAgICAgICBpZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRCA9IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIGFuZCBzdGFyZ2V0LmNoYXJOYW1lID09IHNlbGYuc2VsZWN0ZWRUYXIuY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgIGlmIFBvcFVwMSB0aGVuDQogICAgICBQb3BVcDEgPSBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6VW5sb2FkKCkNCiAgICAgICAgc2VsZjp3cml0ZWNmZygpDQogICAgICBlbmQNCiAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFZpa3RvciBTdGFydHMgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGNsYXNzICJWaWt0b3IiDQogbG9jYWwgZWJ1ZmYgPSBmYWxzZQ0KICByZXF1aXJlICdIUHJlZGljdGlvbicNCiAgZnVuY3Rpb24gVmlrdG9yOl9faW5pdCgpDQogICBzZWxmLnRzPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA1MjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDYwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzdz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMjAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgIHNlbGYudHNnPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMzAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSBtYXRoLmh1Z2UsIFdpZHRoID0gMSwgRGVsYXkgPSAwLCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gdHJ1ZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gbWF0aC5odWdlLCBXaWR0aCA9IDEyNSwgRGVsYXkgPSAwLjUsIFNwZWVkID0gNzUwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuQ0lSQ1VMQVJ9KQ0KICAgICBzZWxmLkVTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9FLCBEYW1hZ2VOYW1lID0gIkUiLCBSYW5nZSA9IDEyMDAsIFdpZHRoID0gMTgwLCBEZWxheSA9IDAsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSB0cnVlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuTElORUFSfSkNCiAgICAgc2VsZi5SU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTcwMCwgV2lkdGggPSAwLCBEZWxheSA9IDAuMjUsIFNwZWVkID0gMTAwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLkNJUkNVTEFSfSkNCiAgICAgc2VsZi5JZ25pdGUgPSBfU3BlbGwoe1Nsb3QgPSBGaW5kU3VtbW9uZXJTbG90KCJzdW1tb25lcmRvdCIpLCBEYW1hZ2VOYW1lID0gIklHTklURSIsIFJhbmdlID0gNjAwLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLkhQcmVkID0gSFByZWRpY3Rpb24oKQ0KICAgICBzZWxmLkUgPSB7UmFuZ2UxID0gNTUwLCBSYW5nZTIgPSA3MDAsIHdpZHRoID0gMTgwLCByZWFkeX0NCiAgICAgc2VsZi5FUmFuZ2UgPSBzZWxmLkUuUmFuZ2UxK3NlbGYuRS5SYW5nZTINCiAgLS18PiBNaW5pb24gTWFuYWdlcnMNCiAgICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuYWxseU1pbmlvbnMgICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9BTExZLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgICAgICAgICBzZWxmOkxvYWRNZW51KCkNCiAgICAgICAgICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgICAgICAgICAgICBMYXN0X0xldmVsU3BlbGwgPSAwDQogICAgICANCiAgICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpUaWNrKCkgZW5kKQ0KICAgICAgICAgICAgICAgIEFkZFVubG9hZENhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpVbmxvYWQoKSBlbmQgKQ0KICAgIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgICBBZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogICAgLS1BZGRBbmltYXRpb25DYWxsYmFjayhmdW5jdGlvbih1bml0LCBhbmltYXRpb24pIHNlbGY6QW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbikgZW5kKQ0KICAgIEFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAgIEFkZEFwcGx5QnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpBcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKSBlbmQpDQogICAtLUFkZFVwZGF0ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbihzb3VyY2UsIHVuaXQsIGJ1ZmYpIHNlbGY6VXBkYXRlQnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCiAgICAtLUFkZFJlbW92ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmKSBzZWxmOk9uUmVtb3ZlQnVmZih1bml0LCBidWZmKSBlbmQpIA0KICAgICAgZW5kDQogIC0tIGhhbmRsZXMgc2NyaXB0IGxvZ2ljLCBhIHB1cmUgaGlnaCBzcGVlZCBsb29wDQogIGZ1bmN0aW9uIFZpa3RvcjpUaWNrKCkNCiAgICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgIHNlbGY6SGFzZWJ1ZmYoKQ0KICAgICAgICBzZWxmOkFudGlhZmsoKQ0KICAgICAgIHNlbGY6YXV0b3BvdCgpDQogICAgICAgc2VsZjppdGVtcygpDQogICAgICAgc2VsZjpjaGVja3RzKCkNCiAgICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICAgICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOnNraW5oYWNrKCkgZW5kDQogICBpZihzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgICAgc2VsZjpjb21ibygpDQogICAgZW5kDQogICAgIGlmKHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkubGFzdGhpdGtleSBvciBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuYXV0b2xhc3RoaXQgKXRoZW4NCiAgICAgIHNlbGY6TGFzdEhpdCgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuZmFybS5jbGVhcmtleS5sYW5lY2xlYXJrZXkpdGhlbg0KICAgICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuZmFybS5jbGVhcmtleS5qdW5nbGVjbGVhcmtleSl0aGVuDQogICAgICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKSB0aGVuDQogICAgICBzZWxmOmtpbGxzdGVhbCgpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuaGFyYXNzLmhhcmFzc2tleSBvciBzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNzdG9nbGUgKSB0aGVuDQogICAgICBzZWxmOmhhcmFzcygpDQogICAgZW5kDQogICAgIGlmIHNlbGYuQ29uZmlnLmluc3RydWN0IHRoZW4NCiAgICBzZWxmLkNvbmZpZy5pbnN0cnVjdCA9IGZhbHNlDQogICAgUG9wVXAxID0gdHJ1ZQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgICAgICAgZnVuY3Rpb24gVmlrdG9yOndyaXRlY2ZnKHBhcmFtKQ0KICAgICAgICBsb2NhbCBmaWxlID0gaW8ub3BlbihTQ1JJUFRfUEFUSC4uIlxcIi4uImNvbmZpZy5jZmciLCAidyIpDQogICAgICAgIGlmIG5vdCBmaWxlIHRoZW4NCiAgICAgICAgICAgICAgIC0tIHByaW50KCJFcnJvciBpbiBXcml0ZSBDRkciKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYgcGFyYW0gfj0gImZ0YyIgdGhlbg0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgICAgICAgIC0tIHByaW50KCJXcml0dGVuOiAiLi5hdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZSgiZW5nIikNCiAgICAgICAgICAgICAgIC0tIHByaW50KCJXOiBFbmdsaXNoIikNCiAgICAgICAgZW5kDQogICAgICAgIGZpbGU6Y2xvc2UoKQ0KZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpjaGVja3RzKCkNCiAgICAgICAgIHNlbGYudHM6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNnOnVwZGF0ZSgpDQogIGlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi50c2UudGFyZ2V0DQogIGVsc2VpZiBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBzZWxmLnNlbGVjdGVkVGFyIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpMb2FkTWVudSgpDQogICAgICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIgWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4iXSIgLCJtZW51IikNCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMDVdLCAiaGl0IikNCiAgICAgICAgc2VsZi5Db25maWcuaGl0OmFkZFBhcmFtKCJFIiwgbG9jX2Nob29zZW5bMTYyXSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxLjYsIDEsIDMsIDIpDQogICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMV0sICJjb21ibyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJjb21ib2tleSIsIGxvY19jaG9vc2VuWzgxXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bMTU5XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjBdLGxvY19jaG9vc2VuWzIxN10sbG9jX2Nob29zZW5bMTcyXSB9KSANCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzldLCAiaGFyYXNzIikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3NrZXkiLCBsb2NfY2hvb3Nlbls4M10sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiQyIpKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oImhhcmFzc3RvZ2xlIiwgbG9jX2Nob29zZW5bMTY0XSwgICBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsxMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMTJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiRSIsIGxvY19jaG9vc2VuWzE2M10sIFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMywgMikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCnNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTRdLCAiZmFybSIpDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE1XSwibGFuZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzE2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzE4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImVjb3VudCIsbG9jX2Nob29zZW5bMTgyXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMF0sImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyNV0sImxhc3RoaXQiKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJhdXRvbGFzdGhpdCIsbG9jX2Nob29zZW5bMTg5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzI2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlRSIsbG9jX2Nob29zZW5bMjhdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJsYXN0aGl0bG9naWMiLGxvY19jaG9vc2VuWzE5MV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTcyXSxsb2NfY2hvb3NlblsxOTBdLGxvY19jaG9vc2VuWzE3NF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjE4XSwiY2xlYXJrZXkiKQ0KICAgICAgc2VsZi5Db25maWcuZmFybS5jbGVhcmtleTphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5OmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4NV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuZmFybS5jbGVhcmtleTphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzVdLCAia2lsbHN0ZWFsIikNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJrcyIsbG9jX2Nob29zZW5bMzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblszN10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMzldLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzQwXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUkiLCBsb2NfY2hvb3Nlbls0MV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNDJdLCAiaXRlbSIpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOTJdLCAiYXV0b3BvdCIpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiZW5hYmxlYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTkzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImVuYWJsZWF1dG96aG9ueWEiLCBsb2NfY2hvb3Nlbls0M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oImF1dG96aG9ueWEiLCBsb2NfY2hvb3Nlbls0NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlaGciLCBsb2NfY2hvb3Nlbls0NV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWJnIiwgbG9jX2Nob29zZW5bNDZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTJdLCAibWlzYyIpDQogICAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTNdLCAiaW50ZXJydXB0IikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oInIiLCBsb2NfY2hvb3Nlbls5N10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oInciLCBsb2NfY2hvb3Nlbls5NV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oImluZm8zIiwgbG9jX2Nob29zZW5bOThdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgZm9yIGksIGEgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgIGlmIEludGVycnVwdFthLmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLCBzcGVsbCBpbiBwYWlycyhJbnRlcnJ1cHRbYS5jaGFyTmFtZV0uc3RvcCkgZG8NCiAgICAgICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKHNwZWxsLnNwZWxsTmFtZSwgYS5jaGFyTmFtZS4uIiAtICIuLnNwZWxsLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgDQogICAgICAgIGVuZA0KICAgICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIxOV0sICJnYXBDbG9zZSIpDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgidyIsIGxvY19jaG9vc2VuWzIyMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgiaW5mbzMiLCBsb2NfY2hvb3Nlbls5OF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIGZvciBfLCBlbmVteSBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgaWYgaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKGVuZW15LmNoYXJOYW1lLCBlbmVteS5jaGFyTmFtZSAuLiAiIC0gIiAuLiBlbmVteTpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0uc3BlbGwpLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQ3XSwgInZpcCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0Iixsb2NfY2hvb3Nlbls0OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bNDldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTBdLCAibGV2ZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzUyXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDcsIHtsb2NfY2hvb3Nlbls1OF0sIGxvY19jaG9vc2VuWzU5XSxsb2NfY2hvb3Nlbls2MF0sbG9jX2Nob29zZW5bNjFdLGxvY19jaG9vc2VuWzYyXSwgbG9jX2Nob29zZW5bNjNdLCBsb2NfY2hvb3Nlbls2NF0gIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUzXSwgInNraW4iKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1NF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbicsIGxvY19jaG9vc2VuWzU3XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHNraW5NZXRhW215SGVyby5jaGFyTmFtZV0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsIGxvY19jaG9vc2VuWzU1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIC0tc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNSIsICJTa2luIEhhY2sgdGVtcG9yYXJ5IGRpc2FibGVkIHVudGlsIG5leHQgdXBkYXRlLiAuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5NV0sICJhbnRpYWZrIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLGxvY19jaG9vc2VuWzE5Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKSANCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsIGxvY19jaG9vc2VuWzU2XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgZW5kDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjVdLCJvdGhlciIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2Nl0sICJkcmF3IikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLGxvY19jaG9vc2VuWzY3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLGxvY19jaG9vc2VuWzY4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiZWRyYXciLGxvY19jaG9vc2VuWzY5XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLGxvY19jaG9vc2VuWzcwXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3Iixsb2NfY2hvb3Nlbls3MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJydGRyYXciLGxvY19jaG9vc2VuWzE5N10sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5OF0sICJjb2xvciIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJRY29sb3IiLCBsb2NfY2hvb3NlblsxOTldLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJXY29sb3IiLCBsb2NfY2hvb3NlblsyMDBdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFY29sb3IiLCBsb2NfY2hvb3NlblsyMDFdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJSY29sb3IiLCBsb2NfY2hvb3NlblsyMDJdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFMmNvbG9yIiwgbG9jX2Nob29zZW5bMjAzXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiQUFjb2xvciIsIGxvY19jaG9vc2VuWzIwNF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oInRhcmdldHNlbGVjdCIsIGxvY19jaG9vc2VuWzIwNV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwNl0sICJ3aWR0aCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJRd2lkdGgiLCBsb2NfY2hvb3NlblsyMTBdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJXd2lkdGgiLCBsb2NfY2hvb3NlblsyMTFdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFd2lkdGgiLCBsb2NfY2hvb3NlblsyMTJdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJSd2lkdGgiLCBsb2NfY2hvb3NlblsyMTNdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFMndpZHRoIiwgbG9jX2Nob29zZW5bMjA3XSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiQUF3aWR0aCIsIGxvY19jaG9vc2VuWzIwOF0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlNUd2lkdGgiLCBsb2NfY2hvb3NlblsyMDldLCA0LCA2LCAxLCAxMCwgMCkgICANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldCIsbG9jX2Nob29zZW5bNzVdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKSAgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJkYW1hZ2UiLGxvY19jaG9vc2VuWzIxNF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXRjYWwiLGxvY19jaG9vc2VuWzc2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkgDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3M10sICJwZXJtYSIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hOmFkZFBhcmFtKCJwZXJtYSIsbG9jX2Nob29zZW5bNzRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc3XSwidGFyZ2V0c2VsIikNCiAgICAgc2VsZi50cy5uYW1lICA9ICJWaWt0b3IiDQogICAgICBzZWxmLnRzcS5uYW1lID0gIlZpa3RvclEiDQogICAgICBzZWxmLnRzdy5uYW1lID0gIlZpa3RvclciDQogICAgICBzZWxmLnRzZS5uYW1lID0gIlZpa3RvckUiDQogICAgICBzZWxmLnRzci5uYW1lID0gIlZpa3RvclIiDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzdykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcikgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc5XSwgIktleXMiKQ0KICAgICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5cykNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgibGFuZyIsIGxvY19jaG9vc2VuWzE2NV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTY2XSwgbG9jX2Nob29zZW5bMTY3XSxsb2NfY2hvb3NlblsxNjhdfSkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5zdHJ1Y3QiLCBsb2NfY2hvb3NlblsyMTZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hLnBlcm1hIHRoZW4NCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikgZW5kLCAxKQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5jb21ibzpwZXJtYVNob3coImNvbWJva2V5IikgZW5kLCAxLjIpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLmhhcmFzczpwZXJtYVNob3coImhhcmFzc3RvZ2xlIikgZW5kLCAxLjIpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLmhhcmFzczpwZXJtYVNob3coImhhcmFzc2tleSIpIGVuZCwgMS4yKQ0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpEcmF3KCkNCiAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjAwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguUXdpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlFjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLld3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTIwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDUyNSwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucnRkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgIHRoZW4NCiAgIGlmIHNlbGYudHNlLnRhcmdldH49bmlsIHRoZW4NCiAgICAgIERyYXdMaW5lM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueixzZWxmLnRzZS50YXJnZXQueCwgc2VsZi50c2UudGFyZ2V0LnksIHNlbGYudHNlLnRhcmdldC56LHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkUyd2lkdGgsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRTJjb2xvcikpKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0IGFuZCBzZWxmLnNlbGVjdGVkVGFyIH49IG5pbCB0aGVuDQogICAgICAgICBEcmF3Q2lyY2xlM0Qoc2VsZi5zZWxlY3RlZFRhci54LCBzZWxmLnNlbGVjdGVkVGFyLnksIHNlbGYuc2VsZWN0ZWRUYXIueiwgODAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlNUd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLnRhcmdldHNlbGVjdCkpKQ0KZW5kDQogICBpZiBQb3BVcDEgdGhlbg0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjUwKSwgKFdJTkRPV19IKi4xNSksIChXSU5ET1dfSCouOSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjA1LCB3LCBoMi8xLjk3LCB3LzEuNzUsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3TGluZSh3LCBoMSwgdywgaDIvMiwgdy8xLjgsIEFSR0IoMTUwLCAyMzUsIDE4MywgNjMpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiV2VsY29tZSB0byBLZXlib2FyZE1hc3RlciBTZXJpZXMgMy4wIiksIFdJTkRPV19IKi4wMjgsIChXSU5ET1dfVy8yKSwgKFdJTkRPV19IKi4xOCksIEFSR0IoMjU1LCA5NiwgNDgsIDApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgRHJhd1RleHRBKHRvc3RyaW5nKCJMaXR0bGUgaW5mb3JtYXRhdGlvbiBhYm91dCBLZXlib2FyZE1hc3RlciBTZXJpZXMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjE5NCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSXRzIGEgYnVuZGxlIHRoYXQgcHJvZHVjZWQgYnkgZW5zdWx1eW4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkN1cnJlbnRseSBpdCBzdXBwb3J0ZWQgb25seSBtaWQgY2hhbXBzICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjI1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBmb2N1cyBRdWFsaXR5IHJhdGhlciB0aGFuIFF1YW50aXR5IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIG5lZWQgeW91ciBmZWVkYmFja3MgdG8gaW1wcm92ZSBpdCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjU1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBjYXJlIGV2ZXJ5IHNpbmdsZSBmZWVkYmFjayBhbmQgdHJ5IHRvIGFkZCBldmVyeXRoaW5nIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNzApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJIb3BlIHlvdSBhcmUgZW5qb3kgbXkgc2NyaXB0Li4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI4NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIllvdSBjYW4gY2hhbmdlIGV2ZXJ5IHNldHRpbmdzIHRvIHlvdXIgbGlrZSA6KSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzAwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRGlkIHlvdSBsaWtlIG15IHNjcmlwdCA+IFVwdm90ZSBtZSBvbiBzY3JpcHRzdGF0dXMgYW5kIG9uIGZvcnVtIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEb24ndCBmb3JnZXQgdGhlc2UgYXJlIFZJUDsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMzMCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBbnRpLUFmayIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzQ1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBdXRvIExldmVsZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNjApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIFNraW4gQ2hhbmdlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM3NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC40OSksIChXSU5ET1dfSCouNzApLCAoV0lORE9XX0gqLjc1KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuNzc1LCB3LCBoMi8xLjY4LCB3Ki4xMSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdSZWN0YW5nbGVCdXR0b24oV0lORE9XX1cqMC40NjcsIFdJTkRPV19ILzIuMzc1LCBXSU5ET1dfVyouMDQ3LCBXSU5ET1dfSCouMDQxLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJPSyIpLCBXSU5ET1dfSCouMDIsIChXSU5ET1dfVy8yKSouOTgsIChXSU5ET1dfSC8yLjM3NSksIEFSR0IoMjU1LCAwLCAwLCAwICksImNlbnRlciIsImNlbnRlciIpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdHMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM5NSksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVycnktIEZvciB0aGlzIGF3ZXNvbWUgcG9wdXAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjQxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkgDQogIGVuZA0KICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldGNhbCBhbmQgbm90IG15SGVyby5kZWFkIHRoZW4NCiAgICAgICAgbG9jYWwgZHJhd3Bvcz1Xb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnopKQ0KICAgICAgICBsb2NhbCBjb21ib1RleHQsY29sb3IgPSBzZWxmOkdldERyYXdzKHRhcmdldCkNCiAgICAgICAgaWYgY29tYm9UZXh0IHRoZW4NCiAgICAgICAgICBEcmF3VGV4dChjb21ib1RleHQsMTUsZHJhd3Bvcy54LTIwLGRyYXdwb3MueS0yMCxjb2xvcikNCiAgICAgICAgZW5kIA0KICAgICAgZW5kIA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwMCkgdGhlbg0KICAgICAgaWYgdGFyZ2V0LnZpc2libGUgYW5kIG5vdCB0YXJnZXQuZGVhZCBhbmQgc2VsZi5Db25maWcub3RoZXIuZGFtYWdlIHRoZW4NCiAgICAgICAgY3VyckxpbmUgPSAxDQogICAgICAgIERyYXdMaW5lSFBCYXIyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwiIiwgIHRhcmdldCwgY3VyckxpbmUpDQogICAgICAgIERyYXdMaW5lSFBCYXIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCAiRGFtYWdlICIgLi4gbWF0aC5yb3VuZChzZWxmOkdldE15RG1nKHRhcmdldCkpLHRhcmdldCxjdXJyTGluZSkNCiAgICAgICAgY3VyckxpbmUgPSBjdXJyTGluZSArIDENCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgICAgIGVuZA0KICANCiAgICBmdW5jdGlvbiBWaWt0b3I6YXV0b3BvdCgpDQogaWYgb3MuY2xvY2soKSAtIGxhc3RQb3Rpb24gPCAxNSB0aGVuIHJldHVybiBlbmQNCiAgZm9yIFNMT1QgPSBJVEVNXzEsIElURU1fNiBkbw0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoU0xPVCkubmFtZSA9PSAiUmVnZW5lcmF0aW9uUG90aW9uIiBhbmQgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90LmVuYWJsZWF1dG9wb3RocCB0aGVuDQogICAgICBpZiBteUhlcm86Q2FuVXNlU3BlbGwoU0xPVCkgPT0gUkVBRFkgYW5kIChteUhlcm8uaGVhbHRoIC8gbXlIZXJvLm1heEhlYWx0aCA8IHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5hdXRvcG90aHAgLzEwMCApICB0aGVuDQogICAgICAgIENhc3RTcGVsbChTTE9UKSANCiAgICAgICAgbGFzdFBvdGlvbiA9IG9zLmNsb2NrKCkgICAgICAgDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCiAgICBmdW5jdGlvbiBWaWt0b3I6aXRlbXMoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWJnIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IHRoZW4NCiAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICBpZiAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIkhleHRlY2hHdW5ibGFkZSIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gVmlrdG9yOnNraW5oYWNrKCkNCiAgaWYgbm90IHNraW5sb2FkIHRoZW4NCiAgaWYgKChDdXJyZW50VGltZUluTWlsbGlzKCkgLSBsYXN0VGltZVRpY2tDYWxsZWQpID4gMjAwKSB0aGVuDQogICAgICBsYXN0VGltZVRpY2tDYWxsZWQgPSBDdXJyZW50VGltZUluTWlsbGlzKCkNCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpbi5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgIHRoZW4NCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddIH49IGxhc3RTa2luIHRoZW4NCiAgICAgICAgbGFzdFNraW4gPSBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkhhc2VidWZmKCkNCiAgZm9yIGkgPSAxLCBteUhlcm8uYnVmZkNvdW50IGRvDQogICAgICAgIGxvY2FsIGJ1ZmYgPSBteUhlcm86Z2V0QnVmZihpKQ0KICAgICAgICBpZiBCdWZmSXNWYWxpZChidWZmKSB0aGVuDQogICAgICAgIGlmIGJ1ZmYubmFtZTpsb3dlcigpID09ICJ2aWt0b3JlYXVnIiB0aGVuDQogICAgICAgICAgICBlYnVmZiA9IHRydWUNCiAgICAgICAgZW5kDQplbmQNCmVuZA0KZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpBcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKQ0KICBpZiB1bml0ID09IG5pbCBvciBidWZmID09IG5pbCB0aGVuIHJldHVybiBlbmQgDQogIGlmIHVuaXQgYW5kIHVuaXQuaXNNZSBhbmQgYnVmZi5uYW1lID09ICJ2aWt0b3JlYXVnIiB0aGVuDQogIGVidWZmID0gdHJ1ZQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDMsMywyLDMsNCwzLDEsMywxLDQsMSwyLDEsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpzYXZlcigpDQogICAgZW5kDQogICAgZnVuY3Rpb24gVmlrdG9yOmFsd2F5c3IoKQ0KICAgIGlmIChzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IGFuZCBHZXREaXN0YW5jZShzZWxmLnRzci50YXJnZXQpPDcwMCApdGhlbg0KICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICBlbmQNCiAgICBlbmQNCiAgICAgICBmdW5jdGlvbiBWaWt0b3I6bmVlZHIoKQ0KICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiggc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwICl0aGVuDQogICAgICAgIGxvY2FsIGRhbWFnZXdpdGhyID1zZWxmOkdldFJEbWcodW5pdCkrc2VsZjpHZXRRRG1nKHVuaXQpICtzZWxmOkdldEVEbWcodW5pdCkgDQogICAgICAgIGxvY2FsIGRhbWFnZXdpdGhub3IgPSBzZWxmOkdldFFEbWcodW5pdCkgK3NlbGY6R2V0RURtZyh1bml0KSANCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkYW1hZ2V3aXRobm9yICl0aGVuDQogICAgICAgICAgc2VsZjpzYXZlcigpDQogICAgICAgZWxzZWlmKGhlYWx0aDxkYW1hZ2V3aXRociApdGhlbg0KICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgICAgIGZ1bmN0aW9uIFZpa3RvcjpraWxscigpDQogICAgICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmKCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5IGFuZCBHZXREaXN0YW5jZSh1bml0KTw3MDAgKXRoZW4NCiAgICAgICAgbG9jYWwgZG1nUiA9c2VsZjpHZXRSRG1nKHVuaXQpDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nUiApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgIGVuZA0KICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpDQogaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgPiAxIHRoZW4NCmlmIEludGVycnVwdFt1bml0LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICBzcGVsbCA9IEludGVycnVwdFt1bml0LmNoYXJOYW1lXS5zdG9wW3NwZWxsLm5hbWVdDQogICAgICAgIGlmIHNwZWxsIH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdFtzcGVsbC5uYW1lXSB0aGVuDQogICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQodW5pdCkgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgc2VsZi5SU3BlbGwuUmFuZ2UgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdC5yIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsID4gMSB0aGVuDQogICAgaWYgSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgIHNwZWxsID0gSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdLnN0b3Bbc3BlbGwubmFtZV0NCiAgICAgICAgaWYgc3BlbGwgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0W3NwZWxsLm5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBWYWxpZFRhcmdldCh1bml0KSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCBzZWxmLldTcGVsbC5SYW5nZSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0LncgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzZWxmOkNhc3RXKHVuaXQpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0gYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgMTAwMCBhbmQgc3BlbGwgfj0gbmlsIHRoZW4gICAgIA0KICAgIGlmIHNwZWxsLm5hbWUgPT0gKHR5cGUoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgPT0gJ251bWJlcicgYW5kIHVuaXQ6R2V0U3BlbGxEYXRhKGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgYW5kIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2VbdW5pdC5jaGFyTmFtZV0gdGhlbg0KICAgICAgaWYgc3BlbGwudGFyZ2V0IH49IG5pbCBhbmQgc3BlbGwudGFyZ2V0Lm5hbWUgPT0gbXlIZXJvLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCA9PSAnYmxpbmRtb25rcXR3bycgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCmVuZA0KICBmdW5jdGlvbiBWaWt0b3I6Y29tYm8oKQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNxLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMSB0aGVuDQogICAgICBzZWxmOmtpbGxyKCkNCiAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAyIHRoZW4NCiAgICAgIHNlbGY6bmVlZHIoKQ0KICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDMgdGhlbg0KICAgICAgc2VsZjphbHdheXNyKCkNCiAgICAgIGVuZA0KICAgIA0KICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgIGVuZA0KICAgICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkNhc3RRKHVuaXQpDQogICAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0Vyh1bml0KQ0KICAgIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdEUodW5pdCkNCiAgIA0KICAgIGlmIHVuaXQuZGVhZCBvciB1bml0LmhlYWx0aCA9PSAwIHRoZW4NCiAgICAgIHJldHVybg0KICAgIGVuZA0KICAgIA0KICAgIGlmIEdldERpc3RhbmNlKHVuaXQsIG15SGVybykgPiBzZWxmLkUuUmFuZ2UxLTUgdGhlbg0KICAgICBFU3RhcnRQb3MgPSBDaXJjbGVJbnRlcnNlY3Rpb24obXlIZXJvLCB1bml0LCBteUhlcm8sIHNlbGYuRS5SYW5nZTEtNSkNCiAgICBlbHNlDQogICAgIEVTdGFydFBvcyA9IFZlY3Rvcih1bml0LngsIHVuaXQueSwgdW5pdC56KQ0KICAgIGVuZA0KICAgIA0KICAgICBFUG9zLCBFSGl0Q2hhbmNlID0gc2VsZi5IUHJlZDpHZXRQcmVkaWN0KHNlbGYuSFByZWQuUHJlc2V0c1snVmlrdG9yJ11bIkUiXSwgdW5pdCwgRVN0YXJ0UG9zKQ0KICAgIA0KICAgIGlmIG1vZGUgPT0gIkNvbWJvIiBhbmQgRUhpdENoYW5jZSA+PSBzZWxmLkNvbmZpZy5oaXQuRSBvciBtb2RlID09ICJIYXJhc3MiIGFuZCBFSGl0Q2hhbmNlID49IHNlbGYuQ29uZmlnLmhhcmFzcy5FIG9yICBtb2RlID09IG5pbCBhbmQgRUhpdENoYW5jZSA+IDEgdGhlbg0KICAgICAgQ2FzdFNwZWxsMyhfRSwgRDNEWFZFQ1RPUjMoRVN0YXJ0UG9zLngsIDAsIEVTdGFydFBvcy56KSwgRDNEWFZFQ1RPUjMoRVBvcy54LCAwLCBFUG9zLnopKQ0KICAgIGVuZA0KICAgIA0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0Uih1bml0KQ0KICAgIHNlbGYuUlNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0SSh1bml0KQ0KICAgIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpraWxsc3RlYWwoKQ0KICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgaGVhbHRoID0gdW5pdC5oZWFsdGgNCiAgICAgIGxvY2FsIGRtZ0UgPSBzZWxmOkdldEVEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c2UudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ0UgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VFIGFuZCBHZXREaXN0YW5jZSh1bml0KTw3MDAgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1EgPSBzZWxmOkdldFFEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpHZXRRRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyMCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDIwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouMiArICgobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjUpKQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpHZXRRMkRtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMjAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjIgKQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gVmlrdG9yOkdldEVEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBub3QgZWJ1ZmYgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuIA0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCAqIDQ1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjcpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2VpZiBlYnVmZiBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPS40KigoMjUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiA0NSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC43KSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIFZpa3RvcjpHZXRSRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBSZGFtYWdlID0gKDUwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICogMTAwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjU1KQ0KICBsb2NhbCBwZXJzZWNvbmQgPSAoIDE0KihteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDE1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjEpDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gUmRhbWFnZSArIHBlcnNlY29uZA0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6R2V0TXlEbWcodGFyZ2V0KQ0KICAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIFZpa3RvcjpHZXREcmF3cyh0YXJnZXQpDQpsb2NhbCBxZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCmxvY2FsIGVkYW1hZ2UgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KbG9jYWwgcmRhbWFnZSA9IHNlbGY6R2V0UkRtZyh0YXJnZXQpDQpsb2NhbCBJZG1nPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgDQogIGlmIHFkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBlZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgZWRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICBlbHNlaWYgcmRhbWFnZSAgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUicsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiByZGFtYWdlICsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2UgK2VkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2UgK2VkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZT50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcmRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0tpbGwgd2l0aCBmdWxsIGNvbWJvJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStlZGFtYWdlK3JkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdGdWxsIENvbWJvICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlIA0KICAgIHJldHVybiAiQ2FudCBLaWxsIHlldCIsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVuZCANCmVuZA0KICBmdW5jdGlvbiBWaWt0b3I6aGFyYXNzKCkNCiAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICBpZiBzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLmhhcmFzcy5oYXJhc3N0b2dsZSAgdGhlbg0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVEgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgICAgZW5kICAgDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlRSAgYW5kIFZhbGlkVGFyZ2V0KHNlbGYudHNlLnRhcmdldCwgc2VsZi5FUmFuZ2UpKSB0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgIGVuZA0KICANCiAgICAgICAgZW5kDQogICAgICBlbmQgICANCiAgICAgIGZ1bmN0aW9uIFZpa3RvcjpBbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmay5hbnRpYWZrIHRoZW4gcmV0dXJuIGVuZA0KICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQogIG15SGVybzpNb3ZlVG8obXlIZXJvLngsIG15SGVyby56KQ0KZW5kDQogICAgIGZ1bmN0aW9uIFZpa3RvcjpMYXN0SGl0KCkNCiAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDEgdGhlbg0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICAgICAgICBsb2NhbCBRZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApIGFuZCBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpICBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLlFTcGVsbC5SYW5nZSAqIHNlbGYuUVNwZWxsLlJhbmdlIGFuZCBRZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgIGVuZA0KICAgICAgICBsb2NhbCBFZGFtYWdlID0gc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LkVNYW5hIC8xMDAgKWFuZCAgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLkVTcGVsbC5SYW5nZSAqIHNlbGYuRVNwZWxsLlJhbmdlIGFuZCBFZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgZWxzZWlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMiB0aGVuDQogICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuRU1hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6TGFuZUNsZWFyKCkNCiAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gc2VsZi5jbGVhcnRhcmdldA0KICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5LmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuUU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICAgc2VsZjpDYXN0UShjbGVhcnRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLmVjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5LmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuRU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuRVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5FU3BlbGwuUmFuZ2UsIHNlbGYuRVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKQ0KICAgICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgYW5kICBCZXN0SGl0ID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfRSwgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjpKdW5nbGVDbGVhcigpDQogICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlFNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkuanVuZ2xlY2xlYXJrZXkgICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5XTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgc2VsZi5XU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZUUgYW5kIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLkVNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICBmdW5jdGlvbiBWaWt0b3I6V25kTXNnKE1zZywgS2V5KQ0KICAgICAgICBpZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRCA9IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIGFuZCBzdGFyZ2V0LmNoYXJOYW1lID09IHNlbGYuc2VsZWN0ZWRUYXIuY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgIGlmIFBvcFVwMSB0aGVuDQogICAgICBQb3BVcDEgPSBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgICAgIGVuZA0KICAgICAgICAgIGZ1bmN0aW9uIFZpa3RvcjpVbmxvYWQoKQ0KICAgICAgICBzZWxmOndyaXRlY2ZnKCkNCiAgICAgIGVuZA0KICBjbGFzcyAiRGlhbmEiDQogLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gRGlhbmEgU3RhcnRzICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBEaWFuYTpfX2luaXQoKQ0Kc2VsZi50cz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgODMwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDgzMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAyMDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzZT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgMzUwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c3I9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDgyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNnPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMDAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSA4MzAsIFdpZHRoID0gNzUsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSAyMDAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDIwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAzNTAsIENvbGxpc2lvbiA9IHRydWUsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID0gODI1LCAgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQotLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgIHNlbGYuZW5lbXlNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9FTkVNWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5vdGhlck1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX09USEVSLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpUaWNrKCkgZW5kKQ0KICAgICAgICAgICAgICBBZGRVbmxvYWRDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VW5sb2FkKCkgZW5kICkNCiAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICBBZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogIC0tQWRkQW5pbWF0aW9uQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYW5pbWF0aW9uKSBzZWxmOkFuaW1hdGlvbih1bml0LCBhbmltYXRpb24pIGVuZCkNCiAgQWRkUHJvY2Vzc1NwZWxsQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSBlbmQpDQogIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAtLUFkZFVwZGF0ZUJ1ZmZDYWxsYmFjayhmdW5jdGlvbih1bml0LCBidWZmLCBzdGFja3MpIHNlbGY6VXBkYXRlQnVmZih1bml0LCBidWZmLCBzdGFja3MpIGVuZCkNCiAgLS1BZGRSZW1vdmVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZikgc2VsZjpPblJlbW92ZUJ1ZmYodW5pdCwgYnVmZikgZW5kKSANCiAgICBlbmQNCiAgICAgZnVuY3Rpb24gRGlhbmE6VGljaygpDQogIHNlbGY6YXV0b3pob255YSgpDQogIHNlbGY6YXV0b3EoKQ0KICBzZWxmOkFudGlhZmsoKQ0KICBzZWxmOmF1dG9wb3QoKQ0KICAtLXNlbGY6Z2FwY2xvc2UoKQ0KICBzZWxmOml0ZW1zKCkNCiAgICAgICAgc2VsZjpjaGVja3RzKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOnNraW5oYWNrKCkgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICl0aGVuDQogICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgZW5kDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAxICl0aGVuDQogICAgc2VsZjpjb21ibzEoKQ0KICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhc3RoaXRrZXkgb3Igc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LmF1dG9sYXN0aGl0ICl0aGVuDQogICAgICBzZWxmOkxhc3RIaXQoKQ0KICAgIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5pbnN0cnVjdCB0aGVuDQogICAgc2VsZi5Db25maWcuaW5zdHJ1Y3QgPSBmYWxzZQ0KICAgIFBvcFVwMSA9IHRydWUNCiAgICAgIGVuZA0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSBhbmQgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiApdGhlbg0KICAgIHNlbGY6Y29tYm8yKCkNCiAgZW5kDQogICAgIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDMgKXRoZW4NCiAgICBzZWxmOmNvbWJvMygpDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICl0aGVuDQogICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICBlbmQNCiAgaWYoc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICkgdGhlbg0KICAgIHNlbGY6a2lsbHN0ZWFsKCkNCiAgZW5kDQogIGlmKHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICApIHRoZW4NCiAgICBzZWxmOmhhcmFzcygpDQogIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgKXRoZW4NCiAgICAgIHNlbGY6ZXNjYXBlKCkNCiAgICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gRGlhbmE6RHJhdygpDQogICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjAwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguUXdpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlFjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLld3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTIwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDUyNSwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0IGFuZCBzZWxmLnNlbGVjdGVkVGFyIH49IG5pbCB0aGVuDQogICAgICAgICBEcmF3Q2lyY2xlM0Qoc2VsZi5zZWxlY3RlZFRhci54LCBzZWxmLnNlbGVjdGVkVGFyLnksIHNlbGYuc2VsZWN0ZWRUYXIueiwgODAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlNUd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLnRhcmdldHNlbGVjdCkpKQ0KZW5kDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC41MCksIChXSU5ET1dfSCouMTUpLCAoV0lORE9XX0gqLjkpDQogICAgRHJhd0xpbmUodywgaDEvMS4wNSwgdywgaDIvMS45Nywgdy8xLjc1LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd0xpbmUodywgaDEsIHcsIGgyLzIsIHcvMS44LCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIldlbGNvbWUgdG8gS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIDMuMCIpLCBXSU5ET1dfSCouMDI4LCAoV0lORE9XX1cvMiksIChXSU5ET1dfSCouMTgpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSwiY2VudGVyIiwiY2VudGVyIikNCiAgIERyYXdUZXh0QSh0b3N0cmluZygiTGl0dGxlIGluZm9ybWF0YXRpb24gYWJvdXQgS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4xOTQpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkl0cyBhIGJ1bmRsZSB0aGF0IHByb2R1Y2VkIGJ5IGVuc3VsdXluIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJDdXJyZW50bHkgaXQgc3VwcG9ydGVkIG9ubHkgbWlkIGNoYW1wcyAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIyNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgZm9jdXMgUXVhbGl0eSByYXRoZXIgdGhhbiBRdWFudGl0eSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjQwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBuZWVkIHlvdXIgZmVlZGJhY2tzIHRvIGltcHJvdmUgaXQiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI1NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgY2FyZSBldmVyeSBzaW5nbGUgZmVlZGJhY2sgYW5kIHRyeSB0byBhZGQgZXZlcnl0aGluZyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjcwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSG9wZSB5b3UgYXJlIGVuam95IG15IHNjcmlwdC4uIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yODUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJZb3UgY2FuIGNoYW5nZSBldmVyeSBzZXR0aW5ncyB0byB5b3VyIGxpa2UgOikiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMwMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRpZCB5b3UgbGlrZSBteSBzY3JpcHQgPiBVcHZvdGUgbWUgb24gc2NyaXB0c3RhdHVzIGFuZCBvbiBmb3J1bSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzE1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRG9uJ3QgZm9yZ2V0IHRoZXNlIGFyZSBWSVA7IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMzApLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQW50aS1BZmsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM0NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQXV0byBMZXZlbGVyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzYwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBTa2luIENoYW5nZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNzUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNDkpLCAoV0lORE9XX0gqLjcwKSwgKFdJTkRPV19IKi43NSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjc3NSwgdywgaDIvMS42OCwgdyouMTEsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3UmVjdGFuZ2xlQnV0dG9uKFdJTkRPV19XKjAuNDY3LCBXSU5ET1dfSC8yLjM3NSwgV0lORE9XX1cqLjA0NywgV0lORE9XX0gqLjA0MSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiT0siKSwgV0lORE9XX0gqLjAyLCAoV0lORE9XX1cvMikqLjk4LCAoV0lORE9XX0gvMi4zNzUpLCBBUkdCKDI1NSwgMCwgMCwgMCApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zOTUpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1cnJ5LSBGb3IgdGhpcyBhd2Vzb21lIHBvcHVwIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi40MTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpIA0KICBlbmQNCiAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCwgMTUwMDApIHRoZW4NCiAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0Y2FsIGFuZCBub3QgbXlIZXJvLmRlYWQgdGhlbg0KICAgICAgICBsb2NhbCBkcmF3cG9zPVdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQogICAgICAgIGxvY2FsIGNvbWJvVGV4dCxjb2xvciA9IHNlbGY6R2V0RHJhd3ModGFyZ2V0KQ0KICAgICAgICBpZiBjb21ib1RleHQgdGhlbg0KICAgICAgICAgIERyYXdUZXh0KGNvbWJvVGV4dCwxNSxkcmF3cG9zLngtMjAsZHJhd3Bvcy55LTIwLGNvbG9yKQ0KICAgICAgICBlbmQgDQogICAgICBlbmQgDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogICAgICBpZiB0YXJnZXQudmlzaWJsZSBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBzZWxmLkNvbmZpZy5vdGhlci5kYW1hZ2UgdGhlbg0KICAgICAgICBjdXJyTGluZSA9IDENCiAgICAgICAgRHJhd0xpbmVIUEJhcjIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCIiLCAgdGFyZ2V0LCBjdXJyTGluZSkNCiAgICAgICAgRHJhd0xpbmVIUEJhcihzZWxmOkdldE15RG1nKHRhcmdldCksICJEYW1hZ2UgIiAuLiBtYXRoLnJvdW5kKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSksdGFyZ2V0LGN1cnJMaW5lKQ0KICAgICAgICBjdXJyTGluZSA9IGN1cnJMaW5lICsgMQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICAgICAgZW5kDQogICAgICBmdW5jdGlvbiBEaWFuYTpraWxsc3RlYWwoKQ0KZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBsb2NhbCBoZWFsdGggPSB1bml0LmhlYWx0aA0KICAgIGxvY2FsIGRtZ0UgPSBzZWxmOkdldEVEbWcodW5pdCkNCiAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgbG9jYWwgZG1nUSA9IHNlbGY6R2V0UURtZyh1bml0KQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICAgICBsb2NhbCBkbWdXID0gc2VsZjpHZXRXRG1nKHVuaXQpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nVyBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVcgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdSID1zZWxmOkdldFJEbWcodW5pdCkNCiAgICAgIGlmKHNlbGYudHNyLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw1NTApdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICBlbmQNCiAgIGVuZA0KZW5kDQogICAgICAgICAgZnVuY3Rpb24gRGlhbmE6d3JpdGVjZmcocGFyYW0pDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKFNDUklQVF9QQVRILi4iXFwiLi4iY29uZmlnLmNmZyIsICJ3IikNCiAgICAgICAgaWYgbm90IGZpbGUgdGhlbg0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIkVycm9yIGluIFdyaXRlIENGRyIpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBwYXJhbSB+PSAiZnRjIiB0aGVuDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZShhdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIldyaXR0ZW46ICIuLmF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKCJlbmciKQ0KICAgICAgICAgICAgICAtLSAgcHJpbnQoIlc6IEVuZ2xpc2giKQ0KICAgICAgICBlbmQNCiAgICAgICAgZmlsZTpjbG9zZSgpDQplbmQNCmZ1bmN0aW9uIERpYW5hOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkNCiAtLVtbIGlmIHNwZWxsLm5hbWUgPT0gImF0dGFjayIgIHRoZW4NCiAgICAgaWYgdW5pdCBhbmQgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIHNwZWxsIGFuZCBzcGVsbC50YXJnZXQgYW5kIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5pc01lIHRoZW4NCiBpZiAoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlVyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCkgdGhlbg0Kc2VsZjpDYXN0Vyh1bml0KQ0KICAgICAgICBlbmQNCiAgICAgZW5kDQogIGVuZF1dDQppZiBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgc3BlbGwgPSBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0uc3RvcFtzcGVsbC5uYW1lXQ0KICAgICAgICBpZiBzcGVsbCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHRbc3BlbGwubmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KHVuaXQpIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IHNlbGYuRVNwZWxsLlJhbmdlICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQuciB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGY6Q2FzdEUodW5pdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KICAgICAgDQogICAgICAgIGZ1bmN0aW9uIERpYW5hOmNoZWNrdHMoKQ0KICAgICAgIHNlbGYudHM6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNnOnVwZGF0ZSgpDQppZiBub3Qgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igbm90IHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuDQp0YXJnZXQgPSBzZWxmLnRzLnRhcmdldA0KZWxzZWlmIHNlbGYudHNnLnRhcmdldH49bmlsIG9yIHNlbGYuc2VsZWN0ZWRUYXIgdGhlbg0KdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KZW5kDQplbmQNCiAgICBmdW5jdGlvbiBEaWFuYTp3YWxrKCkNCiAgICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOmVzY2FwZSgpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICB0aGVuIA0KICBzZWxmOndhbGsoKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOmhhcmFzcygpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBEaWFuYTphdXRvcSgpDQogICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuS2V5cy5hdXRvcSBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBEaWFuYTpDYXN0USh1bml0KQ0KICBzZWxmLlFTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gRGlhbmE6Q2FzdFcodW5pdCkNCiAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIERpYW5hOkNhc3RFKHVuaXQpDQogIHNlbGYuRVNwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBEaWFuYTpDYXN0Uih1bml0KQ0KICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQplbmQNCmZ1bmN0aW9uIERpYW5hOkNhc3RJKHVuaXQpDQogIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCmVuZA0KZnVuY3Rpb24gRGlhbmE6R2V0UURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMjUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAzNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjcpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQpmdW5jdGlvbiBEaWFuYTpHZXRXRG1nKHRhcmdldCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQgDQogICBpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9IDMqKDEwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsICogMTIpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuMikNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBEaWFuYTpHZXRSRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoNDAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiA2MCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC42KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiSGV4dGVjaEd1bmJsYWRlIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogICAgICAgIGZ1bmN0aW9uIERpYW5hOkFudGlhZmsoKQ0KICBpZiBvcy5jbG9jaygpIDwgQ2xvY2sgb3Igbm90IHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrLmFudGlhZmsgdGhlbiByZXR1cm4gZW5kDQogIENsb2NrID0gb3MuY2xvY2soKSArIG1hdGgucmFuZG9tKDYwLDEyMCkNCiAgbXlIZXJvOk1vdmVUbyhteUhlcm8ueCwgbXlIZXJvLnopDQplbmQNCiAgICAgIGZ1bmN0aW9uIERpYW5hOmF1dG9wb3QoKQ0KIGlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBEaWFuYTpMb2FkTWVudSgpDQogICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIgWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4iXSIgLCJtZW51IikNCg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzFdLCAiY29tYm8iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgibG9naWNnYXAiLCAiVXNlIFFSIHRvIGdhcGNsb3NlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiT25seSBpZiB0YXJnZXQgS2lsbGFibGUiLCAiQWx3YXlzIiAsICJOZXZlciIgfSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzOV0sIGxvY19jaG9vc2VuWzE0MF0gLCBsb2NfY2hvb3NlblsxNDFdIH0pDQogICAgIA0KICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOV0sICJoYXJhc3MiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsxMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bMTFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblsxMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgDQogICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNF0sICJmYXJtIikNCiAgICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTVdLCJsYW5lY2xlYXIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMTZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgicWNvdW50Iixsb2NfY2hvb3NlblsxODBdLFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMTAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsxN10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ3Y291bnQiLGxvY19jaG9vc2VuWzE4MV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIldNYW5hIixsb2NfY2hvb3NlblsxODZdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjBdLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzIxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyM10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVIiLGxvY19jaG9vc2VuWzI0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJSTWFuYSIsbG9jX2Nob29zZW5bMTg4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyNV0sImxhc3RoaXQiKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJhdXRvbGFzdGhpdCIsbG9jX2Nob29zZW5bMTg5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzI2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzVdLCAia2lsbHN0ZWFsIikNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMzldLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls0MF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgDQogICAgLS1bWyAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiRXNjYXBlIFNldHRpbmdzIiwiZXNjYXBlIikNCiAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlUiIsIlVzZSBSIE1pbmlvbiBUbyBFc2NhcGUiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VRUiIsIlVzZSBRUiBNaW5pb24gVG8gRXNjYXBlIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSldXQ0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQyXSwgIml0ZW0iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTkyXSwgImF1dG9wb3QiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImVuYWJsZWF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTk0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWhnIiwgbG9jX2Nob29zZW5bNDVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2ViZyIsIGxvY19jaG9vc2VuWzQ2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTJdLCAibWlzYyIpDQogICAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTNdLCAiaW50ZXJydXB0IikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oInIiLCBsb2NfY2hvb3Nlbls5Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oImluZm8zIiwgbG9jX2Nob29zZW5bOThdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgZm9yIGksIGEgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgIGlmIEludGVycnVwdFthLmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgIGZvciBpLCBzcGVsbCBpbiBwYWlycyhJbnRlcnJ1cHRbYS5jaGFyTmFtZV0uc3RvcCkgZG8NCiAgICAgICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKHNwZWxsLnNwZWxsTmFtZSwgYS5jaGFyTmFtZS4uIiAtICIuLnNwZWxsLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgDQogICAgICAgIGVuZA0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZy5taXNjOmFkZFBhcmFtKCJlbWF4IiwgbG9jX2Nob29zZW5bMTQyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5taXNjOmFkZFBhcmFtKCJ1c2VXIiwgIkF1dG8gVyBza2lsbCBpZiBlbmVteSBhdHRhY2tzLiIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNDddLCAidmlwIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJwYWNrZXQiLGxvY19jaG9vc2VuWzQ4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzEiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3Nlbls0OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1MF0sICJsZXZlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bNTJdLCBTQ1JJUFRfUEFSQU1fTElTVCwgNywge2xvY19jaG9vc2VuWzU4XSwgbG9jX2Nob29zZW5bNTldLGxvY19jaG9vc2VuWzYwXSxsb2NfY2hvb3Nlbls2MV0sbG9jX2Nob29zZW5bNjJdLCBsb2NfY2hvb3Nlbls2M10sIGxvY19jaG9vc2VuWzY0XSAgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTNdLCAic2tpbiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzU0XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCdzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJywgbG9jX2Nob29zZW5bNTddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgc2tpbk1ldGFbbXlIZXJvLmNoYXJOYW1lXSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm81IiwgbG9jX2Nob29zZW5bNTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm81IiwgIlNraW4gSGFjayB0ZW1wb3JhcnkgZGlzYWJsZWQgdW50aWwgbmV4dCB1cGRhdGUuIC4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk1XSwgImFudGlhZmsiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuYW50aWFmazphZGRQYXJhbSgiYW50aWFmayIsbG9jX2Nob29zZW5bMTk2XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpIA0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgbG9jX2Nob29zZW5bNTZdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBlbmQNCiAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjVdLCJvdGhlciIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudSgiU2hvdyBEYW1hZ2UgT24gSHAgQmFyIiwgIkhQQkFSIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlci5IUEJBUjphZGRQYXJhbSgia2V5IiwiT04vT0ZGIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2Nl0sICJkcmF3IikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicWRyYXciLGxvY19jaG9vc2VuWzY3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgid2RyYXciLGxvY19jaG9vc2VuWzY4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiZWRyYXciLGxvY19jaG9vc2VuWzY5XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicmRyYXciLGxvY19jaG9vc2VuWzcwXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgiYWFkcmF3Iixsb2NfY2hvb3Nlbls3MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5OF0sICJjb2xvciIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJRY29sb3IiLCBsb2NfY2hvb3NlblsxOTldLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJXY29sb3IiLCBsb2NfY2hvb3NlblsyMDBdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJFY29sb3IiLCBsb2NfY2hvb3NlblsyMDFdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJSY29sb3IiLCBsb2NfY2hvb3NlblsyMDJdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJBQWNvbG9yIiwgbG9jX2Nob29zZW5bMjA0XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgidGFyZ2V0c2VsZWN0IiwgbG9jX2Nob29zZW5bMjA1XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwNl0sICJ3aWR0aCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJRd2lkdGgiLCBsb2NfY2hvb3NlblsyMTBdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJXd2lkdGgiLCBsb2NfY2hvb3NlblsyMTFdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFd2lkdGgiLCBsb2NfY2hvb3NlblsyMTJdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJSd2lkdGgiLCBsb2NfY2hvb3NlblsyMTNdLCA0LCAyLCAxLCAxMCwgMCkgIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiQUF3aWR0aCIsIGxvY19jaG9vc2VuWzIwOF0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlNUd2lkdGgiLCBsb2NfY2hvb3NlblsyMDldLCA0LCA2LCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXQiLGxvY19jaG9vc2VuWzc1XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkgIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiZGFtYWdlIixsb2NfY2hvb3NlblsyMTRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Y2FsIixsb2NfY2hvb3Nlbls3Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpIA0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzNdLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLGxvY19jaG9vc2VuWzc0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc3XSwidGFyZ2V0c2VsIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSzIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgidHMiLGxvY19jaG9vc2VuWzc4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgc2VsZi50cy5uYW1lICA9ICJEaWFuYSINCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3OV0sICJLZXlzIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCBsb2NfY2hvb3Nlbls4MF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJva2V5IiwgbG9jX2Nob29zZW5bODFdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgbG9jX2Nob29zZW5bODJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJoYXJhc3NrZXkiLCBsb2NfY2hvb3Nlbls4M10sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiQyIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImF1dG9xIiwgbG9jX2Nob29zZW5bOTFdLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNSIsIGxvY19jaG9vc2VuWzg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFuZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODVdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJqdW5nbGVjbGVhcmtleSIsIGxvY19jaG9vc2VuWzg2XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s2IiwgbG9jX2Nob29zZW5bODddLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJlc2NhcGVrZXkiLCBsb2NfY2hvb3Nlbls4OF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICAgIC0tc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsICJMYXN0aGl0IEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMiIsIGxvY19jaG9vc2VuWzg5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMTBdLCAiS2V5czIiKQ0KICAgIA0KICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJsYW5nIiwgbG9jX2Nob29zZW5bMTY1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjZdLCBsb2NfY2hvb3NlblsxNjddLGxvY19jaG9vc2VuWzE2OF19KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbnN0cnVjdCIsIGxvY19jaG9vc2VuWzIxNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgICAgICANCiAgICAgaWYgc2VsZi5Db25maWcub3RoZXIucGVybWEucGVybWEgdGhlbg0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWc6cGVybWFTaG93KCJpbmZvYm94IikgZW5kLCAxKQ0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKClzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKSBlbmQsIDEuMikNCiAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKXNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKSBlbmQsIDEuMikNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJhdXRvcSIpIGVuZCwgMS4yKQ0KICBlbmQNCmVuZA0KLS1bW2Z1bmN0aW9uIERpYW5hOmdhcGNsb3NlKCkNCmxvY2FsIFFkbWc9Z2V0RG1nKCJRIix0YXJnZXQsbXlIZXJvKQ0KbG9jYWwgV2RtZz1nZXREbWcoIlciLHRhcmdldCxteUhlcm8pDQpsb2NhbCBFZG1nPWdldERtZygiRSIsdGFyZ2V0LG15SGVybykNCmxvY2FsIFJkbWc9Z2V0RG1nKCJSIix0YXJnZXQsbXlIZXJvKQ0KbG9jYWwgSWRtZz0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQpsb2NhbCBmdWxjb21ibz0gUWRtZyArIFdkbWcgKyBFZG1nICsgUmRtZw0KaWYgKHRhcmdldC5oZWFsdGggPCBmdWxjb21ibyBhbmQgc2VsZi5Db25maWcuY29tYm8ubG9naWNnYXAgPT0gMSBhbmQgR2V0RGlzdGFuY2UodW5pdCk+ODMwIGFuZCBzZWxmLnRzZy50YXJnZXR+PW5pbCkgdGhlbg0Kc2VsZjpDYXN0UVIobWluaW9uKQ0KZWxzZWlmICAoc2VsZi5Db25maWcuY29tYm8ubG9naWNnYXAgPT0gMiBhbmQgR2V0RGlzdGFuY2UodW5pdCk+ODMwIGFuZCBzZWxmLnRzZy50YXJnZXR+PW5pbCkgdGhlbg0Kc2VsZjpDYXN0UVIobWluaW9uKQ0KZW5kDQplbmRdXQ0KICBmdW5jdGlvbiBEaWFuYTpDYXN0UlEodW5pdCkNCiAgICAgICAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpIA0KICAgICBlbmQNCiAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpc2VsZjpDYXN0Uih0YXJnZXQpIGVuZCwgMC41KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOkNhc3RRUih1bml0KQ0KICBsb2NhbCBhYnVmZiA9IHNlbGY6YnVmZihtaW5pb24pDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0UShtaW5pb24pDQogICAgIGVuZA0KICAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgYWJ1ZmYgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIobWluaW9uKQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiBmdW5jdGlvbiBEaWFuYTpjb21ibzEoKQ0KICAgIHNlbGY6Q2FzdFJRKHRhcmdldCkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgR2V0RGlzdGFuY2UodGFyZ2V0KT4yODAgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZWxzZWlmIG5vdCBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZW5kDQogICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBEaWFuYTpjb21ibzIoKQ0KICBsb2NhbCBhYnVmZiA9IHNlbGY6YnVmZih0YXJnZXQpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIGFidWZmIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIG5vdCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgZW5kDQogICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuZW1heCB0aGVuDQogICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpPjI4MCBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSAgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVsc2VpZiBub3Qgc2VsZi5Db25maWcubWlzYy5lbWF4IHRoZW4NCiAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gRGlhbmE6Y29tYm8zKCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuZW1heCB0aGVuDQogICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpPjI4MCBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSApdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZWxzZWlmIG5vdCBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgZW5kDQogICAgICAgaWYoc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgbG9jYWwgaGVhbHRoPXVuaXQuaGVhbHRoDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOmJ1ZmYodW5pdCkNCiByZXR1cm4gVGFyZ2V0SGF2ZUJ1ZmYoJ2RpYW5hbW9vbmxpZ2h0JywgdW5pdCkNCmVuZA0KZnVuY3Rpb24gRGlhbmE6V25kTXNnKE1zZywgS2V5KQ0KaWYgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4gICAgICANCiAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgbG9jYWwgc3RhcmdldCA9IG5pbA0KICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykgPD0gbWluRCBvciBzdGFyZ2V0ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgIGlmIHN0YXJnZXQgYW5kIG1pbkQgPCA1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPlRhcmdldCA8Yj5pcyBubyBsb2dlciBzZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+TmV3IHRhcmdldCA8Yj5zZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICAgIFBvcFVwMSA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOkdldE15RG1nKHRhcmdldCkNCiAgIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgDQogICAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgDQogICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkgK3NlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSANCiAgICAgIGVsc2VpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFdEbWcodGFyZ2V0KSANCiAgICAgIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gRGlhbmE6R2V0RHJhd3ModGFyZ2V0KQ0KbG9jYWwgcWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQpsb2NhbCB3ZGFtYWdlID0gc2VsZjpHZXRXRG1nKHRhcmdldCkNCmxvY2FsIHJkYW1hZ2UgPSBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KbG9jYWwgSWRtZz0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogIA0KICBpZiBxZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdXJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHdkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnVyArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgZWxzZWlmIHJkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcmRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICt3ZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIFcgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2U+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdLaWxsIHdpdGggZnVsbCBjb21ibycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZStyZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRnVsbCBDb21ibyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZSANCiAgICByZXR1cm4gIkNhbnQgS2lsbCB5ZXQiLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbmQgDQplbmQNCmZ1bmN0aW9uIERpYW5hOnNraW5oYWNrKCkNCiAgaWYgbm90IHNraW5sb2FkIHRoZW4NCiAgaWYgKChDdXJyZW50VGltZUluTWlsbGlzKCkgLSBsYXN0VGltZVRpY2tDYWxsZWQpID4gMjAwKSB0aGVuDQogICAgICBsYXN0VGltZVRpY2tDYWxsZWQgPSBDdXJyZW50VGltZUluTWlsbGlzKCkNCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpbi5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgIHRoZW4NCiAgICBpZiBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddIH49IGxhc3RTa2luIHRoZW4NCiAgICAgICAgbGFzdFNraW4gPSBzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddDQogIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgc2tpbnNQQltzZWxmLkNvbmZpZy52aXAuc2tpblsnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbiddXSwgbXlIZXJvLm5ldHdvcmtJRCk7DQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiBmdW5jdGlvbiBEaWFuYTphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gRGlhbmE6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5RTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VXIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5XTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgc2VsZi5XU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLkVNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgIGlmKHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VSIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5STWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuUlNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIERpYW5hOkxhc3RIaXQoKQ0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogIGlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMSB0aGVuDQogICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICAgIGxvY2FsIFFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuUVNwZWxsLlJhbmdlICogc2VsZi5RU3BlbGwuUmFuZ2UgYW5kIFFkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgIGVsc2VpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDIgdGhlbg0KICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBEaWFuYTpMYW5lQ2xlYXIoKQ0KICAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gc2VsZi5jbGVhcnRhcmdldA0KICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIud2NvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5XTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5XU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RXKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnFjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuUU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5RU3BlbGwuUmFuZ2UsIHNlbGYuUVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZnVuY3Rpb24gRGlhbmE6VW5sb2FkKCkNCiAgICAgICAgc2VsZjp3cml0ZWNmZygpDQogICAgICBlbmQNCiAgICAgICAgZnVuY3Rpb24gcG9pbnRPbkxpbmUobXlIZXJvLCB1bml0LCBtaW5pb24sIGV4dHJhKQ0KICAgIGxvY2FsIHRvbWluaW9uID0ge3ggPSBtaW5pb24ueCAtIHVuaXQueCwgeiA9IG1pbmlvbi56IC0gdW5pdC56fQ0KICAgIGxvY2FsIHRvbXlIZXJvID0ge3ggPSBteUhlcm8ueCAtIHVuaXQueCwgeiA9IG15SGVyby56IC0gdW5pdC56fQ0KDQogICAgbG9jYWwgbWFnaXR1ZGVUb215SGVybyA9IHRvbXlIZXJvLnggXiAyICsgdG9teUhlcm8ueiBeIDINCiAgICBsb2NhbCBkb3RQID0gdG9taW5pb24ueCAqIHRvbXlIZXJvLnggKyB0b21pbmlvbi56ICogdG9teUhlcm8ueg0KDQogICAgbG9jYWwgZGlzdGFuY2UgPSBkb3RQIC8gbWFnaXR1ZGVUb215SGVybw0KDQogICAgcmV0dXJuIHVuaXQueCArIHRvbXlIZXJvLnggKiAoZGlzdGFuY2UgKyBleHRyYSksIHVuaXQueiArIHRvbXlIZXJvLnogKiAoZGlzdGFuY2UgKyBleHRyYSkNCmVuZA0KZnVuY3Rpb24gRHJhd0xpbmVIUEJhcihkYW1hZ2UsIHRleHQsIHVuaXQsIGVuZW15dGVhbSkNCiAgICBpZiB1bml0LmRlYWQgb3Igbm90IHVuaXQudmlzaWJsZSB0aGVuIHJldHVybiBlbmQNCiAgICBsb2NhbCBwID0gV29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh1bml0LngsIHVuaXQueSwgdW5pdC56KSkNCiAgICBpZiBub3QgT25TY3JlZW4ocC54LCBwLnkpIHRoZW4gcmV0dXJuIGVuZA0KICAgIGxvY2FsIHRoZWRtZyA9IDANCiAgICBsb2NhbCBsaW5lID0gMg0KICAgIGxvY2FsIGxpbmVQb3NBICA9IHt4ID0gMCwgeSA9IDAgfQ0KICAgIGxvY2FsIGxpbmVQb3NCICA9IHt4ID0gMCwgeSA9IDAgfQ0KICAgIGxvY2FsIFRleHRQb3MgICA9IHt4ID0gMCwgeSA9IDAgfQ0KICAgIA0KICAgIA0KICAgIGlmIGRhbWFnZSA+PSB1bml0Lm1heEhlYWx0aCB0aGVuDQogICAgICAgIHRoZWRtZyA9IHVuaXQubWF4SGVhbHRoIC0gMQ0KICAgIGVsc2UNCiAgICAgICAgdGhlZG1nID0gZGFtYWdlDQogICAgZW5kDQogICAgDQogICAgdGhlZG1nID0gbWF0aC5yb3VuZCh0aGVkbWcpDQogICAgDQogICAgbG9jYWwgU3RhcnRQb3MsIEVuZFBvcyA9IEdldEhQQmFyUG9zKHVuaXQpDQogICAgbG9jYWwgUmVhbF9YID0gU3RhcnRQb3MueCArIDI0DQogICAgbG9jYWwgT2Zmc19YID0gKFJlYWxfWCArICgodW5pdC5oZWFsdGggLSB0aGVkbWcpIC8gdW5pdC5tYXhIZWFsdGgpICogKEVuZFBvcy54IC0gU3RhcnRQb3MueCAtIDIpKQ0KICAgIGlmIE9mZnNfWCA8IFJlYWxfWCB0aGVuIE9mZnNfWCA9IFJlYWxfWCBlbmQgDQogICAgbG9jYWwgbXl0cmFucyA9IDM1MCAtIG1hdGgucm91bmQoMjU1KigodW5pdC5oZWFsdGgtdGhlZG1nKS91bml0Lm1heEhlYWx0aCkpDQogICAgaWYgbXl0cmFucyA+PSAyNTUgdGhlbiBteXRyYW5zPTI1NCBlbmQNCiAgICBsb2NhbCBteV9ibHVlcGFydCA9IG1hdGgucm91bmQoNDAwKigodW5pdC5oZWFsdGgtdGhlZG1nKS91bml0Lm1heEhlYWx0aCkpDQogICAgaWYgbXlfYmx1ZXBhcnQgPj0gMjU1IHRoZW4gbXlfYmx1ZXBhcnQ9MjU0IGVuZA0KDQogICAgDQogICAgaWYgZW5lbXl0ZWFtIHRoZW4NCiAgICAgICAgbGluZVBvc0EueCA9IE9mZnNfWC0xNTANCiAgICAgICAgbGluZVBvc0EueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKSAgICANCiAgICAgICAgbGluZVBvc0IueCA9IE9mZnNfWC0xNTANCiAgICAgICAgbGluZVBvc0IueSA9IChTdGFydFBvcy55LTEwKQ0KICAgICAgICBUZXh0UG9zLnggPSBPZmZzX1gtMTQ4DQogICAgICAgIFRleHRQb3MueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKQ0KICAgIGVsc2UNCiAgICAgICAgbGluZVBvc0EueCA9IE9mZnNfWC0xMjUNCiAgICAgICAgbGluZVBvc0EueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKSAgICANCiAgICAgICAgbGluZVBvc0IueCA9IE9mZnNfWC0xMjUNCiAgICAgICAgbGluZVBvc0IueSA9IChTdGFydFBvcy55LTE1KQ0KICAgIA0KICAgICAgICBUZXh0UG9zLnggPSBPZmZzX1gtMTIyDQogICAgICAgIFRleHRQb3MueSA9IChTdGFydFBvcy55LSgzMCsobGluZSoxNSkpKQ0KICAgIGVuZA0KDQogICAgRHJhd0xpbmUobGluZVBvc0EueCwgbGluZVBvc0EueSwgbGluZVBvc0IueCwgbGluZVBvc0IueSAsIDIsIEFSR0IobXl0cmFucywgMjU1LCBteV9ibHVlcGFydCwgMCkpDQogICAgRHJhd1RleHQodG9zdHJpbmcodGhlZG1nKS4uIiAiLi50b3N0cmluZyh0ZXh0KSwgMTUsIFRleHRQb3MueCwgVGV4dFBvcy55ICwgQVJHQihteXRyYW5zLCAyNTUsIG15X2JsdWVwYXJ0LCAwKSkNCmVuZA0KDQoNCmZ1bmN0aW9uIERyYXdMaW5lSFBCYXIyKGRhbWFnZSwgdGV4dCwgdW5pdCwgbGluZSkNCiAgbG9jYWwgdGhlZG1nID0gMA0KICBpZiBkYW1hZ2UgPj0gdW5pdC5tYXhIZWFsdGggdGhlbg0KICAgIHRoZWRtZyA9IHVuaXQubWF4SGVhbHRoLTENCiAgZWxzZQ0KICAgIHRoZWRtZz1kYW1hZ2UNCiAgZW5kDQogIGxvY2FsIFN0YXJ0UG9zLCBFbmRQb3MgPSBHZXRIUEJhclBvcyh1bml0KQ0KICBsb2NhbCBSZWFsX1ggPSBTdGFydFBvcy54KzI0DQogIGxvY2FsIE9mZnNfWCA9IChSZWFsX1ggKyAoKHVuaXQuaGVhbHRoLXRoZWRtZykvdW5pdC5tYXhIZWFsdGgpICogKEVuZFBvcy54IC0gU3RhcnRQb3MueCAtIDIpKQ0KICBpZiBPZmZzX1ggPCBSZWFsX1ggdGhlbg0KICAgIE9mZnNfWCA9IFJlYWxfWA0KICBlbmQNCiAgRHJhd0xpbmUoT2Zmc19YLTE1MCwgU3RhcnRQb3MueS0obGluZSoxNSksIFN0YXJ0UG9zLngtMjAsIFN0YXJ0UG9zLnktKGxpbmUqMTUpLCAxMCwgQVJHQigxNDAsIDAsIDAsIDApKQ0KZW5kDQpsb2NhbCBmbG9vciA9IG1hdGguZmxvb3INCmZ1bmN0aW9uIERyYXdSZWN0YW5nbGVCdXR0b24oeCwgeSwgdywgaCwgY29sb3IpDQogICAgbG9jYWwgcG9pbnRzID0ge30NCiAgICBwb2ludHNbMV0gPSBEM0RYVkVDVE9SMihmbG9vcih4KSwgZmxvb3IoeSkpDQogICAgcG9pbnRzWzJdID0gRDNEWFZFQ1RPUjIoZmxvb3IoeCArIHcpLCBmbG9vcih5KSkNCiAgbG9jYWwgcG9pbnRzMiA9IHt9DQogIHBvaW50czJbMV0gPSBEM0RYVkVDVE9SMihmbG9vcih4KSwgZmxvb3IoeSAtIGgvMikpDQogIHBvaW50czJbMl0gPSBEM0RYVkVDVE9SMihmbG9vcih4ICsgdyksIGZsb29yKHkgLSBoLzIpKQ0KICBwb2ludHMyWzNdID0gRDNEWFZFQ1RPUjIoZmxvb3IoeCArIHcpLCBmbG9vcih5ICsgaC8yKSkNCiAgcG9pbnRzMls0XSA9IEQzRFhWRUNUT1IyKGZsb29yKHgpLCBmbG9vcih5ICsgaC8yKSkNCiAgbG9jYWwgdCA9IEdldEN1cnNvclBvcygpDQogIHBvbHlnb24gPSBQb2x5Z29uKFBvaW50KHBvaW50czJbMV0ueCwgcG9pbnRzMlsxXS55KSwgUG9pbnQocG9pbnRzMlsyXS54LCBwb2ludHMyWzJdLnkpLCBQb2ludChwb2ludHMyWzNdLngsIHBvaW50czJbM10ueSksIFBvaW50KHBvaW50czJbNF0ueCwgcG9pbnRzMls0XS55KSkNCiAgaWYgcG9seWdvbjpjb250YWlucyhQb2ludCh0LngsIHQueSkpIHRoZW4NCiAgICBEcmF3TGluZXMyKHBvaW50cywgZmxvb3IoaCksIGNvbG9yKQ0KICBlbHNlDQogICAgRHJhd0xpbmVzMihwb2ludHMsIGZsb29yKGgpLCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzICkpDQogIGVuZA0KZW5kDQoNCiAgICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBTaW1wbGVMaWIgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBSZXF1aXJlU2ltcGxlTGliKCkNCiAgICAgIGlmIEZpbGVFeGlzdChMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiKSBhbmQgbm90IEZpbGVFeGlzdChTQ1JJUFRfUEFUSC4uIlNpbXBsZUxpYi5sdWEiKSB0aGVuDQogICAgICAgICAgcmVxdWlyZSAiU2ltcGxlTGliIg0KICAgICAgICAgIGlmIF9HLlNpbXBsZUxpYlZlcnNpb24gPT0gbmlsIHRoZW4gDQogICAgICAgICAgICAgIHByaW50KCJZb3VyIFNpbXBsZUxpYiBmaWxlIGlzIHdyb25nLiIpDQogICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGlmIF9HLlNpbXBsZUxpYlZlcnNpb24gPCAxLjAyIHRoZW4NCiAgICAgICAgICAgICAgcHJpbnQoIllvdSBuZWVkIHRoZSBsYXN0ZXN0IHZlcnNpb24gb2YgU2ltcGxlTGliLiIpDQogICAgICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICBlbHNlaWYgRmlsZUV4aXN0KExJQl9QQVRILi4iU2ltcGxlTGliLmx1YSIpIGFuZCBGaWxlRXhpc3QoU0NSSVBUX1BBVEguLiJTaW1wbGVMaWIubHVhIikgdGhlbg0KICAgICAgICAgIHByaW50KCJTaW1wbGVMaWIubHVhIHNob3VsZCBub3QgYmUgaW4gQ3VzdG9tIFNjcmlwdCAoT25seSBvbiBDb21tb24gZm9sZGVyKSwgZGVsZXRlIGl0IGZyb20gdGhlcmUuLi4iKQ0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgZWxzZQ0KICAgICAgICAgIGxvY2FsIGZ1bmN0aW9uIEJhc2U2NEVuY29kZTIoZGF0YSkNCiAgICAgICAgICAgICAgbG9jYWwgYj0nQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLycNCiAgICAgICAgICAgICAgcmV0dXJuICgoZGF0YTpnc3ViKCcuJywgZnVuY3Rpb24oeCkNCiAgICAgICAgICAgICAgICAgIGxvY2FsIHIsYj0nJyx4OmJ5dGUoKQ0KICAgICAgICAgICAgICAgICAgZm9yIGk9OCwxLC0xIGRvIHI9ci4uKGIlMl5pLWIlMl4oaS0xKT4wIGFuZCAnMScgb3IgJzAnKSBlbmQNCiAgICAgICAgICAgICAgICAgIHJldHVybiByOw0KICAgICAgICAgICAgICBlbmQpLi4nMDAwMCcpOmdzdWIoJyVkJWQlZD8lZD8lZD8lZD8nLCBmdW5jdGlvbih4KQ0KICAgICAgICAgICAgICAgICAgaWYgKCN4IDwgNikgdGhlbiByZXR1cm4gJycgZW5kDQogICAgICAgICAgICAgICAgICBsb2NhbCBjPTANCiAgICAgICAgICAgICAgICAgIGZvciBpPTEsNiBkbyBjPWMrKHg6c3ViKGksaSk9PScxJyBhbmQgMl4oNi1pKSBvciAwKSBlbmQNCiAgICAgICAgICAgICAgICAgIHJldHVybiBiOnN1YihjKzEsYysxKQ0KICAgICAgICAgICAgICBlbmQpLi4oeyAnJywgJz09JywgJz0nIH0pWyNkYXRhJTMrMV0pDQogICAgICAgICAgZW5kDQogICAgICAgICAgbG9jYWwgU2F2ZVBhdGggPSBMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiDQogICAgICAgICAgbG9jYWwgU2NyaXB0UGF0aCA9ICcvQm9ML1RDUFVwZGF0ZXIvR2V0U2NyaXB0NS5waHA/c2NyaXB0PScuLkJhc2U2NEVuY29kZTIoInJhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFjaGljYW8vQm9ML21hc3Rlci9TaW1wbGVMaWIubHVhIikuLicmcmFuZD0nLi5tYXRoLnJhbmRvbSg5OTk5OTk5OSkNCiAgICAgICAgICBsb2NhbCBHb3RTY3JpcHQgPSBmYWxzZQ0KICAgICAgICAgIGxvY2FsIEx1YVNvY2tldCA9IG5pbA0KICAgICAgICAgIGxvY2FsIFNvY2tldCA9IG5pbA0KICAgICAgICAgIGxvY2FsIFNpemUgPSBuaWwNCiAgICAgICAgICBsb2NhbCBSZWN2U3RhcnRlZCA9IGZhbHNlDQogICAgICAgICAgbG9jYWwgUmVjZWl2ZSwgU3RhdHVzLCBTbmlwcGVkID0gbmlsLCBuaWwsIG5pbA0KICAgICAgICAgIGxvY2FsIFN0YXJ0ZWQgPSBmYWxzZQ0KICAgICAgICAgIGxvY2FsIEZpbGUgPSAiIg0KICAgICAgICAgIGxvY2FsIE5ld0ZpbGUgPSAiIg0KICAgICAgICAgIGlmIG5vdCBMdWFTb2NrZXQgdGhlbg0KICAgICAgICAgICAgICBMdWFTb2NrZXQgPSByZXF1aXJlKCJzb2NrZXQiKQ0KICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgU29ja2V0OmNsb3NlKCkNCiAgICAgICAgICAgICAgU29ja2V0ID0gbmlsDQogICAgICAgICAgICAgIFNpemUgPSBuaWwNCiAgICAgICAgICAgICAgUmVjdlN0YXJ0ZWQgPSBmYWxzZQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIFNvY2tldCA9IEx1YVNvY2tldC50Y3AoKQ0KICAgICAgICAgIGlmIG5vdCBTb2NrZXQgdGhlbg0KICAgICAgICAgICAgICBwcmludCgnU29ja2V0IEVycm9yJykNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIFNvY2tldDpzZXR0aW1lb3V0KDAsICdiJykNCiAgICAgICAgICAgICAgU29ja2V0OnNldHRpbWVvdXQoOTk5OTk5OTksICd0JykNCiAgICAgICAgICAgICAgU29ja2V0OmNvbm5lY3QoJ3N4LWJvbC5ldScsIDgwKQ0KICAgICAgICAgICAgICBTdGFydGVkID0gZmFsc2UNCiAgICAgICAgICAgICAgRmlsZSA9ICIiDQogICAgICAgICAgZW5kDQogICAgICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkNCiAgICAgICAgICAgICAgaWYgR290U2NyaXB0IHRoZW4gcmV0dXJuIGVuZA0KICAgICAgICAgICAgICBSZWNlaXZlLCBTdGF0dXMsIFNuaXBwZWQgPSBTb2NrZXQ6cmVjZWl2ZSgxMDI0KQ0KICAgICAgICAgICAgICBpZiBTdGF0dXMgPT0gJ3RpbWVvdXQnIGFuZCBub3QgU3RhcnRlZCB0aGVuDQogICAgICAgICAgICAgICAgICBTdGFydGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICAgICAgcHJpbnQoIkRvd25sb2FkaW5nIGEgbGlicmFyeSBjYWxsZWQgU2ltcGxlTGliLiBQbGVhc2Ugd2FpdC4uLiIpDQogICAgICAgICAgICAgICAgICBTb2NrZXQ6c2VuZCgiR0VUICIuLlNjcmlwdFBhdGguLiIgSFRUUC8xLjFcclxuSG9zdDogc3gtYm9sLmV1XHJcblxyXG4iKQ0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgaWYgKFJlY2VpdmUgb3IgKCNTbmlwcGVkID4gMCkpIGFuZCBub3QgUmVjdlN0YXJ0ZWQgdGhlbg0KICAgICAgICAgICAgICAgICAgUmVjdlN0YXJ0ZWQgPSB0cnVlDQogICAgICAgICAgICAgIGVuZA0KICANCiAgICAgICAgICAgICAgRmlsZSA9IEZpbGUgLi4gKFJlY2VpdmUgb3IgU25pcHBlZCkNCiAgICAgICAgICAgICAgaWYgRmlsZTpmaW5kKCc8L3NpJy4uJ3plPicpIHRoZW4NCiAgICAgICAgICAgICAgICAgIGlmIG5vdCBTaXplIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICBTaXplID0gdG9udW1iZXIoRmlsZTpzdWIoRmlsZTpmaW5kKCc8c2knLi4nemU+JykgKyA2LCBGaWxlOmZpbmQoJzwvc2knLi4nemU+JykgLSAxKSkNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgaWYgRmlsZTpmaW5kKCc8c2NyJy4uJ2lwdD4nKSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgXywgU2NyaXB0RmluZCA9IEZpbGU6ZmluZCgnPHNjcicuLidpcHQ+JykNCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBTY3JpcHRFbmQgPSBGaWxlOmZpbmQoJzwvc2NyJy4uJ2lwdD4nKQ0KICAgICAgICAgICAgICAgICAgICAgIGlmIFNjcmlwdEVuZCB0aGVuIFNjcmlwdEVuZCA9IFNjcmlwdEVuZCAtIDEgZW5kDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgRG93bmxvYWRlZFNpemUgPSBGaWxlOnN1YihTY3JpcHRGaW5kICsgMSxTY3JpcHRFbmQgb3IgLTEpOmxlbigpDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGlmIEZpbGU6ZmluZCgnPC9zY3InLi4naXB0PicpIHRoZW4NCiAgICAgICAgICAgICAgICAgIGxvY2FsIGEsYiA9IEZpbGU6ZmluZCgnXHJcblxyXG4nKQ0KICAgICAgICAgICAgICAgICAgRmlsZSA9IEZpbGU6c3ViKGEsLTEpDQogICAgICAgICAgICAgICAgICBOZXdGaWxlID0gJycNCiAgICAgICAgICAgICAgICAgIGZvciBsaW5lLGNvbnRlbnQgaW4gaXBhaXJzKEZpbGU6c3BsaXQoJ1xuJykpIGRvDQogICAgICAgICAgICAgICAgICAgICAgaWYgY29udGVudDpsZW4oKSA+IDUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgICBOZXdGaWxlID0gTmV3RmlsZSAuLiBjb250ZW50DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGxvY2FsIEhlYWRlckVuZCwgQ29udGVudFN0YXJ0ID0gTmV3RmlsZTpmaW5kKCc8c2MnLi4ncmlwdD4nKQ0KICAgICAgICAgICAgICAgICAgbG9jYWwgQ29udGVudEVuZCwgXyA9IE5ld0ZpbGU6ZmluZCgnPC9zY3InLi4naXB0PicpDQogICAgICAgICAgICAgICAgICBpZiBub3QgQ29udGVudFN0YXJ0IG9yIG5vdCBDb250ZW50RW5kIHRoZW4NCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBuZXdmID0gTmV3RmlsZTpzdWIoQ29udGVudFN0YXJ0ICsgMSxDb250ZW50RW5kIC0gMSkNCiAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBuZXdmID0gbmV3Zjpnc3ViKCdccicsJycpDQogICAgICAgICAgICAgICAgICAgICAgaWYgbmV3ZjpsZW4oKSB+PSBTaXplIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3ZiA9IEJhc2U2NERlY29kZShuZXdmKQ0KICAgICAgICAgICAgICAgICAgICAgIGlmIHR5cGUobG9hZChuZXdmKSkgfj0gJ2Z1bmN0aW9uJyB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbCBmID0gaW8ub3BlbihTYXZlUGF0aCwgIncrYiIpDQogICAgICAgICAgICAgICAgICAgICAgICAgIGY6d3JpdGUobmV3ZikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgZjpjbG9zZSgpDQogICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50KCJSZXF1aXJlZCBsaWJyYXJ5IGRvd25sb2FkZWQuIFBsZWFzZSByZWxvYWQgd2l0aCAyeCBGOS4iKQ0KICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBHb3RTY3JpcHQgPSB0cnVlDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZCkNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIGVuZA0KICBlbmQNCg0KIA0KIA0KICANCiAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IE9yYldhbGtzICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICANCiAgZnVuY3Rpb24gVmlrdG9yOmZpbmRvcmJ3YWxrZXIoKQ0KICBpZiBfRy5SZWJvcm5fTG9hZGVkIHRoZW4NCiAgICAgIFNBQz10cnVlIGFuZA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDgpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICBlbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgYW5kIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAgICAgIFN4T3JiPXRydWUgYW5kIA0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDQpDQogICAgICByZXF1aXJlKCJTeE9yYldhbGsiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJTeE9yYldhbGsiLCJvcmJXYWxrIikgZW5kLDUpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIF9HLlN4T3JiOkxvYWRUb01lbnUoc2VsZi5Db25maWcub3JiV2FsaykgZW5kLDUpDQogICAgZWxzZWlmIFNBQ349dHJ1ZSBhbmQgU3hPcmJ+PSB0cnVlIHRoZW4NCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIlN4T3JiIG9yIFNBQzpSIGlzIHJlcXVpcmVkLiIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOmZpbmRvcmJ3YWxrZXIoKQ0KaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgICBTQUM9dHJ1ZSBhbmQNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgICBTeE9yYj10cnVlIGFuZCANCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gRGlhbmE6ZmluZG9yYndhbGtlcigpDQogaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgICBTQUM9dHJ1ZSBhbmQNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgICBTeE9yYj10cnVlIGFuZCANCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmZpbmRvcmJ3YWxrZXIoKQ0KICAgaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgICBTQUM9dHJ1ZSBhbmQNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgICBTeE9yYj10cnVlIGFuZCANCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpmaW5kb3Jid2Fsa2VyKCkNCiAgIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgIGVsc2VpZiBub3QgX0cuUmVib3JuX0xvYWRlZCBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KICAgICAgU3hPcmI9dHJ1ZSBhbmQgDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgNCkNCiAgICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlN4T3JiV2FsayIsIm9yYldhbGsiKSBlbmQsNSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBlbmQNCiAgZW5kDQogDQogZnVuY3Rpb24gT25VbmxvYWQoKQ0KICBpZiBWSVBfVVNFUiBhbmQgbm90IHNraW5sb2FkICB0aGVuDQogICAgU2VuZFNraW5QYWNrZXQobXlIZXJvLmNoYXJOYW1lLCBuaWwsIG15SGVyby5uZXR3b3JrSUQpDQogIGVuZA0KZW5k=="), nil, "bt", _ENV))()
-- easy cp