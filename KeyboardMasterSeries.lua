

assert(load(Base64Decode("DQogICAgICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgS2V5TWFzdGVyTGliIERvd25sb2FkICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgaWYgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJLZXlib2FyZE1hc3RlckxpYi5sdWEiKSB0aGVuDQogICAgcmVxdWlyZSgiS2V5Ym9hcmRNYXN0ZXJMaWIiKQ0KICBlbHNlDQogIHNraW5sb2FkID0gdHJ1ZQ0KICAgIERlbGF5QWN0aW9uKERvd25sb2FkRmlsZSwgMCwgew0KICAgICAgImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Mb25zZW1hcmlhL3NjcmlwdHMvbWFzdGVyL0tleWJvYXJkTWFzdGVyTGliLmx1YSIsDQogICAgICBMSUJfUEFUSC4uIlxcS2V5Ym9hcmRNYXN0ZXJMaWIubHVhIiwNCiAgICAgIGZ1bmN0aW9uICgpDQogICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjMDBGRkZGXCI+PGI+W0tleWJvYXJkTWFzdGVyTGliXTwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPktleWJvYXJkTWFzdGVyTGliLmx1YSBpcyBuZWNlc3NlcnksIHBsZWFzZSB3YWl0IHdoaWxlIGRvd25sb2FkaW5nLjwvZm9udD4iKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKClwcmludCgiPGZvbnQgY29sb3I9XCIjMDBGRkZGXCI+PGI+W0tleWJvYXJkTWFzdGVyTGliXTwvYj48L2ZvbnQ+IDxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPktleWJvYXJkTWFzdGVyTGliLmx1YSBoYXMgYmVlbiBkb3dubG9hZGVkLCBQbGVhc2UgcmVsb2FkICgyeEY5KTwvZm9udD4iKSBlbmQsIDUuNSkNCiAgICAgIGVuZA0KICAgIH0pDQogIGVuZA0KICAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFNjcmlwdCBTdGFydCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBsb2NhbCBWZXJzaW9uID0gIjQuMDEiICANCiAgbG9jYWwgTFZlcnNpb24gPSAiICIgLi4gY3VycmVudHBhdGNoLi4iIg0KICBsb2NhbCBTY3JpcHRuYW1lID0gIktleWJvYXJkIE1hc3RlciBTZXJpZXMiDQogIGxvY2FsIEF1dGhvciA9ICJFbnN1bHV5biINCiAgbG9jYWwgbGlzdCA9ICJMZWJsYW5jICwgTGlzc2FuZHJhICwgVmlrdG9yLCBBa2FsaSwgRGlhbmEiDQogIGxvY2FsIGxpbmsgPSAiR28gdG8gaHR0cDovL2ZvcnVtLmJvdG9mbGVnZW5kcy5jb20vZm9ydW0vMjAtY2hhbXBpb24tc2NyaXB0cy8gdGhlbiB5b3UgY2FuIHNlZSBteSB0b3BpYyAiLi5TY3JpcHRuYW1lLi4iIG9uIHRoZSBmaXJzdCBvciBzZWNvbmQgcGFnZS4iDQogIGxvY2FsIGRhdGUgPSAiMjYuMTIuMjAxNSINCiAgZ2xvYmFsX3RpY2tzID0gMA0KICBsb2NhbCBsYXN0VGltZVRpY2tDYWxsZWQgPSAwDQogbG9jYWwgc2tpbmxvYWQgPSBmYWxzZQ0KICAgaWYgc2tpbmxvYWQgdGhlbg0KICBsb2NhbCBza2luc1BCID0ge307DQogIGxvY2FsIHNraW5PYmplY3RQb3MgPSBuaWw7DQogIGxvY2FsIHNraW5IZWFkZXIgPSBuaWw7DQogIGxvY2FsIGRpc3BlbGxIZWFkZXIgPSBuaWw7DQogIGxvY2FsIHNraW5IID0gbmlsOw0KICBsb2NhbCBza2luSFBvcyA9IG5pbDsNCiAgZW5kDQogIGxvY2FsIGxhbmcgPSAiZW5nIg0KbG9jYWwgYXZhX2xhbmd1YWdlcyA9IHsiZW5nIiwgInRyIiwiZ3IifQ0KDQoNCi0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IEVuZ2xpc2ggVHJhbnNsYXRpb24gZGV0YWlscyAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KbG9jYWwgbG9jX2VuZyA9IHsNCi0tR2VuZXJhbCBNZW51KENvbWJvKSAvLyA4IC8vIDENCiJDb21ibyBTZXR0aW5ncyIsICJVc2UgUSBpbiBDb21ibyIsICJVc2UgVyBpbiBDb21ibyIsICJVc2UgRSBpbiBDb21ibyIsICJVc2UgUiBpbiBDb21ibyIgLA0KIlVzZSBJZ25pdGUgaWYgdGFyZ2V0IGtpbGxhYmxlIiwiQ29tYm8gbG9naWMiLCJNYW5hIE1hbmFnZXIgJSIsDQotLUdlbmVyYWwgTWVudShIYXJhc3MpIC8vIDUgLy8gOQ0KIkhhcmFzcyBTZXR0aW5ncyIsIkhhcmFzcyBXaXRoIFEiLCJIYXJhc3MgV2l0aCBXIiwiSGFyYXNzIFdpdGggRSIsIkhhcmFzcyBXaXRoIFIiLA0KLS1HZW5lcmFsIE1lbnUoQ2xlYXIpIC8vIDE2IC8vIDE0DQoiRmFybSBTZXR0aW5ncyIsIkxhbmVDbGVhciBTZXR0aW5ncyIsIlVzZSBRIG9uIExhbmVjbGVhciIsIlVzZSBXIG9uIExhbmVjbGVhciIsIlVzZSBFIG9uIExhbmVjbGVhciIsIlVzZSBSIG9uIExhbmVjbGVhciIsDQoiSnVuZ2xlQ2xlYXIgU2V0dGluZ3MiLCJVc2UgUSBvbiBqdW5nbGVjbGVhciIsIlVzZSBXIG9uIGp1bmdsZWNsZWFyIiwiVXNlIEUgb24ganVuZ2xlY2xlYXIiLCJVc2UgUiBvbiBqdW5nbGVjbGVhciIsDQoiTGFzdGhpdCBTZXR0aW5ncyIsIlVzZSBRIG9uIExhc3RoaXQiLCJVc2UgVyBvbiBMYXN0aGl0IiwiVXNlIEUgb24gTGFzdGhpdCIsIlVzZSBSIG9uIExhc3RoaXQiLA0KLS1HZW5lcmFsIE1lbnUoRXNjYXBlKSAvLyA1IC8vIDMwDQoiRXNjYXBlIFNldHRpbmdzIiwiVXNlIFEgV2hpbGUgRXNjYXBlIiwiVXNlIFcgV2hpbGUgRXNjYXBlIiwiVXNlIEUgV2hpbGUgRXNjYXBlIiwiVXNlIFIgV2hpbGUgRXNjYXBlIiwNCi0tR2VuZXJhbCBNZW51KEtpbGxzdGVhbCkgLy8gNyAvLyAzNQ0KIktpbGxTdGVhbCBTZXR0aW5ncyIsIktpbGxzdGVhbCBPbi9PZmYiLCJTdGVhbCBXaXRoIFEiLCJTdGVhbCBXaXRoIFciLCJTdGVhbCBXaXRoIEUiLCJTdGVhbCBXaXRoIFIiLCJTdGVhbCBXaXRoIElnbml0ZSIsDQotLUdlbmVyYWwgTWVudSjEsHRlbSBTZXR0aW5ncykgLy8gNSAvLyA0Mg0KIkl0ZW0gU2V0dGluZ3MiLCJBdXRvIFpob255YSIsICJaaG9ueWEgaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCAiVXNlIEhleHRlY2ggR3VuYmxhZGUiLCAiVXNlIEJpbGdld2F0ZXIgQ3V0bGFzcyIsDQotLUdlbmVyYWwgTWVudShWxLFwIFNldHRpbmdzKSAvLyAxOSAvLyA0Nw0KIlZJUCBTZXR0aW5ncyIsIlVzZSBQYWNrZXQgQ2FzdGluZyIsIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFBhY2tldCBDYXN0aW5nIHNob3VsZCBiZSBvcGVuLiIsICJBdXRvIExldmVsIFNldHRpbmdzIiwiVXNlIEF1dG8gTGV2ZWwiLA0KIlNlbGVjdCBTa2lsbCBPcmRlciIsIlNraW4gSGFjayBTZXR0aW5ncyIsIlVzZSBTa2luIEhhY2siLCJNYWtlIHN1cmUgdGhhdCB1c2luZyBwYWNrZXQgY2FzdGluZyBpcyBPTi4iLA0KIlRvIHVzZSB2aXAgc2V0dGluZ3MsIFlvdSBuZWVkIHRvIGJlIGEgVklQIHVzZXIgb24gQk9MIGNvbW11bml0eS4iLCJTZWxlY3QgU2tpbiIsDQoiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciLCAiU21hcnQiICwNCi0tR2VuZXJhbCBNZW51KERyYXcgU2V0dGluZ3MpIC8vIDEyIC8vIDY1DQoiRHJhdyBTZXR0aW5ncyIsIlNraWxsIERyYXdpbmcgU2V0dGluZ3MiLCJRIFNraWxsIERyYXdpbmdzIiwiVyBTa2lsbCBEcmF3aW5ncyIsIkUgU2tpbGwgRHJhd2luZ3MiLCJSIFNraWxsIERyYXdpbmdzIiwiQXV0byBBdHRhY2sgUmFuZ2UiLA0KIkRyYXcgQ29tYm8gTW9kZSIsIkRyYXcgUGVybWFib3giLCJEcmF3IFBlcm1hYm94ICggTmVlZHMgMnggRjkgKSIsIkRyYXcgY2lyY2xlIGZvciB0YXJnZXQgc2VsZWN0ZWQiLCJUYXJnZXQgY2FsY3VsYXRpb24iLA0KLS1HZW5lcmFsIE1lbnUoVGFyZ2V0IFNlbGVjdG9ycykgLy8gMiAvLyA3Nw0KIlRhcmdldHNlbGVjdG9ycyIsIkxlZnQgQ2xpY2sgRm9yIFRhcmdldCBTZWxlY3Rpb24iLA0KLS1HZW5lcmFsIE1lbnUoS2V5IFNldHRpbmdzKSAvLyAxMyAvLyA3OQ0KIktleXMgU2V0dGluZ3MiLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNvbWJvIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLT4iLCJDb21ibyBLZXkiLCI8LS0tLS0tLS0tLS0tLS0tLS0tSGFyYXNzIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLT4iLCANCiJTbWFydCBIYXJhc3MgS2V5IiwiPC0tLS0tLS0tLS0tLS0tLS0tLUNsZWFyIEtleSBTZXR0aW5ncy0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkxhbmVDbGVhciBLZXkiLCJKdW5nbGVDbGVhciBLZXkiLCANCiI8LS0tLS0tLS0tLS0tLS0tLS0tT3RoZXIgS2V5IFNldHRpbmdzLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiRXNjYXBlIEtleSIsICJNYWtlIFN1cmUgVGhhdCBZb3VyIE9yYndhbGtlciBLZXlzIGFyZSBTYW1lIEFzIEhlcmUiLCJPcndXYWxrZXJLZXkgU2V0dGluZ3MiLA0KIkF1dG8gSGFyYXNzIFEiLA0KLS1HZW5lcmFsIE1lbnUoTWlzYyBTZXR0aW5ncykgLy8gNyAvLyA5Mg0KIk1pc2MgU2V0dGluZ3MiLCAiWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4gIl0gLSBBdXRvLUludGVycnVwdCIsIkludGVycnVwdCB3aXRoIFEgU2tpbGwiLCJJbnRlcnJ1cHQgd2l0aCBXIFNraWxsIiwiSW50ZXJydXB0IHdpdGggRSBTa2lsbCIsDQoiSW50ZXJydXB0IHdpdGggUiBTa2lsbCIsIiAgICAgICAgICAgICAgICAgIFtTdXBwb3J0ZWQgU2tpbGxzXSIsDQotLSBHZW5lcmFsIE1lbnUoU2tpbGwgTG9naWMpIC8vIDYgLy8gOTkNCiJTa2lsbCBMb2dpY3MiLCJRIFNraWxsIExvZ2ljIiwiVyBTa2lsbCBMb2dpYyIsIkUgU2tpbGwgTG9naWMiLCJSIFNraWxsIExvZ2ljIiwiSGVhbHRoIE1hbmFnZXIgJSIsDQotLSBHZW5lcmFsIE1lbnUoSGl0Y2hhbmNlIFNldHRpbmdzKSAvLyA1IC8vIDEwNQ0KIkhpdGNoYW5jZSIsIlEgSGl0Y2hhbmNlIiwiVyBIaXRjaGFuY2UiLCJFIEhpdGNoYW5jZSIsIlIgSGl0Y2hhbmNlIiwNCi0tIEdlbmVyYWwgTWVudShPcmJ3YWxrIFNldHRpbmdzKSAvLyA1ICAvLyAxMTANCiJPcmJXYWxrZXJLZXkgU2V0dGluZ3MiLA0KIiAgICAgICAgICAgICAgICAgU2NyaXB0IFZlcnNpb246ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIiAgICAgICAgICAgIFNjcmlwdCB3YXMgbWFkZSBieSAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsDQoiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCJDdXJyZW50IE9yYndhbGtlcjogICAgICAgICAgICAgICAgICAgICAgU2lkYXMgQXV0byBDYXJyeSIsDQoiQ3VycmVudCBPcmJ3YWxrZXI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTeE9yYldhbGsiLCANCi0tIExlYmxhbmMgTWVudSAvLyAxMyAvLyAxMTYNCiJRPkU+Vz5SIiwgIlE+Uj5FPlciLCAiRT5RPlc+UiIsICJFPlc+UT5SIiAsIlJhbmRvbSBTa2lsbCBPcmRlciIsIlcgU2tpbGwgdHVybiBiYWNrIHNldHRpbmdzIiwiVHVybiBiYWNrIHRvIFcgc3BvdCBvbiBRPkU+Vz5SIG1vZGUgIiwNCiJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFE+Uj5FPlcgbW9kZSAiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIEU+UT5XPlIgbW9kZSAiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIEU+Vz5RPlIgbW9kZSAiLA0KIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gUmFuZG9tIFNraWxsIE9yZGVyIG1vZGUgIiwiU3RlYWwgV2l0aCBRVyIsIk9ubHkgdXNlIEUgU2tpbGwgKE9ubHkgU3R1bikiLCIgU2VsZWN0IENvbWJvbW9kZSBLZXkiLA0KLS0gQWthbGkgTWVudSAvLyA5DQoiMiBlbmVteSIsICIzIGVuZW15IiAsICI0IGVuZW15IiwiNSBlbmVteSIsIlVzZSBSIGlmIFEgaXMgb24gdGFyZ2V0IiwgIlJ1c2ggU2tpbGxzIiwiVXNlIFN0ZWFsdGggaWYgZW5lbXkgPiIsIlVzZSBTdGVhbHRoIGlmIGhlYWx0ICUiLCJVc2UgU3RlYWx0aCAoVykiLA0KLS0gRGlhbmEgTWVudSAvLyA0DQoiU21hcnQgQ29tYm8iLCAiVXNlIFIgaWYgdGFyZ2V0IG1hcmtlZCIgLCAiU3BhbSBldmVyeXRoaW5nIGZhc3QiLCJVc2UgRSBvbmx5IGlmIGVuZW15IGRpc3RhbmNlID4gMjgwIiwNCi0tIExpc3NhbmRyYWEgTWVudSAvLyAxNw0KIkUgTG9naWMgZm9yIGNvbWJvIG1vZGUiLCJFIExvZ2ljIGZvciBoYXJhc3MgbW9kZSIsIkVuZ2FnZSB3aXRoIHNlY29uZCBFIiwgIkRvIG5vdCB1c2UgU2Vjb25kIEUgKCBSZWNvbWVuZGVkKSIgLA0KIkRvIG5vdCB1c2UgU2Vjb25kIEUgKCBSZWNvbWVuZGVkKSIsICJFbmdhZ2Ugd2l0aCBzZWNvbmQgRSIgLCJTbWFydCIsICJzYXZlIGZvciB5b3Vyc2VsZiIsICJVc2UgZm9yIGVuZW15IiAsIkF1dG8gUiBmb3IgeW91cnNlbGYiLA0KIkF1dG9SIGlmIEhlYWx0aCB1bmRlciAtPiAlIiwgIkVuZ2FnZSB3aXRoIHNlY29uZCBFIG9wdGlvbiBpcyBzdGlsbCBvbiBCZXRhLi4iLCAiUiBMb2dpYyBmb3IgY29tYm8gbW9kZSIsICJGb3IgdXNpbmcgU21hcnQgUiBsb2dpYywgQXV0b1Igc2hvdWxkIGJlIG9wZW4uLiIsDQoiVXNlIFcgZm9yIEFudGkgR2FwQ2xvc2UiLCJUaGlzIEZ1bmN0aW9uIGlzIG9uIGJldGEuLiIsDQotLSBWaWt0b3IgTWVudSAvLyA1DQoiVWx0aSBMb2dpYyIsIlVzZSBVbHRpIElmIFRhcmdldCBJcyBLaWxsYWJsZSIsIlVzZSBVbHRpIERpcmVjdGx5IiAsIkUgSGl0Q2hhbmNlIChEZWZhdWx0IHZhbHVlID0gMS42KSIsIkUgSGl0Q2hhbmNlIChEZWZhdWx0IHZhbHVlID0gMikiLCJTbWFydCBBdXRvIEhhcmFzcyIsDQotLSBsYW5ndWFnZSBtZW51Ly8gNQ0KIkxhbmd1YWdlKE5lZWRzIDJ4RjkpIiwiRW5nbGlzaCIsICJUdXJraXNoIiwiR2VybWFuIiwiS29yZWFuIiwNCi0tIEV4dHJhc3MvLyANCiJTdGFydCBFbmdhZ2UgV2l0aCBZb3VyIFVsdGkgIiwNCi0tIHJld29yay8vIDE3MQ0KIkF1dG8gVyBiYWNrIGlmIGhlYWx0aCA+IiwiQWx3YXlzIiwiRGVwZW5kcyBvbiBsb2NhbCBTZXR0aW5ncyIsIk5ldmVyIiwiRW5lbXkgTnVtYmVyIiwiQXV0byBXIGJhY2sgaWYgZW5lbXkgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtMb2NhbCBTZXR0aW5nc10iLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFc+Uj5RPkUgbW9kZSAiLA0KIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gVz5RPlI+RSBtb2RlICIsIk1pbmltdW0gbWluaW9uIHRvIFEgPiIsIk1pbmltdW0gbWluaW9uIHRvIFcgPiIsIk1pbmltdW0gbWluaW9uIHRvIEUgPiIsIk1pbmltdW0gbWluaW9uIHRvIFIgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtNYW5hIE1hbmFnZXJdIiwNCiJRIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlcgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiRSBTa2lsbCBNYW5hIE1hbmFnZXIgICUiLCJSIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlVzZSBBdXRvIExhc3RoaXQiLCJPbmx5IGlmIGNhbm5vdCBBQSIsIkxhc3RoaXQgTG9naWMiLCJBdXRvIFBvdGlvbiIsIlVzZSBBdXRvIFBvdGlvbiIsDQoiQXV0byBQb3Rpb24gaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCJBbnRpLUFGSyBTZXR0aW5ncyIsIlVzZSBBbnRpIEFmayIsIkUgLVRhcmdldCBkcmF3IiwiQ29sb3IgU2V0dGluZ3MiLCJRIENvbG9yIiwiVyBDb2xvciIsIkUgQ29sb3IiLCJSIENvbG9yIiwiRSAtVGFyZ2V0IENvbG9yIiwiQXV0byBBdHRhY2sgQ29sb3IiLA0KIlNlbGVjdGVkIFRhcmdldCBDb2xvciIsIkRyYXcgV2lkdGggU2V0dGluZ3MiLCJFIC1UYXJnZXQgV2lkdGgiLCJTZWxlY3RlZCBUYXJnZXQgV2lkdGgiLCJBdXRvIEF0dGFjayBXaWR0aCIsIlEgU2tpbGwgV2lkdGgiLCJXIFNraWxsIFdpZHRoIiwiRSBTa2lsbCBXaWR0aCIsIlIgU2tpbGwgV2lkdGgiLCJEcmF3IERhbWFnZSBJbmRpY2F0b3IiLA0KIkxhc3RoaXQgS2V5IiwiQ2xpY2sgRm9yIEluc3RydWN0aW9ucyIsIlVzZSBpZiBuZWVkZWQiLCJDbGVhciBLZXkgU2V0dGluZ3MiLCJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIEFudGkgR2FwLUNsb3NlIiwiR2FwLUNsb3NlIFdpdGggVyBTa2lsbCIsIkh1bWFuaXplciBmb3IgQW50aSBHYXAgQ2xvc2UiLA0KIkF1dG8gVyBTZXR0aW5ncyIsIlVzZSBBdXRvIFcgIiwiQXV0byBXIGlmIGVuZW15ID4iLCJSIC1UYXJnZXQgZHJhdyIsIlIgLVRhcmdldCBDb2xvciIsIlIgLVRhcmdldCBXaWR0aCINCn0NCg0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gVHVya2lzaCBUcmFuc2xhdGlvbiBkZXRhaWxzICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQpsb2NhbCBsb2NfdHIgPSB7DQotLUdlbmVyYWwgTWVudShDb21ibykgLy8gOA0KIktvbWJvIEF5YXJsYXJpIiwgIktvbWJvZGEgUSBrdWxsYW4iLCAiS29tYm9kYSBXIGt1bGxhbiIsICJLb21ib2RhIEUga3VsbGFuIiwgIktvbWJvZGEgUiBrdWxsYW4iICwNCiJIZWRlZiBvbHVjZWtzZSB0dXR1c3R1ciBrdWxsYW4iLCJLb21ib251IHNlYyAiLCJNYW5hIE1lbmFqZXJpICUiLA0KLS1HZW5lcmFsIE1lbnUoSGFyYXNzKSAvLyA1DQoiRHVydG1lIEF5YXJsYXJpIiwiUmFraWJpIFEgaWxlIGR1cnQiLCJSYWtpYmkgVyBpbGUgZHVydCIsIlJha2liaSBFIGlsZSBkdXJ0IiwiUmFraWJpIFIgaWxlIGR1cnQiLA0KLS1HZW5lcmFsIE1lbnUoQ2xlYXIpIC8vIDE2DQoiRmFybSBBeWFybGFyaSIsIktvcmlkb3IgVGVtaXpsZW1lIEF5YXJsYXJpIiwiUSBza2lsaW5pIEt1bGxhbiIsIlcgc2tpbGluaSBLdWxsYW4iLCJFIHNraWxpbmkgS3VsbGFuIiwiUiBza2lsaW5pIEt1bGxhbiIsDQoiT3JtYW4gVGVtaXpsZW1lIEF5YXJsYXJpIiwiUSBza2lsaW5pIEt1bGxhbiIsIlcgc2tpbGluaSBLdWxsYW4iLCJFIHNraWxpbmkgS3VsbGFuIiwiUiBza2lsaW5pIEt1bGxhbiIsDQoiU29uIFZ1cnVzIEF5YXJsYXJpIiwiUSBza2lsaW5pIEt1bGxhbiIsIlcgc2tpbGluaSBLdWxsYW4iLCJFIHNraWxpbmkgS3VsbGFuIiwiUiBza2lsaW5pIEt1bGxhbiIsDQotLUdlbmVyYWwgTWVudShFc2NhcGUpIC8vIDUNCiJLYWNpcyBBeWFybGFyaSIsIkthY2Fya2VuIFEga3VsbGFuIiwiS2FjYXJrZW4gVyBrdWxsYW4iLCJLYWNhcmtlbiBFIGt1bGxhbiIsIkthY2Fya2VuIFIga3VsbGFuIiwNCi0tR2VuZXJhbCBNZW51KEtpbGxzdGVhbCkgLy8gNw0KIktpbGwgQ2FsbWEgQXlhcmxhcmkiLCJLaWxsIENhbG1hIEthcGFsaSAvIEFjaWsiLCJRIHNraWxpbmkgS3VsbGFuIiwiVyBza2lsaW5pIEt1bGxhbiIsIkUgc2tpbGluaSBLdWxsYW4iLCJSIHNraWxpbmkgS3VsbGFuIiwiVHV0dXN0dXIgS3VsbGFuIiwNCi0tR2VuZXJhbCBNZW51KMSwdGVtIFNldHRpbmdzKSAvLyA1DQoiSXRlbSBBeWFybGFyaSIsIk90b21hdGlrIFpob255YSIsICJaaG9ueWEgRWdlciBjYW4gLT4gJSIsICJIZXh0ZWNoIEd1bmJsYWRlIGt1bGxhbiIsICJCaWxnZXdhdGVyIEN1dGxhc3Mga3VsbGFuIiwNCi0tR2VuZXJhbCBNZW51KFbEsXAgU2V0dGluZ3MpIC8vIDE5DQoiVklQIEF5YXJsYXJpIiwiUGFja2V0IENhc3RpbmcgS3VsbGFuIiwiVmlwIGF5YXJsYXJpbmkga3VsbGFubWFrIGljaW4gcGFja2V0IGNhc3RpbmcgYWNpayBvbG1hbGlkaXIuIiwgIk90b21hdGlrIFNldml5ZSBBeWFybGFyaSIsIk90b21hdGlrIFNldml5ZSIsDQoiWWV0ZW5layBEdXplbmluaW4gU2VjaW4iLCJLb3N0dW0gSGFjayBBeWFybGFyaSIsIktvc3R1bSBIYWNrIEt1bGxhbiIsIlBhY2tldCBDYXN0aW5nIGFjaWsgb2xkdWd1bmRhbiBlbWluIG9sdW51eiIsDQoiVmlwIGF5YXJsYXJpbmkga3VsbGFubWFrIGljaW4gQk9MIFZpcCB1eWVzaSBvbG1hbml6IGdlcmVrbWVrdGVkaXIuIiwiS29zdHVtIHNlYyIsDQoiUT5XPkUgIiwgIlE+RT5XIiwiVz5RPkUiLCJXPkU+USIsIkU+Vz5RIiwgIkU+UT5XIiwgIkFraWxsaSIgLA0KLS1HZW5lcmFsIE1lbnUoRHJhdyBTZXR0aW5ncykgLy8gMTENCiJDaXppbSBBeWFybGFyaSIsIllldGVuZWsgQ2l6aW0gQXlhcmxhcmkiLCJRIFlldGVuZWsgbWVuemlsaW5pIGNpeiIsIlcgWWV0ZW5layBtZW56aWxpbmkgY2l6IiwiRSBZZXRlbmVrIG1lbnppbGluaSBjaXoiLCJSIFlldGVuZWsgbWVuemlsaW5pIGNpeiIsIk90b21hdGlrIFNhbGRpcmkgTWVuemlsaSIsDQoiS29tYm8gTW9kdW51IENpeiIsIlBlcm1hYm94IENpeiIsIlBlcm1hYm94IENpeiAoIDJ4IEY5IEdlcmVraXIgKSIsIlNlY2lsaSBoZWRlZmkgZGFpcmUgaWNpbmUgYWwiLCJIZWRlZiBoYXNhciBoZXNhcGxhIiwNCi0tR2VuZXJhbCBNZW51KFRhcmdldCBTZWxlY3RvcnMpIC8vIDINCiJIZWRlZiBTZWNpY2kiLCJTb2wgdGlrIGlsZSBoZWRlZiBzZWMiLA0KLS1HZW5lcmFsIE1lbnUoS2V5IFNldHRpbmdzKSAvLyAxMw0KIlR1cyBBeWFybGFyaSIsICI8LS0tLS0tLS0tLS0tLS0tLS0tS29tYm8gVHVzIEF5YXJsYXJpLS0tLS0tLS0tLS0tLS0tLS0tPiIsIktvbWJvIFR1c3UiLCI8LS0tLS0tLS0tLS0tLS0tLS0tRHVydG1lIFR1cyBBeWFyaS0tLS0tLS0tLS0tLS0tLS0tLT4iLCANCiJEdXJ0bWUgVHVzdSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1UZW1pemxlbWUgVHVzIEF5YXJsYXJpLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiS29yaWRvciBUZW1pemxlbWUgVHVzdSIsIk9ybWFuIFRlbWl6bGVtZSBUdXN1IiwgDQoiPC0tLS0tLS0tLS0tLS0tLS0tLURpZ2VyIFR1cyBBeWFybGFyaS0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkthY2lzIFR1c3UiLCAiT3Jid2Fsa2VyIFR1c2xhcmluaXogQnVyYXlsYSBBeW5pIE9sbWFsaWRpci4iLCJPcndXYWxrZXJLZXkgQXlhcmxhcmkiLA0KIk90b21hdGlrIFEgRHVydG1lIiwNCi0tR2VuZXJhbCBNZW51KE1pc2MgU2V0dGluZ3MpIC8vIDcNCiJFa3N0cmEgQXlhcmxhciIsICJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIE90b21hdGlrIER1cmR1cm1hIiwiUSBZZXRlbmVnaSBpbGUgZHVyZHVyIiwiVyBZZXRlbmVnaSBpbGUgZHVyZHVyIiwiRSBZZXRlbmVnaSBpbGUgZHVyZHVyIiwNCiJSIFlldGVuZWdpIGlsZSBkdXJkdXIiLCIgICAgICAgICAgICAgICAgICBbRGVzdGVrbGVuZW4gWWV0ZW5la2xlcl0iLA0KLS0gR2VuZXJhbCBNZW51KFNraWxsIExvZ2ljKSAvLyA2DQoiWWV0ZW5layBBeWFybGFyaSIsIlEgWWV0ZW5lZ2kgQXlhcmxhcmkiLCJXIFlldGVuZWdpIEF5YXJsYXJpIiwiRSBZZXRlbmVnaSBBeWFybGFyaSIsIlIgWWV0ZW5lZ2kgQXlhcmxhcmkiLCJIZWFsdGggTWVuYWplcmkgJSIsDQotLSBHZW5lcmFsIE1lbnUoSGl0Y2hhbmNlIFNldHRpbmdzKSAvLyA1DQoiVHV0dHVybWEgT3JhbmkiLCJRIFR1dHR1cm1hIE9yYW5pIiwiVyBUdXR0dXJtYSBPcmFuaSIsIkUgVHV0dHVybWEgT3JhbmkiLCJSIFR1dHR1cm1hIE9yYW5pIiwNCi0tIEdlbmVyYWwgTWVudShPcmJ3YWxrIFNldHRpbmdzKSAvLyA1DQoiT3JiV2Fsa2VyIFR1cyBBeWFybGFyaSIsDQoiICAgICAgICAgICAgICAgICBTY3JpcHQgVmVyc2l5b251OiAgIi4uVmVyc2lvbi4uICIgICAgICAgICAiLCIgICAgICAgICAgICBTY3JpcHQgIi4uQXV0aG9yLi4gIiB0YXJhZmluZGFuIHlhcGlsbWlzdGlyLiAgICAgICAgIiwNCiIgICAgICAgTGVhdWdlIE9mIExlZ2VuZHMgVmVyc2l5b251OiAgIi4uTFZlcnNpb24uLiAiICAgICAgICAgIiwiS3VsbGFuaWxhbiBPcmJ3YWxrZXI6ICAgICAgICAgICAgICAgICAgICAgIFNpZGFzIEF1dG8gQ2FycnkiLA0KIkt1bGxhbmlsYW4gT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3hPcmJXYWxrIiwgDQotLSBMZWJsYW5jIE1lbnUgLy8gMTMNCiJRPkU+Vz5SIiwgIlE+Uj5FPlciLCAiRT5RPlc+UiIsICJFPlc+UT5SIiAsIlJhc3RnZWxlIFlldGVuZWsgRHV6ZW5pIiwiVyB5ZXRlbmVnaSBnZXJpIGRvbm1lIGF5YXJsYXJpIiwiIFE+RT5XPlIgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiAiLA0KIlE+Uj5FPlcgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiAiLCJFPlE+Vz5SIG1vZHVuZGEgVyB5ZXJpbmUgZ2VyaSBkb24iLCJFPlc+UT5SIG1vZHVuZGEgVyB5ZXJpbmUgZ2VyaSBkb24gIiwNCiJSYXN0Z2VsZSBZZXRlbmVrIG1vZHVuZGEgVyB5ZXJpbmUgZ2VyaSBkw7ZuICIsIlFXIGlsZSBjYWwiLCJTYWRlY2UgRSBLdWxsYW4gKFNhZGVjZSBTZXJzZW1sZXQpIiwiIEtvbWJvIE1vZHUgVHVzdSIsDQotLSBBa2FsaSBNZW51IC8vIDkNCiIyIGR1c21hbiIsICIzIGR1c21hbiIgLCAiNCBkdXNtYW4iLCI1IGR1c21hbiIsIlEgSGVkZWZ0ZXlzZSBSIEt1bGxhbiIsICJZZXRlbmVrbGVyaSBEaXJlayBLdWxsYW4iLCJHw7ZydW5tZXpsaWsoVykga3VsbGFuIGhlZGVmID4iLCJHw7ZydW5tZXpsaWsoVykga3VsbGFuIENhbiAlIiwNCiJHw7ZydW5tZXpsaWsoVykga3VsbGFuIiwNCi0tIERpYW5hIE1lbnUgLy8gNA0KIkFraWxsaSBLb21ibyIsICJIZWRlZiBpc2FyZXRsaSBpc2UgUiBrdWxsYW4iICwgIkJ1dHVuIHlldGVuZWtsZXJpIGhpemxpY2Ega3VsbGFuIiwiRSB5ZXRlbmVnaW5pIG1lc2FmZSA+IDI4MCBrdWxsYW4iLA0KLS0gTGlzc2FuZHJhYSBNZW51IC8vIDE3DQoiS29tYm8gbW9kdSBpY2luIEUgYXlhcmxhcmkiLCJEdXJ0bWUgbW9kdSBpY2luIEUgYXlhcmxhcmkiLCIyLiBFIGlsZSBiYXNsYSIsICIyLiBFJ3lpIGt1bGxhbm1hICggw7ZuZXJpbGVuKSIgLA0KIjIuIEUneWkga3VsbGFubWEgKG9uZXJpbGVuKSIsICIyLiBFIGlsZSBiYXNsYSIgLCJBa2lsbGkiLCAiS2VuZGluaSBrb3J1IiwgIkR1c21hbiBpY2luIGt1bGxhbiIgLCJLZW5kaW5lIG90b21hdGlrIFIiLA0KIk90b21hdGlrIFIgY2FuIGFsdGluZGF5c2EgLT4gJSIsICIyLiBFIGlsZSBiYXNsYSBheWFyaSB0ZXN0IGFzYW1hc2luZGFkaXIuLiIsICJLb21ibyBtb2R1IGljaW4gUiBheWFybGFyaSIsICJBa2lsbGkgUiBheWFybGFyaSBpw6dpbiBrZW5kaW5lIG90b21hdGlrIFIgYWNpayBvbG1hbGlkaXIuIiwNCiJXIGt1bGxhbmFyYWsgZHVzbWFuaSB1emFrIHR1dCIsIkJ1IG96ZWxsaWsgaGFsYSB0ZXN0IGFzYW1hc2luZGFkaXIuLiIsDQotLSBWaWt0b3IgTWVudSAvLyA1DQoiVWx0aSBBeWFybGFyaSIsIkhlZGVmIG9sdWNlayBpc2UgVWx0aSBLdWxsYW4iLCJVbHRpeWkgRGlyZWsgS3VsbGFuIiAsIkUgVHV0dHVybWEgT3JhbmkgKE5vcm1hbGkgPSAxLjYpIiwiRSBUdXR0dXJtYSBPcmFuaSAoTm9ybWFsaSA9IDIpIiwiT3RvbWF0aWsgZHVydG1lIiwNCi0tIGxhbmd1YWdlIG1lbnUvLyA1DQoiRGlsIFNlY2ltaSgyeEY5IEdlcmVrbWVrdGVkaXIuKSIsIkluZ2lsaXpjZSIsICJUdXJrY2UiLCJBbG1hbmNhIiwiS29yZWNlIiwNCi0tIEV4dHJhc3MvLyANCiJLb21ib3l1IHVsdGkgaWxlIGJhc2xhdCAiLA0KLS0gcmV3b3JrLy8gMTcxDQoiT3RvbWF0aWsgdyBlZ2VyIGNhbiA+IiwiSGVyIHphbWFuIiwiTG9jYWwgQXlhcmxhcmEgQmFnbGkiLCJBc2xhIiwiRHVzbWFuIFNheWlzaSIsIk90b21hdGlrIFcgRWdlciBEdXNtYW4gPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtMb2NhbCBBeWFybGFyXSIsIlc+Uj5RPkUgbW9kdW5kYSBXIHllcmluZSBnZXJpIGRvbiIsDQoiVz5RPlI+RSBtb2R1bmRhIFcgeWVyaW5lIGdlcmkgZG9uICIsIlEgaWNpbiBtaW5pbXVtIG1pbmlvbiAgPiIsIlcgaWNpbiBtaW5pbXVtIG1pbmlvbiAgPiIsIkUgaWNpbiBtaW5pbXVtIG1pbmlvbiAgPiIsIlIgaWNpbiBtaW5pbXVtIG1pbmlvbiA+IiwiICAgICAgICAgICAgICAgICAgICAgICAgW01hbmEgTWVuYWplcmldIiwNCiJRIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJXIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJFIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJSIFlldGVuZWdpIE1hbmEgTWVuYWplcmkgICUiLCJPdG9tYXRpayBTb24gVnVydXMiLCJFZ2VyIG90b21hdGlrIFNhbGRpcmkgWWFwYW1peW9yc2EiLCJTb24gVnVydXMgQXlhcmxhcmkiLCJPdG9tYXRpayBQb3QiLCJPdG9tYXRpayBQb3QgS3VsbGFuIiwNCiJBdXRvIFBvdGlvbiBpZiBIZWFsdGggdW5kZXIgLT4gJSIsIkFudGktQUZLIEF5YXJsYXJpIiwiQW50aSBBZmsgS3VsbGFuIiwiRSAtSGVkZWYgQ2l6aW1pIiwiUmVuayBBeWFybGFyaSIsIlEgUmVuZ2kiLCJXIFJlbmdpIiwiRSBSZW5naSIsIlIgUmVuZ2kiLCJFIC1IZWRlZiBSZW5naSIsIk90b21hdGlrIFNhbGRpcmkgUmVuZ2kiLA0KIlNlY2lsaSBLYXJha3RlciBSZW5naSIsIkthbGlubGlrIEF5YXJsYXJpIiwiRSAtSGVkZWYgS2FsaW5saWsiLCJTZWNpbGkgS2FyYWt0ZXIgS2FsaW5saWsiLCJPdG9tYXRpayBTYWxkaXJpIEthbGlubGlrIiwiUSBZZXRlbmVnaSBrYWxpbmxpayIsIlcgWWV0ZW5lZ2kga2FsaW5saWsiLCJFIFlldGVuZWdpIGthbGlubGlrIiwNCiJSIFlldGVuZWdpIGthbGlubGlrIiwiSGFzYXIgY2l6aW1pIGdvc3RlciIsDQoiU29uIHZ1cnVzIHR1c3UiLCJUYWxpbWF0bGFyIGljaW4gdGlrbGF5aW5peiIsIkdlcmVrbGkgaXNlIGt1bGxhbiIsIkZhcm0gVHVzIEF5YXJsYXJpIiwiWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4gIl0gLSBBbnRpIEdhcC1DbG9zZSIsIlcgWWV0ZW5lZ2kgaWxlIEFudGkgR2FwLUNsb3NlIiwiQW50aSBHYXAtQ2xvc2UgaWNpbiBpbnNhbmxhc3Rpcm1hIiwNCiJPdG9tYXRpayBXIEF5YXJsYXJpIiwiT3RvbWF0aWsgVyBLdWxsYW4gIiwiT3RvbWF0aWsgVyBFZ2VyIER1c21hbiA+IiwiUiAtSGVkZWYgQ2l6aW0iLCJSIC1IZWRlZiBSZW5naSIsIlIgLUhlZGVmIEthbGlubGlrIg0KfQ0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gR2VybWFuIFRyYW5zbGF0aW9uIGRldGFpbHMgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCmxvY2FsIGxvY19nciA9IHsNCi0tR2VuZXJhbCBNZW51KENvbWJvKSAvLyA4IC8vIDENCiJDb21ibyBFaW5zdGVsbHVuZ2VuIiwgIkJlbnV0emUgUSBpbSBDb21ibyBNb2R1cyIsICJCZW51dHplIFcgaW0gQ29tYm8gTW9kdXMiLCAiQmVudXR6ZSBFIGltIENvbWJvIE1vZHVzIiwgIkJlbnV0emUgUiBpbSBDb21ibyBNb2R1cyIgLA0KIkJlbnV0emUgSWduaXRlIHdlbm4gZGFzIFppZWwgZGFkdXJjaCBzdGlyYnQiLCJDb21ibyBMb2dpayIsIk1hbmEgTWFuYWdlciAlIiwNCi0tR2VuZXJhbCBNZW51KEhhcmFzcykgLy8gNSAvLyA5DQoiSGFyYXNzIEVpbnN0ZWxsdW5nZW4iLCJIYXJhc3MgbWl0IFEiLCJIYXJhc3MgbWl0IFciLCJIYXJhc3MgbWl0IEUiLCJIYXJhc3MgbWl0IFIiLA0KLS1HZW5lcmFsIE1lbnUoQ2xlYXIpIC8vIDE2IC8vIDE0DQoiRmFybSBFaW5zdGVsbHVuZ2VuIiwiTGFuZUNsZWFyIEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIFEgaW0gTGFuZWNsZWFyIE1vZHVzIiwiQmVudXR6ZSBXIGltIExhbmVjbGVhciBNb2R1cyIsIkJlbnV0emUgRSBpbSBMYW5lY2xlYXIgTW9kdXMiLCJCZW51dHplIGltIExhbmVjbGVhciBNb2R1cyIsDQoiSnVuZ2xlQ2xlYXIgRWluc3RlbGx1bmdlbiIsIkJlbnV0emUgUSBpbSBqdW5nbGVjbGVhciBNb2R1cyIsIkJlbnV0emUgVyBpbSBqdW5nbGVjbGVhciBNb2R1cyIsIkJlbnV0emUgRSBpbSBqdW5nbGVjbGVhciBNb2R1cyIsIkJlbnV0emUgUiBpbSBqdW5nbGVjbGVhciBNb2R1cyIsDQoiTGFzdGhpdCBFaW5zdGVsbHVuZ2VuIiwiQmVudXR6ZSBRIGltIExhc3RoaXQgTW9kdXMiLCJCZW51dHplIFcgaW0gTGFzdGhpdCBNb2R1cyIsIkJlbnV0emUgRSBpbSBMYXN0aGl0IE1vZHVzIiwiQmVudXR6ZSBSIGltIExhc3RoaXQgTW9kdXMiLA0KLS1HZW5lcmFsIE1lbnUoRXNjYXBlKSAvLyA1IC8vIDMwDQoiRXNjYXBlIEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIFEgYmVpbSBGbGllaGVuIiwiQmVudXR6ZSBXIGJlaW0gRmxpZWhlbiIsIkJlbnV0emUgRSBiZWltIEZsaWVoZW4iLCJCZW51dHplIFIgYmVpbSBGbGllaGVuIiwNCi0tR2VuZXJhbCBNZW51KEtpbGxzdGVhbCkgLy8gNyAvLyAzNQ0KIktpbGxTdGVhbCBFaW5zdGVsbHVuZ2VuIiwiS2lsbHN0ZWFsIEVpbi9BdXMiLCJTdGllaGwgbWl0IFEiLCJTdGllaGwgbWl0IFciLCJTdGllaGwgbWl0IEUiLCJTdGllaGwgbWl0IFIiLCJTdGllaGwgbWl0IElnbml0ZSIsDQotLUdlbmVyYWwgTWVudShpdGVtKSAvLyA1IC8vIDQyDQoiSXRlbSBFaW5zdGVsbHVuZ2VuIiwiQXV0byBaaG9ueWEiLCAiQmVudXR6dGUgWmhvbnlhIHdlbm4gTGViZW4gdW50ZXIgLT4gJSIsICJCZW51dHplIEhleHRlY2ggR3VuYmxhZGUiLCAiQmVudXR6ZSBCaWxnZXdhdGVyIEN1dGxhc3MiLA0KLS1HZW5lcmFsIE1lbnUodmlwIEVpbnN0ZWxsdW5nZW4pIC8vIDE5IC8vIDQ3DQoiVklQIEVpbnN0ZWxsdW5nZW4iLCJCZW51dHplIFBhY2tldCBDYXN0aW5nIiwiVW0gVklQIEVpbnN0ZWxsdW5nZW4sIHp1IGJlbnV0enRlbiBtdXNzIFBhY2thZ2UgQ2FzdGluZyBtb2dsaWNoIHNlaW4iLCAiQXV0byBMZXZlbCBFaW5zdGVsbHVuZ2VuIiwiQmVudXR6ZSBBdXRvIExldmVsIiwNCiJTZWxlY3QgU2tpbGwgT3JkZXIiLCJTa2luIEhhY2sgRWluc3RlbGx1bmdlbiIsIkJlbnV0emUgU2tpbiBIYWNrIiwiU3RlbGxlIHNpY2hlciwgZGFzcyBQYWNrZXQgQ2FzdGluZyBhY3RpdmllcnQgaXN0IiwNCiJVbSBWSVAgRWluc3RlbGx1bmdlbiB6dSBiZW51dHp0ZW4sIG11c3N0IGR1IFZJUCBzZWluIiwiV2FobGUgZWluZW4gU2tpbiIsDQoiRm9jdXMgUT5XPkUiLCAiRm9jdXMgUT5FPlciLCJGb2N1cyBXPlE+RSIsIkZvY3VzIFc+RT5RIiwiRm9jdXMgRT5XPlEiLCAiRm9jdXMgRT5RPlciLCAiU21hcnQiICwNCi0tR2VuZXJhbCBNZW51KEdyYXBoaWsgRWluc3RlbGx1bmdlbikgLy8gMTIgLy8gNjUNCiJHcmFwaGlrIEVpbnN0ZWxsdW5nZW4iLCJTa2lsbCBBbnplaWdlIEVpbnN0ZWxsdW5nZW4iLCJRIEFuemVpZ2VuIiwiVyAgQW56ZWlnZW4iLCJFIEFuemVpZ2VuIiwiUiBBbnplaWdlbiIsIlN0YW5kYXJ0IEF0dGFja2VuIFJlaWNod2VpdGUiLA0KIlplaWdlIENvbWJvIE1vZHVzIiwiWmVpZ2UgUGVybWFib3giLCJaZWlnZSBQZXJtYWJveCAoIEJlbm90aWd0IDJ4IEY5ICkiLCJaZWljaG5lIFppcmtlbCB1bSBkZWluIGdld2FobHRlcyBaaWVsIiwiWmllbCBiZXJlY2hudW5nIiwNCi0tR2VuZXJhbCBNZW51KFRhcmdldCBTZWxlY3RvcnMpIC8vIDIgLy8gNzcNCiJaaWVsIFNvcnRpZXJ1bmciLCJMaW5rc2NsaWNrIGZ1ciBtYW51ZWxsZXMgQXVzd2FobGVuIHZvbiBaaWVsZW4iLA0KLS1HZW5lcmFsIE1lbnUoS2V5IEVpbnN0ZWxsdW5nZW4pIC8vIDEzIC8vIDc5DQoiS2V5IEVpbnN0ZWxsdW5nZW4iLCAiPC0tLS0tLS0tLS0tLS0tLS0tLUNvbWJvIEtleSBFaW5zdGVsbHVuZ2VuLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkNvbWJvIEtleSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1IYXJhc3MgS2V5IEVpbnN0ZWxsdW5nZW4tLS0tLS0tLS0tLS0tLS0tLS0+IiwgDQoiU21hcnQgSGFyYXNzIEtleSIsIjwtLS0tLS0tLS0tLS0tLS0tLS1DbGVhciBLZXkgRWluc3RlbGx1bmdlbi0tLS0tLS0tLS0tLS0tLS0tLS0tPiIsIkxhbmVDbGVhciBLZXkiLCJKdW5nbGVDbGVhciBLZXkiLCANCiI8LS0tLS0tLS0tLS0tLS0tLS0tQW5kZXJlIEtleSBFaW5zdGVsbHVuZ2VuLS0tLS0tLS0tLS0tLS0tLS0tLS0+IiwiRXNjYXBlIEtleSIsICJTdGVsbGUgc2ljaGVyLCBkYXNzIGRlaW5lIE9yYndhbGtlciBLZXlzIGRpZSBnbGVpY2hlbiB3aWUgaGllciBzaW5kLiIsIk9yd1dhbGtlcktleSBFaW5zdGVsbHVuZ2VuIiwNCiJBdXRvIEhhcmFzcyBRIiwNCi0tR2VuZXJhbCBNZW51KE1pc2MgRWluc3RlbGx1bmdlbikgLy8gNyAvLyA5Mg0KIkFuZGVyZSBFaW5zdGVsbHVuZ2VuIiwgIlsiIC4uIG15SGVyby5jaGFyTmFtZS4uICJdIC0gQXV0by1BYnJlY2hlbiIsIkFicnVjaCBtaXQgUSIsIkFicnVjaCBtaXQgVyIsIkFicnVjaCBtaXQgRSIsDQoiQWJydWNoIG1pdCBSIiwiICAgICAgICAgICAgICAgICAgW1N1cHBvcnRlZCBTa2lsbHNdIiwNCi0tIEdlbmVyYWwgTWVudShTa2lsbCBMb2dpYykgLy8gNiAvLyA5OQ0KIlNraWxsIExvZ2lrIiwiUSBMb2dpayIsIlcgTG9naWsiLCJFIExvZ2lrIiwiUiBMb2dpayIsIkhlYWx0aCBNYW5hZ2VyICUiLA0KLS0gR2VuZXJhbCBNZW51KEhpdGNoYW5jZSBFaW5zdGVsbHVuZ2VuKSAvLyA1IC8vIDEwNQ0KIlRyZWZmZXJjaGFuY2UiLCJRIFRyZWZmZXJjaGFuY2UiLCJXIFRyZWZmZXJjaGFuY2UiLCJFIFRyZWZmZXJjaGFuY2UiLCJSIFRyZWZmZXJjaGFuY2UiLA0KLS0gR2VuZXJhbCBNZW51KE9yYndhbGsgRWluc3RlbGx1bmdlbikgLy8gNSAgLy8gMTEwDQoiT3JiV2Fsa2VyS2V5IEVpbnN0ZWxsdW5nZW4iLA0KIiAgICAgICAgICAgICAgICAgU2NyaXB0IFZlcnNpb246ICAiLi5WZXJzaW9uLi4gIiAgICAgICAgICIsIiAgICAgICAgICAgIFNjcmlwdCB3dXJkZSBnZW1hY2h0IHZvbiAgIi4uQXV0aG9yLi4gIiAgICAgICAgICIsDQoiICAgICAgIExlYXVnZSBPZiBMZWdlbmRzIFZlcnNpb246ICAiLi5MVmVyc2lvbi4uICIgICAgICAgICAiLCJBa3R1ZWxsZXIgT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICBTaWRhcyBBdXRvIENhcnJ5IiwNCiJBa3R1ZWxsZXIgT3Jid2Fsa2VyOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3hPcmJXYWxrIiwgDQotLSBMZWJsYW5jIE1lbnUgLy8gMTMgLy8gMTE2DQoiUT5FPlc+UiIsICJRPlI+RT5XIiwgIkU+UT5XPlIiLCAiRT5XPlE+UiIgLCJadWbDpGxsaWdlIEJlbnV0enVuZyIsIlcgU2tpbGwgenVydWNra29tbSBFaW5zdGVsbHVuZ2VuIiwiR2VoZSB6dXJ1Y2sgenVtIFcgU3BvdCBpbSBRPkU+Vz5SIG1vZHVzICIsDQoiR2VoZSB6dXJ1Y2sgenVtIFcgU3BvdCBpbSBRPlI+RT5XIG1vZHVzICIsIkdlaGUgenVydWNrIHp1bSBXIFNwb3QgaW0gRT5RPlc+UiBtb2R1cyAiLCJHZWhlIHp1cnVjayB6dW0gVyBTcG90IGltIEU+Vz5RPlIgbW9kdXMiLA0KIkdlaGUgenVydWNrIHp1bSBXIFNwb3QgaW0gWnVmw6RsbGlnZW4gTW9kdXMgIiwiU3RpZWhsIG1pdCBRVyIsIkJlbnV0emUgbnVyIEUgKE51ciBTdHVubmVuKSIsIiBXw6RobGUgQ29tYm9tb2R1cyBLZXkiLA0KLS0gQWthbGkgTWVudSAvLyA5DQoiMiBHZWduZXIiLCAiMyBHZWduZXIiICwgIjQgR2VnbmVyIiwiNSBHZWduZXIiLCJCZW51dHplIFIgd2VubiBRIGRhcyBaaWVsIGdldHJvZmZlbiBoYXQiLCAiUnVzaCBTa2lsbHMiLCJCZW51dHplIFZlcmJlcmdlbiB3ZW5uIGdlZ25lciA+IiwiQmVudXR6ZSBWZXJiZXJnZW4gd2VubiBMZWJlbiAlIiwiQmVudXR6ZSBWZXJiZXJnZW4gKFcpIiwNCi0tIERpYW5hIE1lbnUgLy8gNA0KIlNtYXJ0IENvbWJvIiwgIkJlbnV0emUgUiB3ZW5uIFppZWwgbWFya2llcnQiICwgIkJlbnV0enRlIGFsbGVzIHNjaG5lbGwgaGludGVyZWluYW5kZXIiLCJCZW51dHplIEUgbnVyIHdlbm4gZGllIERpc3RhbnogenVtIGdlZ25lciA+IDI4MCIsDQotLSBMaXNzYW5kcmFhIE1lbnUgLy8gMTcNCiJFIExvZ2lrIGZ1ciBjb21ibyBtb2R1cyIsIkUgTG9naWMgZnVyIGhhcmFzcyBtb2R1cyIsIkVuZ2FnZSBtaXQgWndlaXRlbiBFIiwgIkJlbnV0emUgbmljaHQgZGVuIFp3ZWl0ZW4gRSAoIEVtcGZvaGxlbikiICwNCiJCZW51dHplIG5pY2h0IGRlbiBad2VpdGVuIEUgKCBFbXBmb2hsZW4pIiwgIkVuZ2FnZSBtaXQgWndlaXRlbiBFIiAsIlNtYXJ0IiwgIlJldHRlIGRpY2ggc2VsYnN0IiwgIkJlbnV0emUgZ2VnZW4gR2VnbmVyIiAsIkF1dG8gUiBmdXIgZGljaHNlbGJzdCIsDQoiQXV0b1Igd2VubiBMZWJlbiB1bnRlciAtPiAlIiwgIkRpZSAnRW5nYWdlIG1pdCBad2VpdGVuIEUnIE9wdGlvbiBpc3QgaW0gQmV0YSBTdGFkaXVtIiwgIlIgTG9naWsgZnVyIGRlbiBjb21ibyBtb2R1cyIsICJVbSBTbWFydCBSIExvZ2lrIHp1IGJlbnV0enRlbiwgc29sbHRlIEF1dG9SIGFrdGl2aWVydCBzZWluIiwNCiJCZW51dHplIFcgZnVyIEFudGktR2FwQ2xvc2UiLCJEaWVzZSBGdW5jdGlvbiBiZWZpbmRldCBzaWNoIGluIGRlciBCZXRhIFBoYXNlIiwNCi0tIFZpa3RvciBNZW51IC8vIDUNCiJVbHRpIExvZ2lrIiwiQmVudXR6ZSBVbHRpbWF0ZSB3ZW5uIGRhcyBaaWVsIGRhZHVyY2ggc3RyaWJ0IiwiQmVudXR6ZSBkaWUgVWx0aW1hdGUgZGlyZWt0IiAsIkUgVHJlZmZlcndhcnNjaGVpbmxpY2hrZWl0IChTdGFuZGFydCBXZXJ0ID0gMS42KSIsIkUgVHJlZmZlcndhcnNjaGVpbmxpY2hrZWl0IChTdGFuZGFydCBXZXJ0ID0gMikiLCJTbWFydCBBdXRvIEhhcmFzcyIsDQotLSBsYW5ndWFnZSBtZW51Ly8gNQ0KIlNwcmFjaGVuKDJ4RjkpIiwiRW5nbGlzaCIsICJUdXJraXNoIiwiRGV1dHNjaCIsIktvcmVhbiIsDQotLSBFeHRyYXNzLy8gDQoiU3RhcnRlIEVuZ2FuZ2UncyBtaXQgZGVpbmVyIFVsdGltYXRlIiwNCi0tIHJld29yay8vIDE3MQ0KIkF1dG8gVyBiYWNrIGlmIGhlYWx0aCA+IiwiQWx3YXlzIiwiRGVwZW5kcyBvbiBsb2NhbCBTZXR0aW5ncyIsIk5ldmVyIiwiRW5lbXkgTnVtYmVyIiwiQXV0byBXIGJhY2sgaWYgZW5lbXkgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtMb2NhbCBTZXR0aW5nc10iLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIFc+Uj5RPkUgbW9kZSAiLA0KIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gVz5RPlI+RSBtb2RlICIsIk1pbmltdW0gbWluaW9uIHRvIFEgPiIsIk1pbmltdW0gbWluaW9uIHRvIFcgPiIsIk1pbmltdW0gbWluaW9uIHRvIEUgPiIsIk1pbmltdW0gbWluaW9uIHRvIFIgPiIsIiAgICAgICAgICAgICAgICAgICAgICAgIFtNYW5hIE1hbmFnZXJdIiwNCiJRIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlcgU2tpbGwgTWFuYSBNYW5hZ2VyICAlIiwiRSBTa2lsbCBNYW5hIE1hbmFnZXIgICUiLCJSIFNraWxsIE1hbmEgTWFuYWdlciAgJSIsIlVzZSBBdXRvIExhc3RoaXQiLCJPbmx5IGlmIGNhbm5vdCBBQSIsIkxhc3RoaXQgTG9naWMiLCJBdXRvIFBvdGlvbiIsIlVzZSBBdXRvIFBvdGlvbiIsDQoiQXV0byBQb3Rpb24gaWYgSGVhbHRoIHVuZGVyIC0+ICUiLCJBbnRpLUFGSyBTZXR0aW5ncyIsIlVzZSBBbnRpIEFmayIsIkUgLVRhcmdldCBkcmF3IiwiQ29sb3IgU2V0dGluZ3MiLCJRIENvbG9yIiwiVyBDb2xvciIsIkUgQ29sb3IiLCJSIENvbG9yIiwiRSAtVGFyZ2V0IENvbG9yIiwiQXV0byBBdHRhY2sgQ29sb3IiLA0KIlNlbGVjdGVkIFRhcmdldCBDb2xvciIsIkRyYXcgV2lkdGggU2V0dGluZ3MiLCJFIC1UYXJnZXQgV2lkdGgiLCJTZWxlY3RlZCBUYXJnZXQgV2lkdGgiLCJBdXRvIEF0dGFjayBXaWR0aCIsIlEgU2tpbGwgV2lkdGgiLCJXIFNraWxsIFdpZHRoIiwiRSBTa2lsbCBXaWR0aCIsIlIgU2tpbGwgV2lkdGgiLCJEcmF3IERhbWFnZSBJbmRpY2F0b3IiLA0KIkxhc3RoaXQgS2V5IiwiQ2xpY2sgRm9yIEluc3RydWN0aW9ucyIsIlVzZSBpZiBuZWVkZWQiLCJDbGVhciBLZXkgU2V0dGluZ3MiLCJbIiAuLiBteUhlcm8uY2hhck5hbWUuLiAiXSAtIEFudGkgR2FwLUNsb3NlIiwiR2FwLUNsb3NlIFdpdGggVyBTa2lsbCIsIkh1bWFuaXplciBmb3IgQW50aSBHYXAgQ2xvc2UiLA0KIkF1dG8gVyBTZXR0aW5ncyIsIlVzZSBBdXRvIFcgIiwiQXV0byBXIGlmIGVuZW15ID4iLCJSIC1UYXJnZXQgZHJhdyIsIlIgLVRhcmdldCBDb2xvciIsIlIgLVRhcmdldCBXaWR0aCINCn0NCmxvY2FsIGxvY19jaG9vc2VuID0ge30NCmxvY19jaG9vc2VuID0gbG9jX2VuZCAtLSBGYWxsYmFjayBvbiBlcnJvcnMNCiAgICAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IEF1dG8gVXBkYXRlICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGxvY2FsIHZlcnNpb24gPSA0LjAxDQogIGxvY2FsIGF1dGhvciA9ICJFbnN1bHV5biINCiAgbG9jYWwgU0NSSVBUX05BTUUgPSAiS2V5Ym9hcmRNYXN0ZXJTZXJpZXMiDQogIGxvY2FsIEFVVE9VUERBVEUgPSB0cnVlDQogIGxvY2FsIFVQREFURV9IT1NUID0gInJhdy5naXRodWIuY29tIg0KICBsb2NhbCBVUERBVEVfUEFUSCA9ICIvTG9uc2VtYXJpYS9zY3JpcHRzL21hc3Rlci9LZXlib2FyZE1hc3RlclNlcmllcy5sdWEiLi4iP3JhbmQ9Ii4ubWF0aC5yYW5kb20oMSwxMDAwMCkNCiAgbG9jYWwgVVBEQVRFX0ZJTEVfUEFUSCA9IFNDUklQVF9QQVRILi5HZXRDdXJyZW50RW52KCkuRklMRV9OQU1FDQogIGxvY2FsIFVQREFURV9VUkwgPSAiaHR0cHM6Ly8iLi5VUERBVEVfSE9TVC4uVVBEQVRFX1BBVEgNCiAgZnVuY3Rpb24gU2F5KHRleHQpDQogICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPktleWJvYXJkIE1hc3RlciBTZXJpZXM6PC9iPjwvZm9udD4gPGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IiAuLiB0ZXh0IC4uICI8L2ZvbnQ+IikNCiAgZW5kDQogIGlmIEFVVE9VUERBVEUgdGhlbg0KICAgIGxvY2FsIFNlcnZlckRhdGEgPSBHZXRXZWJSZXN1bHQoVVBEQVRFX0hPU1QsICIvTG9uc2VtYXJpYS9zY3JpcHRzL21hc3Rlci92ZXJzaW9uL0J1bmRsZS52ZXJzaW9uIikNCiAgICBpZiBTZXJ2ZXJEYXRhIHRoZW4NCiAgICAgIFNlcnZlclZlcnNpb24gPSB0eXBlKHRvbnVtYmVyKFNlcnZlckRhdGEpKSA9PSAibnVtYmVyIiBhbmQgdG9udW1iZXIoU2VydmVyRGF0YSkgb3IgbmlsDQogICAgICBpZiBTZXJ2ZXJWZXJzaW9uIHRoZW4NCiAgICAgICAgaWYgdG9udW1iZXIodmVyc2lvbikgPCBTZXJ2ZXJWZXJzaW9uIHRoZW4NCiAgICAgICAgICBTYXkoIk5ldyB2ZXJzaW9uIGF2YWlsYWJsZSAiLi5TZXJ2ZXJWZXJzaW9uKQ0KICAgICAgICAgIFNheSgiVXBkYXRpbmcsIHBsZWFzZSBkb24ndCBwcmVzcyBGOSIpDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBEb3dubG9hZEZpbGUoVVBEQVRFX1VSTCwgVVBEQVRFX0ZJTEVfUEFUSCwgZnVuY3Rpb24gKCkgU2F5KCJTdWNjZXNzZnVsbHkgdXBkYXRlZC4gKCIuLnZlcnNpb24uLiIgPT4gIi4uU2VydmVyVmVyc2lvbi4uIiksIHByZXNzIEY5IHR3aWNlIHRvIGxvYWQgdGhlIHVwZGF0ZWQgdmVyc2lvbi4iKSBlbmQpIGVuZCwgMykNCiAgICAgICAgZWxzZQ0KICAgICAgICAgIFNheSgiLVdlbGNvbWUsIFlvdSBoYXZlIGdvdCB0aGUgbGF0ZXN0IHZlcnNpb24gKHYiLi5TZXJ2ZXJWZXJzaW9uLi4iKSBvZiAiLi5TY3JpcHRuYW1lLi4iICwgdXBkYXRlZCBhdCAoIi4uZGF0ZS4uIikgYnkgIiAuLiBhdXRob3IpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgZWxzZSANCiAgICAgIFNheSgiRXJyb3IgZG93bmxvYWRpbmcgdmVyc2lvbiBpbmZvIikNCiAgICBlbmQNCiAgZW5kDQpsYnNwb3QgPSB7DQp7eCA9IDMwNzguMjE3NzczNDM3NSAsIHkgPSA5NS43NDgwNDY4NzUsIHogPSA0MzAzLjk2NDM1NTQ2ODh9LA0Ke3ggPSAyMTUzLjA5NjY3OTY4NzUgLCB5ID0gOTUuNzQ4MDQ2ODc1LCB6ID0gNDQ5My4xODg0NzY1NjI1fSwNCnt4ID0gNDM5NS45MjIzNjMyODEzICwgeSA9IDk1Ljc0ODE2ODk0NTMxMywgeiA9IDMxMjUuNDU0MTAxNTYyNX0sDQp7eCA9IDQ1MjQuNzI0MTIxMDkzOCAsIHkgPSA5NS43NDgxNjg5NDUzMTMsIHogPSAyMDg0LjY5NTgwMDc4MTN9LA0Ke3ggPSA1MzgwLjAzMjIyNjU2MjUgLCB5ID0gNTEuMjYxMzUyNTM5MDYzLCB6ID0gMjQ5MC41NzQ3MDcwMzEzfSwNCnt4ID0gNjIxNC4yMzczMDQ2ODc1ICwgeSA9IDUwLjAxMTg0MDgyMDMxMywgeiA9IDM0NjEuMTAzNTE1NjI1fSwNCnt4ID0gNjI4MS43OTYzODY3MTg4ICwgeSA9IDQ4LjUyODA3NjE3MTg3NSwgeiA9IDUwODkuODU0MDAzOTA2M30sDQp7eCA9IDcyNTQuOTk0MTQwNjI1ICwgeSA9IDUyLjQ1MTE3MTg3NSwgeiA9IDU5OTEuNjU2MjV9LA0Ke3ggPSA4MTE2LjQzMjEyODkwNjMgLCB5ID0gNTIuODkwMjU4Nzg5MDYzLCB6ID0gNTc1MS4yNjU2MjV9LA0Ke3ggPSA4OTY1LjgyNTE5NTMxMjUgLCB5ID0gNTIuNjIzNDEzMDg1OTM4LCB6ID0gNDQ3NC40NDkyMTg3NX0sDQp7eCA9IDkwMzQuOTkyMTg3NSAsIHkgPSA1My43OTUxNjYwMTU2MjUsIHogPSAzODkwLjI2MDc0MjE4NzV9LA0Ke3ggPSA5Mjg3LjAzNDE3OTY4NzUgLCB5ID0gNTguMzc0NTExNzE4NzUsIHogPSAzNTExLjkxNTc3MTQ4NDR9LA0Ke3ggPSA5ODY3LjU5NzY1NjI1ICwgeSA9IDU3Ljk5OTAyMzQzNzUsIHogPSAzMTE4LjY2NjUwMzkwNjN9LA0Ke3ggPSA4MTg5LjUzMDc2MTcxODggLCB5ID0gNTEuNjA1OTU3MDMxMjUsIHogPSAzMjA5LjU4MTI5ODgyODF9LA0Ke3ggPSAzMzU5LjM0MjUyOTI5NjkgLCB5ID0gNTIuNDc0MTIxMDkzNzUsIHogPSA2MjQxLjEzMTgzNTkzNzV9LA0Ke3ggPSAzNzcxLjQyMzgyODEyNSAsIHkgPSA1MS4wMDA3MzI0MjE4NzUsIHogPSA3MjU0LjQ5MjY3NTc4MTN9LA0Ke3ggPSA0NDk1LjM4Mzc4OTA2MjUgLCB5ID0gNDkuMTIzNjU3MjI2NTYzLCB6ID0gODA3MS4zNjU3MjI2NTYzfSwNCnt4ID0gNTExOC41NjU5MTc5Njg4ICwgeSA9IDUxLjE1NzM0ODYzMjgxMywgeiA9IDc4MzIuNTU5NTcwMzEyNX0sDQp7eCA9IDU2MjkuMzY2MjEwOTM3NSAsIHkgPSA1MS42NTQyOTY4NzUsIHogPSA3Njc5LjMxOTMzNTkzNzV9LA0Ke3ggPSA4NTM5LjYwMjUzOTA2MjUgLCB5ID0gNTEuMTI5ODgyODEyNSwgeiA9IDIwODcuNDQxODk0NTMxM30sDQp7eCA9IDEwMjA1LjM4NDc2NTYyNSAsIHkgPSA0OS4yMjMxNDQ1MzEyNSwgeiA9IDIxODcuMzA0MTk5MjE4OH0sDQp7eCA9IDc2MDQuODEwNTQ2ODc1ICwgeSA9IDUxLjI3MzY4MTY0MDYyNSwgeiA9IDIwOTYuMDY3ODcxMDkzOH0sDQp7eCA9IDc1NTcuOTE5NDMzNTkzOCAsIHkgPSA0OC43MzAxMDI1MzkwNjMsIHogPSA0Njg2LjMzNzg5MDYyNX0sDQp7eCA9IDIyMTIuMTY5MTg5NDUzMSAsIHkgPSA1MC40MTE4NjUyMzQzNzUsIHogPSA3Nzk3LjQ0Mzg0NzY1NjN9LA0Ke3ggPSAxNjUyLjgzMDIwMDE5NTMgLCB5ID0gNTIuODM4MTM0NzY1NjI1LCB6ID0gODY0Ny42NzA4OTg0Mzc1fSwNCnt4ID0gMjE2MC43MDE5MDQyOTY5ICwgeSA9IDUzLjEyMDExNzE4NzUsIHogPSAxMDAwMS4xOTA0Mjk2ODh9LA0Ke3ggPSAyNTE0LjU2Njg5NDUzMTMgLCB5ID0gNTEuNzc0OTAyMzQzNzUsIHogPSA5MTkzLjA4Mzk4NDM3NX0sDQp7eCA9IDMwNzEuNjA5Mzc1ICwgeSA9IDUyLjgxMjYyMjA3MDMxMywgeiA9IDk4NjQuMDcwMzEyNX0sDQp7eCA9IDI4MzEuMjE1MDg3ODkwNiAsIHkgPSA1NC4zMjU2ODM1OTM3NSwgeiA9IDEwMzUzLjM1NjQ0NTMxM30sDQp7eCA9IDg5NTQuNzUzOTA2MjUgLCB5ID0gNTEuNTI4MDc2MTcxODc1LCB6ID0gNDkwMy43Nzc4MzIwMzEzfSwNCnt4ID0gODQxOC4xMDU0Njg3NSAsIHkgPSA1My45NzExOTE0MDYyNSwgeiA9IDM3NjMuMTU4MjAzMTI1fSwNCi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1tYXZpIHRhcmFmIGJpdHRpDQp7eCA9IDEwMjI0Ljg4ODY3MTg3NSAsIHkgPSA5MS40MzAwNTM3MTA5MzgsIHogPSAxMjcwNC4xMDA1ODU5Mzh9LA0Ke3ggPSAxMDQyOS44NDA4MjAzMTMgLCB5ID0gOTEuNDI5ODA5NTcwMzEzLCB6ID0gMTE3MDMuNTY0NDUzMTI1fSwNCnt4ID0gMTE1ODIuMjM1MzUxNTYzICwgeSA9IDkxLjQyOTgwOTU3MDMxMywgeiA9IDEwNTU0LjE5MjM4MjgxM30sDQp7eCA9IDEyNjY4Ljc3OTI5Njg3NSAsIHkgPSA5MS40MzAwNTM3MTA5MzgsIHogPSAxMDMyOC43NDEyMTA5Mzh9LA0Ke3ggPSAxMTg1Mi4wNDc4NTE1NjMgLCB5ID0gNTAuMzA3NjE3MTg3NSwgeiA9IDg4OTQuMDU4NTkzNzV9LA0Ke3ggPSAxMjExNy43NzgzMjAzMTMgLCB5ID0gNTIuNDgwNDY4NzUsIHogPSA4MDQzLjg0Mjc3MzQzNzV9LA0Ke3ggPSAxMTE0OC40MTQwNjI1ICwgeSA9IDUyLjIwNDcxMTkxNDA2MywgeiA9IDc3NTEuMzYxMzI4MTI1fSwNCnt4ID0gMTAzNjIuMDQ4ODI4MTI1ICwgeSA9IDYxLjA3MDA2ODM1OTM3NSwgeiA9IDg1NzUuNjMxODM1OTM3NX0sDQp7eCA9IDEwOTUwLjE5NTMxMjUgLCB5ID0gNTIuMjAzOTc5NDkyMTg4LCB6ID0gNzUwNi4zOTg5MjU3ODEzfSwNCnt4ID0gMTAzNTMuMjUzOTA2MjUgLCB5ID0gNTEuOTk5MjY3NTc4MTI1LCB6ID0gNjcxMS44NDA4MjAzMTI1fSwNCnt4ID0gMTA0MzcuMjE1ODIwMzEzICwgeSA9IDUzLjQ0NDQ1ODAwNzgxMywgeiA9IDkwOTYuNjkwNDI5Njg3NX0sDQp7eCA9IDEyOTcxLjY0NTUwNzgxMyAsIHkgPSA1MS45ODEyMDExNzE4NzUsIHogPSA2ODg2LjIzMzM5ODQzNzV9LA0Ke3ggPSAxMzEwMS4xNjYwMTU2MjUgLCB5ID0gNTMuMTQzNDMyNjE3MTg4LCB6ID0gNTY1My4wNjM5NjQ4NDM4fSwNCnt4ID0gMTI0MDguMjkzOTQ1MzEzICwgeSA9IDUxLjcyOTM3MDExNzE4OCwgeiA9IDUyMjIuNzc2MzY3MTg3NX0sDQp7eCA9IDEyMTM5LjY5NDMzNTkzOCAsIHkgPSA1MS43Mjk0OTIxODc1LCB6ID0gNDU2Ny42OTcyNjU2MjV9LA0Ke3ggPSAxMTYxNy41MzgwODU5MzggLCB5ID0gNTEuNjc5MzIxMjg5MDYzLCB6ID0gNTE3Ni4wNjI1fSwNCnt4ID0gOTA3MC44NTU0Njg3NSAsIHkgPSA1My4wMzYwMTA3NDIxODgsIHogPSA3MTY1LjMxNDk0MTQwNjN9LA0Ke3ggPSA3MDcyLjc5MDAzOTA2MjUgLCB5ID0gNTIuODcyNTU4NTkzNzUsIHogPSA4ODExLjYyMzA0Njg3NX0sDQp7eCA9IDc1OTguNDA1NzYxNzE4OCAsIHkgPSA1Mi44NzI0MzY1MjM0MzgsIHogPSA4ODc4LjA3MTI4OTA2MjV9LA0Ke3ggPSA4ODI2Ljk0MTQwNjI1ICwgeSA9IDUyLjU5NjA2OTMzNTkzOCwgeiA9IDkyOTUuMDY5MzM1OTM3NX0sDQp7eCA9IDg1NzMuNzkwMDM5MDYyNSAsIHkgPSA1MS43NzAxNDE2MDE1NjMsIHogPSAxMTI2MC4wMzUxNTYyNX0sDQp7eCA9IDk0MDkuMDg4ODY3MTg3NSAsIHkgPSA1Mi4zMDYzOTY0ODQzNzUsIHogPSAxMjI4OS42OTcyNjU2MjV9LA0Ke3ggPSA2NTU5LjEwMzAyNzM0MzggLCB5ID0gNTMuOTQ0NTgwMDc4MTI1LCB6ID0gMTE2MjEuNDU4MDA3ODEzfSwNCnt4ID0gNTI4MS42NTE4NTU0Njg4ICwgeSA9IDU2Ljg0ODI2NjYwMTU2MywgeiA9IDExNzQ5LjQwOTE3OTY4OH0sDQp7eCA9IDYzMjguNjA0OTgwNDY4OCAsIHkgPSA1NC41NzAzMTI1LCB6ID0gMTI3NzQuNzA1MDc4MTI1fSwNCnt4ID0gNzIwNi4xMDA1ODU5Mzc1ICwgeSA9IDU2LjQ3NjU2MjUsIHogPSAxMjc3MC4yNTA5NzY1NjN9LA0Ke3ggPSA0OTc2LjQzOTk0MTQwNjMgLCB5ID0gNTYuNjcxMDIwNTA3ODEzLCB6ID0gMTE0NDYuMzM3ODkwNjI1fSwNCnt4ID0gNTY5OS4yOTgzMzk4NDM4ICwgeSA9IDU2LjY5MjAxNjYwMTU2MywgeiA9IDEwOTA3LjY0MzU1NDY4OH0sDQp7eCA9IDU4MTIuMDA5NzY1NjI1ICwgeSA9IDU0LjE2MDE1NjI1LCB6ID0gMTAxODkuMTExMzI4MTI1fSwNCnt4ID0gNzI4Ni4xMTQ3NDYwOTM4ICwgeSA9IDUxLjQxNzM1ODM5ODQzOCwgeiA9IDEwMTg2Ljg2NjIxMDkzOH0NCg0KDQoNCg0KDQoNCg0KDQoNCg0KDQoNCn0NCg0KbGJzcG90ZW5kID0gew0Ke3ggPSAzMzYwLjc1NDM5NDUzMTMgLCB5ID0gNTQuMTQ5OTAyMzQzNzUsIHogPSA0ODEyLjc1fSwNCnt4ID0gMjE5MC4wODA1NjY0MDYzICwgeSA9IDUyLjc4ODA4NTkzNzUsIHogPSA1MTE5LjM4NTI1MzkwNjN9LA0Ke3ggPSA0OTg3LjM3MjA3MDMxMjUgLCB5ID0gNTAuOTQ3MjY1NjI1LCB6ID0gMzIwNC41NDAwMzkwNjI1fSwNCnt4ID0gNTExNS45MzQwODIwMzEzICwgeSA9IDUxLjk5MTMzMzAwNzgxMywgeiA9IDIxMTIuOTYwNDQ5MjE4OH0sDQp7eCA9IDYwMDYuMjg2MTMyODEyNSAsIHkgPSA1Mi4xMzkxNjAxNTYyNSwgeiA9IDI0MzkuNjAyNzgzMjAzMX0sDQp7eCA9IDY3MTcuMjk4ODI4MTI1ICwgeSA9IDQ4LjUyMzU1OTU3MDMxMywgeiA9IDM4OTIuOTI5OTMxNjQwNn0sDQp7eCA9IDYxMTguMzU0NDkyMTg3NSAsIHkgPSA1MS43NzYzNjcxODc1LCB6ID0gNTcwOC43MDg0OTYwOTM4fSwNCnt4ID0gNzEwOS4yMzI5MTAxNTYzICwgeSA9IDUzLjE5Mjg3MTA5Mzc1LCB6ID0gNTQzNy4zOTAxMzY3MTg4fSwNCnt4ID0gODIyOS40NjA5Mzc1ICwgeSA9IC03MS4yNDA2MDA1ODU5MzgsIHogPSA2Mzg5LjIwNTU2NjQwNjN9LA0Ke3ggPSA5NDMwLjkxODk0NTMxMjUgLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDQ1MTYuOTQ2Mjg5MDYyNX0sDQp7eCA9IDk0MzguODMzMDA3ODEyNSAsIHkgPSAtNzAuNTc5NzExOTE0MDYzLCB6ID0gNDI3NS4zODA4NTkzNzV9LA0Ke3ggPSA5NjU2LjAzMjIyNjU2MjUgLCB5ID0gLTcwLjgwNjUxODU1NDY4OCwgeiA9IDQwMDUuMTk2Nzc3MzQzOH0sDQp7eCA9IDk3MzkuNzY0NjQ4NDM3NSAsIHkgPSA0OS4yMjI5MDAzOTA2MjUsIHogPSAyNzAyLjkxMDg4ODY3MTl9LA0Ke3ggPSA4MjU0LjE2NDA2MjUgLCB5ID0gNTEuMTMwMTI2OTUzMTI1LCB6ID0gMjY3OS4xNzIzNjMyODEzfSwNCnt4ID0gMjg2NC4xNjIzNTM1MTU2ICwgeSA9IDU3LjA0NDc5OTgwNDY4OCwgeiA9IDU5OTMuNjY2NTAzOTA2M30sDQp7eCA9IDM2OTguNTc5MTAxNTYyNSAsIHkgPSA1Mi43NTg3ODkwNjI1LCB6ID0gNzc2MS4wMzcxMDkzNzV9LA0Ke3ggPSA0MDAzLjEzOTg5MjU3ODEgLCB5ID0gNTEuMjM0MjUyOTI5Njg4LCB6ID0gNzg5MS4zODYyMzA0Njg4fSwNCnt4ID0gNTExNC4yOTg4MjgxMjUgLCB5ID0gLTQwLjM4OTAzODA4NTkzOCwgeiA9IDg1MzcuNzg1MTU2MjV9LA0Ke3ggPSA1OTk1LjM1MzAyNzM0MzggLCB5ID0gLTY4Ljk4NzMwNDY4NzUsIHogPSA4MjQxLjkxMjEwOTM3NX0sDQp7eCA9IDg1NzQuMDI5Mjk2ODc1ICwgeSA9IDQ5LjQ1MzczNTM1MTU2MywgeiA9IDE2NzMuNTgwMDc4MTI1fSwNCnt4ID0gMTAxMDIuNTQyOTY4NzUgLCB5ID0gNTAuMjYwMDA5NzY1NjI1LCB6ID0gMTcxNy4yMTk0ODI0MjE5fSwNCnt4ID0gNzM5Mi45MDYyNSAsIHkgPSA0OS40NDY2NTUyNzM0MzgsIHogPSAxNjQxLjU2ODIzNzMwNDd9LA0Ke3ggPSA3NjU4LjMzODM3ODkwNjMgLCB5ID0gNTMuOTgyNDIxODc1LCB6ID0gNDIyNy4yMzE5MzM1OTM4fSwNCnt4ID0gMjMzNy4yMDA5Mjc3MzQ0ICwgeSA9IDUxLjc4OTkxNjk5MjE4OCwgeiA9IDgyMjguNTk4NjMyODEyNX0sDQp7eCA9IDIwNDcuNjUwNjM0NzY1NiAsIHkgPSA1MS43Nzc1ODc4OTA2MjUsIHogPSA4NjMxLjk2ODc1fSwNCnt4ID0gMTY4My41OTMxMzk2NDg0ICwgeSA9IDUyLjgzODM3ODkwNjI1LCB6ID0gMTAxODkuNDQyMzgyODEzfSwNCnt4ID0gMjg3Mi42NjY5OTIxODc1ICwgeSA9IDUwLjY3NjAyNTM5MDYyNSwgeiA9IDkyMTMuNDg0Mzc1fSwNCnt4ID0gMzUyMS45MjM4MjgxMjUgLCB5ID0gLTY2LjM4MDEyNjk1MzEyNSwgeiA9IDEwMDk0LjYxODE2NDA2M30sDQp7eCA9IDMwMjAuMDEyOTM5NDUzMSAsIHkgPSAtNzAuMzQzODcyMDcwMzEzLCB6ID0gMTA4NDYuNDQyMzgyODEzfSwNCnt4ID0gOTA0MS4xNDA2MjUgLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDU0OTYuNDY1MzMyMDMxM30sDQp7eCA9IDgwMzQuMjI4MDI3MzQzOCAsIHkgPSA1My43MjA4MjUxOTUzMTMsIHogPSAzOTQwLjI2MDI1MzkwNjN9LA0KLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tbWF2aSB0YXJhZiBiaXR0aQ0Ke3ggPSA5Njg5LjkzNjUyMzQzNzUgLCB5ID0gNTIuMzIyODc1OTc2NTYzLCB6ID0gMTI2NjMuMDU2NjQwNjI1fSwNCnt4ID0gOTk1NS40Mzc1ICwgeSA9IDUyLjMwNjE1MjM0Mzc1LCB6ID0gMTE0NjAuNDY3NzczNDM4fSwNCnt4ID0gMTEzNzEuMzg0NzY1NjI1ICwgeSA9IDUyLjMwNjI3NDQxNDA2MywgeiA9IDEwMDY1LjU3NzE0ODQzOH0sDQp7eCA9IDEyNjMyLjQ3NjU2MjUgLCB5ID0gNTIuMzA2Mjc0NDE0MDYzLCB6ID0gOTc3Ny4wMDk3NjU2MjV9LA0Ke3ggPSAxMTQzMS42NTAzOTA2MjUgLCB5ID0gNTkuMTExMjA2MDU0Njg4LCB6ID0gODUyMi45MTk5MjE4NzV9LA0Ke3ggPSAxMTU4NS4zNjEzMjgxMjUgLCB5ID0gNTIuODI0NTg0OTYwOTM4LCB6ID0gODAzMS43NjAyNTM5MDYzfSwNCnt4ID0gMTA5MDYuNjk5MjE4NzUgLCB5ID0gNjIuNjYyNTk3NjU2MjUsIHogPSA4MjM5LjUyMjQ2MDkzNzV9LA0Ke3ggPSAxMDc5MS42NzA4OTg0MzggLCB5ID0gNjMuMDc3ODgwODU5Mzc1LCB6ID0gODM2MC43Mjc1MzkwNjI1fSwNCnt4ID0gMTA5OTguOTY4NzUgLCB5ID0gNTEuNzIzNTEwNzQyMTg4LCB6ID0gNzAzNy43NDgwNDY4NzV9LA0Ke3ggPSAxMDg3Mi4wMDg3ODkwNjMgLCB5ID0gNTEuNzIyNjU2MjUsIHogPSA2ODg4LjQ2MDkzNzV9LA0Ke3ggPSAxMDE3My4zOTU1MDc4MTMgLCB5ID0gNTIuMTE3NTUzNzEwOTM4LCB6ID0gOTUzNy43OTE5OTIxODc1fSwNCnt4ID0gMTI2NzMuNTU1NjY0MDYzICwgeSA9IDUxLjcwMjc1ODc4OTA2MywgeiA9IDY0OTEuMTk5MjE4NzV9LA0Ke3ggPSAxMjYxNy44MDM3MTA5MzggLCB5ID0gNTIuMTczODI4MTI1LCB6ID0gNTc4Mi4xODAxNzU3ODEzfSwNCnt4ID0gMTE5NzMuMDk5NjA5Mzc1ICwgeSA9IDUzLjY0NDE2NTAzOTA2MywgeiA9IDUyMjcuMzQwODIwMzEyNX0sDQp7eCA9IDExOTI1Ljg3Njk1MzEyNSAsIHkgPSAtNjguOTIxMTQyNTc4MTI1LCB6ID0gNDA0NS44Nzk4ODI4MTI1fSwNCnt4ID0gMTEzNzcuMTIzMDQ2ODc1ICwgeSA9IC03MS4yNDA2MDA1ODU5MzgsIHogPSA0ODAxLjM5ODkyNTc4MTN9LA0Ke3ggPSA4NjQ4LjYxMzI4MTI1ICwgeSA9IC03MS4yNDA2MDA1ODU5MzgsIHogPSA2NzM1LjE0NzQ2MDkzNzV9LA0Ke3ggPSA2NzI4LjY4MDE3NTc4MTMgLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDg0OTUuNTc0MjE4NzV9LA0Ke3ggPSA3NzAzLjc0MzY1MjM0MzggLCB5ID0gNTIuNDA4ODEzNDc2NTYzLCB6ID0gOTM4NC4wMDE5NTMxMjV9LA0Ke3ggPSA4Njk5LjU3NzE0ODQzNzUgLCB5ID0gNTAuMzgzOTExMTMyODEzLCB6ID0gOTc3NS4wNDY4NzV9LA0Ke3ggPSA4MTI5LjgxMTUyMzQzNzUgLCB5ID0gNTAuNDY3MTYzMDg1OTM4LCB6ID0gMTA5NTYuMTQ0NTMxMjV9LA0Ke3ggPSA4ODYzLjUwMTk1MzEyNSAsIHkgPSA1Ni40NzcwNTA3ODEyNSwgeiA9IDEyNDA2Ljg3MDExNzE4OH0sDQp7eCA9IDYzOTEuMjUyOTI5Njg3NSAsIHkgPSA1Ni40NzcwNTA3ODEyNSwgeiA9IDEyMTkxLjYxNTIzNDM3NX0sDQp7eCA9IDUzNzYuMjgwNzYxNzE4OCAsIHkgPSA1Ni40NjA4MTU0Mjk2ODgsIHogPSAxMjE1OC4yMTA5Mzc1fSwNCnt4ID0gNjI5My4zNTc0MjE4NzUgLCB5ID0gNTIuODM3ODkwNjI1LCB6ID0gMTMyNzYuMDc2MTcxODc1fSwNCnt4ID0gNzI2MS43MzI0MjE4NzUgLCB5ID0gNTIuODM4MTM0NzY1NjI1LCB6ID0gMTMzMjEuMDAyOTI5Njg4fSwNCnt4ID0gNDk0MS4yNzE5NzI2NTYzICwgeSA9IC03MS4yNDA0Nzg1MTU2MjUsIHogPSAxMDg0MC45NDgyNDIxODh9LA0Ke3ggPSA1MzA5Ljk3MTE5MTQwNjMgLCB5ID0gLTcxLjI0MDYwMDU4NTkzOCwgeiA9IDEwNjc3LjM4NjcxODc1fSwNCnt4ID0gNTM0Ni4xNjE2MjEwOTM4ICwgeSA9IC03MS4yNDA2MDA1ODU5MzgsIHogPSAxMDM2My4wODk4NDM3NX0sDQp7eCA9IDcxNTguODc1OTc2NTYyNSAsIHkgPSA1Ni4zODAxMjY5NTMxMjUsIHogPSAxMDcwNy4yOTk4MDQ2ODh9DQoNCg0KDQoNCg0KDQoNCg0KDQoNCn0NCiAgICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBPbmxvYWQgRnVuY3Rpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGZ1bmN0aW9uIE9uTG9hZCgpDQogICAgICAgICAgaWYgbm90IFJlcXVpcmVTaW1wbGVMaWIoKSB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICBpdGVtZml4KCkNCiAgICAgICAgIHJlYWRjZmcoKQ0KICAgICAgICAgY2huZ2xhbmcoKQ0KICAgICAgICAgICBpZiBfR1tteUhlcm8uY2hhck5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICAgIF9HW215SGVyby5jaGFyTmFtZV0oKQ0KICAgICAgICAgICAgICAgICAtLSBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFNraW4gSGFjayBjdXJyZW50bHkgZGlzYWJsZWQgdW50aWwgdGhlIG5leHQgdXBkYXRlIikgZW5kLCAxNCkNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+IDpUaGlzIGNoYW1waW9uIGlzIG5vdCBzdXBwb3J0ZWQuIEN1cnJlbnRseSBzdXBwb3J0ZWQgY2hhbXBpb25zIGFyZTogIi4ubGlzdC4uIiAiICkNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+RmVlbCBmcmVlIHRvIGNoZWNrIG15IGZvcnVtIHRvcGljIGFuZCBhc2sgYSBuZXcgY2hhbXBpb24gb3IgZ2l2ZSBmZWVkYmFjayIpIGVuZCwgMC41KQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj4iLi5saW5rLi4iIikgZW5kLCAwLjUpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gU2NyaXB0U3RhdHVzLk5ldCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGFzc2VydChsb2FkKEJhc2U2NERlY29kZSgiRzB4MVlWSUFBUVFFQkFnQUdaTU5DaG9LQUFBQUFBQUFBQUFBQVFJS0FBQUFCZ0JBQUVGQUFBQWRRQUFCQmtCQUFHVUFBQUFLUUFDQkJrQkFBR1ZBQUFBS1FJQ0JId0NBQUFRQUFBQUVCZ0FBQUdOc1lYTnpBQVFOQUFBQVUyTnlhWEIwVTNSaGRIVnpBQVFIQUFBQVgxOXBibWwwQUFRTEFBQUFVMlZ1WkZWd1pHRjBaUUFDQUFBQUFnQUFBQWdBQUFBQ0FBb3RBQUFBaGtCQUFNYUFRQUFHd1VBQUJ3RkJBa0ZCQVFBZGdRQUJSc0ZBQUVjQndRS0JnUUVBWFlFQUFZYkJRQUNIQVVFRHdjRUJBSjJCQUFIR3dVQUF4d0hCQXdFQ0FnRGRnUUFCQnNKQUFBY0NRUVJCUWdJQUhZSUFBUllCQWdMZEFBQUJuWUFBQUFxQUFJQUtRQUNGaGdCREFNSEFBZ0NkZ0FBQkNvQ0FoUXFBdzRhR0FFUUF4OEJDQU1mQXd3SGRBSUFBbllBQUFBcUFnSWVNUUVRQUFZRUVBSjFBZ0FHR3dFUUE1UUFBQUoxQUFBRWZBSUFBRkFBQUFBUUZBQUFBYUhkcFpBQUVEUUFBQUVKaGMyVTJORVZ1WTI5a1pRQUVDUUFBQUhSdmMzUnlhVzVuQUFRREFBQUFiM01BQkFjQUFBQm5aWFJsYm5ZQUJCVUFBQUJRVWs5RFJWTlRUMUpmU1VSRlRsUkpSa2xGVWdBRUNRQUFBRlZUUlZKT1FVMUZBQVFOQUFBQVEwOU5VRlZVUlZKT1FVMUZBQVFRQUFBQVVGSlBRMFZUVTA5U1gweEZWa1ZNQUFRVEFBQUFVRkpQUTBWVFUwOVNYMUpGVmtsVFNVOU9BQVFFQUFBQVMyVjVBQVFIQUFBQWMyOWphMlYwQUFRSUFBQUFjbVZ4ZFdseVpRQUVDZ0FBQUdkaGJXVlRkR0YwWlFBQUJBUUFBQUIwWTNBQUJBY0FBQUJoYzNObGNuUUFCQXNBQUFCVFpXNWtWWEJrWVhSbEFBTUFBQUFBQUFEd1B3UVVBQUFBUVdSa1FuVm5jM0JzWVhSRFlXeHNZbUZqYXdBQkFBQUFDQUFBQUFnQUFBQUFBQU1GQUFBQUJRQUFBQXdBUUFDQlFBQUFIVUNBQVI4QWdBQUNBQUFBQkFzQUFBQlRaVzVrVlhCa1lYUmxBQU1BQUFBQUFBQUFRQUFBQUFBQkFBQUFBUUFRQUFBQVFHOWlablZ6WTJGMFpXUXViSFZoQUFVQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUNBQUFBQUFBQUFBQkFBQUFCUUFBQUhObGJHWUFBUUFBQUFBQUVBQUFBRUJ2WW1aMWMyTmhkR1ZrTG14MVlRQXRBQUFBQXdBQUFBTUFBQUFFQUFBQUJBQUFBQVFBQUFBRUFBQUFCQUFBQUFRQUFBQUVBQUFBQkFBQUFBVUFBQUFGQUFBQUJRQUFBQVVBQUFBRkFBQUFCUUFBQUFVQUFBQUZBQUFBQmdBQUFBWUFBQUFHQUFBQUJnQUFBQVVBQUFBREFBQUFBd0FBQUFZQUFBQUdBQUFBQmdBQUFBWUFBQUFHQUFBQUJnQUFBQVlBQUFBSEFBQUFCd0FBQUFjQUFBQUhBQUFBQndBQUFBY0FBQUFIQUFBQUJ3QUFBQWNBQUFBSUFBQUFDQUFBQUFnQUFBQUlBQUFBQWdBQUFBVUFBQUJ6Wld4bUFBQUFBQUF0QUFBQUFnQUFBR0VBQUFBQUFDMEFBQUFCQUFBQUJRQUFBRjlGVGxZQUNRQUFBQTRBQUFBQ0FBMFhBQUFBaHdCQUFJeEFRQUVCZ1FBQVFjRUFBSjFBQUFLSEFFQUFqQUJCQVFGQkFRQkhnVUVBZ2NFQkFNY0JRZ0FCd2dFQVFBS0FBSUhDQVFER1FrSUF4NExDQlFIREFnQVdBUU1DblVDQUFZY0FRQUNNQUVNQm5VQUFBUjhBZ0FBTkFBQUFCQVFBQUFCMFkzQUFCQWdBQUFCamIyNXVaV04wQUFRUkFBQUFjMk55YVhCMGMzUmhkSFZ6TG01bGRBQURBQUFBQUFBQVZFQUVCUUFBQUhObGJtUUFCQXNBQUFCSFJWUWdMM041Ym1NdEFBUUVBQUFBUzJWNUFBUUNBQUFBTFFBRUJRQUFBR2gzYVdRQUJBY0FBQUJ0ZVVobGNtOEFCQWtBQUFCamFHRnlUbUZ0WlFBRUpnQUFBQ0JJVkZSUUx6RXVNQTBLU0c5emREb2djMk55YVhCMGMzUmhkSFZ6TG01bGRBMEtEUW9BQkFZQUFBQmpiRzl6WlFBQUFBQUFBUUFBQUFBQUVBQUFBRUJ2WW1aMWMyTmhkR1ZrTG14MVlRQVhBQUFBQ2dBQUFBb0FBQUFLQUFBQUNnQUFBQW9BQUFBTEFBQUFDd0FBQUFzQUFBQUxBQUFBREFBQUFBd0FBQUFOQUFBQURRQUFBQTBBQUFBT0FBQUFEZ0FBQUE0QUFBQU9BQUFBQ3dBQUFBNEFBQUFPQUFBQURnQUFBQTRBQUFBQ0FBQUFCUUFBQUhObGJHWUFBQUFBQUJjQUFBQUNBQUFBWVFBQUFBQUFGd0FBQUFFQUFBQUZBQUFBWDBWT1ZnQUJBQUFBQVFBUUFBQUFRRzlpWm5WelkyRjBaV1F1YkhWaEFBb0FBQUFCQUFBQUFRQUFBQUVBQUFBQ0FBQUFDQUFBQUFJQUFBQUpBQUFBRGdBQUFBa0FBQUFPQUFBQUFBQUFBQUVBQUFBRkFBQUFYMFZPVmdBPSIpLCBuaWwsICJidCIsIF9FTlYpKSgpIFNjcmlwdFN0YXR1cygiVEdKSk9LSEdGSkYiKSANCg0KICAgZnVuY3Rpb24gY2huZ2xhbmcoKQ0KICAgICAgIC0tIHByaW50ICJkZW5lbTEyMyINCiAgICAgICAgaWYgbGFuZyA9PSAiZW5nIiB0aGVuDQogICAgICAgICAgICAgICAgbG9jX2Nob29zZW4gPSB7fQ0KICAgICAgICAgICAgICAgIGxvY19jaG9vc2VuID0gbG9jX2VuZw0KICAgICAgICBlbHNlaWYgbGFuZyA9PSAidHIiIHRoZW4NCiAgICAgICAgICAgICAgICBsb2NfY2hvb3NlbiA9IHt9DQogICAgICAgICAgICAgICAtLSBwcmludCAiYXNkIg0KICAgICAgICAgICAgICAgIGxvY19jaG9vc2VuID0gbG9jX3RyDQogICAgICAgICAgICAgICAgZWxzZWlmIGxhbmcgPT0gImdyIiB0aGVuDQogICAgICAgICAgICAgICAgbG9jX2Nob29zZW4gPSB7fQ0KICAgICAgICAgICAgICAgIC0tcHJpbnQgImFzZCINCiAgICAgICAgICAgICAgICBsb2NfY2hvb3NlbiA9IGxvY19ncg0KICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgcHJpbnQoIkVycm9yIGluIExvY2FsaXphdGlvbiBnb3Q6ICIuLmxhbmcpDQogICAgICAgIGVuZA0KZW5kDQpmdW5jdGlvbiByZWFkY2ZnKCkNCiAgICAgICAtLSBwcmludCgiUmVhZCBmaWxlIikNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInIiKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAgcHJpbnQoIkNyZWF0aW5nIEZpcnN0IFRpbWUgQ29uZmlnIikNCiAgICAgICAgICAgICAgICBMZWJsYW5jOndyaXRlY2ZnKCJmdGMiKQ0KICAgICAgICAgICAgICAgIFZpa3Rvcjp3cml0ZWNmZygiZnRjIikNCiAgICAgICAgICAgICAgICBBa2FsaTp3cml0ZWNmZygiZnRjIikNCiAgICAgICAgICAgICAgICBEaWFuYTp3cml0ZWNmZygiZnRjIikNCiAgICAgICAgICAgICAgICBMaXNzYW5kcmE6d3JpdGVjZmcoImZ0YyIpDQogICAgICAgICAgICAgICAgcmV0dXJuDQogICAgICAgIGVuZA0KICAgICAgICBmb3IgbGluZSBpbiBmaWxlOmxpbmVzKCkgZG8gICAgICAgICAgICANCg0KICAgICAgICAgICAgICAgICAgICAgICAgbGFuZyA9IGxpbmUNCiAgICAgICAgICAgICAgICAgICAgICAgLS0gcHJpbnQoIlJlYWQ6ICIuLmxhbmcpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBMZWJsYW5jIFN0YXJ0LSBWYXJpYWJsZXMgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KIGNsYXNzICJMZWJsYW5jIg0KICBmdW5jdGlvbiBMZWJsYW5jOl9faW5pdCgpDQogIHNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDUyNSwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzcT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0KICAgc2VsZi50c3c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDYwMCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzZT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgOTI1LCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA5MjUsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgIHNlbGYudHNnPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA5NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgICBzZWxmLlFTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9RLCBEYW1hZ2VOYW1lID0gIlEiLCBSYW5nZSA9IDcwMCwgV2lkdGggPSAxLCBEZWxheSA9IDAsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuV1NwZWxsID0gX1NwZWxsKHtTbG90ID0gX1csIERhbWFnZU5hbWUgPSAiVyIsIFJhbmdlID0gNjAwLCBXaWR0aCA9IDEyNSwgRGVsYXkgPSAwLjUsIFNwZWVkID0gMTMwMCwgUmFkaXVzID0gMjUwICwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuRVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX0UsIERhbWFnZU5hbWUgPSAiRSIsIFJhbmdlID0gOTI1LCBXaWR0aCA9IDU1LCBEZWxheSA9IDAuMjUsIFNwZWVkID0gMTc1MCwgQ29sbGlzaW9uID0gdHJ1ZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID02MDAsIFdpZHRoID0gMTI1LCBEZWxheSA9IDAuNSwgU3BlZWQgPSAxMzAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuVEFSR0VUVEVEfSkNCiAgICAgICAgICBzZWxmLlJFU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUiwgRGFtYWdlTmFtZSA9ICJSIiwgUmFuZ2UgPTkyNSwgV2lkdGggPSA1NSwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IDE3NTAsIENvbGxpc2lvbiA9IHRydWUsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYubGVibGFuY1csIHNlbGYubGVibGFuY0ltYWdlLCBzZWxmLmNsb25lSWQgPSBuaWwsIG5pbCwgbmlsDQogIC0tfD4gTWluaW9uIE1hbmFnZXJzDQogICAgICBzZWxmLmVuZW15TWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9ucyAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9KVU5HTEUsICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYub3RoZXJNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9PVEhFUiwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGY6TG9hZE1lbnUoKSANCiAgICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgICAgICBMYXN0X0xldmVsU3BlbGwgPSAwDQogICAgICAgIENsb2NrID0gb3MuY2xvY2soKQ0KICAgICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlRpY2soKSBlbmQpDQogICAgICAgIEFkZFVubG9hZENhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpVbmxvYWQoKSBlbmQgKQ0KICAgIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgICBBZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogICAgLS1BZGRBbmltYXRpb25DYWxsYmFjayhmdW5jdGlvbih1bml0LCBhbmltYXRpb24pIHNlbGY6QW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbikgZW5kKQ0KICAgIC0tQWRkUHJvY2Vzc1NwZWxsQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSBlbmQpDQogICAgLS1BZGRBcHBseUJ1ZmZDYWxsYmFjayhmdW5jdGlvbihzb3VyY2UsIHVuaXQsIGJ1ZmYpIHNlbGY6T25BcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKSBlbmQpDQogICAgLS1BZGRVcGRhdGVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZiwgc3RhY2tzKSBzZWxmOlVwZGF0ZUJ1ZmYodW5pdCwgYnVmZiwgc3RhY2tzKSBlbmQpDQogICAgLS1BZGRSZW1vdmVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZikgc2VsZjpPblJlbW92ZUJ1ZmYodW5pdCwgYnVmZikgZW5kKSANCiAgICAgIGVuZA0KLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gTGVibGFuYyBNZW51ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgICAgIGZ1bmN0aW9uIExlYmxhbmM6d3JpdGVjZmcocGFyYW0pDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKFNDUklQVF9QQVRILi4iXFwiLi4iY29uZmlnLmNmZyIsICJ3IikNCiAgICAgICAgaWYgbm90IGZpbGUgdGhlbg0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIkVycm9yIGluIFdyaXRlIENGRyIpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBwYXJhbSB+PSAiZnRjIiB0aGVuDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZShhdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICAgICAgICAgLS1wcmludCgiV3JpdHRlbjogIi4uYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoImVuZyIpDQogICAgICAgICAgICAgICAtLSBwcmludCgiVzogRW5nbGlzaCIpDQogICAgICAgIGVuZA0KICAgICAgICBmaWxlOmNsb3NlKCkNCmVuZA0KICAgICAgZnVuY3Rpb24gTGVibGFuYzpMb2FkTWVudSgpDQogICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIgWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4iXSIgLCJtZW51IikNCiAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMV0sICJjb21ibyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVciLCBsb2NfY2hvb3NlblszXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzRdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUkiLCBsb2NfY2hvb3Nlbls2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJnYXBjbG9zZSIsICJVc2UgVyBhcyBhIGdhcGNsb3NlICggQmV0YSApIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bN10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTE2XSwgbG9jX2Nob29zZW5bMTE3XSwgbG9jX2Nob29zZW5bMTE4XSwgbG9jX2Nob29zZW5bMTE5XSAsIlc+Uj5RPkUiLCJXPlE+Uj5FIiwiUT5SPlc+RSIsIkRvdWJsZSBTdHVuIixsb2NfY2hvb3NlblsxMjBdfSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMjFdLCAidHVybnciKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgid2JhY2tocCIsIGxvY19jaG9vc2VuWzE3MV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTcyXSxsb2NfY2hvb3NlblsxNzNdLGxvY19jaG9vc2VuWzE3NF19KQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgiaHAiLGxvY19jaG9vc2VuWzEwNF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oIndiYWNrY3AiLCBsb2NfY2hvb3NlblsxNzZdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTczXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oImVuZW15Iixsb2NfY2hvb3NlblsxNzVdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzMF0sIGxvY19jaG9vc2VuWzEzMV0gLCBsb2NfY2hvb3NlblsxMzJdLGxvY19jaG9vc2VuWzEzM10gfSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm8udHVybnc6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTc3XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3MSIsbG9jX2Nob29zZW5bMTIyXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3MiIsbG9jX2Nob29zZW5bMTIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3MyIsbG9jX2Nob29zZW5bMTI0XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3NCIsbG9jX2Nob29zZW5bMTI1XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3NSIsbG9jX2Nob29zZW5bMTc4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3NiIsbG9jX2Nob29zZW5bMTc5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3NyIsIlR1cm4gYmFjayB0byBXIHNwb3Qgb24gUT5SPkU+VyBtb2RlICIsU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21iby50dXJudzphZGRQYXJhbSgidzgiLCJUdXJuIGJhY2sgdG8gVyBzcG90IG9uIERvdWJsZSBTdHVuIG1vZGUgIixTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53OmFkZFBhcmFtKCJ3OSIsbG9jX2Nob29zZW5bMTI2XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJkZWxheSIsICJEZWxheSBGb3IgRG91YmxlIFN0dW4iLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDE2NTAsIDAsIDMwMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5XSwgImhhcmFzcyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgibG9naWMiLCJIYXJhc3MgTG9naWMiLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgeyJbIFEtVyBdIiwiWyBRLUUgXSIsIlsgVy1SIF0ifSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMTBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzExXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblsxMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bMTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE0XSwgImZhcm0iKQ0KICAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNV0sImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsxNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsxN10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ3Y291bnQiLGxvY19jaG9vc2VuWzE4MV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZVIiLGxvY19jaG9vc2VuWzE5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJyY291bnQiLGxvY19jaG9vc2VuWzE4M10sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIldNYW5hIixsb2NfY2hvb3NlblsxODZdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUk1hbmEiLGxvY19jaG9vc2VuWzE4OF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMF0sImp1bmdsZWNsZWFyIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjFdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsyMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzIzXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlUiIsbG9jX2Nob29zZW5bMjRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIldNYW5hIixsb2NfY2hvb3NlblsxODZdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oIlJNYW5hIixsb2NfY2hvb3NlblsxODhdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzI1XSwibGFzdGhpdCIpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImF1dG9sYXN0aGl0Iixsb2NfY2hvb3NlblsxODldLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMjZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyOF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oImxhc3RoaXRsb2dpYyIsbG9jX2Nob29zZW5bMTkxXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNzJdLGxvY19jaG9vc2VuWzE5MF0sbG9jX2Nob29zZW5bMTc0XX0pDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblszMF0sImVzY2FwZSIpDQogICAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMzJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVIiLGxvY19jaG9vc2VuWzM0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzM1XSwgImtpbGxzdGVhbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMzddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzM4XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblszOV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNDBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUVciLCBsb2NfY2hvb3NlblsxMjddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0Ml0sICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5Ml0sICJhdXRvcG90IikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJlbmFibGVhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQ0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2VoZyIsIGxvY19jaG9vc2VuWzQ1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlYmciLCBsb2NfY2hvb3Nlbls0Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQoNCiAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTJdLCAibWlzYyIpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2M6YWRkU3ViTWVudSgiWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4gIl0gLSBXYWxsIEp1bXAgU2V0dGluZ3MiLCAid2FsbGp1bXAiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wOmFkZFBhcmFtKCJEcmF3IiwgIkRyYXcgV2FsbCBKdW1wIExvY2F0aW9ucyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy53YWxsanVtcDphZGRQYXJhbSgiRHJhd3IiLCAiVXNlIFJhbmdlIFdoaWxlIERyYXdpbmciLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wOmFkZFBhcmFtKCJEcmF3cnJhbmdlIiwgIkRyYXcgTG9jYXRpb25zIElmIFJhbmdlID4iLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMDAwLCAxMDAwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy53YWxsanVtcDphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXA6YWRkUGFyYW0oImJsYW5rIiwgIiAgICAgICAgICAgICAgICAgICAgIFtDb2xvciBTZXR0aW5nc10iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy53YWxsanVtcDphZGRQYXJhbSgiZmNvbG9yIiwgIkxvY2F0aW9uIDEgQ29sb3IiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXA6YWRkUGFyYW0oImYyY29sb3IiLCAiTG9jYXRpb24gMiBDb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCg0KDQoNCiAgICAgICAgQ2xvY2sgPSBvcy5jbG9jaygpDQogICAgICAgIGlmIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0N10sICJ2aXAiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oInBhY2tldCIsbG9jX2Nob29zZW5bNDhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzQ5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUwXSwgImxldmVsIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzUxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3Nlbls1Ml0sIFNDUklQVF9QQVJBTV9MSVNULCA3LCB7bG9jX2Nob29zZW5bNThdLCBsb2NfY2hvb3Nlbls1OV0sbG9jX2Nob29zZW5bNjBdLGxvY19jaG9vc2VuWzYxXSxsb2NfY2hvb3Nlbls2Ml0sIGxvY19jaG9vc2VuWzYzXSwgbG9jX2Nob29zZW5bNjRdICB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1M10sICJza2luIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTRdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCBsb2NfY2hvb3Nlbls1N10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCBza2luTWV0YVtteUhlcm8uY2hhck5hbWVdKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgiaW5mbzUiLCBsb2NfY2hvb3Nlbls1NV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOTVdLCAiYW50aWFmayIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrOmFkZFBhcmFtKCJhbnRpYWZrIixsb2NfY2hvb3NlblsxOTZdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzMiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzQiLCBsb2NfY2hvb3Nlbls1Nl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIGVuZA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY1XSwib3RoZXIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNob3cgRGFtYWdlIE9uIEhwIEJhciIsICJIUEJBUiIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjZdLCAiZHJhdyIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInFkcmF3Iixsb2NfY2hvb3Nlbls2N10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3Iixsb2NfY2hvb3Nlbls2OF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3Iixsb2NfY2hvb3Nlbls2OV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInJkcmF3Iixsb2NfY2hvb3Nlbls3MF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsbG9jX2Nob29zZW5bNzFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicnRkcmF3Iixsb2NfY2hvb3NlblsxOTddLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOThdLCAiY29sb3IiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUWNvbG9yIiwgbG9jX2Nob29zZW5bMTk5XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiV2NvbG9yIiwgbG9jX2Nob29zZW5bMjAwXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRWNvbG9yIiwgbG9jX2Nob29zZW5bMjAxXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUmNvbG9yIiwgbG9jX2Nob29zZW5bMjAyXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRTJjb2xvciIsIGxvY19jaG9vc2VuWzIwM10sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkFBY29sb3IiLCBsb2NfY2hvb3NlblsyMDRdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJ0YXJnZXRzZWxlY3QiLCBsb2NfY2hvb3NlblsyMDVdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJsZmMiLCJMYWcgRnJlZSBDaXJjbGVzIFdpZHRoIiwgNCwgMywgMSwgNSwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJMRkNzbmFwIiwgIkxGQyAtIExlbmd0aCBCZWZvcmUgU25hcHBpbmciLCA0LCAxMDAsIDUwLCA1MTAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJjb21ib21vZGUiLGxvY19jaG9vc2VuWzcyXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3M10sICJwZXJtYSIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hOmFkZFBhcmFtKCJwZXJtYSIsbG9jX2Nob29zZW5bNzRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Iixsb2NfY2hvb3Nlbls3NV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJkYW1hZ2UiLGxvY19jaG9vc2VuWzIxNF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXRjYWwiLGxvY19jaG9vc2VuWzc2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzddLCJ0YXJnZXRzZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oImluZm9LMiIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJ0cyIsbG9jX2Nob29zZW5bNzhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgIHNlbGYudHMubmFtZSAgPSAiTGVibGFuYyINCiAgICAgIHNlbGYudHNxLm5hbWUgPSAiTGVibGFuY1EiDQogICAgICBzZWxmLnRzdy5uYW1lID0gIkxlYmxhbmNXIg0KICAgICAgc2VsZi50c2UubmFtZSA9ICJMZWJsYW5jRSINCiAgICAgIHNlbGYudHNyLm5hbWUgPSAiTGVibGFuY1IiDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzdykNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzcikgDQogICAgICANCiAgICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc5XSwgIktleXMiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0szIiwgbG9jX2Nob29zZW5bODBdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJva2V5IiwgbG9jX2Nob29zZW5bODFdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgMzIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJvbmx5ZSIsIGxvY19jaG9vc2VuWzEyOF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sZmFsc2UsIHN0cmluZy5ieXRlKCJPIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJjb21ib21vZGUiLCBsb2NfY2hvb3NlblsxMjldLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLGZhbHNlLCBzdHJpbmcuYnl0ZSgiMiIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgbG9jX2Nob29zZW5bODJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc2tleSIsIGxvY19jaG9vc2VuWzgzXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAgIC0tIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc3RvZ2xla2V5IiwgIkhhcmFzcyBUb2dsZSBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlUT0dHTEUsIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVCIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s1IiwgbG9jX2Nob29zZW5bODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLGxvY19jaG9vc2VuWzIxNV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFuZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODVdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImp1bmdsZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODZdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgIC0tc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsICJMYXN0aGl0IEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s2IiwgbG9jX2Nob29zZW5bODddLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImVzY2FwZWtleSIsIGxvY19jaG9vc2VuWzg4XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJZIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJ3YWxsa2V5IiwgIldhbGwgSnVtcCBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0syIiwgbG9jX2Nob29zZW5bODldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTEwXSwgIktleXMyIikNCiAgICAgIA0KICAgICAgT3Jid2Fsa01hbmFnZXI6TG9hZENvbW1vbktleXMoc2VsZi5Db25maWcuS2V5czIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImxhbmciLCBsb2NfY2hvb3NlblsxNjVdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE2Nl0sIGxvY19jaG9vc2VuWzE2N10sbG9jX2Nob29zZW5bMTY4XX0pDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluc3RydWN0IiwgbG9jX2Nob29zZW5bMjE2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICANCiAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYS5wZXJtYSB0aGVuDQogICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZzpwZXJtYVNob3coImluZm9ib3giKSBlbmQsIDEpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJjb21ib2tleSIpICBlbmQsIDEuMikNCiAgICAgIC0tc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImhhcmFzc3RvZ2xla2V5IikNCiAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnLktleXM6cGVybWFTaG93KCJoYXJhc3NrZXkiKSAgZW5kLCAxLjIpDQogICAgZW5kDQogIGVuZA0KIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgRHJhd2luZ3MgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvbW9kZSgpDQogIGxvY2FsIGRyYXdwb3MgPSBHZXRVbml0SFBCYXJQb3MobXlIZXJvKQ0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAxIHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogUT5FPlc+UiIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDIgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBRPlI+RT5XIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMyB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IEU+UT5XPlIiLCAxMiwgZHJhd3Bvcy54LTQwLCBkcmF3cG9zLnkrMTYsIDB4ZmYwMGZmZmYpIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA0IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogRT5XPlE+UiIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA1IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogVz5SPlE+RSIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA2IHRoZW4NCiAgRHJhd1RleHQoIkN1cnJlbnQgQ29tYm8gTW9kZTogVz5RPlI+RSIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogICAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDcgdGhlbg0KICBEcmF3VGV4dCgiQ3VycmVudCBDb21ibyBNb2RlOiBRPlI+Vz5FIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgICAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gOCB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IERvdWJsZSBTdHVuIiwgMTIsIGRyYXdwb3MueC00MCwgZHJhd3Bvcy55KzE2LCAweGZmMDBmZmZmKSBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gOSB0aGVuDQogIERyYXdUZXh0KCJDdXJyZW50IENvbWJvIE1vZGU6IFJhbmRvbSBTa2lsbCBPcmRlciIsIDEyLCBkcmF3cG9zLngtNDAsIGRyYXdwb3MueSsxNiwgMHhmZjAwZmZmZikgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkRyYXcoKQ0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci5jb21ib21vZGUgdGhlbg0KICBsb2NhbCBkcmF3cG9zID0gR2V0VW5pdEhQQmFyUG9zKG15SGVybykNCiAgc2VsZjpjb21ib21vZGUoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcubWlzYy53YWxsanVtcC5EcmF3IHRoZW4NCiAgICBpZiBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLkRyYXdyIHRoZW4NCiAgZm9yIGssIHYgaW4gcGFpcnMobGJzcG90KSBkbw0KICAgIGlmIEdldERpc3RhbmNlKHYsIG15SGVybykgPCBzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLkRyYXdycmFuZ2UgdGhlbg0Kc2VsZjpEcmF3Q2lyY2xlKHYueCwgdi55LCB2LnosIDEwMCxBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLmZjb2xvcikpKQ0KZW5kDQplbmQNCiAgZm9yIGssIHYgaW4gcGFpcnMobGJzcG90ZW5kKSBkbw0KICBpZiBHZXREaXN0YW5jZSh2LCBteUhlcm8pIDwgc2VsZi5Db25maWcubWlzYy53YWxsanVtcC5EcmF3cnJhbmdlIHRoZW4NCnNlbGY6RHJhd0NpcmNsZSh2LngsIHYueSwgdi56LCAxMDAsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm1pc2Mud2FsbGp1bXAuZjJjb2xvcikpKQ0KZW5kDQplbmQNCmVsc2VpZiBub3Qgc2VsZi5Db25maWcubWlzYy53YWxsanVtcC5EcmF3ciB0aGVuDQogIGZvciBrLCB2IGluIHBhaXJzKGxic3BvdCkgZG8NCnNlbGY6RHJhd0NpcmNsZSh2LngsIHYueSwgdi56LCAxMDAsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcubWlzYy53YWxsanVtcC5mY29sb3IpKSkNCmVuZA0KICBmb3IgaywgdiBpbiBwYWlycyhsYnNwb3RlbmQpIGRvDQpzZWxmOkRyYXdDaXJjbGUodi54LCB2LnksIHYueiwgMTAwLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5taXNjLndhbGxqdW1wLmYyY29sb3IpKSkNCmVuZA0KZW5kDQplbmQNCiAgICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5xZHJhdyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIHNlbGY6RHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA2NTAsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUWNvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcud2RyYXcgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBzZWxmOkRyYXdDaXJjbGUobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjAwLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLldjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmVkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgc2VsZjpEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDkyNSwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIHNlbGY6RHJhd0NpcmNsZShteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlJjb2xvcikpKQ0KICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuYWFkcmF3IHRoZW4NCiAgICAgc2VsZjpEcmF3Q2lyY2xlKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDU1MCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgICAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXQgYW5kIHNlbGYuc2VsZWN0ZWRUYXIgfj0gbmlsIHRoZW4NCiAgICAgICAgIHNlbGY6RHJhd0NpcmNsZShzZWxmLnNlbGVjdGVkVGFyLngsIHNlbGYuc2VsZWN0ZWRUYXIueSwgc2VsZi5zZWxlY3RlZFRhci56LCA4MCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IudGFyZ2V0c2VsZWN0KSkpDQplbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJ0ZHJhdyBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpICB0aGVuDQogICBpZiBzZWxmLnRzZS50YXJnZXR+PW5pbCB0aGVuDQogICAgICBEcmF3TGluZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosc2VsZi50c2UudGFyZ2V0LngsIHNlbGYudHNlLnRhcmdldC55LCBzZWxmLnRzZS50YXJnZXQueiwzLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkUyY29sb3IpKSkNCiAgICBlbmQNCiAgICBlbmQNCiAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwMCkgdGhlbg0KICAgICAgaWYgdGFyZ2V0LnZpc2libGUgYW5kIG5vdCB0YXJnZXQuZGVhZCBhbmQgc2VsZi5Db25maWcub3RoZXIuZGFtYWdlIHRoZW4NCiAgICAgICAgY3VyckxpbmUgPSAxDQogICAgICAgIERyYXdMaW5lSFBCYXIyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwiIiwgIHRhcmdldCwgY3VyckxpbmUpDQogICAgICAgIERyYXdMaW5lSFBCYXIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCAiRGFtYWdlICIgLi4gbWF0aC5yb3VuZChzZWxmOkdldE15RG1nKHRhcmdldCkpLHRhcmdldCxjdXJyTGluZSkNCiAgICAgICAgY3VyckxpbmUgPSBjdXJyTGluZSArIDENCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0Y2FsIGFuZCBub3QgbXlIZXJvLmRlYWQgdGhlbg0KICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgbG9jYWwgZHJhd3Bvcz1Xb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnopKQ0KICAgICAgICBsb2NhbCBjb21ib1RleHQsY29sb3IgPSBzZWxmOkdldERyYXdzKHRhcmdldCkNCiAgICAgICAgaWYgY29tYm9UZXh0IHRoZW4NCiAgICAgICAgICBEcmF3VGV4dChjb21ib1RleHQsMTUsZHJhd3Bvcy54LTIwLGRyYXdwb3MueS0yMCxjb2xvcikNCiAgICAgICAgZW5kIA0KICAgICAgZW5kIA0KICAgICAgZW5kDQogICAgIGlmIFBvcFVwMSB0aGVuDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNTApLCAoV0lORE9XX0gqLjE1KSwgKFdJTkRPV19IKi45KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuMDUsIHcsIGgyLzEuOTcsIHcvMS43NSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdMaW5lKHcsIGgxLCB3LCBoMi8yLCB3LzEuOCwgQVJHQigxNTAsIDIzNSwgMTgzLCA2MykpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJXZWxjb21lIHRvIEtleWJvYXJkTWFzdGVyIFNlcmllcyAzLjAiKSwgV0lORE9XX0gqLjAyOCwgKFdJTkRPV19XLzIpLCAoV0lORE9XX0gqLjE4KSwgQVJHQigyNTUsIDk2LCA0OCwgMCksImNlbnRlciIsImNlbnRlciIpDQogICBEcmF3VGV4dEEodG9zdHJpbmcoIkxpdHRsZSBpbmZvcm1hdGF0aW9uIGFib3V0IEtleWJvYXJkTWFzdGVyIFNlcmllcyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMTk0KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJdHMgYSBidW5kbGUgdGhhdCBwcm9kdWNlZCBieSBlbnN1bHV5biIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiQ3VycmVudGx5IGl0IHN1cHBvcnRlZCBvbmx5IG1pZCBjaGFtcHMgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMjUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGZvY3VzIFF1YWxpdHkgcmF0aGVyIHRoYW4gUXVhbnRpdHkiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI0MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgbmVlZCB5b3VyIGZlZWRiYWNrcyB0byBpbXByb3ZlIGl0IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGNhcmUgZXZlcnkgc2luZ2xlIGZlZWRiYWNrIGFuZCB0cnkgdG8gYWRkIGV2ZXJ5dGhpbmciKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI3MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkhvcGUgeW91IGFyZSBlbmpveSBteSBzY3JpcHQuLiIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjg1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiWW91IGNhbiBjaGFuZ2UgZXZlcnkgc2V0dGluZ3MgdG8geW91ciBsaWtlIDopIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEaWQgeW91IGxpa2UgbXkgc2NyaXB0ID4gVXB2b3RlIG1lIG9uIHNjcmlwdHN0YXR1cyBhbmQgb24gZm9ydW0iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMxNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRvbid0IGZvcmdldCB0aGVzZSBhcmUgVklQOyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzMwKSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEFudGktQWZrIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNDUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEF1dG8gTGV2ZWxlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM2MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgU2tpbiBDaGFuZ2VyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzc1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjQ5KSwgKFdJTkRPV19IKi43MCksIChXSU5ET1dfSCouNzUpDQogICAgRHJhd0xpbmUodywgaDEvMS43NzUsIHcsIGgyLzEuNjgsIHcqLjExLCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd1JlY3RhbmdsZUJ1dHRvbihXSU5ET1dfVyowLjQ2NywgV0lORE9XX0gvMi4zNzUsIFdJTkRPV19XKi4wNDcsIFdJTkRPV19IKi4wNDEsIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIk9LIiksIFdJTkRPV19IKi4wMiwgKFdJTkRPV19XLzIpKi45OCwgKFdJTkRPV19ILzIuMzc1KSwgQVJHQigyNTUsIDAsIDAsIDAgKSwiY2VudGVyIiwiY2VudGVyIikNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlZGl0cyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzk1KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdXJyeS0gRm9yIHRoaXMgYXdlc29tZSBwb3B1cCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouNDEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKSANCiAgZW5kDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIExlYmxhbmM6RHJhd0NpcmNsZSh4LCB5LCB6LCByYWRpdXMsIGNvbG9yKQ0KICBsb2NhbCB2UG9zMSA9IFZlY3Rvcih4LCB5LCB6KQ0KICBsb2NhbCB2UG9zMiA9IFZlY3RvcihjYW1lcmFQb3MueCwgY2FtZXJhUG9zLnksIGNhbWVyYVBvcy56KQ0KICBsb2NhbCB0UG9zID0gdlBvczEgLSAodlBvczEgLSB2UG9zMik6bm9ybWFsaXplZCgpICogcmFkaXVzDQogIGxvY2FsIHNQb3MgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRQb3MueCwgdFBvcy55LCB0UG9zLnopKQ0KICBpZiBPblNjcmVlbih7eCA9IHNQb3MueCwgeSA9IHNQb3MueX0sIHt4ID0gc1Bvcy54LCB5ID0gc1Bvcy55fSkgdGhlbg0KICAgIHNlbGY6RHJhd0NpcmNsZU5leHRMdmwoeCwgeSwgeiwgcmFkaXVzLCBzZWxmLkNvbmZpZy5vdGhlci5sZmMsIGNvbG9yLCBzZWxmLkNvbmZpZy5vdGhlci5MRkNzbmFwKQ0KICBlbmQNCmVuZA0KDQpmdW5jdGlvbiBMZWJsYW5jOkRyYXdDaXJjbGVOZXh0THZsKHgsIHksIHosIHJhZGl1cywgd2lkdGgsIGNvbG9yLCBjaG9yZGxlbmd0aCkNCiAgcmFkaXVzID0gcmFkaXVzIG9yIDMwMA0KICBxdWFsaXR5ID0gbWF0aC5tYXgoOCwgc2VsZjpSb3VuZCgxODAgLyBtYXRoLmRlZygobWF0aC5hc2luKGNob3JkbGVuZ3RoIC8gKDIgKiByYWRpdXMpKSkpKSkNCiAgcXVhbGl0eSA9IDIgKiBtYXRoLnBpIC8gcXVhbGl0eQ0KICByYWRpdXMgPSByYWRpdXMgKiAwLjkyDQogIGxvY2FsIHBvaW50cyA9IHt9DQogIGZvciB0aGV0YSA9IDAsIDIgKiBtYXRoLnBpICsgcXVhbGl0eSwgcXVhbGl0eSBkbw0KICAgIGxvY2FsIGMgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHggKyByYWRpdXMgKiBtYXRoLmNvcyh0aGV0YSksIHksIHogLSByYWRpdXMgKiBtYXRoLnNpbih0aGV0YSkpKQ0KICAgIHBvaW50c1sjcG9pbnRzICsgMV0gPSBEM0RYVkVDVE9SMihjLngsIGMueSkNCiAgZW5kDQogIERyYXdMaW5lczIocG9pbnRzLCB3aWR0aCBvciAxLCBjb2xvciBvciA0Mjk0OTY3Mjk1KQ0KZW5kDQpmdW5jdGlvbiBMZWJsYW5jOlJvdW5kKG51bWJlcikNCiAgaWYgbnVtYmVyID49IDAgdGhlbg0KICAgIHJldHVybiBtYXRoLmZsb29yKG51bWJlciArIDAuNSkNCiAgZWxzZQ0KICAgIHJldHVybiBtYXRoLmNlaWwobnVtYmVyIC0gMC41KQ0KICBlbmQNCmVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkdldERyYXdzKHRhcmdldCkNCmxvY2FsIHFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KbG9jYWwgcTJkYW1hZ2UgPXNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KbG9jYWwgd2RhbWFnZSA9IHNlbGY6R2V0V0RtZyh0YXJnZXQpDQpsb2NhbCBlZGFtYWdlID0gc2VsZjpHZXRFRG1nKHRhcmdldCkNCmxvY2FsIHJkYW1hZ2UgPSBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KbG9jYWwgSWRtZz0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogIA0KICBpZiBxZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdXJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHdkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdXICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIGVkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBlZGFtYWdlICsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgIGVsc2VpZiByZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHJkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSArZWRhbWFnZSAgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSArZWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIGVkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBlZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIFcnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIFcgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK2VkYW1hZ2U+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrZWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrcmRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStxMmRhbWFnZStlZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2UrcmRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK2VkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK2VkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrcTJkYW1hZ2Urd2RhbWFnZStlZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnS2lsbCB3aXRoIGZ1bGwgY29tYm8nLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3EyZGFtYWdlK3dkYW1hZ2UrZWRhbWFnZStyZGFtYWdlK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdGdWxsIENvbWJvICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlIA0KICAgIHJldHVybiAiQ2FudCBLaWxsIHlldCIsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVuZCANCmVuZA0KIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgVGljayBGdW5jdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGZ1bmN0aW9uIExlYmxhbmM6VGljaygpDQogICAgICAgc2VsZjphdXRvd2JhY2soKQ0KICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy53YWxsa2V5IHRoZW4gc2VsZjp3YWxsanVtcCgpIGVuZA0KICAgICAgIHNlbGY6YXV0b3BvdCgpDQogICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOkFudGlhZmsoKSBlbmQNCiAgICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgICBzZWxmOmNoZWNrdHMoKQ0KICAgICAgICBzZWxmOml0ZW1zKCkNCiAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6YXV0b2xldmVsKCkgZW5kDQogICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgICAtLXNlbGY6Z2FwY2xvc2UoKQ0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICl0aGVuDQogICAgICBzZWxmOmNvbWJvKCkNCiAgICBlbmQNCiAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYXN0aGl0a2V5IG9yIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5hdXRvbGFzdGhpdCApdGhlbg0KICAgICAgc2VsZjpMYXN0SGl0KCkNCiAgICBlbmQNCiAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5vbmx5ZSAgICl0aGVuDQogICAgICBzZWxmOm9ubHllKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSApdGhlbg0KICAgICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcuaW5zdHJ1Y3QgdGhlbg0KICAgIHNlbGYuQ29uZmlnLmluc3RydWN0ID0gZmFsc2UNCiAgICBQb3BVcDEgPSB0cnVlDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICl0aGVuDQogICAgICBzZWxmOmVzY2FwZSgpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICl0aGVuDQogICAgIHNlbGY6SnVuZ2xlQ2xlYXIoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApIHRoZW4NCiAgICAgIHNlbGY6a2lsbHN0ZWFsKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgICkgdGhlbg0KICAgICAgc2VsZjpoYXJhc3MoKQ0KICAgIGVuZA0KICAgICAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6YXV0b3diYWNrKCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubmFtZSA9PSAibGVibGFuY3NsaWRlcmV0dXJuIiB0aGVuICANCiAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncud2JhY2tocCA9PSAxIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IHRoZW4NCiAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5jb21iby50dXJudy5ocCAvIDEwMCkgdGhlbiANCiAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgIGVuZA0KICAgZW5kIA0KICAgZW5kIA0KICAgICAgICAgZnVuY3Rpb24gTGVibGFuYzpBbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmay5hbnRpYWZrIHRoZW4gcmV0dXJuIGVuZA0KICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQogIG15SGVybzpNb3ZlVG8obXlIZXJvLngsIG15SGVyby56KQ0KZW5kDQogICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLm5hbWUgPT0gImxlYmxhbmNzbGlkZXJldHVybiIgdGhlbiAgDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53YmFja2NwID09IDEgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LmVuZW15ID09IDEgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDU1MCkgPj0gMiB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy5lbmVteSA9PSAyIHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg1NTApID49IDMgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVykNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcuY29tYm8udHVybncuZW5lbXkgPT0gMyB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNTUwKSA+PSA0IHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1cpDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LmVuZW15ID09IDQgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDU1MCkgPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XKQ0KICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICBlbmQNCmZ1bmN0aW9uIExlYmxhbmM6R2V0UURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMzAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjQpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDMwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsICogMjUpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuNCkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIExlYmxhbmM6R2V0V0RtZyh0YXJnZXQpDQogIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kIA0KICAgaWYgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoNDUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgKiA0MCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC42KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExlYmxhbmM6R2V0RURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgIGlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gMiooMTUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiAyNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC41KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkdldEUyRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMTUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiAyNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC41KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gTGVibGFuYzpHZXRSRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lID09ICJMZWJsYW5jU291bFNoYWNrbGVNIiB0aGVuIA0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiAxMDApICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKi42KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lID09ICJMZWJsYW5jU2xpZGVNIiB0aGVuIA0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiAxNTApICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuOSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubmFtZSA9PSAiTGVibGFuY0NoYW9zT3JiTSIgdGhlbiANCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoKG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICogMTAwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkpICogLjYpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6R2V0TXlEbWcodGFyZ2V0KQ0KICAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkgKyBzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRFRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpKyBzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICAgICAgZWxzZWlmIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Y2hlY2t0cygpDQogICAgICAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZzp1cGRhdGUoKQ0KICBpZiBub3Qgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igbm90IHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuDQogIHRhcmdldCA9IHNlbGYudHN3LnRhcmdldA0KICBlbHNlaWYgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igc2VsZi5zZWxlY3RlZFRhciB0aGVuDQogIHRhcmdldCA9IHNlbGYuc2VsZWN0ZWRUYXINCiAgZW5kDQogIGVuZA0KZnVuY3Rpb24gTGVibGFuYzpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6b25seWUoKQ0KICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMub25seWUgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RShzZWxmLnRzZS50YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IExlYmxhbmMgQ29tYm8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvKCkNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9RRVdSKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvUVJFVygpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAzIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib0VRV1IoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNCBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9FV1FSKCkNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSA1IGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIHRoZW4NCiAgc2VsZjpjb21ib1dSUUUoKQ0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDYgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvV1FSRSgpDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gNyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6Y29tYm9RUldFKCkNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDggYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgdGhlbg0KICBzZWxmOmNvbWJvREIoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gOSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSB0aGVuDQogIHNlbGY6cmFuZG9tY29tYm8oKQ0KICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICApdGhlbg0KICAgICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9RUldFKCkNCiAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzcgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRUih0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UVJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RXRSh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc3IHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0UVIodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFSdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0V0VCKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgICAgIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9EQigpIC0tIFFXRVINCiAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc4IHRoZW4NCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApICB0aGVuDQogIHNlbGY6Q2FzdFFXKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UVd1c2VkKCl0aGVuDQogIHNlbGY6Q2FzdEVSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzggdGhlbg0KICAgIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSB0aGVuDQogIHNlbGY6Q2FzdFFXQih0YXJnZXQpDQogIGVuZA0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFXdXNlZCgpdGhlbg0KICBzZWxmOkNhc3RFUih0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9RUkVXKCkNCiAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzIgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRUih0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UVJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RFVyh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LncyIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0UVIodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOlFSdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0RVdCKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib0VXUVIoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NCB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdEVXKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpFV3VzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFFSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc0IHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVdCKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpFV3VzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFFSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib0VRV1IoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MyB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdEVRKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpFUXVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFdSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53LnczIHRoZW4NCiAgaWYgKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKXRoZW4NCiAgc2VsZjpDYXN0RVEodGFyZ2V0KQ0KICBlbmQNCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIGFuZCBzZWxmOkVRdXNlZCgpIHRoZW4NCiAgc2VsZjpDYXN0V1JCKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpjb21ib1FFV1IoKQ0KICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53MSB0aGVuDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICl0aGVuDQogIHNlbGY6Q2FzdFFFKHRhcmdldCkNCiAgZW5kDQogIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgKSBhbmQgc2VsZjpRRXVzZWQoKSB0aGVuDQogIHNlbGY6Q2FzdFdSKHRhcmdldCkNCiAgZW5kDQogIGVuZA0KICAgaWYgc2VsZi5Db25maWcuY29tYm8udHVybncudzEgdGhlbg0KICBpZiAoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApdGhlbg0KICBzZWxmOkNhc3RRRSh0YXJnZXQpDQogIGVuZA0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UUV1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RXUkIodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Y29tYm9XUlFFKCkNCiAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICBpZiBub3Qgc2VsZi5Db25maWcuY29tYm8udHVybncudzUgdGhlbg0KICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgIHRoZW4NCiAgc2VsZjpDYXN0V1IyKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UjJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RRRSh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc1IHRoZW4NCiAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgdGhlbg0KICBzZWxmOkNhc3RXUkIyKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UjJ1c2VkKCkgdGhlbg0KICBzZWxmOkNhc3RRRSh0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogICAgICBmdW5jdGlvbiBMZWJsYW5jOmNvbWJvV1FSRSgpDQogICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgaWYgbm90IHNlbGYuQ29uZmlnLmNvbWJvLnR1cm53Lnc2IHRoZW4NCiAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApICB0aGVuDQogIHNlbGY6Q2FzdFdRKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UXVzZWQoKXRoZW4NCiAgc2VsZjpDYXN0UkUodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NiB0aGVuDQogICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCApIHRoZW4NCiAgc2VsZjpDYXN0V1FCKHRhcmdldCkNCiAgZW5kDQogIGlmIChzZWxmLnRzdy50YXJnZXQgfj0gbmlsICkgYW5kIHNlbGY6UXVzZWQoKXRoZW4NCiAgc2VsZjpDYXN0UkUodGFyZ2V0KQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRKHVuaXQpDQogICAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UUUodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFVyh1bml0KQ0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIG5vdCBzZWxmOndVc2VkKCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0RVdCKHVuaXQpDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RRVyh1bml0KQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIG5vdCBzZWxmOndVc2VkKCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UVdCKHVuaXQpDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdFKHVuaXQpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgbm90IHNlbGY6d1VzZWQoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgIGVuZA0KICAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdFQih1bml0KQ0KICAgICAgICAgICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6cmFuZG9tY29tYm8oKQ0KICAgICAgICBpZiBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NyB0aGVuDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpICAgICANCiAgICAgICAgICBlbmQNCiAgICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KSAgICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgICAgIGlmIG5vdCBzZWxmLkNvbmZpZy5jb21iby50dXJudy53NyB0aGVuDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpICAgICANCiAgICAgICAgICBlbmQNCiAgICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBub3Qgc2VsZjp3VXNlZCgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KSAgICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpICAgIA0KICAgICAgICAgIGVuZA0KICAgICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UVIodW5pdCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUih1bml0KQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KClhbmQgbm90IHNlbGY6d1VzZWQoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSBhbmQgbm90IHNlbGY6clVzZWQoKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUjIodW5pdCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpYW5kIG5vdCBzZWxmOndVc2VkKCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUSh1bml0KQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KClhbmQgbm90IHNlbGY6d1VzZWQoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RSRSh1bml0KQ0KICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpICAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFUih1bml0KQ0KICAgICAgICAgICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5uYW1lID09ICJMZWJsYW5jU291bFNoYWNrbGVNIiBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSAgIHRoZW4NCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGY6Q2FzdFJFKHRhcmdldCllbmQgLHNlbGYuQ29uZmlnLmNvbWJvLmRlbGF5LzEwMDApIA0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0V1JCKHVuaXQpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSBhbmQgbm90IHNlbGY6clVzZWQoKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RXUkIyKHVuaXQpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gTGVibGFuYzpDYXN0V1FCKHVuaXQpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgIGVuZA0KICAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKSAgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UVdIKCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6YnVmZih1bml0KQ0KIHJldHVybiBUYXJnZXRIYXZlQnVmZignbGVibGFuY2NoYW9zb3JiJywgdW5pdCkNCmVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFFFSCgpDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgZW5kDQogICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSBhbmQgc2VsZjpidWZmKHRhcmdldCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdFdSSCgpDQogICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGY6d1VzZWQoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICAgIGVuZA0KICAgICBpZiBub3Qgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UVdLKHVuaXQpDQogICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVFXIGFuZCAgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUVcgYW5kIG5vdCBzZWxmOndVc2VkKCkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFUSh1bml0KQ0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICBlbmQNCiAgICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSkgdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0Vyh1bml0KQ0KICAgIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMZWJsYW5jOkNhc3RFKHVuaXQpDQogICBzZWxmLkVTcGVsbDpDYXN0KHVuaXQpDQogICAgDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGVibGFuYzpDYXN0Uih1bml0KQ0KICAgIHNlbGYuUlNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogICAgZnVuY3Rpb24gTGVibGFuYzpDYXN0UkUodW5pdCkNCiAgICBzZWxmLlJFU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExlYmxhbmM6Q2FzdEkodW5pdCkNCiAgICBzZWxmLklnbml0ZTpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmtpbGxzdGVhbCgpDQogIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBoZWFsdGggPSB1bml0LmhlYWx0aA0KICAgICAgbG9jYWwgZG1nRSA9IHNlbGY6R2V0RURtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBoZWFsdGg8ZG1nRSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUUgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1EgPSBzZWxmOkdldFFEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICBsb2NhbCBkbWdRVyA9IHNlbGY6R2V0UURtZyh1bml0KStzZWxmOkdldFdEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCBhbmQgIGhlYWx0aDxkbWdRIGFuZCBub3Qgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUVcgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFFXSyh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICAgICAgICBsb2NhbCBkbWdXID0gc2VsZjpHZXRXRG1nKHVuaXQpDQogICAgICAgIGlmKHNlbGYudHN3LnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIG5vdCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBub3Qgc2VsZjp3VXNlZCgpICAgYW5kIGhlYWx0aDxkbWdRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlVyBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBkbWdSID1zZWxmOkdldFJEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgbm90IHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgaGVhbHRoPGRtZ1IgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgICBlbmQNCiAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOndhbGxqdW1wKCkNCmlmIG5vdCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgb3Igc2VsZjp3VXNlZCgpIHRoZW4gcmV0dXJuIGVuZA0KICBmb3IgaywgbG9jIGluIHBhaXJzKGxic3BvdCkgZG8NCiAgICBpZiBHZXREaXN0YW5jZShsb2MsIG15SGVybykgPCAyNTAgYW5kIEdldERpc3RhbmNlKGxvYywgbXlIZXJvKSA+IDUwIHRoZW4NCiAgICAgIG15SGVybzpNb3ZlVG8obG9jLngsIGxvYy56KQ0KICBlbmQNCiAgICBpZiBHZXREaXN0YW5jZShsb2MsIG15SGVybykgPCAyMCBhbmQgbm90IHNlbGY6d1VzZWQoKSAgdGhlbg0KICAgICAgQ2FzdFNwZWxsKF9XLCBsYnNwb3RlbmRba10ueCwgbGJzcG90ZW5kW2tdLnopDQogICAgICAtLW15SGVybzpNb3ZlVG8obGJzcG90ZW5kW2tdLngsIGxic3BvdGVuZFtrXS56KQ0KICAgIGVuZA0KICBlbmQNCg0KICBmb3IgaywgbG9jIGluIHBhaXJzKGxic3BvdGVuZCkgZG8NCiAgICBpZiBHZXREaXN0YW5jZShsb2MsIG15SGVybykgPCAyNTAgYW5kIEdldERpc3RhbmNlKGxvYywgbXlIZXJvKSA+IDUwIHRoZW4NCiAgICAgIG15SGVybzpNb3ZlVG8obG9jLngsIGxvYy56KQ0KICAgIGVuZA0KICAgIGlmIEdldERpc3RhbmNlKGxvYywgbXlIZXJvKSA8IDIwIGFuZCBub3Qgc2VsZjp3VXNlZCgpICB0aGVuDQogICAgICBDYXN0U3BlbGwoX1csIGxic3BvdFtrXS54LCBsYnNwb3Rba10ueikNCiAgICAgIC0tbXlIZXJvOk1vdmVUbyhsYnNwb3Rba10ueCwgbGJzcG90W2tdLnopDQogIGVuZA0KICBlbmQNCmVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmhhcmFzcygpDQogICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgaWYgc2VsZi5Db25maWcuaGFyYXNzLmxvZ2ljID09IDEgdGhlbg0KICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIHRoZW4NCiAgICBzZWxmOkNhc3RRV0goKQ0KICAgICAgZW5kICAgDQogICAgICBlbHNlaWYgc2VsZi5Db25maWcuaGFyYXNzLmxvZ2ljID09IDIgdGhlbg0KaWYgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSAgdGhlbg0KICAgICAgICBzZWxmOkNhc3RRRUgoKQ0KICAgICAgZW5kDQogICAgICBlbHNlaWYgc2VsZi5Db25maWcuaGFyYXNzLmxvZ2ljID09IDMgdGhlbg0KICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApICB0aGVuDQogICAgICAgIHNlbGY6Q2FzdFdSSCgpDQogICAgICBlbmQNCiAgIGVuZA0KIGVuZA0KICAgZnVuY3Rpb24gTGVibGFuYzpMYW5lQ2xlYXIodGFiKSANCiAgbG9jYWwgY2xlYXJ0YXJnZXQgPSBzZWxmLmNsZWFydGFyZ2V0DQogIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5RTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RRKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIud2NvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5XTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5XU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgIGxvY2FsIEJlc3RQb3MsIEJlc3RIaXQgPSBHZXRCZXN0Q2lyY3VsYXJGYXJtUG9zaXRpb24oc2VsZi5XU3BlbGwuUmFuZ2UsIHNlbGYuV1NwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKQ0KICAgICAgICAgICAgaWYgQmVzdFBvcyB+PSBuaWwgYW5kICBCZXN0SGl0ID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgICAgIENhc3RTcGVsbChfVywgQmVzdFBvcy54LCBCZXN0UG9zLnopDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIucmNvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVIgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLm5hbWUgPT0gIkxlYmxhbmNTbGlkZU0iIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLlJNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLldTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RDaXJjdWxhckZhcm1Qb3NpdGlvbihzZWxmLldTcGVsbC5SYW5nZSwgc2VsZi5XU3BlbGwuV2lkdGgsIHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpDQogICAgICAgICAgICBpZiBCZXN0UG9zIH49IG5pbCBhbmQgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX1IsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQgICAgIA0KICAgICAgICBlbmQgICANCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpMYXN0SGl0KCkNCiAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDEgdGhlbg0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICAgICAgICBsb2NhbCBRZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApIGFuZCBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpICBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLlFTcGVsbC5SYW5nZSAqIHNlbGYuUVNwZWxsLlJhbmdlIGFuZCBRZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgIGVuZA0KICAgICAgICBsb2NhbCBFZGFtYWdlID0gc2VsZjpHZXRFMkRtZyh0YXJnZXQpDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VFIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5FTWFuYSAvMTAwIClhbmQgIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgYW5kIEdldERpc3RhbmNlU3FyKHRhcmdldCkgPD0gc2VsZi5FU3BlbGwuUmFuZ2UgKiBzZWxmLkVTcGVsbC5SYW5nZSBhbmQgRWRhbWFnZSA+PSB0YXJnZXQuaGVhbHRoKSB0aGVuDQogICAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDIgdGhlbg0KICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LkVNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpKdW5nbGVDbGVhcigpDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5RTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VXIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5XTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgc2VsZi5XU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLkVNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5FU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgIGlmKHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VSIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5STWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuUlNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzp3VXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNXID0gbXlIZXJvOkdldFNwZWxsRGF0YShfVykNCiAgICBpZiBsZWJsYW5jVy5uYW1lID09ICJsZWJsYW5jc2xpZGVyZXR1cm4iIHRoZW4gDQogICAgICByZXR1cm4gdHJ1ZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIGZhbHNlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOnJVc2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1IgPSBteUhlcm86R2V0U3BlbGxEYXRhKF9SKQ0KICAgIGlmIGxlYmxhbmNSLm5hbWUgPT0gIkxlYmxhbmNTbGlkZU0iIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UNCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6UjJ1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1EgPSBzZWxmLlJTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1EgKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpRRXVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jUSA9IHNlbGYuUVNwZWxsOklzUmVhZHkoKQ0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5FU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNRIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gTGVibGFuYzpXUnVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jUSA9IHNlbGYuV1NwZWxsOklzUmVhZHkoKQ0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5SU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNRIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogICAgICBmdW5jdGlvbiBMZWJsYW5jOldRdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNRID0gc2VsZi5XU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLlFTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1EgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgICAgICAgZnVuY3Rpb24gTGVibGFuYzpRdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6RVF1c2VkKCkgDQogICAgbG9jYWwgbGVibGFuY1cgPSBzZWxmLkVTcGVsbDpJc1JlYWR5KCkNCiAgICBsb2NhbCBsZWJsYW5jRSA9IHNlbGYuUVNwZWxsOklzUmVhZHkoKQ0KICAgIGlmIChsZWJsYW5jVyBhbmQgbGVibGFuY0UpIHRoZW4gDQogICAgICByZXR1cm4gZmFsc2UgDQogICAgZWxzZSANCiAgICAgIHJldHVybiB0cnVlDQogICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOkVXdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNXID0gc2VsZi5FU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLldTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1cgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpRUnVzZWQoKSANCiAgICBsb2NhbCBsZWJsYW5jVyA9IHNlbGYuUVNwZWxsOklzUmVhZHkoKQ0KICAgIGxvY2FsIGxlYmxhbmNFID0gc2VsZi5SU3BlbGw6SXNSZWFkeSgpDQogICAgaWYgKGxlYmxhbmNXIGFuZCBsZWJsYW5jRSkgdGhlbiANCiAgICAgIHJldHVybiBmYWxzZSANCiAgICBlbHNlIA0KICAgICAgcmV0dXJuIHRydWUNCiAgICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBMZWJsYW5jOlFXdXNlZCgpIA0KICAgIGxvY2FsIGxlYmxhbmNXID0gc2VsZi5RU3BlbGw6SXNSZWFkeSgpDQogICAgbG9jYWwgbGVibGFuY0UgPSBzZWxmLldTcGVsbDpJc1JlYWR5KCkNCiAgICBpZiAobGVibGFuY1cgYW5kIGxlYmxhbmNFKSB0aGVuIA0KICAgICAgcmV0dXJuIGZhbHNlIA0KICAgIGVsc2UgDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIGVuZA0KICBlbmQNCiAgbG9jYWwgc3BlbGxMZXZlbCA9IDANCiAgZnVuY3Rpb24gTGVibGFuYzphdXRvbGV2ZWwoKQ0KaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAxIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMSA9ICAgeyAxLDIsMywxLDEsNCwxLDIsMSwyLDQsMiwyLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDIgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UyID0gICB7IDEsMiwzLDEsMSw0LDEsMywxLDMsNCwzLDMsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UyKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTMgPSAgeyAyLDMsMSwyLDIsNCwyLDEsMiwxLDQsMSwxLDMsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMykNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDQgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U0ID0gIHsgMiwzLDEsMiwyLDQsMiwzLDIsMyw0LDMsMywxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTQpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA1IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNSA9ICB7IDMsMSwyLDMsMyw0LDMsMiwzLDIsNCwyLDIsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U1KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAzLDEsMiwzLDMsNCwzLDEsMywxLDQsMSwxLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICAgIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNyBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTYgPSAgeyAyLDEsMywyLDEsNCwyLDIsMSwzLDQsMiwxLDEsMyw0LDMsM30NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzphdXRvemhvbnlhKCkNCiAgICBpZiBzZWxmLkNvbmZpZy5pdGVtLmVuYWJsZWF1dG96aG9ueWEgdGhlbg0KICAgICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgICBpZiBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuaXRlbS5hdXRvemhvbnlhIC8gMTAwKSBhbmQgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJaaG9ueWFzSG91cmdsYXNzIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBmdW5jdGlvbiBMZWJsYW5jOmVzY2FwZWZvcmdhcCgpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkNvbmZpZy5jb21iby5nYXBjbG9zZSBhbmQgbm90IHNlbGY6d1VzZWQoKSB0aGVuDQogIHBvcz1WZWN0b3IobXlIZXJvKSsoVmVjdG9yKHRhcmdldCktVmVjdG9yKG15SGVybykpOm5vcm1hbGl6ZWQoKSpzZWxmLldTcGVsbC5SYW5nZQ0KICBDYXN0U3BlbGwoX1cscG9zLngscG9zLnopDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzplc2NhcGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSAgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VXIGFuZCBub3Qgc2VsZjp3VXNlZCgpIHRoZW4NCiAgQ2FzdFNwZWxsKF9XLG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICB0aGVuIA0KICBzZWxmOndhbGsoKQ0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgIGFuZCBzZWxmLkNvbmZpZy5lc2NhcGUudXNlUiBhbmQgbm90ICBzZWxmOnJVc2VkKCkgdGhlbg0KICBDYXN0U3BlbGwoX1IsbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6d2FsaygpDQogICAgbXlIZXJvOk1vdmVUbyhtb3VzZVBvcy54LG1vdXNlUG9zLnopDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOmdhcGNsb3NlKCkNCmlmIHRhcmdldCBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgc2VsZjplc2NhcGVmb3JnYXAoKQ0KICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMZWJsYW5jOml0ZW1zKCkNCiAgICBmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlYmcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiQmlsZ2V3YXRlckN1dGxhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWhnIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IHRoZW4NCiAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICBpZiAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIkhleHRlY2hHdW5ibGFkZSIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogDQogIGVuZA0KICBlbmQNCiAgbGFzdFBvdGlvbiA9IDANCiAgZnVuY3Rpb24gTGVibGFuYzphdXRvcG90KCkNCiBpZiBvcy5jbG9jaygpIC0gbGFzdFBvdGlvbiA8IDE1IHRoZW4gcmV0dXJuIGVuZA0KICBmb3IgU0xPVCA9IElURU1fMSwgSVRFTV82IGRvDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTTE9UKS5uYW1lID09ICJSZWdlbmVyYXRpb25Qb3Rpb24iIGFuZCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuZW5hYmxlYXV0b3BvdGhwIHRoZW4NCiAgICAgIGlmIG15SGVybzpDYW5Vc2VTcGVsbChTTE9UKSA9PSBSRUFEWSBhbmQgKG15SGVyby5oZWFsdGggLyBteUhlcm8ubWF4SGVhbHRoIDwgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90LmF1dG9wb3RocCAvMTAwICkgIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKFNMT1QpIA0KICAgICAgICBsYXN0UG90aW9uID0gb3MuY2xvY2soKSAgICAgICANCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCmVuZA0KDQogIGZ1bmN0aW9uIExlYmxhbmM6VEFSR0VUQ1MoKQ0KICAgICAgbG9jYWwgVGFyZ2V0ID0gbmlsDQogICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIHRoZW4gVGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICAgICAgZWxzZSBUYXJnZXQgPSBzZWxmLnRzdy50YXJnZXQNCiAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGVibGFuYzpXbmRNc2coTXNnLCBLZXkpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuY29tYm9tb2RlIHRoZW4NCiAgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPSBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyArMQ0KICBpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA+IDkgdGhlbiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9IDEgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRCA9IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIGFuZCBzdGFyZ2V0LmNoYXJOYW1lID09IHNlbGYuc2VsZWN0ZWRUYXIuY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgIGlmIFBvcFVwMSB0aGVuDQogICAgICBQb3BVcDEgPSBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgICAgIGVuZA0KICAgICAgZnVuY3Rpb24gTGVibGFuYzpVbmxvYWQoKQ0KICAgICAgICBzZWxmOndyaXRlY2ZnKCkNCiAgICAgIGVuZA0KICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gQWthbGkgU3RhcnQgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KbG9jYWwgUWJ1ZmYgPSBmYWxzZQ0KICBjbGFzcyAiQWthbGkiDQogIGZ1bmN0aW9uIEFrYWxpOl9faW5pdCgpDQpzZWxmLnRzPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzcT0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNjAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c3c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDcwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAzMTUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzcj0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c2c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDkyNSwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgIHNlbGYuUVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1EsIERhbWFnZU5hbWUgPSAiUSIsIFJhbmdlID0gNjAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDcwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlNFTEZ9KQ0KICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAzMjUsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID03MDAsICBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICBzZWxmLlJXU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfVywgRGFtYWdlTmFtZSA9ICJXIiwgUmFuZ2UgPSA3MDAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgc2VsZi5JZ25pdGUgPSBfU3BlbGwoe1Nsb3QgPSBGaW5kU3VtbW9uZXJTbG90KCJzdW1tb25lcmRvdCIpLCBEYW1hZ2VOYW1lID0gIklHTklURSIsIFJhbmdlID0gNjAwLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KLS18PiBNaW5pb24gTWFuYWdlcnMNCiAgICBzZWxmLmVuZW15TWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5hbGx5TWluaW9ucyAgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0FMTFksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5qdW5nbGVNaW5pb25zICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGYub3RoZXJNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9PVEhFUiwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmOkxvYWRNZW51KCkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSAwDQogICAgICBzZWxmOmZpbmRvcmJ3YWxrZXIoKQ0KICAgICAgDQogICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlRpY2soKSBlbmQpDQogICAgICAgICAgICAgIEFkZFVubG9hZENhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpVbmxvYWQoKSBlbmQgKQ0KICBBZGREcmF3Q2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOkRyYXcoKSBlbmQpDQogIEFkZE1zZ0NhbGxiYWNrKGZ1bmN0aW9uKG1zZyxLZXkpIHNlbGY6V25kTXNnKG1zZyxLZXkpIGVuZCkNCiAgLS1BZGRBbmltYXRpb25DYWxsYmFjayhmdW5jdGlvbih1bml0LCBhbmltYXRpb24pIHNlbGY6QW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbikgZW5kKQ0KICBBZGRQcm9jZXNzU3BlbGxDYWxsYmFjayhmdW5jdGlvbih1bml0LCBzcGVsbCkgc2VsZjpQcm9jZXNzU3BlbGwodW5pdCwgc3BlbGwpIGVuZCkNCiBBZGRBcHBseUJ1ZmZDYWxsYmFjayhmdW5jdGlvbihzb3VyY2UsIHVuaXQsIGJ1ZmYpIHNlbGY6T25BcHBseUJ1ZmYoc291cmNlLCB1bml0LCBidWZmKSBlbmQpDQpBZGRVcGRhdGVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZiwgc3RhY2tzKSBzZWxmOlVwZGF0ZUJ1ZmYodW5pdCwgYnVmZiwgc3RhY2tzKSBlbmQpDQpBZGRSZW1vdmVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZikgc2VsZjpPblJlbW92ZUJ1ZmYodW5pdCwgYnVmZikgZW5kKSANCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOlRpY2soKQ0KICBzZWxmOmF1dG96aG9ueWEoKQ0KICBzZWxmOkF1dG9zdGVhbHRoKCkNCiAgc2VsZjphdXRvcG90KCkNCiAgc2VsZjphdXRvcSgpDQogLS0gaWYgUWJ1ZmYgdGhlbiBwcmludCAieWVzIiBlbHNlIHByaW50ICJubyIgZW5kDQogaWYgVklQX1VTRVIgdGhlbiAgIHNlbGY6QW50aWFmaygpICBlbmQNCiAgc2VsZjppdGVtcygpDQogICAgICAgIHNlbGY6Y2hlY2t0cygpDQogICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjphdXRvbGV2ZWwoKSBlbmQNCiAgICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjpza2luaGFjaygpIGVuZA0KIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljLmxvZ2ljID09IDEgKXRoZW4NCiAgICBzZWxmOmNvbWJvKCkNCiAgZW5kDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5sb2dpYyA9PSAyICl0aGVuDQogICAgc2VsZjpjb21ibzIoKQ0KICBlbmQNCiAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFzdGhpdGtleSBvciBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuYXV0b2xhc3RoaXQgKXRoZW4NCiAgICAgIHNlbGY6TGFzdEhpdCgpDQogICAgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICl0aGVuDQogICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgZW5kDQogICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgKXRoZW4NCiAgICBzZWxmOkxhbmVDbGVhcigpDQogIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcuaW5zdHJ1Y3QgdGhlbg0KICAgIHNlbGYuQ29uZmlnLmluc3RydWN0ID0gZmFsc2UNCiAgICBQb3BVcDEgPSB0cnVlDQogICAgICBlbmQNCiAgaWYoc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICkgdGhlbg0KICAgIHNlbGY6a2lsbHN0ZWFsKCkNCiAgZW5kDQogIGlmKHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICApIHRoZW4NCiAgICBzZWxmOmhhcmFzcygpDQogIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgKXRoZW4NCiAgICAgIHNlbGY6ZXNjYXBlKCkNCiAgICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBBa2FsaTpVcGRhdGVCdWZmKHVuaXQsYnVmZixzdGFja3MpDQogICAgICBpZiB1bml0IGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSB0aGVuDQogICAgICAgICBpZiBidWZmLm5hbWUgPT0gIkFrYWxpTW90YSIgdGhlbg0KICBRYnVmZiA9IHRydWUNCiAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgICAgICAgICAgIGZ1bmN0aW9uIEFrYWxpOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikNCiAgIGlmIHVuaXQgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgdW5pdC50eXBlID09IG15SGVyby50eXBlIHRoZW4NCiAgaWYgIGJ1ZmYubmFtZSA9PSAiQWthbGlNb3RhIiB0aGVuDQogIFFidWZmID0gdHJ1ZQ0KICBlbmQNCiAgZW5kDQplbmQNCg0KICAgICAgIGZ1bmN0aW9uIEFrYWxpOk9uUmVtb3ZlQnVmZih1bml0LCBidWZmKQ0KICAgICBpZiB1bml0IGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSB0aGVuDQogICAgICAgIGlmIGJ1ZmYubmFtZSA9PSAiQWthbGlNb3RhIiB0aGVuDQogIFFidWZmID0gZmFsc2UNCiAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBmdW5jdGlvbiBBa2FsaTp3YWxrKCkNCiAgICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmVzY2FwZSgpDQogICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSAgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VXIHRoZW4NCiAgQ2FzdFNwZWxsKF9XLG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICB0aGVuIA0KICBzZWxmOndhbGsoKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOkRyYXcoKQ0KICAgICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5xZHJhdyBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA2MDAsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Rd2lkdGgsQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUWNvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcud2RyYXcgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguV3dpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5XY29sb3IpKSkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5lZHJhdyBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCAzMjUsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Fd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkVjb2xvcikpKQ0KICAgIGVuZA0KICAgIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucmRyYXcgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Sd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlJjb2xvcikpKQ0KICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuYWFkcmF3IHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCAxMjUsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkFBd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkFBY29sb3IpKSkNCiAgICBlbmQNCiAgICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5ydGRyYXcgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSAgdGhlbg0KICAgaWYgc2VsZi50c3IudGFyZ2V0fj1uaWwgdGhlbg0KICAgICAgRHJhd0xpbmUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LHNlbGYudHNyLnRhcmdldC54LCBzZWxmLnRzci50YXJnZXQueSwgc2VsZi50c3IudGFyZ2V0Lnosc2VsZi5Db25maWcub3RoZXIud2lkdGguRTJ3aWR0aCxBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5FMmNvbG9yKSkpDQogICAgZW5kDQogICAgZW5kDQogICBpZiBQb3BVcDEgdGhlbg0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjUwKSwgKFdJTkRPV19IKi4xNSksIChXSU5ET1dfSCouOSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjA1LCB3LCBoMi8xLjk3LCB3LzEuNzUsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3TGluZSh3LCBoMSwgdywgaDIvMiwgdy8xLjgsIEFSR0IoMTUwLCAyMzUsIDE4MywgNjMpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiV2VsY29tZSB0byBLZXlib2FyZE1hc3RlciBTZXJpZXMgMy4wIiksIFdJTkRPV19IKi4wMjgsIChXSU5ET1dfVy8yKSwgKFdJTkRPV19IKi4xOCksIEFSR0IoMjU1LCA5NiwgNDgsIDApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgRHJhd1RleHRBKHRvc3RyaW5nKCJMaXR0bGUgaW5mb3JtYXRhdGlvbiBhYm91dCBLZXlib2FyZE1hc3RlciBTZXJpZXMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjE5NCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSXRzIGEgYnVuZGxlIHRoYXQgcHJvZHVjZWQgYnkgZW5zdWx1eW4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkN1cnJlbnRseSBpdCBzdXBwb3J0ZWQgb25seSBtaWQgY2hhbXBzICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjI1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBmb2N1cyBRdWFsaXR5IHJhdGhlciB0aGFuIFF1YW50aXR5IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIG5lZWQgeW91ciBmZWVkYmFja3MgdG8gaW1wcm92ZSBpdCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjU1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBjYXJlIGV2ZXJ5IHNpbmdsZSBmZWVkYmFjayBhbmQgdHJ5IHRvIGFkZCBldmVyeXRoaW5nIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNzApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJIb3BlIHlvdSBhcmUgZW5qb3kgbXkgc2NyaXB0Li4iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI4NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIllvdSBjYW4gY2hhbmdlIGV2ZXJ5IHNldHRpbmdzIHRvIHlvdXIgbGlrZSA6KSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzAwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRGlkIHlvdSBsaWtlIG15IHNjcmlwdCA+IFVwdm90ZSBtZSBvbiBzY3JpcHRzdGF0dXMgYW5kIG9uIGZvcnVtIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEb24ndCBmb3JnZXQgdGhlc2UgYXJlIFZJUDsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMzMCksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBbnRpLUFmayIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzQ1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBBdXRvIExldmVsZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNjApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIFNraW4gQ2hhbmdlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM3NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC40OSksIChXSU5ET1dfSCouNzApLCAoV0lORE9XX0gqLjc1KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuNzc1LCB3LCBoMi8xLjY4LCB3Ki4xMSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdSZWN0YW5nbGVCdXR0b24oV0lORE9XX1cqMC40NjcsIFdJTkRPV19ILzIuMzc1LCBXSU5ET1dfVyouMDQ3LCBXSU5ET1dfSCouMDQxLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJPSyIpLCBXSU5ET1dfSCouMDIsIChXSU5ET1dfVy8yKSouOTgsIChXSU5ET1dfSC8yLjM3NSksIEFSR0IoMjU1LCAwLCAwLCAwICksImNlbnRlciIsImNlbnRlciIpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENyZWRpdHMiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM5NSksIEFSR0IoMjU1LCA5NiwgNDgsIDApKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnVycnktIEZvciB0aGlzIGF3ZXNvbWUgcG9wdXAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjQxMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkgDQogIGVuZA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldCBhbmQgc2VsZi5zZWxlY3RlZFRhciB+PSBuaWwgdGhlbg0KICAgICAgICAgRHJhd0NpcmNsZTNEKHNlbGYuc2VsZWN0ZWRUYXIueCwgc2VsZi5zZWxlY3RlZFRhci55LCBzZWxmLnNlbGVjdGVkVGFyLnosIDgwLDYsIEFSR0IoMjU1LCAyNTUsMCwwKSkNCmVuZA0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXRjYWwgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQogICAgICBpZiB0YXJnZXQgYW5kIHRhcmdldCB+PSBuaWwgdGhlbg0KICAgICAgICBsb2NhbCBkcmF3cG9zPVdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQogICAgICAgIGxvY2FsIGNvbWJvVGV4dCxjb2xvciA9IHNlbGY6R2V0RHJhd3ModGFyZ2V0KQ0KICAgICAgICBpZiBjb21ib1RleHQgdGhlbg0KICAgICAgICAgIERyYXdUZXh0KGNvbWJvVGV4dCwxNSxkcmF3cG9zLngtMjAsZHJhd3Bvcy55LTIwLGNvbG9yKQ0KICAgICAgICBlbmQgDQogICAgICBlbmQgDQogICAgICBlbmQNCiAgICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogICAgICBpZiB0YXJnZXQudmlzaWJsZSBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBzZWxmLkNvbmZpZy5vdGhlci5kYW1hZ2UgdGhlbg0KICAgICAgICBjdXJyTGluZSA9IDENCiAgICAgICAgRHJhd0xpbmVIUEJhcjIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCIiLCAgdGFyZ2V0LCBjdXJyTGluZSkNCiAgICAgICAgRHJhd0xpbmVIUEJhcihzZWxmOkdldE15RG1nKHRhcmdldCksICJEYW1hZ2UgIiAuLiBtYXRoLnJvdW5kKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSksdGFyZ2V0LGN1cnJMaW5lKQ0KICAgICAgICBjdXJyTGluZSA9IGN1cnJMaW5lICsgMQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICAgICAgZW5kDQogICAgICAgICAgICAgZnVuY3Rpb24gQWthbGk6d3JpdGVjZmcocGFyYW0pDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKFNDUklQVF9QQVRILi4iXFwiLi4iY29uZmlnLmNmZyIsICJ3IikNCiAgICAgICAgaWYgbm90IGZpbGUgdGhlbg0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIkVycm9yIGluIFdyaXRlIENGRyIpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBwYXJhbSB+PSAiZnRjIiB0aGVuDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZShhdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIldyaXR0ZW46ICIuLmF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKCJlbmciKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIlc6IEVuZ2xpc2giKQ0KICAgICAgICBlbmQNCiAgICAgICAgZmlsZTpjbG9zZSgpDQplbmQNCmZ1bmN0aW9uIEFrYWxpOmJ1ZmYodW5pdCkNCiByZXR1cm4gVGFyZ2V0SGF2ZUJ1ZmYoJ0FrYWxpTW90YScsIHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gQWthbGk6c2tpbmhhY2soKQ0KICBpZiBub3Qgc2tpbmxvYWQgdGhlbg0KICBpZiAoKEN1cnJlbnRUaW1lSW5NaWxsaXMoKSAtIGxhc3RUaW1lVGlja0NhbGxlZCkgPiAyMDApIHRoZW4NCiAgICAgIGxhc3RUaW1lVGlja0NhbGxlZCA9IEN1cnJlbnRUaW1lSW5NaWxsaXMoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLnZpcC5za2luLmtleSBhbmQgc2VsZi5Db25maWcudmlwLnBhY2tldCAgdGhlbg0KICAgIGlmIHNlbGYuQ29uZmlnLnZpcC5za2luWydzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJ10gfj0gbGFzdFNraW4gdGhlbg0KICAgICAgICBsYXN0U2tpbiA9IHNlbGYuQ29uZmlnLnZpcC5za2luWydzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJ10NCiAgU2VuZFNraW5QYWNrZXQobXlIZXJvLmNoYXJOYW1lLCBza2luc1BCW3NlbGYuQ29uZmlnLnZpcC5za2luWydzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJ11dLCBteUhlcm8ubmV0d29ya0lEKTsNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGVuZA0KIGZ1bmN0aW9uIEFrYWxpOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkNCiAgICBpZiB1bml0LnR5cGUgPT0gbXlIZXJvLnR5cGUgYW5kIHVuaXQudGVhbSB+PSBteUhlcm8udGVhbSBhbmQgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCAxMDAwIGFuZCBzcGVsbCB+PSBuaWwgdGhlbiAgICAgDQogICAgaWYgc3BlbGwubmFtZSA9PSAodHlwZShpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSA9PSAnbnVtYmVyJyBhbmQgdW5pdDpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkubmFtZSBvciBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKSBhbmQgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZVt1bml0LmNoYXJOYW1lXSB0aGVuDQogICAgICBpZiBzcGVsbC50YXJnZXQgfj0gbmlsIGFuZCBzcGVsbC50YXJnZXQubmFtZSA9PSBteUhlcm8ubmFtZSBvciBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsID09ICdibGluZG1vbmtxdHdvJyB0aGVuDQogICAgICAgIENhc3RTcGVsbChfVywgbXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQogZnVuY3Rpb24gQWthbGk6YXV0b2xldmVsKCkNCmlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTEgPSAgIHsgMSwyLDMsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTEpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAyIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMiA9ICAgeyAxLDIsMywxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDMgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UzID0gIHsgMiwzLDEsMiwyLDQsMiwxLDIsMSw0LDEsMSwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTMpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA0IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNCA9ICB7IDIsMywxLDIsMiw0LDIsMywyLDMsNCwzLDMsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U0KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTUgPSAgeyAzLDEsMiwzLDMsNCwzLDIsMywyLDQsMiwyLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDYgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMywxLDIsMywzLDQsMywxLDMsMSw0LDEsMSwyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDcgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMSwzLDIsMSwxLDQsMSwzLDEsMyw0LDMsMywyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmF1dG96aG9ueWEoKQ0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLmVuYWJsZWF1dG96aG9ueWEgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6Y2hlY2t0cygpDQogICAgICAgc2VsZi50czp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2c6dXBkYXRlKCkNCmlmIG5vdCBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBub3Qgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4NCnRhcmdldCA9IHNlbGYudHMudGFyZ2V0DQplbHNlaWYgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igc2VsZi5zZWxlY3RlZFRhciB0aGVuDQp0YXJnZXQgPSBzZWxmLnNlbGVjdGVkVGFyDQplbmQNCmVuZA0KICBmdW5jdGlvbiBBa2FsaTpjb21ibygpDQogIGxvY2FsIGFidWZmID0gc2VsZjpidWZmKHRhcmdldCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgUWJ1ZmYgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsIGFuZCBHZXREaXN0YW5jZSh0YXJnZXQpPDMxNSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOmNvbWJvMigpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgbm90IHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgICAgICBpZihzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6aGFyYXNzKCkNCiAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIEFrYWxpOkp1bmdsZUNsZWFyKCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlFNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLldNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICBzZWxmLldTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuRU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLkVTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICAgaWYoc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVIgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlJNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5SU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgIGZ1bmN0aW9uIEFrYWxpOkxhc3RIaXQoKQ0KICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogIGlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMSB0aGVuDQogICAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgICAgICAgIGxvY2FsIFFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkgYW5kIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuUVNwZWxsLlJhbmdlICogc2VsZi5RU3BlbGwuUmFuZ2UgYW5kIFFkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgZW5kDQogICAgICAgIGxvY2FsIEVkYW1hZ2UgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuRU1hbmEgLzEwMCApYW5kICBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpIGFuZCBHZXREaXN0YW5jZVNxcih0YXJnZXQpIDw9IHNlbGYuRVNwZWxsLlJhbmdlICogc2VsZi5FU3BlbGwuUmFuZ2UgYW5kIEVkYW1hZ2UgPj0gdGFyZ2V0LmhlYWx0aCkgdGhlbg0KICAgICAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgIGVsc2VpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDIgdGhlbg0KICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LkVNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6TGFuZUNsZWFyKCkNCiAgbG9jYWwgY2xlYXJ0YXJnZXQgPSBzZWxmLmNsZWFydGFyZ2V0DQogIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICBzZWxmLm90aGVyTWluaW9uczp1cGRhdGUoKQ0KICAgICAgc2VsZi5qdW5nbGVNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIGlwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24sIDYwMCkgYW5kIChjbGVhcnRhcmdldCA9PSBuaWwgb3Igbm90IFZhbGlkVGFyZ2V0KGNsZWFydGFyZ2V0KSkgdGhlbg0KICAgICAgICAgIGNsZWFydGFyZ2V0ID0gbWluaW9uDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbikgYW5kIG1pbmlvbiB+PSBuaWwgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5RTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RRKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuZWNvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlRSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5FTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5FU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RFKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQplbmQNCiAgZnVuY3Rpb24gQWthbGk6Q2FzdFEodW5pdCkNCiAgc2VsZi5RU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIEFrYWxpOkNhc3RXKHVuaXQpDQogIHNlbGYuV1NwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBBa2FsaTpDYXN0RSh1bml0KQ0KICBzZWxmLkVTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gQWthbGk6Q2FzdFIodW5pdCkNCiAgc2VsZi5SU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQpmdW5jdGlvbiBBa2FsaTpDYXN0SSh1bml0KQ0KICBzZWxmLklnbml0ZTpDYXN0KHVuaXQpDQplbmQNCiAgZnVuY3Rpb24gQWthbGk6YXV0b3EoKQ0KICAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLktleXMuYXV0b3EgYW5kICBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6R2V0UURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMTUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjQpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOkdldFEyRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyMCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDI1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouNSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIEFrYWxpOkdldEVEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg1ICsgKG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsICogMjUpICsgKChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjQpKyhteUhlcm8uYWRkRGFtYWdlICowLjYpKQ0KICByZXR1cm4gbXlIZXJvOkNhbGNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gQWthbGk6R2V0UkRtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgIGlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDI1ICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsICogNzUpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuNSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBBa2FsaTpHZXRNeURtZyh0YXJnZXQpDQogICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICtzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgK3NlbGY6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpICtzZWxmOkdldFEyRG1nKHRhcmdldCkNCiAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICAgICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkrc2VsZjpHZXRRMkRtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIEFrYWxpOkdldERyYXdzKHRhcmdldCkNCmxvY2FsIFFkbWcgID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCmxvY2FsIFFkbWcyID1zZWxmOkdldFEyRG1nKHRhcmdldCkNCmxvY2FsIEVkbWcgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KbG9jYWwgUmRtZyA9IHNlbGY6R2V0UkRtZyh0YXJnZXQpDQpsb2NhbCBJZG1nPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCg0KICBpZiBRZG1nID4gdGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgRWRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUmRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUmRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK0VkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBRZG1nK1JkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgUWRtZytSZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytSZG1nK0lkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK1JkbWcrRWRtZyA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBRZG1nK1FkbWcyID4gdGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTInLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytJZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIEVkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIEVkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFJkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFJkbWcrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBRZG1nK1JkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytFZG1nK0lkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUTIgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIFFkbWcrUmRtZytJZG1nK1FkbWcyPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFEyICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIFFkbWcrRWRtZytSZG1nK0lkbWcrUWRtZzI+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdGdWxsIENvbWJvICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgUWRtZytSZG1nK0VkbWcrUWRtZzIgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnS2lsbCB3aXRoIGZ1bGwgY29tYm8nLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2UgDQogICAgcmV0dXJuICJDYW50IEtpbGwgeWV0IiwgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZW5kIA0KZW5kDQogIGZ1bmN0aW9uIEFrYWxpOmtpbGxzdGVhbCgpDQpmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgbG9jYWwgZG1nRSA9IHNlbGY6R2V0RURtZyh1bml0KQ0KICAgICAgaWYoc2VsZi50c2UudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ0UgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VFICAgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodW5pdCkgIA0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdRID0gc2VsZjpHZXRRRG1nKHVuaXQpDQogICAgICBpZihzZWxmLnRzcS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgIGVuZA0KICAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgaWYoc2VsZi50c3IudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1IgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDU1MCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgIGVuZA0KICAgZW5kDQplbmQNCmZ1bmN0aW9uIEFrYWxpOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiSGV4dGVjaEd1bmJsYWRlIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogZnVuY3Rpb24gQWthbGk6QXV0b3N0ZWFsdGgoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVcgYW5kIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlbiB0aGVuDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDEgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gMiB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDIgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gMyB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDMgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gNCB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLnVzZVdlID09IDQgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDkwMCkgPj0gNSB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlV2hwIGFuZCBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYy51c2VXIHRoZW4NCiAgICAgICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljLmhwIC8gMTAwKSB0aGVuIA0KICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgIGVuZA0KICAgIGVuZA0KZW5kDQoNCiAgZnVuY3Rpb24gQWthbGk6TG9hZE1lbnUoKQ0KICAgICAgIHNlbGYuQ29uZmlnPXNjcmlwdENvbmZpZygiIi4uU2NyaXB0bmFtZS4uIiBbIiAuLiBteUhlcm8uY2hhck5hbWUuLiJdIiAsIm1lbnUiKQ0KDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMV0sICJjb21ibyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAtLSBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlcmciLCAiVXNlIFIgdG8gR2FwLUNsb3NlIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgIA0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzldLCAiaGFyYXNzIikNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzEwXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMTFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTldLCAic2tpbGxsb2dpYyIpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTAxXSwgIldsb2dpYyIpIA0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWM6YWRkUGFyYW0oInVzZVciLCBsb2NfY2hvb3NlblsxMzhdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlV2hwIiwgbG9jX2Nob29zZW5bMTM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuV2xvZ2ljOmFkZFBhcmFtKCJocCIsbG9jX2Nob29zZW5bMTA0XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWM6YWRkUGFyYW0oInVzZVdlbiIsIGxvY19jaG9vc2VuWzEzNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLldsb2dpYzphZGRQYXJhbSgidXNlV2UiLCBsb2NfY2hvb3NlblsxMzZdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzMF0sIGxvY19jaG9vc2VuWzEzMV0gLCBsb2NfY2hvb3NlblsxMzJdLGxvY19jaG9vc2VuWzEzM10gfSkNCiAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWM6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMDNdLCAiUmxvZ2ljIikgDQogICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3NlblsxMDNdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzNF0sIGxvY19jaG9vc2VuWzEzNV19KQ0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE0XSwgImZhcm0iKQ0KICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNV0sImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsxNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsxOF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJlY291bnQiLGxvY19jaG9vc2VuWzE4Ml0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjBdLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzIxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyM10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjVdLCJsYXN0aGl0IikNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYXV0b2xhc3RoaXQiLGxvY19jaG9vc2VuWzE4OV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsyNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzI4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzVdLCAia2lsbHN0ZWFsIikNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bMzldLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls0MF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgDQogICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzMwXSwiZXNjYXBlIikNCiAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMzJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0Ml0sICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5Ml0sICJhdXRvcG90IikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJlbmFibGVhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQ0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2VoZyIsIGxvY19jaG9vc2VuWzQ1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlYmciLCBsb2NfY2hvb3Nlbls0Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5Ml0sICJtaXNjIikNCiAgICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIxOV0sICJnYXBDbG9zZSIpDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgidyIsIGxvY19jaG9vc2VuWzIyMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbSgiaW5mbzMiLCBsb2NfY2hvb3Nlbls5OF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIGZvciBfLCBlbmVteSBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgaWYgaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKGVuZW15LmNoYXJOYW1lLCBlbmVteS5jaGFyTmFtZSAuLiAiIC0gIiAuLiBlbmVteTpHZXRTcGVsbERhdGEoaXNBR2FwY2xvc2VyVW5pdFtlbmVteS5jaGFyTmFtZV0uc3BlbGwpLm5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIGVuZA0KICAgIGVuZA0KICAgICAgQ2xvY2sgPSBvcy5jbG9jaygpDQogICAgICAgIGlmIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0N10sICJ2aXAiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oInBhY2tldCIsbG9jX2Nob29zZW5bNDhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzQ5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUwXSwgImxldmVsIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzUxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3Nlbls1Ml0sIFNDUklQVF9QQVJBTV9MSVNULCA3LCB7bG9jX2Nob29zZW5bNThdLCBsb2NfY2hvb3Nlbls1OV0sbG9jX2Nob29zZW5bNjBdLGxvY19jaG9vc2VuWzYxXSxsb2NfY2hvb3Nlbls2Ml0sIGxvY19jaG9vc2VuWzYzXSwgbG9jX2Nob29zZW5bNjRdICB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1M10sICJza2luIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTRdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCBsb2NfY2hvb3Nlbls1N10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCBza2luTWV0YVtteUhlcm8uY2hhck5hbWVdKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgiaW5mbzUiLCBsb2NfY2hvb3Nlbls1NV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOTVdLCAiYW50aWFmayIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrOmFkZFBhcmFtKCJhbnRpYWZrIixsb2NfY2hvb3NlblsxOTZdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzMiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzQiLCBsb2NfY2hvb3Nlbls1Nl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIGVuZA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY1XSwib3RoZXIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNob3cgRGFtYWdlIE9uIEhwIEJhciIsICJIUEJBUiIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjZdLCAiZHJhdyIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInFkcmF3Iixsb2NfY2hvb3Nlbls2N10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3Iixsb2NfY2hvb3Nlbls2OF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3Iixsb2NfY2hvb3Nlbls2OV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInJkcmF3Iixsb2NfY2hvb3Nlbls3MF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsbG9jX2Nob29zZW5bNzFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicnRkcmF3Iixsb2NfY2hvb3NlblsyMjVdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOThdLCAiY29sb3IiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUWNvbG9yIiwgbG9jX2Nob29zZW5bMTk5XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiV2NvbG9yIiwgbG9jX2Nob29zZW5bMjAwXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRWNvbG9yIiwgbG9jX2Nob29zZW5bMjAxXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUmNvbG9yIiwgbG9jX2Nob29zZW5bMjAyXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRTJjb2xvciIsIGxvY19jaG9vc2VuWzIyNl0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkFBY29sb3IiLCBsb2NfY2hvb3NlblsyMDRdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJ0YXJnZXRzZWxlY3QiLCBsb2NfY2hvb3NlblsyMDVdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjA2XSwgIndpZHRoIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlF3aWR0aCIsIGxvY19jaG9vc2VuWzIxMF0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIld3aWR0aCIsIGxvY19jaG9vc2VuWzIxMV0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkV3aWR0aCIsIGxvY19jaG9vc2VuWzIxMl0sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIlJ3aWR0aCIsIGxvY19jaG9vc2VuWzIxM10sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkUyd2lkdGgiLCBsb2NfY2hvb3NlblsyMjddLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJBQXdpZHRoIiwgbG9jX2Nob29zZW5bMjA5XSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiU1R3aWR0aCIsIGxvY19jaG9vc2VuWzIwOF0sIDQsIDYsIDEsIDEwLCAwKSAgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzNdLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLGxvY19jaG9vc2VuWzc0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldCIsbG9jX2Nob29zZW5bNzVdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiZGFtYWdlIixsb2NfY2hvb3NlblsyMTRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Y2FsIixsb2NfY2hvb3Nlbls3Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzc3XSwidGFyZ2V0c2VsIikNCiAgICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFBhcmFtKCJpbmZvSzIiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0siLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgidHMiLGxvY19jaG9vc2VuWzc4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgc2VsZi50cy5uYW1lICA9ICJBa2FsaSINCiAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50cykNCiAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3OV0sICJLZXlzIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLGxvY19jaG9vc2VuWzgwXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLGxvY19jaG9vc2VuWzgxXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNCIsIGxvY19jaG9vc2VuWzgyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNza2V5IiwgbG9jX2Nob29zZW5bODNdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJhdXRvcSIsIGxvY19jaG9vc2VuWzkxXSwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNSIsIGxvY19jaG9vc2VuWzg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYW5lY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4NV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsbG9jX2Nob29zZW5bMjE1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s2IiwgbG9jX2Nob29zZW5bODddLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJlc2NhcGVrZXkiLCBsb2NfY2hvb3Nlbls4OF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWSIpKQ0KICAgIC0tc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFzdGhpdGtleSIsICJMYXN0aGl0IEtleSIsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LMiIsIGxvY19jaG9vc2VuWzg5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMTBdLCAiS2V5czIiKQ0KICAgIA0KICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJsYW5nIiwgbG9jX2Nob29zZW5bMTY1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjZdLCBsb2NfY2hvb3NlblsxNjddLGxvY19jaG9vc2VuWzE2OF19KQ0KICAgICAgICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluc3RydWN0IiwgbG9jX2Nob29zZW5bMjE2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgICAgIA0KICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYS5wZXJtYSB0aGVuDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpIGVuZCwgMSkNCiAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImNvbWJva2V5IikgZW5kLCAxLjIpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNza2V5IikgZW5kLCAxLjIpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiYXV0b3EiKSBlbmQsIDEuMikNCmVuZA0KICBlbmQNCiAgICAgIGZ1bmN0aW9uIEFrYWxpOmF1dG9wb3QoKQ0KIGlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQogIGZ1bmN0aW9uIEFrYWxpOnJnYXAoKQ0KICBlbmQNCiAgICAgICAgZnVuY3Rpb24gQWthbGk6QW50aWFmaygpDQogIGlmIG9zLmNsb2NrKCkgPCBDbG9jayBvciBub3Qgc2VsZi5Db25maWcudmlwLmFudGlhZmsuYW50aWFmayB0aGVuIHJldHVybiBlbmQNCiAgQ2xvY2sgPSBvcy5jbG9jaygpICsgbWF0aC5yYW5kb20oNjAsMTIwKQ0KICBteUhlcm86TW92ZVRvKG15SGVyby54LCBteUhlcm8ueikNCmVuZA0KZnVuY3Rpb24gQWthbGk6V25kTXNnKE1zZywgS2V5KQ0KaWYgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4gICAgICANCiAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgbG9jYWwgc3RhcmdldCA9IG5pbA0KICAgICAgICAgICAgZm9yIGksIGVuZW15IGluIGlwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykgPD0gbWluRCBvciBzdGFyZ2V0ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICBtaW5EID0gR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKQ0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgIGlmIHN0YXJnZXQgYW5kIG1pbkQgPCA1MDAgdGhlbg0KICAgICAgICAgICAgICAgIGlmIHNlbGYuc2VsZWN0ZWRUYXIgYW5kIHN0YXJnZXQuY2hhck5hbWUgPT0gc2VsZi5zZWxlY3RlZFRhci5jaGFyTmFtZSB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPlRhcmdldCA8Yj5pcyBubyBsb2dlciBzZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+TmV3IHRhcmdldCA8Yj5zZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICAgIFBvcFVwMSA9IGZhbHNlDQogICAgZW5kDQogIGVuZA0KICAgIGVuZA0KICAgICAgICAgIGZ1bmN0aW9uIEFrYWxpOlVubG9hZCgpDQogICAgICAgIHNlbGY6d3JpdGVjZmcoKQ0KICAgICAgZW5kDQogICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBMaXNzYW5kcmEgU3RhcnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8LS0NCi0tLVxcPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0vLy0tLQ0KICBjbGFzcyAiTGlzc2FuZHJhIg0KICBmdW5jdGlvbiBMaXNzYW5kcmE6X19pbml0KCkNCiAgIHNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDExMDAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogIHNlbGYudHNxPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogIHNlbGYudHN3PSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA0NTAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpDQogIHNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMDUwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICBzZWxmLnRzcj0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNTUwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgc2VsZi50c2c9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDEyMDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgICBzZWxmLlFTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9RLCBEYW1hZ2VOYW1lID0gIlEiLCBSYW5nZSA9IDcyNSwgV2lkdGggPSAyMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IDQ1MCwgV2lkdGggPSAwLCBEZWxheSA9IDAuNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAxMDUwLCBXaWR0aCA9IDExMCwgRGVsYXkgPSAuMjUsIFNwZWVkID0gbWF0aC5odWdlLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gZmFsc2UsIFR5cGUgPSBTUEVMTF9UWVBFLkxJTkVBUn0pDQogICAgIHNlbGYuUlNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1IsIERhbWFnZU5hbWUgPSAiUiIsIFJhbmdlID01NTAsIFdpZHRoID0gMCwgRGVsYXkgPSAwLjI1LCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuUlNTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9NTUwLCBXaWR0aCA9IDAsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSBtYXRoLmh1Z2UsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogIC0tfD4gTWluaW9uIE1hbmFnZXJzDQogICAgICBzZWxmLmVuZW15TWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLmFsbHlNaW5pb25zICAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fQUxMWSwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9ucyAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9KVU5HTEUsICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgIHNlbGYub3RoZXJNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9PVEhFUiwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICAgICAgICBzZWxmOkxvYWRNZW51KCkNCiAgICAgICAgICBwcmVkID0gVlByZWRpY3Rpb24oKQ0KICAgICAgICAgICAgTGFzdF9MZXZlbFNwZWxsID0gMA0KICAgICAgICAgICAgc2VsZjpmaW5kb3Jid2Fsa2VyKCkNCiAgICAgICAgICAgICAgICBzcGVsbHMgPSB7fQ0KICAgICAgICAgICAgICAgIHNwZWxscy5xID0geyByYW5nZU1heCA9IDkyNX0NCiAgICAgICAgQWRkVGlja0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpUaWNrKCkgZW5kKQ0KICAgICAgICAgICAgICAgIEFkZFVubG9hZENhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpVbmxvYWQoKSBlbmQgKQ0KICAgIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgICBBZGRNc2dDYWxsYmFjayhmdW5jdGlvbihtc2csS2V5KSBzZWxmOlduZE1zZyhtc2csS2V5KSBlbmQpDQogICAgLS1BZGRBbmltYXRpb25DYWxsYmFjayhmdW5jdGlvbih1bml0LCBhbmltYXRpb24pIHNlbGY6QW5pbWF0aW9uKHVuaXQsIGFuaW1hdGlvbikgZW5kKQ0KICAgIEFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAgIC0tQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOk9uQXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAgIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYsIHN0YWNrcykgc2VsZjpVcGRhdGVCdWZmKHVuaXQsIGJ1ZmYsIHN0YWNrcykgZW5kKQ0KICAgIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpUaWNrKCkNCiAgICAgICBzZWxmOmF1dG96aG9ueWEoKQ0KICAgICAgIHNlbGY6YXV0b3BvdCgpDQogaWYgVklQX1VTRVIgdGhlbiAgIHNlbGY6QW50aWFmaygpICBlbmQNCiAgICAgICBzZWxmOml0ZW1zKCkNCiAgICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjphdXRvbGV2ZWwoKSBlbmQNCiAgICAgICAgICBpZiBWSVBfVVNFUiB0aGVuIHNlbGY6c2tpbmhhY2soKSBlbmQNCiAgICAgICBzZWxmOmF1dG9SKCkNCiAgICAgICBzZWxmOmF1dG9xKCkNCiAgICAgICBzZWxmOmNoZWNrdHMoKQ0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSApdGhlbg0KICAgICAgc2VsZjpjb21ibygpDQogICAgZW5kDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuaW5zdHJ1Y3QgdGhlbg0KICAgIHNlbGYuQ29uZmlnLmluc3RydWN0ID0gZmFsc2UNCiAgICBQb3BVcDEgPSB0cnVlDQogIGVuZA0KICAgICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICl0aGVuDQogICAgIHNlbGY6SnVuZ2xlQ2xlYXIoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgKXRoZW4NCiAgICAgIHNlbGY6TGFuZUNsZWFyKCkNCiAgICBlbmQNCiAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgKXRoZW4NCiAgICAgIHNlbGY6ZW5nYWdld2l0aHIoKQ0KICAgIGVuZA0KICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhc3RoaXRrZXkgb3Igc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LmF1dG9sYXN0aGl0ICl0aGVuDQogICAgICBzZWxmOkxhc3RIaXQoKQ0KICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkpdGhlbg0KICAgICAgc2VsZjplc2NhcGUoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyApIHRoZW4NCiAgICAgIHNlbGY6a2lsbHN0ZWFsKCkNCiAgICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc2tleSBvciBzZWxmLkNvbmZpZy5LZXlzLmhhcmFzc3RvZ2xla2V5ICApIHRoZW4NCiAgICAgIHNlbGY6aGFyYXNzKCkNCiAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6Y2hlY2t0cygpDQogICAgICAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZzp1cGRhdGUoKQ0KICBpZiBub3Qgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igbm90IHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuDQogIHRhcmdldCA9IHNlbGYudHMudGFyZ2V0DQogIGVsc2VpZiBzZWxmLnRzZy50YXJnZXR+PW5pbCBvciBzZWxmLnNlbGVjdGVkVGFyIHRoZW4NCiAgdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KICBlbmQNCiAgZW5kDQogICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6TG9hZE1lbnUoKQ0KICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIFsiIC4uIG15SGVyby5jaGFyTmFtZS4uIl0iICwibWVudSIpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzFdLCAiY29tYm8iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oIk1hbmEiLGxvY19jaG9vc2VuWzhdLFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzldLCAiaGFyYXNzIikNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMTBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzExXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblsxMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiYXV0b3EiLCBsb2NfY2hvb3Nlbls5MV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOTldLCAic2tpbGxsb2dpYyIpDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWM6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxMDJdLCAiRWxvZ2ljIikNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWM6YWRkUGFyYW0oImNvbWJvIiwgbG9jX2Nob29zZW5bMTQzXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDIsIHtsb2NfY2hvb3NlblsxNDVdLCBsb2NfY2hvb3NlblsxNDZdIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljOmFkZFBhcmFtKCJoYXJhc3MiLCBsb2NfY2hvb3NlblsxNDRdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE0Nl0sIGxvY19jaG9vc2VuWzE0NV0gfSkNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWM6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLkVsb2dpYzphZGRQYXJhbSgiaW5mb0UiLCBsb2NfY2hvb3NlblsxNTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzEwM10sICJSbG9naWMiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiUmxvZ2ljIiwgbG9jX2Nob29zZW5bMTU1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNDldLCBsb2NfY2hvb3NlblsxNTBdLCBsb2NfY2hvb3NlblsxNTFdIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnNraWxsbG9naWMuUmxvZ2ljOmFkZFBhcmFtKCJlbmFibGVhdXRvUiIsIGxvY19jaG9vc2VuWzE1Ml0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWM6YWRkUGFyYW0oImF1dG9SIiwgbG9jX2Nob29zZW5bMTUzXSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiaW5mb1IyIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYzphZGRQYXJhbSgiaW5mb1IiLCBsb2NfY2hvb3NlblsxNTZdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzBdLCJlc2NhcGUiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzMxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZXNjYXBlOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblszMl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNF0sICJmYXJtIikNCiAgICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTVdLCJsYW5lY2xlYXIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMTZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgicWNvdW50Iixsb2NfY2hvb3NlblsxODBdLFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMTAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsxN10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ3Y291bnQiLGxvY19jaG9vc2VuWzE4MV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzE4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImVjb3VudCIsbG9jX2Nob29zZW5bMTgyXSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDEwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bMTg0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjBdLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzIxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyM10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjVdLCJsYXN0aGl0IikNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYXV0b2xhc3RoaXQiLGxvY19jaG9vc2VuWzE4OV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsyNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVciLGxvY19jaG9vc2VuWzI3XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblszNV0sICJraWxsc3RlYWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oImtzIixsb2NfY2hvb3NlblszNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblszOV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNDBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzQxXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0Ml0sICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5Ml0sICJhdXRvcG90IikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJlbmFibGVhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQ0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2VoZyIsIGxvY19jaG9vc2VuWzQ1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlYmciLCBsb2NfY2hvb3Nlbls0Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIA0KICAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5Ml0sICJtaXNjIikNCiAgICAgIHNlbGYuQ29uZmlnLm1pc2M6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5M10sICJpbnRlcnJ1cHQiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdDphZGRQYXJhbSgiciIsIGxvY19jaG9vc2VuWzk3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdDphZGRQYXJhbSgiaW5mbzMiLCBsb2NfY2hvb3Nlbls5OF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBmb3IgaSwgYSBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICAgICAgaWYgSW50ZXJydXB0W2EuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgZm9yIGksIHNwZWxsIGluIHBhaXJzKEludGVycnVwdFthLmNoYXJOYW1lXS5zdG9wKSBkbw0KICAgICAgICAgICAgICAgICAgICAgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQ6YWRkUGFyYW0oc3BlbGwuc3BlbGxOYW1lLCBhLmNoYXJOYW1lLi4iIC0gIi4uc3BlbGwubmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICANCiAgICAgICAgZW5kDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2M6YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMTldLCAiZ2FwQ2xvc2UiKQ0KICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oInciLCBsb2NfY2hvb3NlblsyMjBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oImRlbGF5IiwgbG9jX2Nob29zZW5bMjIxXSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAwLCAwLCAxMDAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlOmFkZFBhcmFtKCJpbmZvMyIsIGxvY19jaG9vc2VuWzk4XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZm9yIF8sIGVuZW15IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBpZiBpc0FHYXBjbG9zZXJVbml0W2VuZW15LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oZW5lbXkuY2hhck5hbWUsIGVuZW15LmNoYXJOYW1lIC4uICIgLSAiIC4uIGVuZW15OkdldFNwZWxsRGF0YShpc0FHYXBjbG9zZXJVbml0W2VuZW15LmNoYXJOYW1lXS5zcGVsbCkubmFtZSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIyMl0sICJhdXRvdyIpDQogICAgc2VsZi5Db25maWcubWlzYy5hdXRvdzphZGRQYXJhbSgidXNlIiwgbG9jX2Nob29zZW5bMjIzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3c6YWRkUGFyYW0oImVuZW15Y291bnQiLCBsb2NfY2hvb3NlblsyMjRdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzMF0sIGxvY19jaG9vc2VuWzEzMV0gLCBsb2NfY2hvb3NlblsxMzJdLGxvY19jaG9vc2VuWzEzM10gfSkNCiAgICANCiAgICAgICAgICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgICAgICBpZiBWSVBfVVNFUiB0aGVuDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNDddLCAidmlwIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJwYWNrZXQiLGxvY19jaG9vc2VuWzQ4XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzEiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3Nlbls0OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1MF0sICJsZXZlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1MV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImxvZ2ljIiwgbG9jX2Nob29zZW5bNTJdLCBTQ1JJUFRfUEFSQU1fTElTVCwgNywge2xvY19jaG9vc2VuWzU4XSwgbG9jX2Nob29zZW5bNTldLGxvY19jaG9vc2VuWzYwXSxsb2NfY2hvb3Nlbls2MV0sbG9jX2Nob29zZW5bNjJdLCBsb2NfY2hvb3Nlbls2M10sIGxvY19jaG9vc2VuWzY0XSAgfSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTNdLCAic2tpbiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzU0XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCdzZWxlY3RlZCcgLi4gbXlIZXJvLmNoYXJOYW1lIC4uICdTa2luJywgbG9jX2Nob29zZW5bNTddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwgc2tpbk1ldGFbbXlIZXJvLmNoYXJOYW1lXSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImluZm81IiwgbG9jX2Nob29zZW5bNTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm81IiwgIlNraW4gSGFjayB0ZW1wb3JhcnkgZGlzYWJsZWQgdW50aWwgbmV4dCB1cGRhdGUuIC4iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk1XSwgImFudGlhZmsiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuYW50aWFmazphZGRQYXJhbSgiYW50aWFmayIsbG9jX2Nob29zZW5bMTk2XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpIA0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8zIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm80IiwgbG9jX2Nob29zZW5bNTZdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBlbmQNCiAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls2NV0sIm90aGVyIikNCiAgICAgICAgLS1zZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KCJTaG93IERhbWFnZSBPbiBIcCBCYXIiLCAiSFBCQVIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyLkhQQkFSOmFkZFBhcmFtKCJrZXkiLCJPTi9PRkYiLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY2XSwgImRyYXciKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJxZHJhdyIsbG9jX2Nob29zZW5bNjddLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJ3ZHJhdyIsbG9jX2Nob29zZW5bNjhdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJlZHJhdyIsbG9jX2Nob29zZW5bNjldLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJyZHJhdyIsbG9jX2Nob29zZW5bNzBdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5kcmF3OmFkZFBhcmFtKCJhYWRyYXciLGxvY19jaG9vc2VuWzcxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTk4XSwgImNvbG9yIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIlFjb2xvciIsIGxvY19jaG9vc2VuWzE5OV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIldjb2xvciIsIGxvY19jaG9vc2VuWzIwMF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkVjb2xvciIsIGxvY19jaG9vc2VuWzIwMV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIlJjb2xvciIsIGxvY19jaG9vc2VuWzIwMl0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkUyY29sb3IiLCBsb2NfY2hvb3NlblsyMDNdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LCAyNTUsIDI1NX0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJBQWNvbG9yIiwgbG9jX2Nob29zZW5bMjA0XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgidGFyZ2V0c2VsZWN0IiwgbG9jX2Nob29zZW5bMjA1XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwwLDB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIwNl0sICJ3aWR0aCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJRd2lkdGgiLCBsb2NfY2hvb3NlblsyMTBdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJXd2lkdGgiLCBsb2NfY2hvb3NlblsyMTFdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJFd2lkdGgiLCBsb2NfY2hvb3NlblsyMTJdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJSd2lkdGgiLCBsb2NfY2hvb3NlblsyMTNdLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJBQXdpZHRoIiwgbG9jX2Nob29zZW5bMjA5XSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiU1R3aWR0aCIsIGxvY19jaG9vc2VuWzIwOF0sIDQsIDYsIDEsIDEwLCAwKSANCiAgICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzNdLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLGxvY19jaG9vc2VuWzc0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldCIsbG9jX2Nob29zZW5bNzVdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiZGFtYWdlIixsb2NfY2hvb3NlblsyMTRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Y2FsIixsb2NfY2hvb3Nlbls3Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpICANCiAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzddLCJ0YXJnZXRzZWwiKQ0KICAgICAgc2VsZi50cy5uYW1lICA9ICJMaXNzYW5kcmEgIg0KICAgICAgc2VsZi50c3EubmFtZSA9ICJMaXNzYW5kcmEgUSBTa2lsbCINCiAgICAgIHNlbGYudHN3Lm5hbWUgPSAiTGlzc2FuZHJhIFcgU2tpbGwiDQogICAgICBzZWxmLnRzZS5uYW1lID0gIkxpc3NhbmRyYSBFIFNraWxsIg0KICAgICAgc2VsZi50c3IubmFtZSA9ICJMaXNzYW5kcmEgUiBTa2lsbCINCiAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRUUyhzZWxmLnRzKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNxKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHN3KQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNlKQ0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHNyKSANCiAgICAgIA0KICAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzldLCAiS2V5cyIpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzMiLCBsb2NfY2hvb3Nlbls4MF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiY29tYm9rZXkiLCBsb2NfY2hvb3Nlbls4MV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImNvbWJva2V5ciIsIGxvY19jaG9vc2VuWzE3MF0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiVSIpKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0s0IiwgbG9jX2Nob29zZW5bODJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImhhcmFzc2tleSIsIGxvY19jaG9vc2VuWzgzXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJDIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJoYXJhc3N0b2dsZWtleSIsIGxvY19jaG9vc2VuWzE2NF0sIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIHN0cmluZy5ieXRlKCJUIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzUiLCBsb2NfY2hvb3Nlbls4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgibGFuZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODVdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImp1bmdsZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODZdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgICAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLGxvY19jaG9vc2VuWzIxNV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJsYXN0aGl0a2V5IiwgIkxhc3RoaXQgS2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJYIikpDQogICAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzYiLCBsb2NfY2hvb3Nlbls4N10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgbG9jX2Nob29zZW5bODhdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0syIiwgbG9jX2Nob29zZW5bODldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgIA0KICAgICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTEwXSwgIktleXMyIikNCiAgICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMyKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJsYW5nIiwgbG9jX2Nob29zZW5bMTY1XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHtsb2NfY2hvb3NlblsxNjZdLCBsb2NfY2hvb3NlblsxNjddLGxvY19jaG9vc2VuWzE2OF19KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbnN0cnVjdCIsIGxvY19jaG9vc2VuWzIxNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgDQogICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIucGVybWEucGVybWEgdGhlbg0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZzpwZXJtYVNob3coImluZm9ib3giKSBlbmQsIDEpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiY29tYm9rZXkiKSBlbmQsIDEuMikgDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNzdG9nbGVrZXkiKSBlbmQsIDEuMikgDQogICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNza2V5IikgZW5kLCAxLjIpDQogICAgDQogIGVuZA0KICBlbmQNCiAgDQogICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b3BvdCgpDQppZiBvcy5jbG9jaygpIC0gbGFzdFBvdGlvbiA8IDE1IHRoZW4gcmV0dXJuIGVuZA0KICBmb3IgU0xPVCA9IElURU1fMSwgSVRFTV82IGRvDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShTTE9UKS5uYW1lID09ICJSZWdlbmVyYXRpb25Qb3Rpb24iIGFuZCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuZW5hYmxlYXV0b3BvdGhwIHRoZW4NCiAgICAgIGlmIG15SGVybzpDYW5Vc2VTcGVsbChTTE9UKSA9PSBSRUFEWSBhbmQgKG15SGVyby5oZWFsdGggLyBteUhlcm8ubWF4SGVhbHRoIDwgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90LmF1dG9wb3RocCAvMTAwICkgIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKFNMT1QpIA0KICAgICAgICBsYXN0UG90aW9uID0gb3MuY2xvY2soKSAgICAgICANCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCmVuZA0KICAgZnVuY3Rpb24gTGlzc2FuZHJhOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiQmlsZ2V3YXRlckN1dGxhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWhnIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJIZXh0ZWNoR3VuYmxhZGUiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogICAgICAgICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6d3JpdGVjZmcocGFyYW0pDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKFNDUklQVF9QQVRILi4iXFwiLi4iY29uZmlnLmNmZyIsICJ3IikNCiAgICAgICAgaWYgbm90IGZpbGUgdGhlbg0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIkVycm9yIGluIFdyaXRlIENGRyIpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBwYXJhbSB+PSAiZnRjIiB0aGVuDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZShhdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIldyaXR0ZW46ICIuLmF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKCJlbmciKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIlc6IEVuZ2xpc2giKQ0KICAgICAgICBlbmQNCiAgICAgICAgZmlsZTpjbG9zZSgpDQplbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG9sZXZlbCgpDQppZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDEgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UxID0gICB7IDEsMiwzLDEsMSw0LDEsMiwxLDIsNCwyLDIsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UxKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMiBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTIgPSAgIHsgMSwyLDMsMSwxLDQsMSwzLDEsMyw0LDMsMywyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTIpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAzIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMyA9ICB7IDIsMywxLDIsMiw0LDIsMSwyLDEsNCwxLDEsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2UzKQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNCBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTQgPSAgeyAyLDMsMSwyLDIsNCwyLDMsMiwzLDQsMywzLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNCkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDUgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U1ID0gIHsgMywxLDIsMywzLDQsMywyLDMsMiw0LDIsMiwxLDEsNCwxLDF9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTUpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA2IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDMsMSwyLDMsMyw0LDMsMSwzLDEsNCwxLDEsMiwyLDQsMiwyfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogICAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA3IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNiA9ICB7IDEsMywyLDEsMSw0LDEsMiwxLDIsNCwyLDIsMywzLDQsMywzfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U2KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b3pob255YSgpDQogICAgaWYgc2VsZi5Db25maWcuaXRlbS5lbmFibGVhdXRvemhvbnlhIHRoZW4NCiAgICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgICAgaWYgbXlIZXJvLmhlYWx0aCA8PSAobXlIZXJvLm1heEhlYWx0aCAqIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3pob255YSAvIDEwMCkgYW5kICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiWmhvbnlhc0hvdXJnbGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogICAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6YXV0b1IoKQ0KICAgIGlmICggc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuZW5hYmxlYXV0b1IgYW5kIChzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMiBvciBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5SbG9naWMgPT0gMSkpIHRoZW4NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5za2lsbGxvZ2ljLlJsb2dpYy5hdXRvUiAvIDEwMCkgdGhlbiBzZWxmOkNhc3RSUyhteUhlcm8pDQogICAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTplbmdhZ2V3aXRocigpDQogICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgaWYgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgdGhlbg0KICAgc2VsZjp3YWxrKCkNCiAgIGVuZA0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNxLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleXIgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIHNlbGYudHNlOnVwZGF0ZSgpDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICl0aGVuDQogICAgICAgICAgICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgaWYgKG15SGVybzpDYW5Vc2VTcGVsbChfRSkgPT0gUkVBRFkgKSB0aGVuDQogICAgIENhc3RTcGVsbChfRSwgdGFyZ2V0LngsIHRhcmdldC56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAxLjUpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBzZWxmLnRzcjp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXlyICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIExpc3NhbmRyYTpBbnRpYWZrKCkNCiAgaWYgb3MuY2xvY2soKSA8IENsb2NrIG9yIG5vdCBzZWxmLkNvbmZpZy52aXAuYW50aWFmay5hbnRpYWZrIHRoZW4gcmV0dXJuIGVuZA0KICBDbG9jayA9IG9zLmNsb2NrKCkgKyBtYXRoLnJhbmRvbSg2MCwxMjApDQogIG15SGVybzpNb3ZlVG8obXlIZXJvLngsIG15SGVyby56KQ0KZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpEcmF3KCkNCiAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzI1LCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguUXdpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlFjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDQ1MCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLld3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTA1MCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA1NTAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDU1MCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgICAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXQgYW5kIHNlbGYuc2VsZWN0ZWRUYXIgfj0gbmlsIHRoZW4NCiAgICAgICAgIERyYXdDaXJjbGUzRChzZWxmLnNlbGVjdGVkVGFyLngsIHNlbGYuc2VsZWN0ZWRUYXIueSwgc2VsZi5zZWxlY3RlZFRhci56LCA4MCwgc2VsZi5Db25maWcub3RoZXIud2lkdGguU1R3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IudGFyZ2V0c2VsZWN0KSkpDQplbmQNCiBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwMCkgdGhlbg0KICAgICAgaWYgdGFyZ2V0LnZpc2libGUgYW5kIG5vdCB0YXJnZXQuZGVhZCBhbmQgc2VsZi5Db25maWcub3RoZXIuZGFtYWdlIHRoZW4NCiAgICAgICAgY3VyckxpbmUgPSAxDQogICAgICAgIERyYXdMaW5lSFBCYXIyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwiIiwgIHRhcmdldCwgY3VyckxpbmUpDQogICAgICAgIERyYXdMaW5lSFBCYXIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCAiRGFtYWdlICIgLi4gbWF0aC5yb3VuZChzZWxmOkdldE15RG1nKHRhcmdldCkpLHRhcmdldCxjdXJyTGluZSkNCiAgICAgICAgY3VyckxpbmUgPSBjdXJyTGluZSArIDENCiAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0Y2FsIGFuZCBub3QgbXlIZXJvLmRlYWQgdGhlbg0KICAgICAgaWYgdGFyZ2V0IGFuZCB0YXJnZXQgfj0gbmlsIHRoZW4NCiAgICAgICAgbG9jYWwgZHJhd3Bvcz1Xb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHRhcmdldC54LCB0YXJnZXQueSwgdGFyZ2V0LnopKQ0KICAgICAgICBsb2NhbCBjb21ib1RleHQsY29sb3IgPSBzZWxmOkdldERyYXdzKHRhcmdldCkNCiAgICAgICAgaWYgY29tYm9UZXh0IHRoZW4NCiAgICAgICAgICBEcmF3VGV4dChjb21ib1RleHQsMTUsZHJhd3Bvcy54LTIwLGRyYXdwb3MueS0yMCxjb2xvcikNCiAgICAgICAgZW5kIA0KICAgICAgZW5kIA0KICAgICAgZW5kDQogICAgIGlmIFBvcFVwMSB0aGVuDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNTApLCAoV0lORE9XX0gqLjE1KSwgKFdJTkRPV19IKi45KQ0KICAgIERyYXdMaW5lKHcsIGgxLzEuMDUsIHcsIGgyLzEuOTcsIHcvMS43NSwgQVJHQigyNTUsIDAsIDAsIDApKQ0KICAgIERyYXdMaW5lKHcsIGgxLCB3LCBoMi8yLCB3LzEuOCwgQVJHQigxNTAsIDIzNSwgMTgzLCA2MykpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJXZWxjb21lIHRvIEtleWJvYXJkTWFzdGVyIFNlcmllcyAzLjAiKSwgV0lORE9XX0gqLjAyOCwgKFdJTkRPV19XLzIpLCAoV0lORE9XX0gqLjE4KSwgQVJHQigyNTUsIDk2LCA0OCwgMCksImNlbnRlciIsImNlbnRlciIpDQogICBEcmF3VGV4dEEodG9zdHJpbmcoIkxpdHRsZSBpbmZvcm1hdGF0aW9uIGFib3V0IEtleWJvYXJkTWFzdGVyIFNlcmllcyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMTk0KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJdHMgYSBidW5kbGUgdGhhdCBwcm9kdWNlZCBieSBlbnN1bHV5biIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiQ3VycmVudGx5IGl0IHN1cHBvcnRlZCBvbmx5IG1pZCBjaGFtcHMgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMjUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGZvY3VzIFF1YWxpdHkgcmF0aGVyIHRoYW4gUXVhbnRpdHkiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI0MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgbmVlZCB5b3VyIGZlZWRiYWNrcyB0byBpbXByb3ZlIGl0IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yNTUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJJIGNhcmUgZXZlcnkgc2luZ2xlIGZlZWRiYWNrIGFuZCB0cnkgdG8gYWRkIGV2ZXJ5dGhpbmciKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI3MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkhvcGUgeW91IGFyZSBlbmpveSBteSBzY3JpcHQuLiIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjg1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiWW91IGNhbiBjaGFuZ2UgZXZlcnkgc2V0dGluZ3MgdG8geW91ciBsaWtlIDopIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMDApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJEaWQgeW91IGxpa2UgbXkgc2NyaXB0ID4gVXB2b3RlIG1lIG9uIHNjcmlwdHN0YXR1cyBhbmQgb24gZm9ydW0iKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMxNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRvbid0IGZvcmdldCB0aGVzZSBhcmUgVklQOyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzMwKSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEFudGktQWZrIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNDUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgIEF1dG8gTGV2ZWxlciAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM2MCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgU2tpbiBDaGFuZ2VyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzc1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIGxvY2FsIHcsIGgxLCBoMiA9IChXSU5ET1dfVyowLjQ5KSwgKFdJTkRPV19IKi43MCksIChXSU5ET1dfSCouNzUpDQogICAgRHJhd0xpbmUodywgaDEvMS43NzUsIHcsIGgyLzEuNjgsIHcqLjExLCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd1JlY3RhbmdsZUJ1dHRvbihXSU5ET1dfVyowLjQ2NywgV0lORE9XX0gvMi4zNzUsIFdJTkRPV19XKi4wNDcsIFdJTkRPV19IKi4wNDEsIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIk9LIiksIFdJTkRPV19IKi4wMiwgKFdJTkRPV19XLzIpKi45OCwgKFdJTkRPV19ILzIuMzc1KSwgQVJHQigyNTUsIDAsIDAsIDAgKSwiY2VudGVyIiwiY2VudGVyIikNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlZGl0cyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzk1KSwgQVJHQigyNTUsIDk2LCA0OCwgMCkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGdXJyeS0gRm9yIHRoaXMgYXdlc29tZSBwb3B1cCIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouNDEwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKSANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Y29tYm8oKQ0KICAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYudHNxLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmNvbWJvID09IDEgYW5kICAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgICAgQ2FzdFNwZWxsKF9FLCB0YXJnZXQueCwgdGFyZ2V0LnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDEuNSkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmNvbWJvID09IDIgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgICAgQ2FzdFNwZWxsKF9FLCB0YXJnZXQsIHRhcmdldC56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAyKQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3cudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDMgb3Igc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDEgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgKXRoZW4NCiAgICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgIGxvY2FsIGRtZ1IgPWdldERtZygiUiIsdW5pdCxteUhlcm8pKyAoKG15SGVyby5hcCkqMC43MCkgDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NTUwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgIGVsc2VpZiAoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuUmxvZ2ljID09IDIgYW5kICBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuc2tpbGxsb2dpYy5SbG9naWMuYXV0b1IgLyAxMDApKSB0aGVuIA0KICAgICAgIHNlbGY6Q2FzdFJTKG15SGVybykNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICANCiAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICl0aGVuDQogICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTphdXRvdygpDQogICBpZiBzZWxmLkNvbmZpZy5taXNjLmF1dG93LnVzZSB0aGVuDQogICAgICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3cuZW5lbXljb3VudCA9PSAxIHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg0MzUpID49IDIgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVywgbXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5taXNjLmF1dG93LmVuZW15Y291bnQgPT0gMiB0aGVuDQogICAgICAgICAgICBpZiBDb3VudEVuZW15SGVyb0luUmFuZ2UoNDM1KSA+PSAzIHRoZW4NCiAgICAgICAgICAgICAgICBDYXN0U3BlbGwoX1csIG15SGVyby54LCBteUhlcm8ueikNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbHNlaWYgc2VsZi5Db25maWcubWlzYy5hdXRvdy5lbmVteWNvdW50ID09IDMgdGhlbg0KICAgICAgICAgICAgaWYgQ291bnRFbmVteUhlcm9JblJhbmdlKDQzNSkgPj0gNCB0aGVuDQogICAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZWxzZWlmIHNlbGYuQ29uZmlnLm1pc2MuYXV0b3cuZW5lbXljb3VudCA9PSA0IHRoZW4NCiAgICAgICAgICAgIGlmIENvdW50RW5lbXlIZXJvSW5SYW5nZSg0MzUpID49IDUgdGhlbg0KICAgICAgICAgICAgICAgIENhc3RTcGVsbChfVywgbXlIZXJvLngsIG15SGVyby56KQ0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KICBlbmQNCiAgDQogICBmdW5jdGlvbiBMaXNzYW5kcmE6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KaWYgSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgIHNwZWxsID0gSW50ZXJydXB0W3VuaXQuY2hhck5hbWVdLnN0b3Bbc3BlbGwubmFtZV0NCiAgICAgICAgaWYgc3BlbGwgfj0gbmlsIHRoZW4NCiAgICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0W3NwZWxsLm5hbWVdIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBWYWxpZFRhcmdldCh1bml0KSBhbmQgR2V0RGlzdGFuY2UodW5pdCkgPCBzZWxmLlJTcGVsbC5SYW5nZSAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0LnIgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgZW5kDQogICAgaWYgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0gYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgMTAwMCBhbmQgc3BlbGwgfj0gbmlsIHRoZW4gICAgIA0KICAgIGlmIHNwZWxsLm5hbWUgPT0gKHR5cGUoaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgPT0gJ251bWJlcicgYW5kIHVuaXQ6R2V0U3BlbGxEYXRhKGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCkgYW5kIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2VbdW5pdC5jaGFyTmFtZV0gdGhlbg0KICAgICAgaWYgc3BlbGwudGFyZ2V0IH49IG5pbCBhbmQgc3BlbGwudGFyZ2V0Lm5hbWUgPT0gbXlIZXJvLm5hbWUgb3IgaXNBR2FwY2xvc2VyVW5pdFt1bml0LmNoYXJOYW1lXS5zcGVsbCA9PSAnYmxpbmRtb25rcXR3bycgdGhlbg0KICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfVywgdW5pdC54LCB1bml0LnopZW5kICxzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlLmRlbGF5LzEwMDApIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpHZXRRRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg0MCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9RKS5sZXZlbCAqIDMwKSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSouNjUpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQpmdW5jdGlvbiBMaXNzYW5kcmE6R2V0V0RtZyh0YXJnZXQpDQogIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kIA0KICAgaWYgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMzAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgKiA0MCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC40KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQplbmQNCmZ1bmN0aW9uIExpc3NhbmRyYTpHZXRFRG1nKHRhcmdldCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQgDQogICBpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICgyNSArIChteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCAqIDQ1KSArIChteUhlcm8uYXAgKyAobXlIZXJvLmFwICogbXlIZXJvLmFwUGVyY2VudCkgKSogLjYpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCmVuZA0KZnVuY3Rpb24gTGlzc2FuZHJhOkdldFJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogICBpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9ICg1MCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDEwMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC43KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gTGlzc2FuZHJhOkdldE15RG1nKHRhcmdldCkNCiAgIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0RURtZyh0YXJnZXQpIA0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRXRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogICAgICBlbHNlaWYgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldEVEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogICAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0RURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgICAgIGVsc2VpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6R2V0RHJhd3ModGFyZ2V0KQ0KbG9jYWwgcWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQpsb2NhbCB3ZGFtYWdlID0gc2VsZjpHZXRXRG1nKHRhcmdldCkNCmxvY2FsIGVkYW1hZ2UgPSBzZWxmOkdldEVEbWcodGFyZ2V0KQ0KbG9jYWwgcmRhbWFnZSA9IHNlbGY6R2V0UkRtZyh0YXJnZXQpDQpsb2NhbCBJZG1nPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgDQogIGlmIHFkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiB3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgZWRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIGVkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgZWxzZWlmIHJkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcmRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgZWRhbWFnZSt3ZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBXJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIGVkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0UgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHJkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlK3dkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgVyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZT50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBFJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUicsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZStlZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStyZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK2VkYW1hZ2Urd2RhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgVyArIEUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStyZGFtYWdlK3dkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgICAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBFICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlK2VkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdLaWxsIHdpdGggZnVsbCBjb21ibycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2Urd2RhbWFnZStlZGFtYWdlK3JkYW1hZ2UrSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0Z1bGwgQ29tYm8gKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2UgDQogICAgcmV0dXJuICJDYW50IEtpbGwgeWV0IiwgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZW5kIA0KZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0USh1bml0KQ0KICAgIHNlbGYuUVNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogICAgICAgICAgICAgICAgICBwcmVkID0gbmlsDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0UTIodW5pdCkNCiAgICBpZiBWYWxpZFRhcmdldCh1bml0KSBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICBpZiBHZXREaXN0YW5jZSh1bml0KSA8IHNlbGYuUVNwZWxsLlJhbmdlIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodW5pdCkNCiAgZWxzZWlmIEdldERpc3RhbmNlKHVuaXQpIDwgc3BlbGxzLnEucmFuZ2VNYXggdGhlbg0KICAgICAgbG9jYWwgY29sbGlzaW9uID0gZmFsc2UNCiAgICAgIGxvY2FsIHgsIHogPSAwLCAwDQogICAgDQogICAgICAgIHNlbGYuZW5lbXlNaW5pb25zOnVwZGF0ZSgpDQogICAgICBmb3IgaSwgbWluaW9uIGluIHBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIG1pbmlvbiB+PSBuaWwgYW5kIG5vdCBtaW5pb24uZGVhZCBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuDQogICAgICAgICAgeCwgeiA9IHBvaW50T25MaW5lKG15SGVybywgdW5pdCwgbWluaW9uLCAwKQ0KICAgICAgICAgIA0KICAgICAgICAgIGlmIG1hdGguc3FydCgobWluaW9uLnggLSB4KSBeIDIgKyAobWluaW9uLnogLSB6KSBeIDIpIDwgc2VsZi5RU3BlbGwuV2lkdGggLyAyIHRoZW4NCiAgICAgICAgICAgIGNvbGxpc2lvbiA9IHRydWUNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIA0KICAgICAgaWYgY29sbGlzaW9uID09IHRydWUgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgc3BlbGxzLnEucmFuZ2VNYXggdGhlbg0KICAgICAgICBQb3NpdGlvbiA9IHByZWQ6R2V0UHJlZGljdGVkUG9zKHVuaXQsIHNlbGYuUVNwZWxsLkRlbGF5ICsgKEdldERpc3RhbmNlKHVuaXQpIC8gc2VsZi5RU3BlbGwuU3BlZWQpKQ0KICAgICAgDQogICAgICAgIGxvY2FsIGNhc3RYID0gbXlIZXJvLnggKyBzZWxmLlFTcGVsbC5SYW5nZSAqICgoUG9zaXRpb24ueCAtIG15SGVyby54KSAvIEdldERpc3RhbmNlKFBvc2l0aW9uKSkNCiAgICAgICAgbG9jYWwgY2FzdFogPSBteUhlcm8ueiArIHNlbGYuUVNwZWxsLlJhbmdlKiAoKFBvc2l0aW9uLnogLSBteUhlcm8ueikgLyBHZXREaXN0YW5jZShQb3NpdGlvbikpDQogICAgICAgIENhc3RTcGVsbChfUSwgY2FzdFgsIGNhc3RaKQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RXKHVuaXQpDQogICAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KICBlbmQNCiAgDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpDYXN0RSh1bml0KQ0KICAgIHNlbGYuRVNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdFIodW5pdCkNCiAgICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6Q2FzdFJTKHVuaXQpDQogICBDYXN0U3BlbGwoX1IgLCBteUhlcm8pDQogIGVuZA0KICANCiAgZnVuY3Rpb24gTGlzc2FuZHJhOkNhc3RJKHVuaXQpDQogICAgc2VsZi5JZ25pdGU6Q2FzdCh1bml0KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmtpbGxzdGVhbCgpDQogIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBoZWFsdGggPSB1bml0LmhlYWx0aA0KICAgICAgbG9jYWwgZG1nRSA9IHNlbGY6R2V0RURtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzZS50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nRSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUUgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RFKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1EgPSBzZWxmOkdldFFEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RRKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1cgPSBzZWxmOkdldFdEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VXIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RXKHVuaXQpICANCiAgICAgICAgZW5kDQogICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICAgICAgZW5kDQogICAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgICBpZihzZWxmLnRzci50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVIgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NTUwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICAgIGVuZA0KICAgICBlbmQNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6ZXNjYXBlKCkNCiAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgaWYgc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgYW5kIHNlbGYuQ29uZmlnLmVzY2FwZS51c2VFICB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZICkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsbW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAxLjUpDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5IHRoZW4gDQogIHNlbGY6d2FsaygpDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5LZXlzLmVzY2FwZWtleSBhbmQgc2VsZi5Db25maWcuZXNjYXBlLnVzZVcgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIHRoZW4NCiAgQ2FzdFNwZWxsKF9XLHRzdy50YXJnZXQpDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOndhbGsoKQ0KICAgIG15SGVybzpNb3ZlVG8obW91c2VQb3MueCxtb3VzZVBvcy56KQ0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmhhcmFzcygpDQogICAgc2VsZi50czp1cGRhdGUoKQ0KICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgIHNlbGYudHN3OnVwZGF0ZSgpDQogICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgdGhlbg0KICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVEgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICAgICAgZW5kICAgDQogICAgICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgdGhlbg0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZVcgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgICAgICAgZW5kICANCiAgICAgICAgZW5kIA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgIHRoZW4NCiAgICAgICAgaWYoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5FbG9naWMuaGFyYXNzID09IDEgIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFICkgdGhlbiAgICAgICAgDQogICAgICAgICBsb2NhbCBUaWNrZXIgPSBHZXRUaWNrQ291bnQoKQ0KICBpZiAoZ2xvYmFsX3RpY2tzICsgMjAwMCkgPCBUaWNrZXIgdGhlbg0KICBpZiAobXlIZXJvOkNhblVzZVNwZWxsKF9FKSA9PSBSRUFEWSBhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwpIHRoZW4NCiAgICAgQ2FzdFNwZWxsKF9FLCB0YXJnZXQueCwgdGFyZ2V0LnopDQogICAgIGdsb2JhbF90aWNrcyA9IFRpY2tlcg0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgQ2FzdFNwZWxsKF9FKSBlbmQsIDIpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5IG9yIHNlbGYuQ29uZmlnLktleXMuaGFyYXNzdG9nbGVrZXkgIHRoZW4NCiAgICAgICAgICAgICAgIGlmKHNlbGYuQ29uZmlnLnNraWxsbG9naWMuRWxvZ2ljLmhhcmFzcyA9PSAyIGFuZCAgIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuaGFyYXNzLk1hbmEgLzEwMCApICBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgKSB0aGVuICAgICAgICANCiAgICAgICAgIGxvY2FsIFRpY2tlciA9IEdldFRpY2tDb3VudCgpDQogIGlmIChnbG9iYWxfdGlja3MgKyAyMDAwKSA8IFRpY2tlciB0aGVuDQogIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZIGFuZCBzZWxmLnRzZS50YXJnZXR+PW5pbCkgdGhlbg0KICAgICBDYXN0U3BlbGwoX0UsIHRhcmdldC54LCB0YXJnZXQueikNCiAgICAgZ2xvYmFsX3RpY2tzID0gVGlja2VyDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBDYXN0U3BlbGwoX0UpIGVuZCwgMS41KQ0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZ1bmN0aW9uIExpc3NhbmRyYTpMYXN0SGl0KCkNCiAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDEgdGhlbg0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICAgICAgICBsb2NhbCBRZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApIGFuZCBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpICBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLlFTcGVsbC5SYW5nZSAqIHNlbGYuUVNwZWxsLlJhbmdlIGFuZCBRZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgIGVuZA0KICAgICAgICBsb2NhbCBXZGFtYWdlID0gc2VsZjpHZXRXRG1nKHRhcmdldCkNCiAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVcgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LldNYW5hIC8xMDAgKWFuZCAgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLldTcGVsbC5SYW5nZSAqIHNlbGYuV1NwZWxsLlJhbmdlIGFuZCBXZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgZWxzZWlmIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5sYXN0aGl0bG9naWMgPT0gMiB0aGVuDQogICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuV01hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5XU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBMaXNzYW5kcmE6TGFuZUNsZWFyKCkNCiAgIGxvY2FsIGNsZWFydGFyZ2V0ID0gc2VsZi5jbGVhcnRhcmdldA0KICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICAgc2VsZi5vdGhlck1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIHNlbGYuanVuZ2xlTWluaW9uczp1cGRhdGUoKQ0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBpcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uLCA2MDApIGFuZCAoY2xlYXJ0YXJnZXQgPT0gbmlsIG9yIG5vdCBWYWxpZFRhcmdldChjbGVhcnRhcmdldCkpIHRoZW4NCiAgICAgICAgICBjbGVhcnRhcmdldCA9IG1pbmlvbg0KICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgZm9yIGksIG1pbmlvbiBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICBpZiBWYWxpZFRhcmdldChtaW5pb24pIGFuZCBtaW5pb24gfj0gbmlsIHRoZW4NCiAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIucWNvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIA0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5RTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgIGxvY2FsIEJlc3RQb3MsIEJlc3RIaXQgPSAgR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5RU3BlbGwuUmFuZ2UsIHNlbGYuUVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX1EsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgICAgbG9jYWwgTnVtYmVyT2ZIaXRzID0gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIud2NvdW50DQogICAgICAgICAgIGlmIE51bWJlck9mSGl0cyA+PSAxIGFuZCAjc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgIGlmIHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICBhbmQgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIudXNlVyBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5XTWFuYSAvMTAwICkgYW5kIEdldERpc3RhbmNlKG1pbmlvbikgPD0gc2VsZi5XU3BlbGwuUmFuZ2UgdGhlbiANCiAgICAgICAgICAgICBzZWxmOkNhc3RXKGNsZWFydGFyZ2V0KQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLmVjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICANCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuRU1hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuRVNwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICBsb2NhbCBCZXN0UG9zLCBCZXN0SGl0ID0gR2V0QmVzdExpbmVGYXJtUG9zaXRpb24oc2VsZi5FU3BlbGwuUmFuZ2UsIHNlbGYuRVNwZWxsLldpZHRoLCBzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzICkNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgbG9jYWwgVGlja2VyID0gR2V0VGlja0NvdW50KCkNCiAgaWYgKGdsb2JhbF90aWNrcyArIDIwMDApIDwgVGlja2VyIHRoZW4NCiAgIGlmIChteUhlcm86Q2FuVXNlU3BlbGwoX0UpID09IFJFQURZICkgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX0UsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICBnbG9iYWxfdGlja3MgPSBUaWNrZXINCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIENhc3RTcGVsbChfRSkgZW5kLCAyKQ0KICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gTGlzc2FuZHJhOmF1dG9xKCkNCiAgDQogICAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5oYXJhc3MuTWFuYSAvMTAwICkgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MuYXV0b3EgKSB0aGVuICAgICAgICANCiAgICAgICAgICBzZWxmOkNhc3RRMih0YXJnZXQpDQogICAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpKdW5nbGVDbGVhcigpDQogICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVEgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLlFNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6SnVuZ2xlQ2xlYXIoKQ0KICAgICAgICBlbmQNCiAgICAgICAgaWYoc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLnVzZVcgYW5kIHNlbGYuQ29uZmlnLktleXMuanVuZ2xlY2xlYXJrZXkgKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyLldNYW5hIC8xMDAgKSB0aGVuDQogICAgICAgICBzZWxmLldTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlRSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuRU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLkVTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICBmdW5jdGlvbiBMaXNzYW5kcmE6V25kTXNnKE1zZywgS2V5KQ0KICAgICAgICBpZiBzZWxmLkNvbmZpZy50YXJnZXRzZWwudHMgdGhlbiAgICAgIA0KICAgICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgICAgIGxvY2FsIG1pbkQgPSAxMA0KICAgICAgICAgICAgICBsb2NhbCBzdGFyZ2V0ID0gbmlsDQogICAgICAgICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KGVuZW15KSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgaWYgR2V0RGlzdGFuY2UoZW5lbXksIG1vdXNlUG9zKSA8PSBtaW5EIG9yIHN0YXJnZXQgPT0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgbWluRCA9IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykNCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcmdldCA9IGVuZW15DQogICAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kICAgICANCiAgICAgICAgICAgICAgaWYgc3RhcmdldCBhbmQgbWluRCA8IDUwMCB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIGFuZCBzdGFyZ2V0LmNoYXJOYW1lID09IHNlbGYuc2VsZWN0ZWRUYXIuY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2VsZWN0ZWRUYXIgPSBuaWwNCiAgICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+VGFyZ2V0IDxiPmlzIG5vIGxvZ2VyIHNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gc3RhcmdldCAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5OZXcgdGFyZ2V0IDxiPnNlbGVjdGVkLjwvYj46ICIuLnN0YXJnZXQuY2hhck5hbWUuLiI8L2ZvbnQ+IikNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgIGlmIFBvcFVwMSB0aGVuDQogICAgICBQb3BVcDEgPSBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgICAgIGVuZA0KICAgICAgICBmdW5jdGlvbiBMaXNzYW5kcmE6VW5sb2FkKCkNCiAgICAgICAgc2VsZjp3cml0ZWNmZygpDQogICAgICBlbmQNCiAgIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IFZpa3RvciBTdGFydHMgICAgICAgICAgICAgICAgICAgICAgICAgfHwtLQ0KLS0tXFw9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PS8vLS0tDQogIGNsYXNzICJWaWt0b3IiDQogbG9jYWwgZWJ1ZmYgPSBmYWxzZQ0KICByZXF1aXJlICdIUHJlZGljdGlvbicNCiAgZnVuY3Rpb24gVmlrdG9yOl9faW5pdCgpDQogICBzZWxmLnRzPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA1MjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQogICAgc2VsZi50c3E9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDYwMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCiAgICBzZWxmLnRzdz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgNzAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNlPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMjAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKQ0KICAgIHNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA3MDAsIERBTUFHRV9NQUdJQywgZmFsc2UsIHRydWUpIA0KICAgIHNlbGYudHNnPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCAxMzAwLCBEQU1BR0VfTUFHSUMsIGZhbHNlLCB0cnVlKSANCiAgICAgc2VsZi5RU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfUSwgRGFtYWdlTmFtZSA9ICJRIiwgUmFuZ2UgPSBtYXRoLmh1Z2UsIFdpZHRoID0gMSwgRGVsYXkgPSAwLCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgICBzZWxmLldTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9XLCBEYW1hZ2VOYW1lID0gIlciLCBSYW5nZSA9IG1hdGguaHVnZSwgV2lkdGggPSAxMjUsIERlbGF5ID0gMC41LCBTcGVlZCA9IDc1MCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IHRydWUsIFR5cGUgPSBTUEVMTF9UWVBFLkNJUkNVTEFSfSkNCiAgICAgc2VsZi5FU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfRSwgRGFtYWdlTmFtZSA9ICJFIiwgUmFuZ2UgPSAxMjAwLCBXaWR0aCA9IDE4MCwgRGVsYXkgPSAwLCBTcGVlZCA9IG1hdGguaHVnZSwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgICBzZWxmLlJTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9NzAwLCBXaWR0aCA9IDAsIERlbGF5ID0gMC4yNSwgU3BlZWQgPSAxMDAwLCBDb2xsaXNpb24gPSBmYWxzZSwgQW9lID0gdHJ1ZSwgVHlwZSA9IFNQRUxMX1RZUEUuQ0lSQ1VMQVJ9KQ0KICAgICBzZWxmLklnbml0ZSA9IF9TcGVsbCh7U2xvdCA9IEZpbmRTdW1tb25lclNsb3QoInN1bW1vbmVyZG90IiksIERhbWFnZU5hbWUgPSAiSUdOSVRFIiwgUmFuZ2UgPSA2MDAsIFR5cGUgPSBTUEVMTF9UWVBFLlRBUkdFVFRFRH0pDQogICAgIHNlbGYuSFByZWQgPSBIUHJlZGljdGlvbigpDQogICAgIHNlbGYuRSA9IHtSYW5nZTEgPSA1NTAsIFJhbmdlMiA9IDcwMCwgd2lkdGggPSAxODAsIHJlYWR5fQ0KICAgICBzZWxmLkVSYW5nZSA9IHNlbGYuRS5SYW5nZTErc2VsZi5FLlJhbmdlMg0KICAtLXw+IE1pbmlvbiBNYW5hZ2Vycw0KICAgICAgc2VsZi5lbmVteU1pbmlvbnMgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0VORU1ZLCAgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgICAgc2VsZi5hbGx5TWluaW9ucyAgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0FMTFksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnMgID0gbWluaW9uTWFuYWdlcihNSU5JT05fSlVOR0xFLCAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICBzZWxmLm90aGVyTWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fT1RIRVIsICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgICAgICAgICAgIHNlbGY6TG9hZE1lbnUoKQ0KICAgICAgICAgICAgICBzZWxmOmZpbmRvcmJ3YWxrZXIoKQ0KICAgICAgICAgICAgICAgIExhc3RfTGV2ZWxTcGVsbCA9IDANCiAgICAgIA0KICAgICAgICBBZGRUaWNrQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlRpY2soKSBlbmQpDQogICAgICAgICAgICAgICAgQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlVubG9hZCgpIGVuZCApDQogICAgQWRkRHJhd0NhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpEcmF3KCkgZW5kKQ0KICAgIEFkZE1zZ0NhbGxiYWNrKGZ1bmN0aW9uKG1zZyxLZXkpIHNlbGY6V25kTXNnKG1zZyxLZXkpIGVuZCkNCiAgICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogICAgQWRkUHJvY2Vzc1NwZWxsQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgc3BlbGwpIHNlbGY6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKSBlbmQpDQogICAgQWRkQXBwbHlCdWZmQ2FsbGJhY2soZnVuY3Rpb24oc291cmNlLCB1bml0LCBidWZmKSBzZWxmOkFwcGx5QnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCiAgIC0tQWRkVXBkYXRlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpVcGRhdGVCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikgZW5kKQ0KICAgIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgICBlbmQNCiAgLS0gaGFuZGxlcyBzY3JpcHQgbG9naWMsIGEgcHVyZSBoaWdoIHNwZWVkIGxvb3ANCiAgZnVuY3Rpb24gVmlrdG9yOlRpY2soKQ0KICAgICAgIHNlbGY6YXV0b3pob255YSgpDQogICAgICAgc2VsZjpIYXNlYnVmZigpDQogICAgICAgaWYgVklQX1VTRVIgdGhlbiAgIHNlbGY6QW50aWFmaygpICBlbmQNCiAgICAgICBzZWxmOmF1dG9wb3QoKQ0KICAgICAgIHNlbGY6aXRlbXMoKQ0KICAgICAgIHNlbGY6Y2hlY2t0cygpDQogICAgICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjphdXRvbGV2ZWwoKSBlbmQNCiAgICAgICAgICAgIGlmIFZJUF9VU0VSIHRoZW4gc2VsZjpza2luaGFjaygpIGVuZA0KICAgaWYoc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgKXRoZW4NCiAgICAgIHNlbGY6Y29tYm8oKQ0KICAgIGVuZA0KICAgICBpZihzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5Lmxhc3RoaXRrZXkgb3Igc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LmF1dG9sYXN0aGl0ICl0aGVuDQogICAgICBzZWxmOkxhc3RIaXQoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkubGFuZWNsZWFya2V5KXRoZW4NCiAgICAgIHNlbGY6TGFuZUNsZWFyKCkNCiAgICBlbmQNCiAgICAgIGlmKHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXkuanVuZ2xlY2xlYXJrZXkpdGhlbg0KICAgICAgc2VsZjpKdW5nbGVDbGVhcigpDQogICAgZW5kDQogICAgaWYoc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICkgdGhlbg0KICAgICAgc2VsZjpraWxsc3RlYWwoKQ0KICAgIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLmhhcmFzcy5oYXJhc3NrZXkgb3Igc2VsZi5Db25maWcuaGFyYXNzLmhhcmFzc3RvZ2xlICkgdGhlbg0KICAgICAgc2VsZjpoYXJhc3MoKQ0KICAgIGVuZA0KICAgICBpZiBzZWxmLkNvbmZpZy5pbnN0cnVjdCB0aGVuDQogICAgc2VsZi5Db25maWcuaW5zdHJ1Y3QgPSBmYWxzZQ0KICAgIFBvcFVwMSA9IHRydWUNCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgICAgIGZ1bmN0aW9uIFZpa3Rvcjp3cml0ZWNmZyhwYXJhbSkNCiAgICAgICAgbG9jYWwgZmlsZSA9IGlvLm9wZW4oU0NSSVBUX1BBVEguLiJcXCIuLiJjb25maWcuY2ZnIiwgInciKQ0KICAgICAgICBpZiBub3QgZmlsZSB0aGVuDQogICAgICAgICAgICAgICAtLSBwcmludCgiRXJyb3IgaW4gV3JpdGUgQ0ZHIikNCiAgICAgICAgZW5kDQogICAgICAgIGlmIHBhcmFtIH49ICJmdGMiIHRoZW4NCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKGF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgICAgICAgICAtLSBwcmludCgiV3JpdHRlbjogIi4uYXZhX2xhbmd1YWdlc1tzZWxmLkNvbmZpZy5sYW5nXSkNCiAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICAgIGZpbGU6d3JpdGUoImVuZyIpDQogICAgICAgICAgICAgICAtLSBwcmludCgiVzogRW5nbGlzaCIpDQogICAgICAgIGVuZA0KICAgICAgICBmaWxlOmNsb3NlKCkNCmVuZA0KICBmdW5jdGlvbiBWaWt0b3I6Y2hlY2t0cygpDQogICAgICAgICBzZWxmLnRzOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzcTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNyOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZzp1cGRhdGUoKQ0KICBpZiBub3Qgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igbm90IHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuDQogIHRhcmdldCA9IHNlbGYudHNlLnRhcmdldA0KICBlbHNlaWYgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igc2VsZi5zZWxlY3RlZFRhciB0aGVuDQogIHRhcmdldCA9IHNlbGYuc2VsZWN0ZWRUYXINCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6TG9hZE1lbnUoKQ0KICAgICAgICAgc2VsZi5Db25maWc9c2NyaXB0Q29uZmlnKCIiLi5TY3JpcHRuYW1lLi4iIFsiIC4uIG15SGVyby5jaGFyTmFtZS4uIl0iICwibWVudSIpDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTA1XSwgImhpdCIpDQogICAgICAgIHNlbGYuQ29uZmlnLmhpdDphZGRQYXJhbSgiRSIsIGxvY19jaG9vc2VuWzE2Ml0sIFNDUklQVF9QQVJBTV9TTElDRSwgMS42LCAxLCAzLCAyKQ0KICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzFdLCAiY29tYm8iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgiY29tYm9rZXkiLCBsb2NfY2hvb3Nlbls4MV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCAzMikNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlVyIsIGxvY19jaG9vc2VuWzNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VFIiwgbG9jX2Nob29zZW5bNF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlSSIsIGxvY19jaG9vc2VuWzZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzE1OV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTYwXSxsb2NfY2hvb3NlblsyMTddLGxvY19jaG9vc2VuWzE3Ml0gfSkgDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls5XSwgImhhcmFzcyIpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiaGFyYXNza2V5IiwgbG9jX2Nob29zZW5bODNdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJoYXJhc3N0b2dsZSIsIGxvY19jaG9vc2VuWzE2NF0sICAgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMTBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzEyXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oIkUiLCBsb2NfY2hvb3NlblsxNjNdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDIsIDEsIDMsIDIpDQogICAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQpzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE0XSwgImZhcm0iKQ0KICAgICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNV0sImxhbmVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsxNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsxOF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJlY291bnQiLGxvY19jaG9vc2VuWzE4Ml0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIkVNYW5hIixsb2NfY2hvb3NlblsxODddLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjBdLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzIxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyM10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiaW5mbzIiLCBsb2NfY2hvb3NlblsxODRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiV01hbmEiLGxvY19jaG9vc2VuWzE4Nl0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjVdLCJsYXN0aGl0IikNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiYXV0b2xhc3RoaXQiLGxvY19jaG9vc2VuWzE4OV0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJ1c2VRIixsb2NfY2hvb3NlblsyNl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZUUiLGxvY19jaG9vc2VuWzI4XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgiRU1hbmEiLGxvY19jaG9vc2VuWzE4N10sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgDQogICAgICAgICAgICAgICAgc2VsZi5Db25maWcuZmFybTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzIxOF0sImNsZWFya2V5IikNCiAgICAgIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXk6YWRkUGFyYW0oImxhc3RoaXRrZXkiLGxvY19jaG9vc2VuWzIxNV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgICAgc2VsZi5Db25maWcuZmFybS5jbGVhcmtleTphZGRQYXJhbSgibGFuZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODVdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgIHNlbGYuQ29uZmlnLmZhcm0uY2xlYXJrZXk6YWRkUGFyYW0oImp1bmdsZWNsZWFya2V5IiwgbG9jX2Nob29zZW5bODZdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlYiKSkNCiAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzM1XSwgImtpbGxzdGVhbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VRIiwgbG9jX2Nob29zZW5bMzddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlRSIsIGxvY19jaG9vc2VuWzM5XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZVIiLCBsb2NfY2hvb3Nlbls0MF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNDFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQyXSwgIml0ZW0iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTkyXSwgImF1dG9wb3QiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImVuYWJsZWF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5M10sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdDphZGRQYXJhbSgiYXV0b3BvdGhwIiwgbG9jX2Nob29zZW5bMTk0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJlbmFibGVhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJhdXRvemhvbnlhIiwgbG9jX2Nob29zZW5bNDRdLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAwLCAxMDAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLml0ZW06YWRkUGFyYW0oInVzZWhnIiwgbG9jX2Nob29zZW5bNDVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2ViZyIsIGxvY19jaG9vc2VuWzQ2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgDQogICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzkyXSwgIm1pc2MiKQ0KICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzkzXSwgImludGVycnVwdCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKCJyIiwgbG9jX2Nob29zZW5bOTddLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKCJ3IiwgbG9jX2Nob29zZW5bOTVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKCJpbmZvMyIsIGxvY19jaG9vc2VuWzk4XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIGZvciBpLCBhIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgICAgICBpZiBJbnRlcnJ1cHRbYS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSwgc3BlbGwgaW4gcGFpcnMoSW50ZXJydXB0W2EuY2hhck5hbWVdLnN0b3ApIGRvDQogICAgICAgICAgICAgICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdDphZGRQYXJhbShzcGVsbC5zcGVsbE5hbWUsIGEuY2hhck5hbWUuLiIgLSAiLi5zcGVsbC5uYW1lLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIA0KICAgICAgICBlbmQNCiAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2M6YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMTldLCAiZ2FwQ2xvc2UiKQ0KICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oInciLCBsb2NfY2hvb3NlblsyMjBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuZ2FwQ2xvc2U6YWRkUGFyYW0oImluZm8zIiwgbG9jX2Nob29zZW5bOThdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBmb3IgXywgZW5lbXkgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGlmIGlzQUdhcGNsb3NlclVuaXRbZW5lbXkuY2hhck5hbWVdIH49IG5pbCB0aGVuDQogICAgICAgc2VsZi5Db25maWcubWlzYy5nYXBDbG9zZTphZGRQYXJhbShlbmVteS5jaGFyTmFtZSwgZW5lbXkuY2hhck5hbWUgLi4gIiAtICIgLi4gZW5lbXk6R2V0U3BlbGxEYXRhKGlzQUdhcGNsb3NlclVuaXRbZW5lbXkuY2hhck5hbWVdLnNwZWxsKS5uYW1lLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBlbmQNCiAgICBlbmQNCiAgICAgICAgQ2xvY2sgPSBvcy5jbG9jaygpDQogICAgICAgIGlmIFZJUF9VU0VSIHRoZW4NCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0N10sICJ2aXAiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oInBhY2tldCIsbG9jX2Nob29zZW5bNDhdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMSIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzQ5XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUwXSwgImxldmVsIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJrZXkiLGxvY19jaG9vc2VuWzUxXSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5sZXZlbDphZGRQYXJhbSgibG9naWMiLCBsb2NfY2hvb3Nlbls1Ml0sIFNDUklQVF9QQVJBTV9MSVNULCA3LCB7bG9jX2Nob29zZW5bNThdLCBsb2NfY2hvb3Nlbls1OV0sbG9jX2Nob29zZW5bNjBdLGxvY19jaG9vc2VuWzYxXSxsb2NfY2hvb3Nlbls2Ml0sIGxvY19jaG9vc2VuWzYzXSwgbG9jX2Nob29zZW5bNjRdICB9KQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls1M10sICJza2luIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTRdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLnNraW46YWRkUGFyYW0oJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nLCBsb2NfY2hvb3Nlbls1N10sIFNDUklQVF9QQVJBTV9MSVNULCAxLCBza2luTWV0YVtteUhlcm8uY2hhck5hbWVdKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgiaW5mbzUiLCBsb2NfY2hvb3Nlbls1NV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzUiLCAiU2tpbiBIYWNrIHRlbXBvcmFyeSBkaXNhYmxlZCB1bnRpbCBuZXh0IHVwZGF0ZS4gLiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOTVdLCAiYW50aWFmayIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrOmFkZFBhcmFtKCJhbnRpYWZrIixsb2NfY2hvb3NlblsxOTZdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkgDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzMiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgiaW5mbzQiLCBsb2NfY2hvb3Nlbls1Nl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIGVuZA0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY1XSwib3RoZXIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNob3cgRGFtYWdlIE9uIEhwIEJhciIsICJIUEJBUiIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjZdLCAiZHJhdyIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInFkcmF3Iixsb2NfY2hvb3Nlbls2N10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3Iixsb2NfY2hvb3Nlbls2OF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3Iixsb2NfY2hvb3Nlbls2OV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInJkcmF3Iixsb2NfY2hvb3Nlbls3MF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsbG9jX2Nob29zZW5bNzFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuZHJhdzphZGRQYXJhbSgicnRkcmF3Iixsb2NfY2hvb3NlblsxOTddLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOThdLCAiY29sb3IiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUWNvbG9yIiwgbG9jX2Nob29zZW5bMTk5XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiV2NvbG9yIiwgbG9jX2Nob29zZW5bMjAwXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRWNvbG9yIiwgbG9jX2Nob29zZW5bMjAxXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUmNvbG9yIiwgbG9jX2Nob29zZW5bMjAyXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRTJjb2xvciIsIGxvY19jaG9vc2VuWzIwM10sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsIDI1NSwgMjU1fSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oIkFBY29sb3IiLCBsb2NfY2hvb3NlblsyMDRdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yOmFkZFBhcmFtKCJ0YXJnZXRzZWxlY3QiLCBsb2NfY2hvb3NlblsyMDVdLCBTQ1JJUFRfUEFSQU1fQ09MT1IsezI1NSwgMjU1LDAsMH0pDQogICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMDZdLCAid2lkdGgiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiUXdpZHRoIiwgbG9jX2Nob29zZW5bMjEwXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiV3dpZHRoIiwgbG9jX2Nob29zZW5bMjExXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiRXdpZHRoIiwgbG9jX2Nob29zZW5bMjEyXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiUndpZHRoIiwgbG9jX2Nob29zZW5bMjEzXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiRTJ3aWR0aCIsIGxvY19jaG9vc2VuWzIwN10sIDQsIDIsIDEsIDEwLCAwKSANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkFBd2lkdGgiLCBsb2NfY2hvb3NlblsyMDldLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJTVHdpZHRoIiwgbG9jX2Nob29zZW5bMjA4XSwgNCwgNiwgMSwgMTAsIDApICAgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFBhcmFtKCJ0YXJnZXQiLGxvY19jaG9vc2VuWzc1XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkgIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgiZGFtYWdlIixsb2NfY2hvb3NlblsyMTRdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Y2FsIixsb2NfY2hvb3Nlbls3Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpIA0KICAgICAgICAgICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzNdLCAicGVybWEiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYTphZGRQYXJhbSgicGVybWEiLGxvY19jaG9vc2VuWzc0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3N10sInRhcmdldHNlbCIpDQogICAgIHNlbGYudHMubmFtZSAgPSAiVmlrdG9yIg0KICAgICAgc2VsZi50c3EubmFtZSA9ICJWaWt0b3JRIg0KICAgICAgc2VsZi50c3cubmFtZSA9ICJWaWt0b3JXIg0KICAgICAgc2VsZi50c2UubmFtZSA9ICJWaWt0b3JFIg0KICAgICAgc2VsZi50c3IubmFtZSA9ICJWaWt0b3JSIg0KICAgICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHMpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3EpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3cpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c2UpDQogICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkVFMoc2VsZi50c3IpIA0KICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3OV0sICJLZXlzIikNCiAgICAgIE9yYndhbGtNYW5hZ2VyOkxvYWRDb21tb25LZXlzKHNlbGYuQ29uZmlnLktleXMpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImxhbmciLCBsb2NfY2hvb3NlblsxNjVdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE2Nl0sIGxvY19jaG9vc2VuWzE2N10sbG9jX2Nob29zZW5bMTY4XX0pDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluc3RydWN0IiwgbG9jX2Nob29zZW5bMjE2XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5wZXJtYS5wZXJtYSB0aGVuDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpIGVuZCwgMSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgc2VsZi5Db25maWcuY29tYm86cGVybWFTaG93KCJjb21ib2tleSIpIGVuZCwgMS4yKQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5oYXJhc3M6cGVybWFTaG93KCJoYXJhc3N0b2dsZSIpIGVuZCwgMS4yKQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5oYXJhc3M6cGVybWFTaG93KCJoYXJhc3NrZXkiKSBlbmQsIDEuMikNCiAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6RHJhdygpDQogICAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnFkcmF3IGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDYwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlF3aWR0aCxBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci5RY29sb3IpKSkNCiAgICBlbmQNCiAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy53ZHJhdyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Xd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLldjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LmVkcmF3IGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDEyMDAsICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Fd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkVjb2xvcikpKQ0KICAgIGVuZA0KICAgIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucmRyYXcgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNzAwLCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5Sd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlJjb2xvcikpKQ0KICAgIGVuZA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuYWFkcmF3IHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA1MjUsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkFBd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkFBY29sb3IpKSkNCiAgICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LnJ0ZHJhdyBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpICB0aGVuDQogICBpZiBzZWxmLnRzZS50YXJnZXR+PW5pbCB0aGVuDQogICAgICBEcmF3TGluZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosc2VsZi50c2UudGFyZ2V0LngsIHNlbGYudHNlLnRhcmdldC55LCBzZWxmLnRzZS50YXJnZXQueixzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5FMndpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLkUyY29sb3IpKSkNCiAgICBlbmQNCiAgICBlbmQNCiAgICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnRhcmdldCBhbmQgc2VsZi5zZWxlY3RlZFRhciB+PSBuaWwgdGhlbg0KICAgICAgICAgRHJhd0NpcmNsZTNEKHNlbGYuc2VsZWN0ZWRUYXIueCwgc2VsZi5zZWxlY3RlZFRhci55LCBzZWxmLnNlbGVjdGVkVGFyLnosIDgwLCBzZWxmLkNvbmZpZy5vdGhlci53aWR0aC5TVHdpZHRoLCBBUkdCKHRhYmxlLnVucGFjayhzZWxmLkNvbmZpZy5vdGhlci5jb2xvci50YXJnZXRzZWxlY3QpKSkNCmVuZA0KICAgaWYgUG9wVXAxIHRoZW4NCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC41MCksIChXSU5ET1dfSCouMTUpLCAoV0lORE9XX0gqLjkpDQogICAgRHJhd0xpbmUodywgaDEvMS4wNSwgdywgaDIvMS45Nywgdy8xLjc1LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd0xpbmUodywgaDEsIHcsIGgyLzIsIHcvMS44LCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIldlbGNvbWUgdG8gS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIDMuMCIpLCBXSU5ET1dfSCouMDI4LCAoV0lORE9XX1cvMiksIChXSU5ET1dfSCouMTgpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSwiY2VudGVyIiwiY2VudGVyIikNCiAgIERyYXdUZXh0QSh0b3N0cmluZygiTGl0dGxlIGluZm9ybWF0YXRpb24gYWJvdXQgS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4xOTQpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkl0cyBhIGJ1bmRsZSB0aGF0IHByb2R1Y2VkIGJ5IGVuc3VsdXluIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJDdXJyZW50bHkgaXQgc3VwcG9ydGVkIG9ubHkgbWlkIGNoYW1wcyAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIyNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgZm9jdXMgUXVhbGl0eSByYXRoZXIgdGhhbiBRdWFudGl0eSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjQwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBuZWVkIHlvdXIgZmVlZGJhY2tzIHRvIGltcHJvdmUgaXQiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI1NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgY2FyZSBldmVyeSBzaW5nbGUgZmVlZGJhY2sgYW5kIHRyeSB0byBhZGQgZXZlcnl0aGluZyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjcwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSG9wZSB5b3UgYXJlIGVuam95IG15IHNjcmlwdC4uIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yODUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJZb3UgY2FuIGNoYW5nZSBldmVyeSBzZXR0aW5ncyB0byB5b3VyIGxpa2UgOikiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMwMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRpZCB5b3UgbGlrZSBteSBzY3JpcHQgPiBVcHZvdGUgbWUgb24gc2NyaXB0c3RhdHVzIGFuZCBvbiBmb3J1bSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzE1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRG9uJ3QgZm9yZ2V0IHRoZXNlIGFyZSBWSVA7IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMzApLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQW50aS1BZmsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM0NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQXV0byBMZXZlbGVyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzYwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBTa2luIENoYW5nZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNzUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNDkpLCAoV0lORE9XX0gqLjcwKSwgKFdJTkRPV19IKi43NSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjc3NSwgdywgaDIvMS42OCwgdyouMTEsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3UmVjdGFuZ2xlQnV0dG9uKFdJTkRPV19XKjAuNDY3LCBXSU5ET1dfSC8yLjM3NSwgV0lORE9XX1cqLjA0NywgV0lORE9XX0gqLjA0MSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiT0siKSwgV0lORE9XX0gqLjAyLCAoV0lORE9XX1cvMikqLjk4LCAoV0lORE9XX0gvMi4zNzUpLCBBUkdCKDI1NSwgMCwgMCwgMCApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zOTUpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1cnJ5LSBGb3IgdGhpcyBhd2Vzb21lIHBvcHVwIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi40MTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpIA0KICBlbmQNCiAgICBmb3IgXywgdGFyZ2V0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYgVmFsaWRUYXJnZXQodGFyZ2V0LCAxNTAwMCkgdGhlbg0KICBpZiBzZWxmLkNvbmZpZy5vdGhlci50YXJnZXRjYWwgYW5kIG5vdCBteUhlcm8uZGVhZCB0aGVuDQogICAgICAgIGxvY2FsIGRyYXdwb3M9V29ybGRUb1NjcmVlbihEM0RYVkVDVE9SMyh0YXJnZXQueCwgdGFyZ2V0LnksIHRhcmdldC56KSkNCiAgICAgICAgbG9jYWwgY29tYm9UZXh0LGNvbG9yID0gc2VsZjpHZXREcmF3cyh0YXJnZXQpDQogICAgICAgIGlmIGNvbWJvVGV4dCB0aGVuDQogICAgICAgICAgRHJhd1RleHQoY29tYm9UZXh0LDE1LGRyYXdwb3MueC0yMCxkcmF3cG9zLnktMjAsY29sb3IpDQogICAgICAgIGVuZCANCiAgICAgIGVuZCANCiAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCwgMTUwMDApIHRoZW4NCiAgICAgIGlmIHRhcmdldC52aXNpYmxlIGFuZCBub3QgdGFyZ2V0LmRlYWQgYW5kIHNlbGYuQ29uZmlnLm90aGVyLmRhbWFnZSB0aGVuDQogICAgICAgIGN1cnJMaW5lID0gMQ0KICAgICAgICBEcmF3TGluZUhQQmFyMihzZWxmOkdldE15RG1nKHRhcmdldCksIiIsICB0YXJnZXQsIGN1cnJMaW5lKQ0KICAgICAgICBEcmF3TGluZUhQQmFyKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSwgIkRhbWFnZSAiIC4uIG1hdGgucm91bmQoc2VsZjpHZXRNeURtZyh0YXJnZXQpKSx0YXJnZXQsY3VyckxpbmUpDQogICAgICAgIGN1cnJMaW5lID0gY3VyckxpbmUgKyAxDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogICAgICBlbmQNCiAgDQogICAgZnVuY3Rpb24gVmlrdG9yOmF1dG9wb3QoKQ0KIGlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQogICAgZnVuY3Rpb24gVmlrdG9yOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiQmlsZ2V3YXRlckN1dGxhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5pdGVtLnVzZWhnIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJIZXh0ZWNoR3VuYmxhZGUiICl0aGVuIENhc3RTcGVsbChfKQ0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIFZpa3Rvcjpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpIYXNlYnVmZigpDQogIGZvciBpID0gMSwgbXlIZXJvLmJ1ZmZDb3VudCBkbw0KICAgICAgICBsb2NhbCBidWZmID0gbXlIZXJvOmdldEJ1ZmYoaSkNCiAgICAgICAgaWYgQnVmZklzVmFsaWQoYnVmZikgdGhlbg0KICAgICAgICBpZiBidWZmLm5hbWU6bG93ZXIoKSA9PSAidmlrdG9yZWF1ZyIgdGhlbg0KICAgICAgICAgICAgZWJ1ZmYgPSB0cnVlDQogICAgICAgIGVuZA0KZW5kDQplbmQNCmVuZA0KICBmdW5jdGlvbiBWaWt0b3I6QXBwbHlCdWZmKHNvdXJjZSwgdW5pdCwgYnVmZikNCiAgaWYgdW5pdCA9PSBuaWwgb3IgYnVmZiA9PSBuaWwgdGhlbiByZXR1cm4gZW5kIA0KICBpZiB1bml0IGFuZCB1bml0LmlzTWUgYW5kIGJ1ZmYubmFtZSA9PSAidmlrdG9yZWF1ZyIgdGhlbg0KICBlYnVmZiA9IHRydWUNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6YXV0b2xldmVsKCkNCmlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTEgPSAgIHsgMSwyLDMsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTEpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAyIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMiA9ICAgeyAxLDIsMywxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDMgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UzID0gIHsgMiwzLDEsMiwyLDQsMiwxLDIsMSw0LDEsMSwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTMpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA0IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNCA9ICB7IDIsMywxLDIsMiw0LDIsMywyLDMsNCwzLDMsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U0KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTUgPSAgeyAzLDEsMiwzLDMsNCwzLDIsMywyLDQsMiwyLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDYgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMywxLDIsMywzLDQsMywxLDMsMSw0LDEsMSwyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDcgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMSwzLDMsMiwzLDQsMywxLDMsMSw0LDEsMiwxLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjphdXRvemhvbnlhKCkNCiAgICBpZiBzZWxmLkNvbmZpZy5pdGVtLmVuYWJsZWF1dG96aG9ueWEgdGhlbg0KICAgICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgICBpZiBteUhlcm8uaGVhbHRoIDw9IChteUhlcm8ubWF4SGVhbHRoICogc2VsZi5Db25maWcuaXRlbS5hdXRvemhvbnlhIC8gMTAwKSBhbmQgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJaaG9ueWFzSG91cmdsYXNzIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBmdW5jdGlvbiBWaWt0b3I6c2F2ZXIoKQ0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIFZpa3RvcjphbHdheXNyKCkNCiAgICBpZiAoc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSBhbmQgR2V0RGlzdGFuY2Uoc2VsZi50c3IudGFyZ2V0KTw3MDAgKXRoZW4NCiAgICAgIHNlbGY6Q2FzdFIodGFyZ2V0KQ0KICAgICAgZW5kDQogICAgZW5kDQogICAgICAgZnVuY3Rpb24gVmlrdG9yOm5lZWRyKCkNCiAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgaWYoIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDcwMCApdGhlbg0KICAgICAgICBsb2NhbCBkYW1hZ2V3aXRociA9c2VsZjpHZXRSRG1nKHVuaXQpK3NlbGY6R2V0UURtZyh1bml0KSArc2VsZjpHZXRFRG1nKHVuaXQpIA0KICAgICAgICBsb2NhbCBkYW1hZ2V3aXRobm9yID0gc2VsZjpHZXRRRG1nKHVuaXQpICtzZWxmOkdldEVEbWcodW5pdCkgDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZGFtYWdld2l0aG5vciApdGhlbg0KICAgICAgICAgIHNlbGY6c2F2ZXIoKQ0KICAgICAgIGVsc2VpZihoZWFsdGg8ZGFtYWdld2l0aHIgKXRoZW4NCiAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICAgICBmdW5jdGlvbiBWaWt0b3I6a2lsbHIoKQ0KICAgICAgICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiggc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmNvbWJvLk1hbmEgLzEwMCApIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwICl0aGVuDQogICAgICAgIGxvY2FsIGRtZ1IgPXNlbGY6R2V0UkRtZyh1bml0KQ0KICAgICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgICAgaWYoaGVhbHRoPGRtZ1IgKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgICAgICBlbmQNCiAgICAgICBlbmQNCiAgICBlbmQNCiAgICBlbmQNCiAgICBmdW5jdGlvbiBWaWt0b3I6UHJvY2Vzc1NwZWxsKHVuaXQsIHNwZWxsKQ0KIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1IpLmxldmVsID4gMSB0aGVuDQppZiBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgc3BlbGwgPSBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0uc3RvcFtzcGVsbC5uYW1lXQ0KICAgICAgICBpZiBzcGVsbCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHRbc3BlbGwubmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KHVuaXQpIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IHNlbGYuUlNwZWxsLlJhbmdlICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQuciB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGY6Q2FzdFIodW5pdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9XKS5sZXZlbCA+IDEgdGhlbg0KICAgIGlmIEludGVycnVwdFt1bml0LmNoYXJOYW1lXSB+PSBuaWwgdGhlbg0KICAgICAgICBzcGVsbCA9IEludGVycnVwdFt1bml0LmNoYXJOYW1lXS5zdG9wW3NwZWxsLm5hbWVdDQogICAgICAgIGlmIHNwZWxsIH49IG5pbCB0aGVuDQogICAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdFtzcGVsbC5uYW1lXSB0aGVuDQogICAgICAgICAgICAgICAgaWYgVmFsaWRUYXJnZXQodW5pdCkgYW5kIEdldERpc3RhbmNlKHVuaXQpIDwgc2VsZi5XU3BlbGwuUmFuZ2UgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdC53IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgc2VsZjpDYXN0Vyh1bml0KQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgIGlmIHVuaXQudHlwZSA9PSBteUhlcm8udHlwZSBhbmQgdW5pdC50ZWFtIH49IG15SGVyby50ZWFtIGFuZCBpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IDEwMDAgYW5kIHNwZWxsIH49IG5pbCB0aGVuICAgICANCiAgICBpZiBzcGVsbC5uYW1lID09ICh0eXBlKGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpID09ICdudW1iZXInIGFuZCB1bml0OkdldFNwZWxsRGF0YShpc0FHYXBjbG9zZXJVbml0W3VuaXQuY2hhck5hbWVdLnNwZWxsKS5uYW1lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwpIGFuZCBzZWxmLkNvbmZpZy5taXNjLmdhcENsb3NlW3VuaXQuY2hhck5hbWVdIHRoZW4NCiAgICAgIGlmIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5uYW1lID09IG15SGVyby5uYW1lIG9yIGlzQUdhcGNsb3NlclVuaXRbdW5pdC5jaGFyTmFtZV0uc3BlbGwgPT0gJ2JsaW5kbW9ua3F0d28nIHRoZW4NCiAgICAgICAgQ2FzdFNwZWxsKF9XLCBteUhlcm8ueCwgbXlIZXJvLnopDQogICAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQplbmQNCiAgZnVuY3Rpb24gVmlrdG9yOmNvbWJvKCkNCiAgICAgICAgc2VsZi50c3E6dXBkYXRlKCkNCiAgICAgICAgc2VsZi50c2U6dXBkYXRlKCkNCiAgICAgICAgc2VsZi50c3c6dXBkYXRlKCkNCiAgICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5jb21iby5NYW5hIC8xMDAgKWFuZCBzZWxmLnRzcS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwIClhbmQgc2VsZi50c2UudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICApdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgICAgZW5kDQogICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuY29tYm8uTWFuYSAvMTAwICkgYW5kIHNlbGYudHN3LnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuY29tYm8uY29tYm9rZXkgICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICAgICBlbmQNCiAgICAgIGlmIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDEgdGhlbg0KICAgICAgc2VsZjpraWxscigpDQogICAgICBlbHNlaWYgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiB0aGVuDQogICAgICBzZWxmOm5lZWRyKCkNCiAgICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAzIHRoZW4NCiAgICAgIHNlbGY6YWx3YXlzcigpDQogICAgICBlbmQNCiAgICANCiAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgICBmb3IgXywgdW5pdCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlSSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICBlbmQNCiAgICAgIGVuZA0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIFZpa3RvcjpDYXN0USh1bml0KQ0KICAgIHNlbGYuUVNwZWxsOkNhc3QodW5pdCkNCiAgZW5kDQogIA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdFcodW5pdCkNCiAgICBzZWxmLldTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICANCiAgZnVuY3Rpb24gVmlrdG9yOkNhc3RFKHVuaXQpDQogICANCiAgICBpZiB1bml0LmRlYWQgb3IgdW5pdC5oZWFsdGggPT0gMCB0aGVuDQogICAgICByZXR1cm4NCiAgICBlbmQNCiAgICANCiAgICBpZiBHZXREaXN0YW5jZSh1bml0LCBteUhlcm8pID4gc2VsZi5FLlJhbmdlMS01IHRoZW4NCiAgICAgRVN0YXJ0UG9zID0gQ2lyY2xlSW50ZXJzZWN0aW9uKG15SGVybywgdW5pdCwgbXlIZXJvLCBzZWxmLkUuUmFuZ2UxLTUpDQogICAgZWxzZQ0KICAgICBFU3RhcnRQb3MgPSBWZWN0b3IodW5pdC54LCB1bml0LnksIHVuaXQueikNCiAgICBlbmQNCiAgICANCiAgICAgRVBvcywgRUhpdENoYW5jZSA9IHNlbGYuSFByZWQ6R2V0UHJlZGljdChzZWxmLkhQcmVkLlByZXNldHNbJ1Zpa3RvciddWyJFIl0sIHVuaXQsIEVTdGFydFBvcykNCiAgICANCiAgICBpZiBtb2RlID09ICJDb21ibyIgYW5kIEVIaXRDaGFuY2UgPj0gc2VsZi5Db25maWcuaGl0LkUgb3IgbW9kZSA9PSAiSGFyYXNzIiBhbmQgRUhpdENoYW5jZSA+PSBzZWxmLkNvbmZpZy5oYXJhc3MuRSBvciAgbW9kZSA9PSBuaWwgYW5kIEVIaXRDaGFuY2UgPiAxIHRoZW4NCiAgICAgIENhc3RTcGVsbDMoX0UsIEQzRFhWRUNUT1IzKEVTdGFydFBvcy54LCAwLCBFU3RhcnRQb3MueiksIEQzRFhWRUNUT1IzKEVQb3MueCwgMCwgRVBvcy56KSkNCiAgICBlbmQNCiAgICANCiAgZW5kDQogIA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdFIodW5pdCkNCiAgICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6Q2FzdEkodW5pdCkNCiAgICBzZWxmLklnbml0ZTpDYXN0KHVuaXQpDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6a2lsbHN0ZWFsKCkNCiAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGhlYWx0aCA9IHVuaXQuaGVhbHRoDQogICAgICBsb2NhbCBkbWdFID0gc2VsZjpHZXRFRG1nKHVuaXQpDQogICAgICAgIGlmKHNlbGYudHNlLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdFIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlRSBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NzAwICAgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0RSh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBkbWdRID0gc2VsZjpHZXRRRG1nKHVuaXQpDQogICAgICAgIGlmKHNlbGYudHNxLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0USh1bml0KSAgDQogICAgICAgIGVuZA0KICAgICAgICAgbG9jYWwgZG1nSSA9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICAgICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgICAgIGVuZA0KICAgICAgICBsb2NhbCBkbWdSID1zZWxmOkdldFJEbWcodW5pdCkNCiAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1IgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgYW5kIEdldERpc3RhbmNlKHVuaXQpPDcwMCl0aGVuDQogICAgICAgICAgc2VsZjpDYXN0Uih1bml0KQ0KICAgICAgICBlbmQNCiAgICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBWaWt0b3I6R2V0UURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMjAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAyMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjIgKyAoKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKi41KSkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBWaWt0b3I6R2V0UTJEbWcodGFyZ2V0KQ0KICAgIGlmIG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsIDwgMSB0aGVuDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0gKDIwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1EpLmxldmVsICogMjApICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKi4yICkNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCmZ1bmN0aW9uIFZpa3RvcjpHZXRFRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9FKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgbm90IGVidWZmIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbiANCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMjUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfRSkubGV2ZWwgKiA0NSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC43KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlaWYgZWJ1ZmYgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogIGxvY2FsIEZpbmFsRGFtYWdlID0uNCooKDI1ICsgKG15SGVybzpHZXRTcGVsbERhdGEoX0UpLmxldmVsICogNDUpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuNykpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQpmdW5jdGlvbiBWaWt0b3I6R2V0UkRtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgUmRhbWFnZSA9ICg1MCArIChteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCAqIDEwMCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC41NSkNCiAgbG9jYWwgcGVyc2Vjb25kID0gKCAxNCoobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiAxNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC4xKQ0KICBsb2NhbCBGaW5hbERhbWFnZSA9IFJkYW1hZ2UgKyBwZXJzZWNvbmQNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkdldE15RG1nKHRhcmdldCkNCiAgIGlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRSRG1nKHRhcmdldCkgDQogICAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UURtZyh0YXJnZXQpICsgc2VsZjpHZXRFRG1nKHRhcmdldCkgDQogICAgZWxzZWlmIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkgK3NlbGY6R2V0RURtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSANCiAgICAgIGVsc2VpZiBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldEVEbWcodGFyZ2V0KSANCiAgICAgIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQogICBmdW5jdGlvbiBWaWt0b3I6R2V0RHJhd3ModGFyZ2V0KQ0KbG9jYWwgcWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQpsb2NhbCBlZGFtYWdlID0gc2VsZjpHZXRFRG1nKHRhcmdldCkNCmxvY2FsIHJkYW1hZ2UgPSBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KbG9jYWwgSWRtZz0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogIA0KICBpZiBxZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgZWRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdFJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIGVkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRSArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgZWxzZWlmIHJkYW1hZ2UgID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1InLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcmRhbWFnZSArIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiByZGFtYWdlICtlZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIEUgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK2VkYW1hZ2U+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFInLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK2VkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgRSArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK3JkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgUiArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgICAgIGVsc2VpZiBxZGFtYWdlK2VkYW1hZ2UrcmRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdLaWxsIHdpdGggZnVsbCBjb21ibycsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrZWRhbWFnZStyZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnRnVsbCBDb21ibyArIElnbml0ZScsUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZSANCiAgICByZXR1cm4gIkNhbnQgS2lsbCB5ZXQiLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbmQgDQplbmQNCiAgZnVuY3Rpb24gVmlrdG9yOmhhcmFzcygpDQogICAgc2VsZi50czp1cGRhdGUoKQ0KICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgaWYgc2VsZi5Db25maWcuaGFyYXNzLmhhcmFzc2tleSBvciBzZWxmLkNvbmZpZy5oYXJhc3MuaGFyYXNzdG9nbGUgIHRoZW4NCiAgICAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VRICkgdGhlbiAgICAgICAgDQogICAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICAgICAgIGVuZCAgIA0KICAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgICAgaWYoc2VsZi5FU3BlbGw6SXNSZWFkeSgpIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmhhcmFzcy5NYW5hIC8xMDAgKSBhbmQgc2VsZi50c2UudGFyZ2V0IH49IG5pbCBhbmQgc2VsZi5Db25maWcuaGFyYXNzLnVzZUUgIGFuZCBWYWxpZFRhcmdldChzZWxmLnRzZS50YXJnZXQsIHNlbGYuRVJhbmdlKSkgdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICBlbmQNCiAgDQogICAgICAgIGVuZA0KICAgICAgZW5kICAgDQogICAgICBmdW5jdGlvbiBWaWt0b3I6QW50aWFmaygpDQogIGlmIG9zLmNsb2NrKCkgPCBDbG9jayBvciBub3Qgc2VsZi5Db25maWcudmlwLmFudGlhZmsuYW50aWFmayB0aGVuIHJldHVybiBlbmQNCiAgQ2xvY2sgPSBvcy5jbG9jaygpICsgbWF0aC5yYW5kb20oNjAsMTIwKQ0KICBteUhlcm86TW92ZVRvKG15SGVyby54LCBteUhlcm8ueikNCmVuZA0KICAgICBmdW5jdGlvbiBWaWt0b3I6TGFzdEhpdCgpDQogICAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgaWYgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0Lmxhc3RoaXRsb2dpYyA9PSAxIHRoZW4NCiAgICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgICAgICAgbG9jYWwgUWRhbWFnZSA9IHNlbGY6R2V0UURtZyh0YXJnZXQpDQogIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZVEgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LlFNYW5hIC8xMDAgKSBhbmQgVmFsaWRUYXJnZXQodGFyZ2V0LHNlbGYuUVNwZWxsLlJhbmdlKSAgYW5kIEdldERpc3RhbmNlU3FyKHRhcmdldCkgPD0gc2VsZi5RU3BlbGwuUmFuZ2UgKiBzZWxmLlFTcGVsbC5SYW5nZSBhbmQgUWRhbWFnZSA+PSB0YXJnZXQuaGVhbHRoKSB0aGVuDQogICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgICBlbmQNCiAgICAgICAgbG9jYWwgRWRhbWFnZSA9IHNlbGY6R2V0RURtZyh0YXJnZXQpDQogICAgICBpZihzZWxmLkVTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VFIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5FTWFuYSAvMTAwIClhbmQgIFZhbGlkVGFyZ2V0KHRhcmdldCxzZWxmLlFTcGVsbC5SYW5nZSkgYW5kIEdldERpc3RhbmNlU3FyKHRhcmdldCkgPD0gc2VsZi5FU3BlbGwuUmFuZ2UgKiBzZWxmLkVTcGVsbC5SYW5nZSBhbmQgRWRhbWFnZSA+PSB0YXJnZXQuaGVhbHRoKSB0aGVuDQogICAgICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgIGVsc2VpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDIgdGhlbg0KICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdC5RTWFuYSAvMTAwICkpIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpMYXN0SGl0KCkNCiAgICAgICAgICBlbmQNCiAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LnVzZUUgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LkVNYW5hIC8xMDAgKSkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkxhc3RIaXQoKQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGVuZA0KICBlbmQNCiAgZnVuY3Rpb24gVmlrdG9yOkxhbmVDbGVhcigpDQogICBsb2NhbCBjbGVhcnRhcmdldCA9IHNlbGYuY2xlYXJ0YXJnZXQNCiAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gaXBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgbWluaW9uIH49IG5pbCB0aGVuDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuZmFybS5jbGVhcmtleS5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLlFNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgIHNlbGY6Q2FzdFEoY2xlYXJ0YXJnZXQpDQogICAgICAgICAgZW5kDQogICAgICBsb2NhbCBOdW1iZXJPZkhpdHMgPSBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5lY291bnQNCiAgICAgICAgICAgaWYgTnVtYmVyT2ZIaXRzID49IDEgYW5kICNzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuZmFybS5jbGVhcmtleS5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VFIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLkVNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLkVTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RMaW5lRmFybVBvc2l0aW9uKHNlbGYuRVNwZWxsLlJhbmdlLCBzZWxmLkVTcGVsbC5XaWR0aCwgc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykNCiAgICAgICAgICAgIGlmIEJlc3RQb3Mgfj0gbmlsIGFuZCAgQmVzdEhpdCA+PSBOdW1iZXJPZkhpdHMgdGhlbg0KICAgICAgICAgICAgICBDYXN0U3BlbGwoX0UsIEJlc3RQb3MueCwgQmVzdFBvcy56KQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBmdW5jdGlvbiBWaWt0b3I6SnVuZ2xlQ2xlYXIoKQ0KICAgIGlmKHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VRIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5Lmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5RTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuUVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuV1NwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VXIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5Lmp1bmdsZWNsZWFya2V5ICApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuV01hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgIHNlbGYuV1NwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmNsZWFya2V5Lmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5FTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgZnVuY3Rpb24gVmlrdG9yOlduZE1zZyhNc2csIEtleSkNCiAgICAgICAgaWYgc2VsZi5Db25maWcudGFyZ2V0c2VsLnRzIHRoZW4gICAgICANCiAgICAgICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgICAgICAgICAgICBsb2NhbCBtaW5EID0gMTANCiAgICAgICAgICAgICAgbG9jYWwgc3RhcmdldCA9IG5pbA0KICAgICAgICAgICAgICBmb3IgaSwgZW5lbXkgaW4gaXBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgICAgICAgICAgICBpZiBWYWxpZFRhcmdldChlbmVteSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIGlmIEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykgPD0gbWluRCBvciBzdGFyZ2V0ID09IG5pbCB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkQgPSBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpDQogICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJnZXQgPSBlbmVteQ0KICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGVuZCAgICAgDQogICAgICAgICAgICAgIGlmIHN0YXJnZXQgYW5kIG1pbkQgPCA1MDAgdGhlbg0KICAgICAgICAgICAgICAgICAgaWYgc2VsZi5zZWxlY3RlZFRhciBhbmQgc3RhcmdldC5jaGFyTmFtZSA9PSBzZWxmLnNlbGVjdGVkVGFyLmNoYXJOYW1lIHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gbmlsDQogICAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPlRhcmdldCA8Yj5pcyBubyBsb2dlciBzZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRhciA9IHN0YXJnZXQgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICBwcmludCgiPGZvbnQgY29sb3I9XCIjQ0JGNkZGXCI+TmV3IHRhcmdldCA8Yj5zZWxlY3RlZC48L2I+OiAiLi5zdGFyZ2V0LmNoYXJOYW1lLi4iPC9mb250PiIpDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgICAgaWYgTXNnID09IFdNX0xCVVRUT05ET1dOIHRoZW4NCiAgICBpZiBQb3BVcDEgdGhlbg0KICAgICAgUG9wVXAxID0gZmFsc2UNCiAgICBlbmQNCiAgZW5kDQogICAgICBlbmQNCiAgICAgICAgICBmdW5jdGlvbiBWaWt0b3I6VW5sb2FkKCkNCiAgICAgICAgc2VsZjp3cml0ZWNmZygpDQogICAgICBlbmQNCiAgY2xhc3MgIkRpYW5hIg0KIC0tLS8vPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXC0tLQ0KLS18fCA+IERpYW5hIFN0YXJ0cyAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgZnVuY3Rpb24gRGlhbmE6X19pbml0KCkNCnNlbGYudHM9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDgzMCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNxPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA4MzAsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzdz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgMjAwLCBEQU1BR0VfUEhZU0lDQUwsIGZhbHNlLCB0cnVlKQ0Kc2VsZi50c2U9IFRhcmdldFNlbGVjdG9yKFRBUkdFVF9MRVNTX0NBU1RfUFJJT1JJVFksIDM1MCwgREFNQUdFX1BIWVNJQ0FMLCBmYWxzZSwgdHJ1ZSkNCnNlbGYudHNyPSBUYXJnZXRTZWxlY3RvcihUQVJHRVRfTEVTU19DQVNUX1BSSU9SSVRZLCA4MjUsIERBTUFHRV9QSFlTSUNBTCwgZmFsc2UsIHRydWUpDQpzZWxmLnRzZz0gVGFyZ2V0U2VsZWN0b3IoVEFSR0VUX0xFU1NfQ0FTVF9QUklPUklUWSwgMTAwMCwgREFNQUdFX01BR0lDLCBmYWxzZSwgdHJ1ZSkNCiAgIHNlbGYuUVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX1EsIERhbWFnZU5hbWUgPSAiUSIsIFJhbmdlID0gODMwLCBXaWR0aCA9IDc1LCBEZWxheSA9IDAuMjUsIFNwZWVkID0gMjAwMCwgQ29sbGlzaW9uID0gZmFsc2UsIEFvZSA9IGZhbHNlLCBUeXBlID0gU1BFTExfVFlQRS5MSU5FQVJ9KQ0KICAgc2VsZi5XU3BlbGwgPSBfU3BlbGwoe1Nsb3QgPSBfVywgRGFtYWdlTmFtZSA9ICJXIiwgUmFuZ2UgPSAyMDAsIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5TRUxGfSkNCiAgIHNlbGYuRVNwZWxsID0gX1NwZWxsKHtTbG90ID0gX0UsIERhbWFnZU5hbWUgPSAiRSIsIFJhbmdlID0gMzUwLCBDb2xsaXNpb24gPSB0cnVlLCBBb2UgPSBmYWxzZSwgVHlwZSA9IFNQRUxMX1RZUEUuU0VMRn0pDQogICBzZWxmLlJTcGVsbCA9IF9TcGVsbCh7U2xvdCA9IF9SLCBEYW1hZ2VOYW1lID0gIlIiLCBSYW5nZSA9IDgyNSwgIENvbGxpc2lvbiA9IGZhbHNlLCBBb2UgPSB0cnVlLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KICAgc2VsZi5JZ25pdGUgPSBfU3BlbGwoe1Nsb3QgPSBGaW5kU3VtbW9uZXJTbG90KCJzdW1tb25lcmRvdCIpLCBEYW1hZ2VOYW1lID0gIklHTklURSIsIFJhbmdlID0gNjAwLCBUeXBlID0gU1BFTExfVFlQRS5UQVJHRVRURUR9KQ0KLS18PiBNaW5pb24gTWFuYWdlcnMNCiAgICBzZWxmLmVuZW15TWluaW9ucyAgID0gbWluaW9uTWFuYWdlcihNSU5JT05fRU5FTVksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5hbGx5TWluaW9ucyAgICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0FMTFksICAgNjUwLCBteUhlcm8sIE1JTklPTl9TT1JUX01BWEhFQUxUSF9ERUMpDQogICAgc2VsZi5qdW5nbGVNaW5pb25zICA9IG1pbmlvbk1hbmFnZXIoTUlOSU9OX0pVTkdMRSwgIDY1MCwgbXlIZXJvLCBNSU5JT05fU09SVF9NQVhIRUFMVEhfREVDKQ0KICAgIHNlbGYub3RoZXJNaW5pb25zICAgPSBtaW5pb25NYW5hZ2VyKE1JTklPTl9PVEhFUiwgICA2NTAsIG15SGVybywgTUlOSU9OX1NPUlRfTUFYSEVBTFRIX0RFQykNCiAgICBzZWxmOkxvYWRNZW51KCkNCiAgICAgIHNlbGY6ZmluZG9yYndhbGtlcigpDQogICAgICAgICBMYXN0X0xldmVsU3BlbGwgPSAwDQogICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6VGljaygpIGVuZCkNCiAgICAgICAgICAgICAgQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOlVubG9hZCgpIGVuZCApDQogIEFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6RHJhdygpIGVuZCkNCiAgQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLEtleSkgc2VsZjpXbmRNc2cobXNnLEtleSkgZW5kKQ0KICAtLUFkZEFuaW1hdGlvbkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGFuaW1hdGlvbikgc2VsZjpBbmltYXRpb24odW5pdCwgYW5pbWF0aW9uKSBlbmQpDQogIEFkZFByb2Nlc3NTcGVsbENhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIHNwZWxsKSBzZWxmOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkgZW5kKQ0KICAtLUFkZEFwcGx5QnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHNvdXJjZSwgdW5pdCwgYnVmZikgc2VsZjpPbkFwcGx5QnVmZihzb3VyY2UsIHVuaXQsIGJ1ZmYpIGVuZCkNCiAgLS1BZGRVcGRhdGVCdWZmQ2FsbGJhY2soZnVuY3Rpb24odW5pdCwgYnVmZiwgc3RhY2tzKSBzZWxmOlVwZGF0ZUJ1ZmYodW5pdCwgYnVmZiwgc3RhY2tzKSBlbmQpDQogIC0tQWRkUmVtb3ZlQnVmZkNhbGxiYWNrKGZ1bmN0aW9uKHVuaXQsIGJ1ZmYpIHNlbGY6T25SZW1vdmVCdWZmKHVuaXQsIGJ1ZmYpIGVuZCkgDQogICAgZW5kDQogICAgIGZ1bmN0aW9uIERpYW5hOlRpY2soKQ0KICBzZWxmOmF1dG96aG9ueWEoKQ0KICBzZWxmOmF1dG9xKCkNCiBpZiBWSVBfVVNFUiB0aGVuICAgc2VsZjpBbnRpYWZrKCkgIGVuZA0KICBzZWxmOmF1dG9wb3QoKQ0KICAtLXNlbGY6Z2FwY2xvc2UoKQ0KICBzZWxmOml0ZW1zKCkNCiAgICAgICAgc2VsZjpjaGVja3RzKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOmF1dG9sZXZlbCgpIGVuZA0KICAgICAgICAgaWYgVklQX1VTRVIgdGhlbiBzZWxmOnNraW5oYWNrKCkgZW5kDQogICAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICl0aGVuDQogICBzZWxmOkp1bmdsZUNsZWFyKCkNCiAgZW5kDQogICBpZihzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5IGFuZCBzZWxmLkNvbmZpZy5jb21iby5sb2dpYyA9PSAxICl0aGVuDQogICAgc2VsZjpjb21ibzEoKQ0KICBlbmQNCiAgICBpZihzZWxmLkNvbmZpZy5LZXlzLmxhc3RoaXRrZXkgb3Igc2VsZi5Db25maWcuZmFybS5sYXN0aGl0LmF1dG9sYXN0aGl0ICl0aGVuDQogICAgICBzZWxmOkxhc3RIaXQoKQ0KICAgIGVuZA0KICBpZiBzZWxmLkNvbmZpZy5pbnN0cnVjdCB0aGVuDQogICAgc2VsZi5Db25maWcuaW5zdHJ1Y3QgPSBmYWxzZQ0KICAgIFBvcFVwMSA9IHRydWUNCiAgICAgIGVuZA0KICAgaWYoc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSBhbmQgc2VsZi5Db25maWcuY29tYm8ubG9naWMgPT0gMiApdGhlbg0KICAgIHNlbGY6Y29tYm8yKCkNCiAgZW5kDQogICAgIGlmKHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljID09IDMgKXRoZW4NCiAgICBzZWxmOmNvbWJvMygpDQogIGVuZA0KICAgIGlmKHNlbGYuQ29uZmlnLktleXMubGFuZWNsZWFya2V5ICl0aGVuDQogICAgc2VsZjpMYW5lQ2xlYXIoKQ0KICBlbmQNCiAgaWYoc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzICkgdGhlbg0KICAgIHNlbGY6a2lsbHN0ZWFsKCkNCiAgZW5kDQogIGlmKHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICApIHRoZW4NCiAgICBzZWxmOmhhcmFzcygpDQogIGVuZA0KICAgICAgaWYoc2VsZi5Db25maWcuS2V5cy5lc2NhcGVrZXkgKXRoZW4NCiAgICAgIHNlbGY6ZXNjYXBlKCkNCiAgICBlbmQNCiAgZW5kDQogICAgZnVuY3Rpb24gRGlhbmE6RHJhdygpDQogICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcucWRyYXcgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgNjAwLCAgc2VsZi5Db25maWcub3RoZXIud2lkdGguUXdpZHRoLEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLlFjb2xvcikpKQ0KICAgIGVuZA0KICANCiAgICBpZiBzZWxmLkNvbmZpZy5vdGhlci5kcmF3LndkcmF3IGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDcwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLld3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuV2NvbG9yKSkpDQogICAgZW5kDQogIA0KICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLmRyYXcuZWRyYXcgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgICBEcmF3Q2lyY2xlM0QobXlIZXJvLngsIG15SGVyby55LCBteUhlcm8ueiwgMTIwMCwgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLkV3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuRWNvbG9yKSkpDQogICAgZW5kDQogICAgDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5yZHJhdyBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICAgIERyYXdDaXJjbGUzRChteUhlcm8ueCwgbXlIZXJvLnksIG15SGVyby56LCA3MDAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlJ3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuUmNvbG9yKSkpDQogICAgZW5kDQogICAgaWYgc2VsZi5Db25maWcub3RoZXIuZHJhdy5hYWRyYXcgdGhlbg0KICAgICAgRHJhd0NpcmNsZTNEKG15SGVyby54LCBteUhlcm8ueSwgbXlIZXJvLnosIDUyNSwgc2VsZi5Db25maWcub3RoZXIud2lkdGguQUF3aWR0aCwgQVJHQih0YWJsZS51bnBhY2soc2VsZi5Db25maWcub3RoZXIuY29sb3IuQUFjb2xvcikpKQ0KICAgIGVuZA0KICAgICAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0IGFuZCBzZWxmLnNlbGVjdGVkVGFyIH49IG5pbCB0aGVuDQogICAgICAgICBEcmF3Q2lyY2xlM0Qoc2VsZi5zZWxlY3RlZFRhci54LCBzZWxmLnNlbGVjdGVkVGFyLnksIHNlbGYuc2VsZWN0ZWRUYXIueiwgODAsIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoLlNUd2lkdGgsIEFSR0IodGFibGUudW5wYWNrKHNlbGYuQ29uZmlnLm90aGVyLmNvbG9yLnRhcmdldHNlbGVjdCkpKQ0KZW5kDQogICAgaWYgUG9wVXAxIHRoZW4NCiAgICBsb2NhbCB3LCBoMSwgaDIgPSAoV0lORE9XX1cqMC41MCksIChXSU5ET1dfSCouMTUpLCAoV0lORE9XX0gqLjkpDQogICAgRHJhd0xpbmUodywgaDEvMS4wNSwgdywgaDIvMS45Nywgdy8xLjc1LCBBUkdCKDI1NSwgMCwgMCwgMCkpDQogICAgRHJhd0xpbmUodywgaDEsIHcsIGgyLzIsIHcvMS44LCBBUkdCKDE1MCwgMjM1LCAxODMsIDYzKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIldlbGNvbWUgdG8gS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIDMuMCIpLCBXSU5ET1dfSCouMDI4LCAoV0lORE9XX1cvMiksIChXSU5ET1dfSCouMTgpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSwiY2VudGVyIiwiY2VudGVyIikNCiAgIERyYXdUZXh0QSh0b3N0cmluZygiTGl0dGxlIGluZm9ybWF0YXRpb24gYWJvdXQgS2V5Ym9hcmRNYXN0ZXIgU2VyaWVzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4xOTQpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkl0cyBhIGJ1bmRsZSB0aGF0IHByb2R1Y2VkIGJ5IGVuc3VsdXluIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yMTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJDdXJyZW50bHkgaXQgc3VwcG9ydGVkIG9ubHkgbWlkIGNoYW1wcyAiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjIyNSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgZm9jdXMgUXVhbGl0eSByYXRoZXIgdGhhbiBRdWFudGl0eSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjQwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSSBuZWVkIHlvdXIgZmVlZGJhY2tzIHRvIGltcHJvdmUgaXQiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjI1NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkkgY2FyZSBldmVyeSBzaW5nbGUgZmVlZGJhY2sgYW5kIHRyeSB0byBhZGQgZXZlcnl0aGluZyIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMjcwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiSG9wZSB5b3UgYXJlIGVuam95IG15IHNjcmlwdC4uIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4yODUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgRHJhd1RleHRBKHRvc3RyaW5nKCJZb3UgY2FuIGNoYW5nZSBldmVyeSBzZXR0aW5ncyB0byB5b3VyIGxpa2UgOikiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjMwMCksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIkRpZCB5b3UgbGlrZSBteSBzY3JpcHQgPiBVcHZvdGUgbWUgb24gc2NyaXB0c3RhdHVzIGFuZCBvbiBmb3J1bSIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzE1KSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiRG9uJ3QgZm9yZ2V0IHRoZXNlIGFyZSBWSVA7IiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zMzApLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQW50aS1BZmsiKSwgV0lORE9XX0gqLjAxNSwgKFdJTkRPV19XLzIuNjUpLCAoV0lORE9XX0gqLjM0NSksIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgQXV0byBMZXZlbGVyICIpLCBXSU5ET1dfSCouMDE1LCAoV0lORE9XX1cvMi42NSksIChXSU5ET1dfSCouMzYwKSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICBTa2luIENoYW5nZXIgIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zNzUpLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpDQogICAgbG9jYWwgdywgaDEsIGgyID0gKFdJTkRPV19XKjAuNDkpLCAoV0lORE9XX0gqLjcwKSwgKFdJTkRPV19IKi43NSkNCiAgICBEcmF3TGluZSh3LCBoMS8xLjc3NSwgdywgaDIvMS42OCwgdyouMTEsIEFSR0IoMjU1LCAwLCAwLCAwKSkNCiAgICBEcmF3UmVjdGFuZ2xlQnV0dG9uKFdJTkRPV19XKjAuNDY3LCBXSU5ET1dfSC8yLjM3NSwgV0lORE9XX1cqLjA0NywgV0lORE9XX0gqLjA0MSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiT0siKSwgV0lORE9XX0gqLjAyLCAoV0lORE9XX1cvMikqLjk4LCAoV0lORE9XX0gvMi4zNzUpLCBBUkdCKDI1NSwgMCwgMCwgMCApLCJjZW50ZXIiLCJjZW50ZXIiKQ0KICAgIERyYXdUZXh0QSh0b3N0cmluZygiICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDcmVkaXRzIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi4zOTUpLCBBUkdCKDI1NSwgOTYsIDQ4LCAwKSkNCiAgICBEcmF3VGV4dEEodG9zdHJpbmcoIiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZ1cnJ5LSBGb3IgdGhpcyBhd2Vzb21lIHBvcHVwIiksIFdJTkRPV19IKi4wMTUsIChXSU5ET1dfVy8yLjY1KSwgKFdJTkRPV19IKi40MTApLCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpIA0KICBlbmQNCiAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhHZXRFbmVteUhlcm9lcygpKSBkbw0KICAgIGlmIFZhbGlkVGFyZ2V0KHRhcmdldCwgMTUwMDApIHRoZW4NCiAgaWYgc2VsZi5Db25maWcub3RoZXIudGFyZ2V0Y2FsIGFuZCBub3QgbXlIZXJvLmRlYWQgdGhlbg0KICAgICAgICBsb2NhbCBkcmF3cG9zPVdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModGFyZ2V0LngsIHRhcmdldC55LCB0YXJnZXQueikpDQogICAgICAgIGxvY2FsIGNvbWJvVGV4dCxjb2xvciA9IHNlbGY6R2V0RHJhd3ModGFyZ2V0KQ0KICAgICAgICBpZiBjb21ib1RleHQgdGhlbg0KICAgICAgICAgIERyYXdUZXh0KGNvbWJvVGV4dCwxNSxkcmF3cG9zLngtMjAsZHJhd3Bvcy55LTIwLGNvbG9yKQ0KICAgICAgICBlbmQgDQogICAgICBlbmQgDQogICAgICBlbmQNCiAgICAgIGVuZA0KICAgICAgICAgIGZvciBfLCB0YXJnZXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBpZiBWYWxpZFRhcmdldCh0YXJnZXQsIDE1MDAwKSB0aGVuDQogICAgICBpZiB0YXJnZXQudmlzaWJsZSBhbmQgbm90IHRhcmdldC5kZWFkIGFuZCBzZWxmLkNvbmZpZy5vdGhlci5kYW1hZ2UgdGhlbg0KICAgICAgICBjdXJyTGluZSA9IDENCiAgICAgICAgRHJhd0xpbmVIUEJhcjIoc2VsZjpHZXRNeURtZyh0YXJnZXQpLCIiLCAgdGFyZ2V0LCBjdXJyTGluZSkNCiAgICAgICAgRHJhd0xpbmVIUEJhcihzZWxmOkdldE15RG1nKHRhcmdldCksICJEYW1hZ2UgIiAuLiBtYXRoLnJvdW5kKHNlbGY6R2V0TXlEbWcodGFyZ2V0KSksdGFyZ2V0LGN1cnJMaW5lKQ0KICAgICAgICBjdXJyTGluZSA9IGN1cnJMaW5lICsgMQ0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KICAgICAgZW5kDQogICAgICBmdW5jdGlvbiBEaWFuYTpraWxsc3RlYWwoKQ0KZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICBsb2NhbCBoZWFsdGggPSB1bml0LmhlYWx0aA0KICAgICAgbG9jYWwgZG1nUSA9IHNlbGY6R2V0UURtZyh1bml0KQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0IH49IG5pbCBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgaGVhbHRoPGRtZ1EgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC51c2VRIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwua3MgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICAgICBsb2NhbCBkbWdXID0gc2VsZjpHZXRXRG1nKHVuaXQpDQogICAgICBpZihzZWxmLnRzdy50YXJnZXQgfj0gbmlsIGFuZCAgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBoZWFsdGg8ZG1nVyBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZVcgICBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh1bml0KSAgDQogICAgICBlbmQNCiAgICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBpZihoZWFsdGg8ZG1nSSBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmtpbGxzdGVhbC5rcyBhbmQgR2V0RGlzdGFuY2UodW5pdCk8NjAwKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0SSh1bml0KQ0KICAgICAgZW5kDQogICAgICBsb2NhbCBkbWdSID1zZWxmOkdldFJEbWcodW5pdCkNCiAgICAgIGlmKHNlbGYudHNyLnRhcmdldCB+PSBuaWwgYW5kICBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIGhlYWx0aDxkbWdSIGFuZCBzZWxmLkNvbmZpZy5raWxsc3RlYWwudXNlUiBhbmQgc2VsZi5Db25maWcua2lsbHN0ZWFsLmtzIGFuZCBHZXREaXN0YW5jZSh1bml0KTw1NTApdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHVuaXQpDQogICAgICBlbmQNCiAgIGVuZA0KZW5kDQogICAgICAgICAgZnVuY3Rpb24gRGlhbmE6d3JpdGVjZmcocGFyYW0pDQogICAgICAgIGxvY2FsIGZpbGUgPSBpby5vcGVuKFNDUklQVF9QQVRILi4iXFwiLi4iY29uZmlnLmNmZyIsICJ3IikNCiAgICAgICAgaWYgbm90IGZpbGUgdGhlbg0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIkVycm9yIGluIFdyaXRlIENGRyIpDQogICAgICAgIGVuZA0KICAgICAgICBpZiBwYXJhbSB+PSAiZnRjIiB0aGVuDQogICAgICAgICAgICAgICAgZmlsZTp3cml0ZShhdmFfbGFuZ3VhZ2VzW3NlbGYuQ29uZmlnLmxhbmddKQ0KICAgICAgICAgICAgICAgLS0gcHJpbnQoIldyaXR0ZW46ICIuLmF2YV9sYW5ndWFnZXNbc2VsZi5Db25maWcubGFuZ10pDQogICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICBmaWxlOndyaXRlKCJlbmciKQ0KICAgICAgICAgICAgICAtLSAgcHJpbnQoIlc6IEVuZ2xpc2giKQ0KICAgICAgICBlbmQNCiAgICAgICAgZmlsZTpjbG9zZSgpDQplbmQNCmZ1bmN0aW9uIERpYW5hOlByb2Nlc3NTcGVsbCh1bml0LCBzcGVsbCkNCiAtLVtbIGlmIHNwZWxsLm5hbWUgPT0gImF0dGFjayIgIHRoZW4NCiAgICAgaWYgdW5pdCBhbmQgdW5pdC50eXBlID09IG15SGVyby50eXBlIGFuZCB1bml0LnRlYW0gfj0gbXlIZXJvLnRlYW0gYW5kIHNwZWxsIGFuZCBzcGVsbC50YXJnZXQgYW5kIHNwZWxsLnRhcmdldCB+PSBuaWwgYW5kIHNwZWxsLnRhcmdldC5pc01lIHRoZW4NCiBpZiAoc2VsZi5Db25maWcuc2tpbGxsb2dpYy5XbG9naWMudXNlVyBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLnRzdy50YXJnZXR+PW5pbCkgdGhlbg0Kc2VsZjpDYXN0Vyh1bml0KQ0KICAgICAgICBlbmQNCiAgICAgZW5kDQogIGVuZF1dDQppZiBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgc3BlbGwgPSBJbnRlcnJ1cHRbdW5pdC5jaGFyTmFtZV0uc3RvcFtzcGVsbC5uYW1lXQ0KICAgICAgICBpZiBzcGVsbCB+PSBuaWwgdGhlbg0KICAgICAgICAgICAgaWYgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHRbc3BlbGwubmFtZV0gdGhlbg0KICAgICAgICAgICAgICAgIGlmIFZhbGlkVGFyZ2V0KHVuaXQpIGFuZCBHZXREaXN0YW5jZSh1bml0KSA8IHNlbGYuRVNwZWxsLlJhbmdlICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpICBhbmQgc2VsZi5Db25maWcubWlzYy5pbnRlcnJ1cHQuciB0aGVuDQogICAgICAgICAgICAgICAgICAgIHNlbGY6Q2FzdEUodW5pdCkNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICBlbmQNCmVuZA0KICAgICAgDQogICAgICAgIGZ1bmN0aW9uIERpYW5hOmNoZWNrdHMoKQ0KICAgICAgIHNlbGYudHM6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzZTp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNxOnVwZGF0ZSgpDQogICAgICAgc2VsZi50c3I6dXBkYXRlKCkNCiAgICAgICBzZWxmLnRzdzp1cGRhdGUoKQ0KICAgICAgIHNlbGYudHNnOnVwZGF0ZSgpDQppZiBub3Qgc2VsZi50c2cudGFyZ2V0fj1uaWwgb3Igbm90IHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuDQp0YXJnZXQgPSBzZWxmLnRzLnRhcmdldA0KZWxzZWlmIHNlbGYudHNnLnRhcmdldH49bmlsIG9yIHNlbGYuc2VsZWN0ZWRUYXIgdGhlbg0KdGFyZ2V0ID0gc2VsZi5zZWxlY3RlZFRhcg0KZW5kDQplbmQNCiAgICBmdW5jdGlvbiBEaWFuYTp3YWxrKCkNCiAgICBteUhlcm86TW92ZVRvKG1vdXNlUG9zLngsbW91c2VQb3MueikNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOmVzY2FwZSgpDQogIGlmIHNlbGYuQ29uZmlnLktleXMuZXNjYXBla2V5ICB0aGVuIA0KICBzZWxmOndhbGsoKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOmhhcmFzcygpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0USh0YXJnZXQpDQogICBlbmQNCiAgICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5oYXJhc3MudXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuaGFyYXNza2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICBlbmQNCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmhhcmFzcy51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5oYXJhc3NrZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RFKHRhcmdldCkNCiAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBEaWFuYTphdXRvcSgpDQogICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuS2V5cy5hdXRvcSBhbmQgIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBEaWFuYTpDYXN0USh1bml0KQ0KICBzZWxmLlFTcGVsbDpDYXN0KHVuaXQpDQplbmQNCg0KZnVuY3Rpb24gRGlhbmE6Q2FzdFcodW5pdCkNCiAgc2VsZi5XU3BlbGw6Q2FzdCh1bml0KQ0KZW5kDQoNCmZ1bmN0aW9uIERpYW5hOkNhc3RFKHVuaXQpDQogIHNlbGYuRVNwZWxsOkNhc3QodW5pdCkNCmVuZA0KDQpmdW5jdGlvbiBEaWFuYTpDYXN0Uih1bml0KQ0KICBzZWxmLlJTcGVsbDpDYXN0KHVuaXQpDQplbmQNCmZ1bmN0aW9uIERpYW5hOkNhc3RJKHVuaXQpDQogIHNlbGYuSWduaXRlOkNhc3QodW5pdCkNCmVuZA0KZnVuY3Rpb24gRGlhbmE6R2V0UURtZyh0YXJnZXQpDQogICAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQNCiAgaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoMjUgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUSkubGV2ZWwgKiAzNSkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqLjcpDQogIHJldHVybiBteUhlcm86Q2FsY01hZ2ljRGFtYWdlKHRhcmdldCwgRmluYWxEYW1hZ2UpDQogIGVsc2UNCiAgICByZXR1cm4gMA0KICBlbmQNCiAgZW5kDQpmdW5jdGlvbiBEaWFuYTpHZXRXRG1nKHRhcmdldCkNCiAgaWYgbXlIZXJvOkdldFNwZWxsRGF0YShfVykubGV2ZWwgPCAxIHRoZW4NCiAgICByZXR1cm4gMA0KICBlbmQgDQogICBpZiBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICBsb2NhbCBGaW5hbERhbWFnZSA9IDMqKDEwICsgKG15SGVybzpHZXRTcGVsbERhdGEoX1cpLmxldmVsICogMTIpICsgKG15SGVyby5hcCArIChteUhlcm8uYXAgKiBteUhlcm8uYXBQZXJjZW50KSApKiAuMikNCiAgcmV0dXJuIG15SGVybzpDYWxjTWFnaWNEYW1hZ2UodGFyZ2V0LCBGaW5hbERhbWFnZSkNCiAgZWxzZQ0KICAgIHJldHVybiAwDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBEaWFuYTpHZXRSRG1nKHRhcmdldCkNCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKF9SKS5sZXZlbCA8IDEgdGhlbg0KICAgIHJldHVybiAwDQogIGVuZA0KICAgaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgbG9jYWwgRmluYWxEYW1hZ2UgPSAoNDAgKyAobXlIZXJvOkdldFNwZWxsRGF0YShfUikubGV2ZWwgKiA2MCkgKyAobXlIZXJvLmFwICsgKG15SGVyby5hcCAqIG15SGVyby5hcFBlcmNlbnQpICkqIC42KQ0KICByZXR1cm4gbXlIZXJvOkNhbGNNYWdpY0RhbWFnZSh0YXJnZXQsIEZpbmFsRGFtYWdlKQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOmF1dG96aG9ueWEoKQ0KICAgIGlmIHNlbGYuQ29uZmlnLml0ZW0uZW5hYmxlYXV0b3pob255YSB0aGVuDQogICAgIGZvciBfID0gSVRFTV8xLCBJVEVNXzcgZG8NCiAgICAgIGlmIG15SGVyby5oZWFsdGggPD0gKG15SGVyby5tYXhIZWFsdGggKiBzZWxmLkNvbmZpZy5pdGVtLmF1dG96aG9ueWEgLyAxMDApIGFuZCAoIG15SGVybzpDYW5Vc2VTcGVsbChfKSA9PSAwIGFuZCBteUhlcm86R2V0U3BlbGxEYXRhKF8pLm5hbWUgPT0gIlpob255YXNIb3VyZ2xhc3MiICl0aGVuIENhc3RTcGVsbChfKQ0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOml0ZW1zKCkNCiAgaWYgc2VsZi5Db25maWcuaXRlbS51c2ViZyBhbmQgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSB0aGVuDQogICBmb3IgXyA9IElURU1fMSwgSVRFTV83IGRvDQogICAgaWYgKCBteUhlcm86Q2FuVXNlU3BlbGwoXykgPT0gMCBhbmQgbXlIZXJvOkdldFNwZWxsRGF0YShfKS5uYW1lID09ICJCaWxnZXdhdGVyQ3V0bGFzcyIgKXRoZW4gQ2FzdFNwZWxsKF8pDQogIGVuZA0KICBlbmQNCiAgZW5kDQogIGlmIHNlbGYuQ29uZmlnLml0ZW0udXNlaGcgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgdGhlbg0KICAgZm9yIF8gPSBJVEVNXzEsIElURU1fNyBkbw0KICAgIGlmICggbXlIZXJvOkNhblVzZVNwZWxsKF8pID09IDAgYW5kIG15SGVybzpHZXRTcGVsbERhdGEoXykubmFtZSA9PSAiSGV4dGVjaEd1bmJsYWRlIiApdGhlbiBDYXN0U3BlbGwoXykNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogICAgICAgIGZ1bmN0aW9uIERpYW5hOkFudGlhZmsoKQ0KICBpZiBvcy5jbG9jaygpIDwgQ2xvY2sgb3Igbm90IHNlbGYuQ29uZmlnLnZpcC5hbnRpYWZrLmFudGlhZmsgdGhlbiByZXR1cm4gZW5kDQogIENsb2NrID0gb3MuY2xvY2soKSArIG1hdGgucmFuZG9tKDYwLDEyMCkNCiAgbXlIZXJvOk1vdmVUbyhteUhlcm8ueCwgbXlIZXJvLnopDQplbmQNCiAgICAgIGZ1bmN0aW9uIERpYW5hOmF1dG9wb3QoKQ0KIGlmIG9zLmNsb2NrKCkgLSBsYXN0UG90aW9uIDwgMTUgdGhlbiByZXR1cm4gZW5kDQogIGZvciBTTE9UID0gSVRFTV8xLCBJVEVNXzYgZG8NCiAgICBpZiBteUhlcm86R2V0U3BlbGxEYXRhKFNMT1QpLm5hbWUgPT0gIlJlZ2VuZXJhdGlvblBvdGlvbiIgYW5kIHNlbGYuQ29uZmlnLml0ZW0uYXV0b3BvdC5lbmFibGVhdXRvcG90aHAgdGhlbg0KICAgICAgaWYgbXlIZXJvOkNhblVzZVNwZWxsKFNMT1QpID09IFJFQURZIGFuZCAobXlIZXJvLmhlYWx0aCAvIG15SGVyby5tYXhIZWFsdGggPCBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3QuYXV0b3BvdGhwIC8xMDAgKSAgdGhlbg0KICAgICAgICBDYXN0U3BlbGwoU0xPVCkgDQogICAgICAgIGxhc3RQb3Rpb24gPSBvcy5jbG9jaygpICAgICAgIA0KICAgICAgZW5kDQogICAgZW5kDQogIGVuZA0KZW5kDQpmdW5jdGlvbiBEaWFuYTpMb2FkTWVudSgpDQogICAgICBzZWxmLkNvbmZpZz1zY3JpcHRDb25maWcoIiIuLlNjcmlwdG5hbWUuLiIgWyIgLi4gbXlIZXJvLmNoYXJOYW1lLi4iXSIgLCJtZW51IikNCg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzFdLCAiY29tYm8iKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzJdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bM10sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuY29tYm86YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3Nlbls0XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgidXNlUiIsIGxvY19jaG9vc2VuWzVdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJ1c2VJIiwgbG9jX2Nob29zZW5bNl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJNYW5hIixsb2NfY2hvb3Nlbls4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDEwLCAxMCwgMTAwLCAwKQ0KICAgICAgLS1zZWxmLkNvbmZpZy5jb21ibzphZGRQYXJhbSgibG9naWNnYXAiLCAiVXNlIFFSIHRvIGdhcGNsb3NlIiwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHsiT25seSBpZiB0YXJnZXQgS2lsbGFibGUiLCAiQWx3YXlzIiAsICJOZXZlciIgfSkNCiAgICAgIHNlbGYuQ29uZmlnLmNvbWJvOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzddLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzEzOV0sIGxvY19jaG9vc2VuWzE0MF0gLCBsb2NfY2hvb3NlblsxNDFdIH0pDQogICAgIA0KICAgICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bOV0sICJoYXJhc3MiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZVEiLCBsb2NfY2hvb3NlblsxMF0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuaGFyYXNzOmFkZFBhcmFtKCJ1c2VXIiwgbG9jX2Nob29zZW5bMTFdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5oYXJhc3M6YWRkUGFyYW0oInVzZUUiLCBsb2NfY2hvb3NlblsxMl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmhhcmFzczphZGRQYXJhbSgiTWFuYSIsbG9jX2Nob29zZW5bOF0sU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMTAsIDEwMCwgMCkNCiAgICAgIA0KICAgICAgDQogICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxNF0sICJmYXJtIikNCiAgICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTVdLCJsYW5lY2xlYXIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgidXNlUSIsbG9jX2Nob29zZW5bMTZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgicWNvdW50Iixsb2NfY2hvb3NlblsxODBdLFNDUklQVF9QQVJBTV9TTElDRSwgMiwgMSwgMTAsIDApDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ1c2VXIixsb2NfY2hvb3NlblsxN10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJ3Y291bnQiLGxvY19jaG9vc2VuWzE4MV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAyLCAxLCAxMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhcjphZGRQYXJhbSgiUU1hbmEiLGxvY19jaG9vc2VuWzE4NV0sU0NSSVBUX1BBUkFNX1NMSUNFLCAzMCwgMTAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXI6YWRkUGFyYW0oIldNYW5hIixsb2NfY2hvb3NlblsxODZdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICAgIA0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMjBdLCJqdW5nbGVjbGVhciIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzIxXSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgidXNlVyIsbG9jX2Nob29zZW5bMjJdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJ1c2VFIixsb2NfY2hvb3NlblsyM10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oInVzZVIiLGxvY19jaG9vc2VuWzI0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhcjphZGRQYXJhbSgiYmxhbmsiLCAiIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXI6YWRkUGFyYW0oImJsYW5rIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJRTWFuYSIsbG9jX2Nob29zZW5bMTg1XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJXTWFuYSIsbG9jX2Nob29zZW5bMTg2XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJFTWFuYSIsbG9jX2Nob29zZW5bMTg3XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmp1bmdsZWNsZWFyOmFkZFBhcmFtKCJSTWFuYSIsbG9jX2Nob29zZW5bMTg4XSxTQ1JJUFRfUEFSQU1fU0xJQ0UsIDMwLCAxMCwgMTAwLCAwKQ0KICAgICAgICANCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm06YWRkU3ViTWVudShsb2NfY2hvb3NlblsyNV0sImxhc3RoaXQiKQ0KICAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJhdXRvbGFzdGhpdCIsbG9jX2Nob29zZW5bMTg5XSxTQ1JJUFRfUEFSQU1fT05PRkYsZmFsc2UpDQogICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oInVzZVEiLGxvY19jaG9vc2VuWzI2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgIHNlbGYuQ29uZmlnLmZhcm0ubGFzdGhpdDphZGRQYXJhbSgibGFzdGhpdGxvZ2ljIixsb2NfY2hvb3NlblsxOTFdLCBTQ1JJUFRfUEFSQU1fTElTVCwgMSwge2xvY19jaG9vc2VuWzE3Ml0sbG9jX2Nob29zZW5bMTkwXSxsb2NfY2hvb3NlblsxNzRdfSkNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJibGFuayIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0OmFkZFBhcmFtKCJpbmZvMiIsIGxvY19jaG9vc2VuWzE4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQ6YWRkUGFyYW0oIlFNYW5hIixsb2NfY2hvb3NlblsxODVdLFNDUklQVF9QQVJBTV9TTElDRSwgMzAsIDEwLCAxMDAsIDApDQogICAgICANCiAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMzVdLCAia2lsbHN0ZWFsIikNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgia3MiLGxvY19jaG9vc2VuWzM2XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmtpbGxzdGVhbDphZGRQYXJhbSgidXNlUSIsIGxvY19jaG9vc2VuWzM3XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQ0KICAgICAgc2VsZi5Db25maWcua2lsbHN0ZWFsOmFkZFBhcmFtKCJ1c2VSIiwgbG9jX2Nob29zZW5bNDBdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBzZWxmLkNvbmZpZy5raWxsc3RlYWw6YWRkUGFyYW0oInVzZUkiLCBsb2NfY2hvb3Nlbls0MV0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIA0KICAgIC0tW1sgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIkVzY2FwZSBTZXR0aW5ncyIsImVzY2FwZSIpDQogICAgICBzZWxmLkNvbmZpZy5lc2NhcGU6YWRkUGFyYW0oInVzZVIiLCJVc2UgUiBNaW5pb24gVG8gRXNjYXBlIixTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgIHNlbGYuQ29uZmlnLmVzY2FwZTphZGRQYXJhbSgidXNlUVIiLCJVc2UgUVIgTWluaW9uIFRvIEVzY2FwZSIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpXV0NCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls0Ml0sICJpdGVtIikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5Ml0sICJhdXRvcG90IikNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbS5hdXRvcG90OmFkZFBhcmFtKCJlbmFibGVhdXRvcG90aHAiLCBsb2NfY2hvb3NlblsxOTNdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtLmF1dG9wb3Q6YWRkUGFyYW0oImF1dG9wb3RocCIsIGxvY19jaG9vc2VuWzE5NF0sIFNDUklQVF9QQVJBTV9TTElDRSwgMTAsIDAsIDEwMCwgMCkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiZW5hYmxlYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQzXSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgiYXV0b3pob255YSIsIGxvY19jaG9vc2VuWzQ0XSwgU0NSSVBUX1BBUkFNX1NMSUNFLCAxMCwgMCwgMTAwLCAwKQ0KICAgICAgICBzZWxmLkNvbmZpZy5pdGVtOmFkZFBhcmFtKCJ1c2VoZyIsIGxvY19jaG9vc2VuWzQ1XSwgU0NSSVBUX1BBUkFNX09OT0ZGLCBmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcuaXRlbTphZGRQYXJhbSgidXNlYmciLCBsb2NfY2hvb3Nlbls0Nl0sIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpDQogICAgICANCiAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzkyXSwgIm1pc2MiKQ0KICAgICAgc2VsZi5Db25maWcubWlzYzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzkzXSwgImludGVycnVwdCIpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKCJyIiwgbG9jX2Nob29zZW5bOTZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm1pc2MuaW50ZXJydXB0OmFkZFBhcmFtKCJpbmZvMyIsIGxvY19jaG9vc2VuWzk4XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIGZvciBpLCBhIGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICAgICAgICBpZiBJbnRlcnJ1cHRbYS5jaGFyTmFtZV0gfj0gbmlsIHRoZW4NCiAgICAgICAgICAgICAgICBmb3IgaSwgc3BlbGwgaW4gcGFpcnMoSW50ZXJydXB0W2EuY2hhck5hbWVdLnN0b3ApIGRvDQogICAgICAgICAgICAgICAgICAgICBzZWxmLkNvbmZpZy5taXNjLmludGVycnVwdDphZGRQYXJhbShzcGVsbC5zcGVsbE5hbWUsIGEuY2hhck5hbWUuLiIgLSAiLi5zcGVsbC5uYW1lLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgIA0KICAgICAgICBlbmQNCiAgICAgIA0KICAgICAgc2VsZi5Db25maWcubWlzYzphZGRQYXJhbSgiZW1heCIsIGxvY19jaG9vc2VuWzE0Ml0sIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkNCiAgICAgIC0tc2VsZi5Db25maWcubWlzYzphZGRQYXJhbSgidXNlVyIsICJBdXRvIFcgc2tpbGwgaWYgZW5lbXkgYXR0YWNrcy4iLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpDQogICAgICBDbG9jayA9IG9zLmNsb2NrKCkNCiAgICAgICAgaWYgVklQX1VTRVIgdGhlbg0KICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzQ3XSwgInZpcCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRQYXJhbSgicGFja2V0Iixsb2NfY2hvb3Nlbls0OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8xIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXA6YWRkUGFyYW0oImluZm8yIiwgbG9jX2Nob29zZW5bNDldLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNTBdLCAibGV2ZWwiKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAubGV2ZWw6YWRkUGFyYW0oImtleSIsbG9jX2Nob29zZW5bNTFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmxldmVsOmFkZFBhcmFtKCJsb2dpYyIsIGxvY19jaG9vc2VuWzUyXSwgU0NSSVBUX1BBUkFNX0xJU1QsIDcsIHtsb2NfY2hvb3Nlbls1OF0sIGxvY19jaG9vc2VuWzU5XSxsb2NfY2hvb3Nlbls2MF0sbG9jX2Nob29zZW5bNjFdLGxvY19jaG9vc2VuWzYyXSwgbG9jX2Nob29zZW5bNjNdLCBsb2NfY2hvb3Nlbls2NF0gIH0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzUzXSwgInNraW4iKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgia2V5Iixsb2NfY2hvb3Nlbls1NF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgICAgICBzZWxmLkNvbmZpZy52aXAuc2tpbjphZGRQYXJhbSgnc2VsZWN0ZWQnIC4uIG15SGVyby5jaGFyTmFtZSAuLiAnU2tpbicsIGxvY19jaG9vc2VuWzU3XSwgU0NSSVBUX1BBUkFNX0xJU1QsIDEsIHNraW5NZXRhW215SGVyby5jaGFyTmFtZV0pDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcC5za2luOmFkZFBhcmFtKCJpbmZvNSIsIGxvY19jaG9vc2VuWzU1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIC0tc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNSIsICJTa2luIEhhY2sgdGVtcG9yYXJ5IGRpc2FibGVkIHVudGlsIG5leHQgdXBkYXRlLiAuIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgIHNlbGYuQ29uZmlnLnZpcDphZGRTdWJNZW51KGxvY19jaG9vc2VuWzE5NV0sICJhbnRpYWZrIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwLmFudGlhZms6YWRkUGFyYW0oImFudGlhZmsiLGxvY19jaG9vc2VuWzE5Nl0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKSANCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvMyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICAgc2VsZi5Db25maWcudmlwOmFkZFBhcmFtKCJpbmZvNCIsIGxvY19jaG9vc2VuWzU2XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgZW5kDQogICAgICAgICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KGxvY19jaG9vc2VuWzY1XSwib3RoZXIiKQ0KICAgICAgICAtLXNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUoIlNob3cgRGFtYWdlIE9uIEhwIEJhciIsICJIUEJBUiIpDQogICAgICAgIC0tc2VsZi5Db25maWcub3RoZXIuSFBCQVI6YWRkUGFyYW0oImtleSIsIk9OL09GRiIsU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNjZdLCAiZHJhdyIpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInFkcmF3Iixsb2NfY2hvb3Nlbls2N10sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oIndkcmF3Iixsb2NfY2hvb3Nlbls2OF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImVkcmF3Iixsb2NfY2hvb3Nlbls2OV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oInJkcmF3Iixsb2NfY2hvb3Nlbls3MF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLmRyYXc6YWRkUGFyYW0oImFhZHJhdyIsbG9jX2Nob29zZW5bNzFdLFNDUklQVF9QQVJBTV9PTk9GRixmYWxzZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsxOThdLCAiY29sb3IiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUWNvbG9yIiwgbG9jX2Nob29zZW5bMTk5XSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiV2NvbG9yIiwgbG9jX2Nob29zZW5bMjAwXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiRWNvbG9yIiwgbG9jX2Nob29zZW5bMjAxXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiUmNvbG9yIiwgbG9jX2Nob29zZW5bMjAyXSwgU0NSSVBUX1BBUkFNX0NPTE9SLHsyNTUsIDI1NSwgMjU1LCAyNTV9KQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci5jb2xvcjphZGRQYXJhbSgiQUFjb2xvciIsIGxvY19jaG9vc2VuWzIwNF0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIuY29sb3I6YWRkUGFyYW0oInRhcmdldHNlbGVjdCIsIGxvY19jaG9vc2VuWzIwNV0sIFNDUklQVF9QQVJBTV9DT0xPUix7MjU1LCAyNTUsMCwwfSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkU3ViTWVudShsb2NfY2hvb3NlblsyMDZdLCAid2lkdGgiKQ0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiUXdpZHRoIiwgbG9jX2Nob29zZW5bMjEwXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiV3dpZHRoIiwgbG9jX2Nob29zZW5bMjExXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiRXdpZHRoIiwgbG9jX2Nob29zZW5bMjEyXSwgNCwgMiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlci53aWR0aDphZGRQYXJhbSgiUndpZHRoIiwgbG9jX2Nob29zZW5bMjEzXSwgNCwgMiwgMSwgMTAsIDApICANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIud2lkdGg6YWRkUGFyYW0oIkFBd2lkdGgiLCBsb2NfY2hvb3NlblsyMDldLCA0LCAyLCAxLCAxMCwgMCkgDQogICAgICAgIHNlbGYuQ29uZmlnLm90aGVyLndpZHRoOmFkZFBhcmFtKCJTVHdpZHRoIiwgbG9jX2Nob29zZW5bMjA4XSwgNCwgNiwgMSwgMTAsIDApIA0KICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRQYXJhbSgidGFyZ2V0Iixsb2NfY2hvb3Nlbls3NV0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpICANCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oImRhbWFnZSIsbG9jX2Nob29zZW5bMjE0XSxTQ1JJUFRfUEFSQU1fT05PRkYsdHJ1ZSkNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXI6YWRkUGFyYW0oInRhcmdldGNhbCIsbG9jX2Nob29zZW5bNzZdLFNDUklQVF9QQVJBTV9PTk9GRix0cnVlKSANCiAgICAgICAgICAgICAgICAgICAgICBzZWxmLkNvbmZpZy5vdGhlcjphZGRTdWJNZW51KGxvY19jaG9vc2VuWzczXSwgInBlcm1hIikNCiAgICAgICAgc2VsZi5Db25maWcub3RoZXIucGVybWE6YWRkUGFyYW0oInBlcm1hIixsb2NfY2hvb3Nlbls3NF0sU0NSSVBUX1BBUkFNX09OT0ZGLHRydWUpDQogICAgICANCiAgICAgICAgc2VsZi5Db25maWc6YWRkU3ViTWVudShsb2NfY2hvb3Nlbls3N10sInRhcmdldHNlbCIpDQogICAgICAgIHNlbGYuQ29uZmlnLnRhcmdldHNlbDphZGRQYXJhbSgiaW5mb0syIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oImluZm9LIiwgIiIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgICBzZWxmLkNvbmZpZy50YXJnZXRzZWw6YWRkUGFyYW0oInRzIixsb2NfY2hvb3Nlbls3OF0sU0NSSVBUX1BBUkFNX09OT0ZGLGZhbHNlKQ0KICAgIHNlbGYudHMubmFtZSAgPSAiRGlhbmEiDQogICAgc2VsZi5Db25maWcudGFyZ2V0c2VsOmFkZFRTKHNlbGYudHMpDQogICAgDQogICAgICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bNzldLCAiS2V5cyIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaW5mb0szIiwgbG9jX2Nob29zZW5bODBdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJjb21ib2tleSIsIGxvY19jaG9vc2VuWzgxXSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDMyKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNCIsIGxvY19jaG9vc2VuWzgyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiaGFyYXNza2V5IiwgbG9jX2Nob29zZW5bODNdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIkMiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJhdXRvcSIsIGxvY19jaG9vc2VuWzkxXSwgU0NSSVBUX1BBUkFNX09OS0VZVE9HR0xFLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlQiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzUiLCBsb2NfY2hvb3Nlbls4NF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhbmVjbGVhcmtleSIsIGxvY19jaG9vc2VuWzg1XSwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIHN0cmluZy5ieXRlKCJWIikpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgianVuZ2xlY2xlYXJrZXkiLCBsb2NfY2hvb3Nlbls4Nl0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiViIpKQ0KICAgICAgICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLGxvY19jaG9vc2VuWzIxNV0sIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBzdHJpbmcuYnl0ZSgiWCIpKQ0KICAgIHNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImluZm9LNiIsIGxvY19jaG9vc2VuWzg3XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgc2VsZi5Db25maWcuS2V5czphZGRQYXJhbSgiZXNjYXBla2V5IiwgbG9jX2Nob29zZW5bODhdLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlkiKSkNCiAgICAtLXNlbGYuQ29uZmlnLktleXM6YWRkUGFyYW0oImxhc3RoaXRrZXkiLCAiTGFzdGhpdCBLZXkiLCBTQ1JJUFRfUEFSQU1fT05LRVlET1dOLCBmYWxzZSwgc3RyaW5nLmJ5dGUoIlgiKSkNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSyIsICIiLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICBzZWxmLkNvbmZpZy5LZXlzOmFkZFBhcmFtKCJpbmZvSzIiLCBsb2NfY2hvb3Nlbls4OV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUobG9jX2Nob29zZW5bMTEwXSwgIktleXMyIikNCiAgICANCiAgICBPcmJ3YWxrTWFuYWdlcjpMb2FkQ29tbW9uS2V5cyhzZWxmLkNvbmZpZy5LZXlzMikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgibGFuZyIsIGxvY19jaG9vc2VuWzE2NV0sIFNDUklQVF9QQVJBTV9MSVNULCAxLCB7bG9jX2Nob29zZW5bMTY2XSwgbG9jX2Nob29zZW5bMTY3XSxsb2NfY2hvb3NlblsxNjhdfSkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5zdHJ1Y3QiLCBsb2NfY2hvb3NlblsyMTZdLCBTQ1JJUFRfUEFSQU1fT05PRkYsIGZhbHNlKQ0KICAgICAgICAgICAgDQogICAgIGlmIHNlbGYuQ29uZmlnLm90aGVyLnBlcm1hLnBlcm1hIHRoZW4NCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHNlbGYuQ29uZmlnOnBlcm1hU2hvdygiaW5mb2JveCIpIGVuZCwgMSkNCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpc2VsZi5Db25maWcuS2V5czpwZXJtYVNob3coImNvbWJva2V5IikgZW5kLCAxLjIpDQogICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKClzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiaGFyYXNza2V5IikgZW5kLCAxLjIpDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBzZWxmLkNvbmZpZy5LZXlzOnBlcm1hU2hvdygiYXV0b3EiKSBlbmQsIDEuMikNCiAgZW5kDQplbmQNCi0tW1tmdW5jdGlvbiBEaWFuYTpnYXBjbG9zZSgpDQpsb2NhbCBRZG1nPWdldERtZygiUSIsdGFyZ2V0LG15SGVybykNCmxvY2FsIFdkbWc9Z2V0RG1nKCJXIix0YXJnZXQsbXlIZXJvKQ0KbG9jYWwgRWRtZz1nZXREbWcoIkUiLHRhcmdldCxteUhlcm8pDQpsb2NhbCBSZG1nPWdldERtZygiUiIsdGFyZ2V0LG15SGVybykNCmxvY2FsIElkbWc9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KbG9jYWwgZnVsY29tYm89IFFkbWcgKyBXZG1nICsgRWRtZyArIFJkbWcNCmlmICh0YXJnZXQuaGVhbHRoIDwgZnVsY29tYm8gYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljZ2FwID09IDEgYW5kIEdldERpc3RhbmNlKHVuaXQpPjgzMCBhbmQgc2VsZi50c2cudGFyZ2V0fj1uaWwpIHRoZW4NCnNlbGY6Q2FzdFFSKG1pbmlvbikNCmVsc2VpZiAgKHNlbGYuQ29uZmlnLmNvbWJvLmxvZ2ljZ2FwID09IDIgYW5kIEdldERpc3RhbmNlKHVuaXQpPjgzMCBhbmQgc2VsZi50c2cudGFyZ2V0fj1uaWwpIHRoZW4NCnNlbGY6Q2FzdFFSKG1pbmlvbikNCmVuZA0KZW5kXV0NCiAgZnVuY3Rpb24gRGlhbmE6Q2FzdFJRKHVuaXQpDQogICAgICAgICAgICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5RU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KSANCiAgICAgZW5kDQogICAgICBpZihzZWxmLnRzci50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgICBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKSB0aGVuDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKXNlbGY6Q2FzdFIodGFyZ2V0KSBlbmQsIDAuNSkNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQNCiAgICBmdW5jdGlvbiBEaWFuYTpDYXN0UVIodW5pdCkNCiAgbG9jYWwgYWJ1ZmYgPSBzZWxmOmJ1ZmYobWluaW9uKQ0KICAgICAgaWYoc2VsZi50c3EudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVEgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICAgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICAgIHNlbGY6Q2FzdFEobWluaW9uKQ0KICAgICBlbmQNCiAgICAgICAgICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kIGFidWZmIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpIHRoZW4NCiAgICAgICAgICBzZWxmOkNhc3RSKG1pbmlvbikNCiAgICAgICAgICBlbmQNCiAgZW5kDQogZnVuY3Rpb24gRGlhbmE6Y29tYm8xKCkNCiAgICBzZWxmOkNhc3RSUSh0YXJnZXQpDQogICAgICAgIGlmKHNlbGYudHN3LnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlVyBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIG5vdCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RXKHRhcmdldCkNCiAgIGVuZA0KICAgaWYgc2VsZi5Db25maWcubWlzYy5lbWF4IHRoZW4NCiAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kIEdldERpc3RhbmNlKHRhcmdldCk+MjgwIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVsc2VpZiBub3Qgc2VsZi5Db25maWcubWlzYy5lbWF4IHRoZW4NCiAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gRGlhbmE6Y29tYm8yKCkNCiAgbG9jYWwgYWJ1ZmYgPSBzZWxmOmJ1ZmYodGFyZ2V0KQ0KICBpZihzZWxmLnRzcS50YXJnZXR+PW5pbCBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlUSBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLlFTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RRKHRhcmdldCkNCiAgIGVuZA0KICAgIGlmKHNlbGYudHNyLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VSIGFuZCBhYnVmZiBhbmQgIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBub3Qgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkpdGhlbg0KICAgICAgICBzZWxmOkNhc3RSKHRhcmdldCkNCiAgIGVuZA0KICAgICAgICBpZihzZWxmLnRzdy50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVcgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Vyh0YXJnZXQpDQogICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgR2V0RGlzdGFuY2UodGFyZ2V0KT4yODAgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgICl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogICBlbHNlaWYgbm90IHNlbGYuQ29uZmlnLm1pc2MuZW1heCB0aGVuDQogICAgICAgaWYoc2VsZi50c2UudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VFIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuRVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEUodGFyZ2V0KQ0KICAgZW5kDQogICBlbmQNCiAgICAgICBpZihzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBzZWxmLkNvbmZpZy5jb21iby5jb21ib2tleSApdGhlbg0KICAgIGZvciBfLCB1bml0IGluIHBhaXJzKEdldEVuZW15SGVyb2VzKCkpIGRvDQogICAgICBsb2NhbCBkbWdJID0oNTArICgobXlIZXJvLmxldmVsKSoyMCkpDQogICAgICBsb2NhbCBoZWFsdGg9dW5pdC5oZWFsdGgNCiAgICAgIGlmKGhlYWx0aDxkbWdJIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VJIGFuZCBHZXREaXN0YW5jZSh1bml0KTw2MDApdGhlbg0KICAgICAgICBzZWxmOkNhc3RJKHVuaXQpDQogICAgZW5kDQogICAgZW5kDQogIGVuZA0KICBlbmQNCiAgIGZ1bmN0aW9uIERpYW5hOmNvbWJvMygpDQogIGlmKHNlbGYudHNxLnRhcmdldH49bmlsIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VRIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuUVNwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgZW5kDQogICAgICAgaWYoc2VsZi50c3cudGFyZ2V0fj1uaWwgIGFuZCBzZWxmLkNvbmZpZy5jb21iby51c2VXIGFuZCAgc2VsZi5Db25maWcuS2V5cy5jb21ib2tleSAgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSl0aGVuDQogICAgICAgIHNlbGY6Q2FzdFcodGFyZ2V0KQ0KICAgZW5kDQogICAgaWYoc2VsZi50c3IudGFyZ2V0fj1uaWwgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZVIgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgbm90IHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0Uih0YXJnZXQpDQogICBlbmQNCiAgICBpZiBzZWxmLkNvbmZpZy5taXNjLmVtYXggdGhlbg0KICAgIGlmKHNlbGYudHNlLnRhcmdldH49bmlsICBhbmQgc2VsZi5Db25maWcuY29tYm8udXNlRSBhbmQgR2V0RGlzdGFuY2UodGFyZ2V0KT4yODAgYW5kIHNlbGYuQ29uZmlnLktleXMuY29tYm9rZXkgIGFuZCBzZWxmLkVTcGVsbDpJc1JlYWR5KCkgKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVsc2VpZiBub3Qgc2VsZi5Db25maWcubWlzYy5lbWF4IHRoZW4NCiAgICAgICBpZihzZWxmLnRzZS50YXJnZXR+PW5pbCAgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUUgYW5kICBzZWxmLkNvbmZpZy5LZXlzLmNvbWJva2V5ICBhbmQgc2VsZi5FU3BlbGw6SXNSZWFkeSgpKXRoZW4NCiAgICAgICAgc2VsZjpDYXN0RSh0YXJnZXQpDQogICBlbmQNCiAgIGVuZA0KICAgICAgIGlmKHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLmNvbWJva2V5ICl0aGVuDQogICAgZm9yIF8sIHVuaXQgaW4gcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgIGxvY2FsIGRtZ0kgPSg1MCsgKChteUhlcm8ubGV2ZWwpKjIwKSkNCiAgICAgIGxvY2FsIGhlYWx0aD11bml0LmhlYWx0aA0KICAgICAgaWYoaGVhbHRoPGRtZ0kgYW5kIHNlbGYuQ29uZmlnLmNvbWJvLnVzZUkgYW5kIEdldERpc3RhbmNlKHVuaXQpPDYwMCl0aGVuDQogICAgICAgIHNlbGY6Q2FzdEkodW5pdCkNCiAgICBlbmQNCiAgICBlbmQNCiAgZW5kDQogIGVuZA0KICBmdW5jdGlvbiBEaWFuYTpidWZmKHVuaXQpDQogcmV0dXJuIFRhcmdldEhhdmVCdWZmKCdkaWFuYW1vb25saWdodCcsIHVuaXQpDQplbmQNCmZ1bmN0aW9uIERpYW5hOlduZE1zZyhNc2csIEtleSkNCmlmIHNlbGYuQ29uZmlnLnRhcmdldHNlbC50cyB0aGVuICAgICAgDQogICAgICAgIGlmIE1zZyA9PSBXTV9MQlVUVE9ORE9XTiB0aGVuDQogICAgICAgICAgICBsb2NhbCBtaW5EID0gMTANCiAgICAgICAgICAgIGxvY2FsIHN0YXJnZXQgPSBuaWwNCiAgICAgICAgICAgIGZvciBpLCBlbmVteSBpbiBpcGFpcnMoR2V0RW5lbXlIZXJvZXMoKSkgZG8NCiAgICAgICAgICAgICAgICBpZiBWYWxpZFRhcmdldChlbmVteSkgdGhlbg0KICAgICAgICAgICAgICAgICAgICBpZiBHZXREaXN0YW5jZShlbmVteSwgbW91c2VQb3MpIDw9IG1pbkQgb3Igc3RhcmdldCA9PSBuaWwgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgICAgbWluRCA9IEdldERpc3RhbmNlKGVuZW15LCBtb3VzZVBvcykNCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJnZXQgPSBlbmVteQ0KICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgIGVuZCAgICAgDQogICAgICAgICAgICBpZiBzdGFyZ2V0IGFuZCBtaW5EIDwgNTAwIHRoZW4NCiAgICAgICAgICAgICAgICBpZiBzZWxmLnNlbGVjdGVkVGFyIGFuZCBzdGFyZ2V0LmNoYXJOYW1lID09IHNlbGYuc2VsZWN0ZWRUYXIuY2hhck5hbWUgdGhlbg0KICAgICAgICAgICAgICAgICAgICBzZWxmLnNlbGVjdGVkVGFyID0gbmlsDQogICAgICAgICAgICAgICAgICAgIHByaW50KCI8Zm9udCBjb2xvcj1cIiNDQkY2RkZcIj5UYXJnZXQgPGI+aXMgbm8gbG9nZXIgc2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5zZWxlY3RlZFRhciA9IHN0YXJnZXQgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoIjxmb250IGNvbG9yPVwiI0NCRjZGRlwiPk5ldyB0YXJnZXQgPGI+c2VsZWN0ZWQuPC9iPjogIi4uc3RhcmdldC5jaGFyTmFtZS4uIjwvZm9udD4iKQ0KICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgIGVuZA0KICAgICBpZiBNc2cgPT0gV01fTEJVVFRPTkRPV04gdGhlbg0KICAgIGlmIFBvcFVwMSB0aGVuDQogICAgICBQb3BVcDEgPSBmYWxzZQ0KICAgIGVuZA0KICBlbmQNCiAgICBlbmQNCiAgICBmdW5jdGlvbiBEaWFuYTpHZXRNeURtZyh0YXJnZXQpDQogICBpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuUlNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpDQogIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0UkRtZyh0YXJnZXQpIA0KICAgIGVsc2VpZiBzZWxmLlFTcGVsbDpJc1JlYWR5KCkgIGFuZCBzZWxmLldTcGVsbDpJc1JlYWR5KCkgdGhlbg0KICAgIHJldHVybiBzZWxmOkdldFFEbWcodGFyZ2V0KSArIHNlbGY6R2V0V0RtZyh0YXJnZXQpIA0KICAgIGVsc2VpZiBzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuV1NwZWxsOklzUmVhZHkoKSB0aGVuDQogICAgcmV0dXJuIHNlbGY6R2V0UkRtZyh0YXJnZXQpICtzZWxmOkdldFdEbWcodGFyZ2V0KQ0KICBlbHNlaWYgc2VsZi5RU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgDQogICAgICBlbHNlaWYgc2VsZi5XU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRXRG1nKHRhcmdldCkgDQogICAgICBlbHNlaWYgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRSRG1nKHRhcmdldCkNCiAgZWxzZWlmIHNlbGYuUVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5SU3BlbGw6SXNSZWFkeSgpIHRoZW4NCiAgICByZXR1cm4gc2VsZjpHZXRRRG1nKHRhcmdldCkgKyBzZWxmOkdldFJEbWcodGFyZ2V0KQ0KICBlbHNlDQogICAgcmV0dXJuIDANCiAgZW5kDQogIGVuZA0KICAgIGZ1bmN0aW9uIERpYW5hOkdldERyYXdzKHRhcmdldCkNCmxvY2FsIHFkYW1hZ2UgPSBzZWxmOkdldFFEbWcodGFyZ2V0KQ0KbG9jYWwgd2RhbWFnZSA9IHNlbGY6R2V0V0RtZyh0YXJnZXQpDQpsb2NhbCByZGFtYWdlID0gc2VsZjpHZXRSRG1nKHRhcmdldCkNCmxvY2FsIElkbWc9KDUwKyAoKG15SGVyby5sZXZlbCkqMjApKQ0KICANCiAgaWYgcWRhbWFnZSA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHFkYW1hZ2UrIElkbWc+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdRICsgSWduaXRlJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHdkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnVycsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiB3ZGFtYWdlICsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1cgKyBJZ25pdGUnLCBSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICAgIGVsc2VpZiByZGFtYWdlICA+dGFyZ2V0LmhlYWx0aCB0aGVuDQogICAgcmV0dXJuICdSJywgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZWxzZWlmIHJkYW1hZ2UgKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIElnbml0ZScsIFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSArd2RhbWFnZSAgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUiArIFcnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcmRhbWFnZSArd2RhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1IgKyBXICsgSWduaXRlJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStyZGFtYWdlID50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ1EgKyBSJyxSR0JBKDAsIDI1NSwgMCwgMjU1KQ0KICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFcgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZStyZGFtYWdlKyBJZG1nPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnUSArIFIgKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogICAgICBlbHNlaWYgcWRhbWFnZSt3ZGFtYWdlK3JkYW1hZ2UgPnRhcmdldC5oZWFsdGggdGhlbg0KICAgIHJldHVybiAnS2lsbCB3aXRoIGZ1bGwgY29tYm8nLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2VpZiBxZGFtYWdlK3dkYW1hZ2UrcmRhbWFnZSsgSWRtZz50YXJnZXQuaGVhbHRoIHRoZW4NCiAgICByZXR1cm4gJ0Z1bGwgQ29tYm8gKyBJZ25pdGUnLFJHQkEoMCwgMjU1LCAwLCAyNTUpDQogIGVsc2UgDQogICAgcmV0dXJuICJDYW50IEtpbGwgeWV0IiwgUkdCQSgwLCAyNTUsIDAsIDI1NSkNCiAgZW5kIA0KZW5kDQpmdW5jdGlvbiBEaWFuYTpza2luaGFjaygpDQogIGlmIG5vdCBza2lubG9hZCB0aGVuDQogIGlmICgoQ3VycmVudFRpbWVJbk1pbGxpcygpIC0gbGFzdFRpbWVUaWNrQ2FsbGVkKSA+IDIwMCkgdGhlbg0KICAgICAgbGFzdFRpbWVUaWNrQ2FsbGVkID0gQ3VycmVudFRpbWVJbk1pbGxpcygpDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW4ua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAucGFja2V0ICB0aGVuDQogICAgaWYgc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXSB+PSBsYXN0U2tpbiB0aGVuDQogICAgICAgIGxhc3RTa2luID0gc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXQ0KICBTZW5kU2tpblBhY2tldChteUhlcm8uY2hhck5hbWUsIHNraW5zUEJbc2VsZi5Db25maWcudmlwLnNraW5bJ3NlbGVjdGVkJyAuLiBteUhlcm8uY2hhck5hbWUgLi4gJ1NraW4nXV0sIG15SGVyby5uZXR3b3JrSUQpOw0KICBlbmQNCiAgZW5kDQogIGVuZA0KICBlbmQNCiAgZW5kDQogZnVuY3Rpb24gRGlhbmE6YXV0b2xldmVsKCkNCmlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gMSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTEgPSAgIHsgMSwyLDMsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTEpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSAyIGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlMiA9ICAgeyAxLDIsMywxLDEsNCwxLDMsMSwzLDQsMywzLDIsMiw0LDIsMn0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlMikNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDMgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2UzID0gIHsgMiwzLDEsMiwyLDQsMiwxLDIsMSw0LDEsMSwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTMpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgaWYoIHNlbGYuQ29uZmlnLnZpcC5wYWNrZXQgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5rZXkgYW5kIHNlbGYuQ29uZmlnLnZpcC5sZXZlbC5sb2dpYyA9PSA0IGFuZCBvcy5jbG9jaygpLUxhc3RfTGV2ZWxTcGVsbCA+IDAuNSApIHRoZW4NCiAgICBsb2NhbCBsZXZlbFNlcXVlbmNlNCA9ICB7IDIsMywxLDIsMiw0LDIsMywyLDMsNCwzLDMsMSwxLDQsMSwxfQ0KICAgIGF1dG9MZXZlbFNldFNlcXVlbmNlKGxldmVsU2VxdWVuY2U0KQ0KICAgIExhc3RfTGV2ZWxTcGVsbCA9IG9zLmNsb2NrKCkNCiAgZW5kDQogIGlmKCBzZWxmLkNvbmZpZy52aXAucGFja2V0IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwua2V5IGFuZCBzZWxmLkNvbmZpZy52aXAubGV2ZWwubG9naWMgPT0gNSBhbmQgb3MuY2xvY2soKS1MYXN0X0xldmVsU3BlbGwgPiAwLjUgKSB0aGVuDQogICAgbG9jYWwgbGV2ZWxTZXF1ZW5jZTUgPSAgeyAzLDEsMiwzLDMsNCwzLDIsMywyLDQsMiwyLDEsMSw0LDEsMX0NCiAgICBhdXRvTGV2ZWxTZXRTZXF1ZW5jZShsZXZlbFNlcXVlbmNlNSkNCiAgICBMYXN0X0xldmVsU3BlbGwgPSBvcy5jbG9jaygpDQogIGVuZA0KICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDYgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMywxLDIsMywzLDQsMywxLDMsMSw0LDEsMSwyLDIsNCwyLDJ9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgICBpZiggc2VsZi5Db25maWcudmlwLnBhY2tldCBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmtleSBhbmQgc2VsZi5Db25maWcudmlwLmxldmVsLmxvZ2ljID09IDcgYW5kIG9zLmNsb2NrKCktTGFzdF9MZXZlbFNwZWxsID4gMC41ICkgdGhlbg0KICAgIGxvY2FsIGxldmVsU2VxdWVuY2U2ID0gIHsgMSwyLDMsMSwxLDQsMSwyLDEsMiw0LDIsMiwzLDMsNCwzLDN9DQogICAgYXV0b0xldmVsU2V0U2VxdWVuY2UobGV2ZWxTZXF1ZW5jZTYpDQogICAgTGFzdF9MZXZlbFNwZWxsID0gb3MuY2xvY2soKQ0KICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgICBpZihzZWxmLlFTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUSBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuUU1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLlFTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgICBpZihzZWxmLldTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlVyBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuV01hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgIHNlbGYuV1NwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgIGlmKHNlbGYuRVNwZWxsOklzUmVhZHkoKSBhbmQgc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci51c2VFIGFuZCBzZWxmLkNvbmZpZy5LZXlzLmp1bmdsZWNsZWFya2V5ICkgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5qdW5nbGVjbGVhci5FTWFuYSAvMTAwICkgdGhlbg0KICAgICAgICAgIHNlbGYuRVNwZWxsOkp1bmdsZUNsZWFyKCkNCiAgICAgICAgZW5kDQogICAgICAgICBpZihzZWxmLlJTcGVsbDpJc1JlYWR5KCkgYW5kIHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIudXNlUiBhbmQgc2VsZi5Db25maWcuS2V5cy5qdW5nbGVjbGVhcmtleSApIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0uanVuZ2xlY2xlYXIuUk1hbmEgLzEwMCApIHRoZW4NCiAgICAgICAgICBzZWxmLlJTcGVsbDpKdW5nbGVDbGVhcigpDQogICAgICAgIGVuZA0KICAgICAgZW5kDQogICAgICBmdW5jdGlvbiBEaWFuYTpMYXN0SGl0KCkNCiAgICBzZWxmLmVuZW15TWluaW9uczp1cGRhdGUoKQ0KICBpZiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQubGFzdGhpdGxvZ2ljID09IDEgdGhlbg0KICAgICAgZm9yIF8sIHRhcmdldCBpbiBwYWlycyhzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzKSBkbw0KICAgICAgICAgICAgICBsb2NhbCBRZGFtYWdlID0gc2VsZjpHZXRRRG1nKHRhcmdldCkNCiAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApIGFuZCBWYWxpZFRhcmdldCh0YXJnZXQsc2VsZi5RU3BlbGwuUmFuZ2UpICBhbmQgR2V0RGlzdGFuY2VTcXIodGFyZ2V0KSA8PSBzZWxmLlFTcGVsbC5SYW5nZSAqIHNlbGYuUVNwZWxsLlJhbmdlIGFuZCBRZGFtYWdlID49IHRhcmdldC5oZWFsdGgpIHRoZW4NCiAgICAgIHNlbGY6Q2FzdFEodGFyZ2V0KQ0KICAgIGVuZA0KICAgICAgICAgICAgZW5kDQogICBlbHNlaWYgc2VsZi5Db25maWcuZmFybS5sYXN0aGl0Lmxhc3RoaXRsb2dpYyA9PSAyIHRoZW4NCiAgICAgaWYoc2VsZi5RU3BlbGw6SXNSZWFkeSgpIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQudXNlUSBhbmQgKG15SGVyby5tYW5hIC8gbXlIZXJvLm1heE1hbmEgPiBzZWxmLkNvbmZpZy5mYXJtLmxhc3RoaXQuUU1hbmEgLzEwMCApKSB0aGVuDQogICAgICAgICAgc2VsZi5RU3BlbGw6TGFzdEhpdCgpDQogICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogIGVuZA0KICAgZnVuY3Rpb24gRGlhbmE6TGFuZUNsZWFyKCkNCiAgICBsb2NhbCBjbGVhcnRhcmdldCA9IHNlbGYuY2xlYXJ0YXJnZXQNCiAgc2VsZi5lbmVteU1pbmlvbnM6dXBkYXRlKCkNCiAgIHNlbGYub3RoZXJNaW5pb25zOnVwZGF0ZSgpDQogICAgICBzZWxmLmp1bmdsZU1pbmlvbnM6dXBkYXRlKCkNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gaXBhaXJzKHNlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMpIGRvDQogICAgICAgIGlmIFZhbGlkVGFyZ2V0KG1pbmlvbiwgNjAwKSBhbmQgKGNsZWFydGFyZ2V0ID09IG5pbCBvciBub3QgVmFsaWRUYXJnZXQoY2xlYXJ0YXJnZXQpKSB0aGVuDQogICAgICAgICAgY2xlYXJ0YXJnZXQgPSBtaW5pb24NCiAgICAgICAgZW5kDQogICAgICBlbmQNCiAgICAgIGZvciBpLCBtaW5pb24gaW4gcGFpcnMoc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cykgZG8NCiAgICAgICAgaWYgVmFsaWRUYXJnZXQobWluaW9uKSBhbmQgbWluaW9uIH49IG5pbCB0aGVuDQogICAgICAgICAgIGxvY2FsIE51bWJlck9mSGl0cyA9IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLndjb3VudA0KICAgICAgICAgICBpZiBOdW1iZXJPZkhpdHMgPj0gMSBhbmQgI3NlbGYuZW5lbXlNaW5pb25zLm9iamVjdHMgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICBpZiBzZWxmLkNvbmZpZy5LZXlzLmxhbmVjbGVhcmtleSAgYW5kIHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLnVzZVcgYW5kIChteUhlcm8ubWFuYSAvIG15SGVyby5tYXhNYW5hID4gc2VsZi5Db25maWcuZmFybS5sYW5lY2xlYXIuV01hbmEgLzEwMCApIGFuZCBHZXREaXN0YW5jZShtaW5pb24pIDw9IHNlbGYuV1NwZWxsLlJhbmdlIHRoZW4gDQogICAgICAgICAgICAgc2VsZjpDYXN0VyhjbGVhcnRhcmdldCkNCiAgICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICBsb2NhbCBOdW1iZXJPZkhpdHMgPSBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci5xY291bnQNCiAgICAgICAgICAgaWYgTnVtYmVyT2ZIaXRzID49IDEgYW5kICNzZWxmLmVuZW15TWluaW9ucy5vYmplY3RzID49IE51bWJlck9mSGl0cyB0aGVuDQogICAgICAgICAgaWYgc2VsZi5Db25maWcuS2V5cy5sYW5lY2xlYXJrZXkgIGFuZCBzZWxmLkNvbmZpZy5mYXJtLmxhbmVjbGVhci51c2VRIGFuZCAobXlIZXJvLm1hbmEgLyBteUhlcm8ubWF4TWFuYSA+IHNlbGYuQ29uZmlnLmZhcm0ubGFuZWNsZWFyLlFNYW5hIC8xMDAgKSBhbmQgR2V0RGlzdGFuY2UobWluaW9uKSA8PSBzZWxmLlFTcGVsbC5SYW5nZSB0aGVuIA0KICAgICAgICAgICAgbG9jYWwgQmVzdFBvcywgQmVzdEhpdCA9IEdldEJlc3RMaW5lRmFybVBvc2l0aW9uKHNlbGYuUVNwZWxsLlJhbmdlLCBzZWxmLlFTcGVsbC5XaWR0aCwgc2VsZi5lbmVteU1pbmlvbnMub2JqZWN0cyApDQogICAgICAgICAgICBpZiBCZXN0UG9zIH49IG5pbCBhbmQgIEJlc3RIaXQgPj0gTnVtYmVyT2ZIaXRzIHRoZW4NCiAgICAgICAgICAgICAgQ2FzdFNwZWxsKF9RLCBCZXN0UG9zLngsIEJlc3RQb3MueikNCiAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgZW5kDQogICAgICAgIGVuZA0KICAgICAgICBlbmQNCiAgICAgICAgZW5kDQogICAgICAgIGZ1bmN0aW9uIERpYW5hOlVubG9hZCgpDQogICAgICAgIHNlbGY6d3JpdGVjZmcoKQ0KICAgICAgZW5kDQogICAgICAgIGZ1bmN0aW9uIHBvaW50T25MaW5lKG15SGVybywgdW5pdCwgbWluaW9uLCBleHRyYSkNCiAgICBsb2NhbCB0b21pbmlvbiA9IHt4ID0gbWluaW9uLnggLSB1bml0LngsIHogPSBtaW5pb24ueiAtIHVuaXQuen0NCiAgICBsb2NhbCB0b215SGVybyA9IHt4ID0gbXlIZXJvLnggLSB1bml0LngsIHogPSBteUhlcm8ueiAtIHVuaXQuen0NCg0KICAgIGxvY2FsIG1hZ2l0dWRlVG9teUhlcm8gPSB0b215SGVyby54IF4gMiArIHRvbXlIZXJvLnogXiAyDQogICAgbG9jYWwgZG90UCA9IHRvbWluaW9uLnggKiB0b215SGVyby54ICsgdG9taW5pb24ueiAqIHRvbXlIZXJvLnoNCg0KICAgIGxvY2FsIGRpc3RhbmNlID0gZG90UCAvIG1hZ2l0dWRlVG9teUhlcm8NCg0KICAgIHJldHVybiB1bml0LnggKyB0b215SGVyby54ICogKGRpc3RhbmNlICsgZXh0cmEpLCB1bml0LnogKyB0b215SGVyby56ICogKGRpc3RhbmNlICsgZXh0cmEpDQplbmQNCmZ1bmN0aW9uIERyYXdMaW5lSFBCYXIoZGFtYWdlLCB0ZXh0LCB1bml0LCBlbmVteXRlYW0pDQogICAgaWYgdW5pdC5kZWFkIG9yIG5vdCB1bml0LnZpc2libGUgdGhlbiByZXR1cm4gZW5kDQogICAgbG9jYWwgcCA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjModW5pdC54LCB1bml0LnksIHVuaXQueikpDQogICAgaWYgbm90IE9uU2NyZWVuKHAueCwgcC55KSB0aGVuIHJldHVybiBlbmQNCiAgICBsb2NhbCB0aGVkbWcgPSAwDQogICAgbG9jYWwgbGluZSA9IDINCiAgICBsb2NhbCBsaW5lUG9zQSAgPSB7eCA9IDAsIHkgPSAwIH0NCiAgICBsb2NhbCBsaW5lUG9zQiAgPSB7eCA9IDAsIHkgPSAwIH0NCiAgICBsb2NhbCBUZXh0UG9zICAgPSB7eCA9IDAsIHkgPSAwIH0NCiAgICANCiAgICANCiAgICBpZiBkYW1hZ2UgPj0gdW5pdC5tYXhIZWFsdGggdGhlbg0KICAgICAgICB0aGVkbWcgPSB1bml0Lm1heEhlYWx0aCAtIDENCiAgICBlbHNlDQogICAgICAgIHRoZWRtZyA9IGRhbWFnZQ0KICAgIGVuZA0KICAgIA0KICAgIHRoZWRtZyA9IG1hdGgucm91bmQodGhlZG1nKQ0KICAgIA0KICAgIGxvY2FsIFN0YXJ0UG9zLCBFbmRQb3MgPSBHZXRIUEJhclBvcyh1bml0KQ0KICAgIGxvY2FsIFJlYWxfWCA9IFN0YXJ0UG9zLnggKyAyNA0KICAgIGxvY2FsIE9mZnNfWCA9IChSZWFsX1ggKyAoKHVuaXQuaGVhbHRoIC0gdGhlZG1nKSAvIHVuaXQubWF4SGVhbHRoKSAqIChFbmRQb3MueCAtIFN0YXJ0UG9zLnggLSAyKSkNCiAgICBpZiBPZmZzX1ggPCBSZWFsX1ggdGhlbiBPZmZzX1ggPSBSZWFsX1ggZW5kIA0KICAgIGxvY2FsIG15dHJhbnMgPSAzNTAgLSBtYXRoLnJvdW5kKDI1NSooKHVuaXQuaGVhbHRoLXRoZWRtZykvdW5pdC5tYXhIZWFsdGgpKQ0KICAgIGlmIG15dHJhbnMgPj0gMjU1IHRoZW4gbXl0cmFucz0yNTQgZW5kDQogICAgbG9jYWwgbXlfYmx1ZXBhcnQgPSBtYXRoLnJvdW5kKDQwMCooKHVuaXQuaGVhbHRoLXRoZWRtZykvdW5pdC5tYXhIZWFsdGgpKQ0KICAgIGlmIG15X2JsdWVwYXJ0ID49IDI1NSB0aGVuIG15X2JsdWVwYXJ0PTI1NCBlbmQNCg0KICAgIA0KICAgIGlmIGVuZW15dGVhbSB0aGVuDQogICAgICAgIGxpbmVQb3NBLnggPSBPZmZzX1gtMTUwDQogICAgICAgIGxpbmVQb3NBLnkgPSAoU3RhcnRQb3MueS0oMzArKGxpbmUqMTUpKSkgICAgDQogICAgICAgIGxpbmVQb3NCLnggPSBPZmZzX1gtMTUwDQogICAgICAgIGxpbmVQb3NCLnkgPSAoU3RhcnRQb3MueS0xMCkNCiAgICAgICAgVGV4dFBvcy54ID0gT2Zmc19YLTE0OA0KICAgICAgICBUZXh0UG9zLnkgPSAoU3RhcnRQb3MueS0oMzArKGxpbmUqMTUpKSkNCiAgICBlbHNlDQogICAgICAgIGxpbmVQb3NBLnggPSBPZmZzX1gtMTI1DQogICAgICAgIGxpbmVQb3NBLnkgPSAoU3RhcnRQb3MueS0oMzArKGxpbmUqMTUpKSkgICAgDQogICAgICAgIGxpbmVQb3NCLnggPSBPZmZzX1gtMTI1DQogICAgICAgIGxpbmVQb3NCLnkgPSAoU3RhcnRQb3MueS0xNSkNCiAgICANCiAgICAgICAgVGV4dFBvcy54ID0gT2Zmc19YLTEyMg0KICAgICAgICBUZXh0UG9zLnkgPSAoU3RhcnRQb3MueS0oMzArKGxpbmUqMTUpKSkNCiAgICBlbmQNCg0KICAgIERyYXdMaW5lKGxpbmVQb3NBLngsIGxpbmVQb3NBLnksIGxpbmVQb3NCLngsIGxpbmVQb3NCLnkgLCAyLCBBUkdCKG15dHJhbnMsIDI1NSwgbXlfYmx1ZXBhcnQsIDApKQ0KICAgIERyYXdUZXh0KHRvc3RyaW5nKHRoZWRtZykuLiIgIi4udG9zdHJpbmcodGV4dCksIDE1LCBUZXh0UG9zLngsIFRleHRQb3MueSAsIEFSR0IobXl0cmFucywgMjU1LCBteV9ibHVlcGFydCwgMCkpDQplbmQNCg0KDQpmdW5jdGlvbiBEcmF3TGluZUhQQmFyMihkYW1hZ2UsIHRleHQsIHVuaXQsIGxpbmUpDQogIGxvY2FsIHRoZWRtZyA9IDANCiAgaWYgZGFtYWdlID49IHVuaXQubWF4SGVhbHRoIHRoZW4NCiAgICB0aGVkbWcgPSB1bml0Lm1heEhlYWx0aC0xDQogIGVsc2UNCiAgICB0aGVkbWc9ZGFtYWdlDQogIGVuZA0KICBsb2NhbCBTdGFydFBvcywgRW5kUG9zID0gR2V0SFBCYXJQb3ModW5pdCkNCiAgbG9jYWwgUmVhbF9YID0gU3RhcnRQb3MueCsyNA0KICBsb2NhbCBPZmZzX1ggPSAoUmVhbF9YICsgKCh1bml0LmhlYWx0aC10aGVkbWcpL3VuaXQubWF4SGVhbHRoKSAqIChFbmRQb3MueCAtIFN0YXJ0UG9zLnggLSAyKSkNCiAgaWYgT2Zmc19YIDwgUmVhbF9YIHRoZW4NCiAgICBPZmZzX1ggPSBSZWFsX1gNCiAgZW5kDQogIERyYXdMaW5lKE9mZnNfWC0xNTAsIFN0YXJ0UG9zLnktKGxpbmUqMTUpLCBTdGFydFBvcy54LTIwLCBTdGFydFBvcy55LShsaW5lKjE1KSwgMTAsIEFSR0IoMTQwLCAwLCAwLCAwKSkNCmVuZA0KbG9jYWwgZmxvb3IgPSBtYXRoLmZsb29yDQpmdW5jdGlvbiBEcmF3UmVjdGFuZ2xlQnV0dG9uKHgsIHksIHcsIGgsIGNvbG9yKQ0KICAgIGxvY2FsIHBvaW50cyA9IHt9DQogICAgcG9pbnRzWzFdID0gRDNEWFZFQ1RPUjIoZmxvb3IoeCksIGZsb29yKHkpKQ0KICAgIHBvaW50c1syXSA9IEQzRFhWRUNUT1IyKGZsb29yKHggKyB3KSwgZmxvb3IoeSkpDQogIGxvY2FsIHBvaW50czIgPSB7fQ0KICBwb2ludHMyWzFdID0gRDNEWFZFQ1RPUjIoZmxvb3IoeCksIGZsb29yKHkgLSBoLzIpKQ0KICBwb2ludHMyWzJdID0gRDNEWFZFQ1RPUjIoZmxvb3IoeCArIHcpLCBmbG9vcih5IC0gaC8yKSkNCiAgcG9pbnRzMlszXSA9IEQzRFhWRUNUT1IyKGZsb29yKHggKyB3KSwgZmxvb3IoeSArIGgvMikpDQogIHBvaW50czJbNF0gPSBEM0RYVkVDVE9SMihmbG9vcih4KSwgZmxvb3IoeSArIGgvMikpDQogIGxvY2FsIHQgPSBHZXRDdXJzb3JQb3MoKQ0KICBwb2x5Z29uID0gUG9seWdvbihQb2ludChwb2ludHMyWzFdLngsIHBvaW50czJbMV0ueSksIFBvaW50KHBvaW50czJbMl0ueCwgcG9pbnRzMlsyXS55KSwgUG9pbnQocG9pbnRzMlszXS54LCBwb2ludHMyWzNdLnkpLCBQb2ludChwb2ludHMyWzRdLngsIHBvaW50czJbNF0ueSkpDQogIGlmIHBvbHlnb246Y29udGFpbnMoUG9pbnQodC54LCB0LnkpKSB0aGVuDQogICAgRHJhd0xpbmVzMihwb2ludHMsIGZsb29yKGgpLCBjb2xvcikNCiAgZWxzZQ0KICAgIERyYXdMaW5lczIocG9pbnRzLCBmbG9vcihoKSwgQVJHQigxNTAsIDIzNSwgMTgzLCA2MyApKQ0KICBlbmQNCmVuZA0KDQogICAgLS0tLy89PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcLS0tDQotLXx8ID4gU2ltcGxlTGliICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgZnVuY3Rpb24gUmVxdWlyZVNpbXBsZUxpYigpDQogICAgICBpZiBGaWxlRXhpc3QoTElCX1BBVEguLiJTaW1wbGVMaWIubHVhIikgYW5kIG5vdCBGaWxlRXhpc3QoU0NSSVBUX1BBVEguLiJTaW1wbGVMaWIubHVhIikgdGhlbg0KICAgICAgICAgIHJlcXVpcmUgIlNpbXBsZUxpYiINCiAgICAgICAgICBpZiBfRy5TaW1wbGVMaWJWZXJzaW9uID09IG5pbCB0aGVuIA0KICAgICAgICAgICAgICBwcmludCgiWW91ciBTaW1wbGVMaWIgZmlsZSBpcyB3cm9uZy4iKQ0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBpZiBfRy5TaW1wbGVMaWJWZXJzaW9uIDwgMS4wMiB0aGVuDQogICAgICAgICAgICAgIHByaW50KCJZb3UgbmVlZCB0aGUgbGFzdGVzdCB2ZXJzaW9uIG9mIFNpbXBsZUxpYi4iKQ0KICAgICAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgICBlbmQNCiAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgZWxzZWlmIEZpbGVFeGlzdChMSUJfUEFUSC4uIlNpbXBsZUxpYi5sdWEiKSBhbmQgRmlsZUV4aXN0KFNDUklQVF9QQVRILi4iU2ltcGxlTGliLmx1YSIpIHRoZW4NCiAgICAgICAgICBwcmludCgiU2ltcGxlTGliLmx1YSBzaG91bGQgbm90IGJlIGluIEN1c3RvbSBTY3JpcHQgKE9ubHkgb24gQ29tbW9uIGZvbGRlciksIGRlbGV0ZSBpdCBmcm9tIHRoZXJlLi4uIikNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIGVsc2UNCiAgICAgICAgICBsb2NhbCBmdW5jdGlvbiBCYXNlNjRFbmNvZGUyKGRhdGEpDQogICAgICAgICAgICAgIGxvY2FsIGI9J0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nDQogICAgICAgICAgICAgIHJldHVybiAoKGRhdGE6Z3N1YignLicsIGZ1bmN0aW9uKHgpDQogICAgICAgICAgICAgICAgICBsb2NhbCByLGI9JycseDpieXRlKCkNCiAgICAgICAgICAgICAgICAgIGZvciBpPTgsMSwtMSBkbyByPXIuLihiJTJeaS1iJTJeKGktMSk+MCBhbmQgJzEnIG9yICcwJykgZW5kDQogICAgICAgICAgICAgICAgICByZXR1cm4gcjsNCiAgICAgICAgICAgICAgZW5kKS4uJzAwMDAnKTpnc3ViKCclZCVkJWQ/JWQ/JWQ/JWQ/JywgZnVuY3Rpb24oeCkNCiAgICAgICAgICAgICAgICAgIGlmICgjeCA8IDYpIHRoZW4gcmV0dXJuICcnIGVuZA0KICAgICAgICAgICAgICAgICAgbG9jYWwgYz0wDQogICAgICAgICAgICAgICAgICBmb3IgaT0xLDYgZG8gYz1jKyh4OnN1YihpLGkpPT0nMScgYW5kIDJeKDYtaSkgb3IgMCkgZW5kDQogICAgICAgICAgICAgICAgICByZXR1cm4gYjpzdWIoYysxLGMrMSkNCiAgICAgICAgICAgICAgZW5kKS4uKHsgJycsICc9PScsICc9JyB9KVsjZGF0YSUzKzFdKQ0KICAgICAgICAgIGVuZA0KICAgICAgICAgIGxvY2FsIFNhdmVQYXRoID0gTElCX1BBVEguLiJTaW1wbGVMaWIubHVhIg0KICAgICAgICAgIGxvY2FsIFNjcmlwdFBhdGggPSAnL0JvTC9UQ1BVcGRhdGVyL0dldFNjcmlwdDUucGhwP3NjcmlwdD0nLi5CYXNlNjRFbmNvZGUyKCJyYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2phY2hpY2FvL0JvTC9tYXN0ZXIvU2ltcGxlTGliLmx1YSIpLi4nJnJhbmQ9Jy4ubWF0aC5yYW5kb20oOTk5OTk5OTkpDQogICAgICAgICAgbG9jYWwgR290U2NyaXB0ID0gZmFsc2UNCiAgICAgICAgICBsb2NhbCBMdWFTb2NrZXQgPSBuaWwNCiAgICAgICAgICBsb2NhbCBTb2NrZXQgPSBuaWwNCiAgICAgICAgICBsb2NhbCBTaXplID0gbmlsDQogICAgICAgICAgbG9jYWwgUmVjdlN0YXJ0ZWQgPSBmYWxzZQ0KICAgICAgICAgIGxvY2FsIFJlY2VpdmUsIFN0YXR1cywgU25pcHBlZCA9IG5pbCwgbmlsLCBuaWwNCiAgICAgICAgICBsb2NhbCBTdGFydGVkID0gZmFsc2UNCiAgICAgICAgICBsb2NhbCBGaWxlID0gIiINCiAgICAgICAgICBsb2NhbCBOZXdGaWxlID0gIiINCiAgICAgICAgICBpZiBub3QgTHVhU29ja2V0IHRoZW4NCiAgICAgICAgICAgICAgTHVhU29ja2V0ID0gcmVxdWlyZSgic29ja2V0IikNCiAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgIFNvY2tldDpjbG9zZSgpDQogICAgICAgICAgICAgIFNvY2tldCA9IG5pbA0KICAgICAgICAgICAgICBTaXplID0gbmlsDQogICAgICAgICAgICAgIFJlY3ZTdGFydGVkID0gZmFsc2UNCiAgICAgICAgICBlbmQNCiAgICAgICAgICBTb2NrZXQgPSBMdWFTb2NrZXQudGNwKCkNCiAgICAgICAgICBpZiBub3QgU29ja2V0IHRoZW4NCiAgICAgICAgICAgICAgcHJpbnQoJ1NvY2tldCBFcnJvcicpDQogICAgICAgICAgZWxzZQ0KICAgICAgICAgICAgICBTb2NrZXQ6c2V0dGltZW91dCgwLCAnYicpDQogICAgICAgICAgICAgIFNvY2tldDpzZXR0aW1lb3V0KDk5OTk5OTk5LCAndCcpDQogICAgICAgICAgICAgIFNvY2tldDpjb25uZWN0KCdzeC1ib2wuZXUnLCA4MCkNCiAgICAgICAgICAgICAgU3RhcnRlZCA9IGZhbHNlDQogICAgICAgICAgICAgIEZpbGUgPSAiIg0KICAgICAgICAgIGVuZA0KICAgICAgICAgIEFkZFRpY2tDYWxsYmFjayhmdW5jdGlvbigpDQogICAgICAgICAgICAgIGlmIEdvdFNjcmlwdCB0aGVuIHJldHVybiBlbmQNCiAgICAgICAgICAgICAgUmVjZWl2ZSwgU3RhdHVzLCBTbmlwcGVkID0gU29ja2V0OnJlY2VpdmUoMTAyNCkNCiAgICAgICAgICAgICAgaWYgU3RhdHVzID09ICd0aW1lb3V0JyBhbmQgbm90IFN0YXJ0ZWQgdGhlbg0KICAgICAgICAgICAgICAgICAgU3RhcnRlZCA9IHRydWUNCiAgICAgICAgICAgICAgICAgIHByaW50KCJEb3dubG9hZGluZyBhIGxpYnJhcnkgY2FsbGVkIFNpbXBsZUxpYi4gUGxlYXNlIHdhaXQuLi4iKQ0KICAgICAgICAgICAgICAgICAgU29ja2V0OnNlbmQoIkdFVCAiLi5TY3JpcHRQYXRoLi4iIEhUVFAvMS4xXHJcbkhvc3Q6IHN4LWJvbC5ldVxyXG5cclxuIikNCiAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGlmIChSZWNlaXZlIG9yICgjU25pcHBlZCA+IDApKSBhbmQgbm90IFJlY3ZTdGFydGVkIHRoZW4NCiAgICAgICAgICAgICAgICAgIFJlY3ZTdGFydGVkID0gdHJ1ZQ0KICAgICAgICAgICAgICBlbmQNCiAgDQogICAgICAgICAgICAgIEZpbGUgPSBGaWxlIC4uIChSZWNlaXZlIG9yIFNuaXBwZWQpDQogICAgICAgICAgICAgIGlmIEZpbGU6ZmluZCgnPC9zaScuLid6ZT4nKSB0aGVuDQogICAgICAgICAgICAgICAgICBpZiBub3QgU2l6ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgU2l6ZSA9IHRvbnVtYmVyKEZpbGU6c3ViKEZpbGU6ZmluZCgnPHNpJy4uJ3plPicpICsgNiwgRmlsZTpmaW5kKCc8L3NpJy4uJ3plPicpIC0gMSkpDQogICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGlmIEZpbGU6ZmluZCgnPHNjcicuLidpcHQ+JykgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIF8sIFNjcmlwdEZpbmQgPSBGaWxlOmZpbmQoJzxzY3InLi4naXB0PicpDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgU2NyaXB0RW5kID0gRmlsZTpmaW5kKCc8L3NjcicuLidpcHQ+JykNCiAgICAgICAgICAgICAgICAgICAgICBpZiBTY3JpcHRFbmQgdGhlbiBTY3JpcHRFbmQgPSBTY3JpcHRFbmQgLSAxIGVuZA0KICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIERvd25sb2FkZWRTaXplID0gRmlsZTpzdWIoU2NyaXB0RmluZCArIDEsU2NyaXB0RW5kIG9yIC0xKTpsZW4oKQ0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICBpZiBGaWxlOmZpbmQoJzwvc2NyJy4uJ2lwdD4nKSB0aGVuDQogICAgICAgICAgICAgICAgICBsb2NhbCBhLGIgPSBGaWxlOmZpbmQoJ1xyXG5cclxuJykNCiAgICAgICAgICAgICAgICAgIEZpbGUgPSBGaWxlOnN1YihhLC0xKQ0KICAgICAgICAgICAgICAgICAgTmV3RmlsZSA9ICcnDQogICAgICAgICAgICAgICAgICBmb3IgbGluZSxjb250ZW50IGluIGlwYWlycyhGaWxlOnNwbGl0KCdcbicpKSBkbw0KICAgICAgICAgICAgICAgICAgICAgIGlmIGNvbnRlbnQ6bGVuKCkgPiA1IHRoZW4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3RmlsZSA9IE5ld0ZpbGUgLi4gY29udGVudA0KICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgZW5kDQogICAgICAgICAgICAgICAgICBsb2NhbCBIZWFkZXJFbmQsIENvbnRlbnRTdGFydCA9IE5ld0ZpbGU6ZmluZCgnPHNjJy4uJ3JpcHQ+JykNCiAgICAgICAgICAgICAgICAgIGxvY2FsIENvbnRlbnRFbmQsIF8gPSBOZXdGaWxlOmZpbmQoJzwvc2NyJy4uJ2lwdD4nKQ0KICAgICAgICAgICAgICAgICAgaWYgbm90IENvbnRlbnRTdGFydCBvciBub3QgQ29udGVudEVuZCB0aGVuDQogICAgICAgICAgICAgICAgICBlbHNlDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3ZiA9IE5ld0ZpbGU6c3ViKENvbnRlbnRTdGFydCArIDEsQ29udGVudEVuZCAtIDEpDQogICAgICAgICAgICAgICAgICAgICAgbG9jYWwgbmV3ZiA9IG5ld2Y6Z3N1YignXHInLCcnKQ0KICAgICAgICAgICAgICAgICAgICAgIGlmIG5ld2Y6bGVuKCkgfj0gU2l6ZSB0aGVuDQogICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybg0KICAgICAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgICAgIGxvY2FsIG5ld2YgPSBCYXNlNjREZWNvZGUobmV3ZikNCiAgICAgICAgICAgICAgICAgICAgICBpZiB0eXBlKGxvYWQobmV3ZikpIH49ICdmdW5jdGlvbicgdGhlbg0KICAgICAgICAgICAgICAgICAgICAgIGVsc2UNCiAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWwgZiA9IGlvLm9wZW4oU2F2ZVBhdGgsICJ3K2IiKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBmOndyaXRlKG5ld2YpDQogICAgICAgICAgICAgICAgICAgICAgICAgIGY6Y2xvc2UoKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludCgiUmVxdWlyZWQgbGlicmFyeSBkb3dubG9hZGVkLiBQbGVhc2UgcmVsb2FkIHdpdGggMnggRjkuIikNCiAgICAgICAgICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICAgICAgICAgIGVuZA0KICAgICAgICAgICAgICAgICAgR290U2NyaXB0ID0gdHJ1ZQ0KICAgICAgICAgICAgICBlbmQNCiAgICAgICAgICBlbmQpDQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICBlbmQNCiAgZW5kDQoNCiANCiANCiAgDQogICAtLS0vLz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFwtLS0NCi0tfHwgPiBPcmJXYWxrcyAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fC0tDQotLS1cXD09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ly8tLS0NCiAgDQogIGZ1bmN0aW9uIFZpa3RvcjpmaW5kb3Jid2Fsa2VyKCkNCiAgaWYgX0cuUmVib3JuX0xvYWRlZCB0aGVuDQogICAgICBTQUM9dHJ1ZSBhbmQNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj5TaWRhcyBBdXRvIENhcnJ5IGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA4KQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTRdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgZWxzZWlmIG5vdCBfRy5SZWJvcm5fTG9hZGVkIGFuZCBGaWxlRXhpc3QoTElCX1BBVEggLi4gIlN4T3JiV2Fsay5sdWEiKSB0aGVuDQogICAgICBTeE9yYj10cnVlIGFuZCANCiAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGludGVncmF0aW9uIGhhcyBiZWVuIGZpbmlzaGVkIHN1Y2Nlc2Z1bGx5IikgZW5kLCA0KQ0KICAgICAgcmVxdWlyZSgiU3hPcmJXYWxrIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE1XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSAgc2VsZi5Db25maWc6YWRkU3ViTWVudSgiU3hPcmJXYWxrIiwib3JiV2FsayIpIGVuZCw1KQ0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBfRy5TeE9yYjpMb2FkVG9NZW51KHNlbGYuQ29uZmlnLm9yYldhbGspIGVuZCw1KQ0KICAgIGVsc2VpZiBTQUN+PXRydWUgYW5kIFN4T3Jifj0gdHJ1ZSB0aGVuDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCJTeE9yYiBvciBTQUM6UiBpcyByZXF1aXJlZC4iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgIGVuZA0KICBlbmQNCiAgICBmdW5jdGlvbiBBa2FsaTpmaW5kb3Jid2Fsa2VyKCkNCmlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgIGVsc2VpZiBub3QgX0cuUmVib3JuX0xvYWRlZCBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KICAgICAgU3hPcmI9dHJ1ZSBhbmQgDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgNCkNCiAgICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlN4T3JiV2FsayIsIm9yYldhbGsiKSBlbmQsNSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIERpYW5hOmZpbmRvcmJ3YWxrZXIoKQ0KIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgIGVsc2VpZiBub3QgX0cuUmVib3JuX0xvYWRlZCBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KICAgICAgU3hPcmI9dHJ1ZSBhbmQgDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgNCkNCiAgICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlN4T3JiV2FsayIsIm9yYldhbGsiKSBlbmQsNSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExpc3NhbmRyYTpmaW5kb3Jid2Fsa2VyKCkNCiAgIGlmIF9HLlJlYm9ybl9Mb2FkZWQgdGhlbg0KICAgICAgU0FDPXRydWUgYW5kDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBoYXMgYmVlbiBmb3VuZCIpIGVuZCwgMikNCiAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+U2lkYXMgQXV0byBDYXJyeSBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgOCkNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIyIiwgbG9jX2Nob29zZW5bMTE0XSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm8zIiwgIl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18iLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveCIsICIgICAgICAgICAgICAgICAiLi5TY3JpcHRuYW1lLi4iIiwgU0NSSVBUX1BBUkFNX0lORk8sICIiKSANCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDIiLGxvY19jaG9vc2VuWzExMV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NiIsIGxvY19jaG9vc2VuWzExMl0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94NSIsIGxvY19jaG9vc2VuWzExM10sIFNDUklQVF9QQVJBTV9JTkZPLCIiKSAgIA0KICAgIGVsc2VpZiBub3QgX0cuUmVib3JuX0xvYWRlZCBhbmQgRmlsZUV4aXN0KExJQl9QQVRIIC4uICJTeE9yYldhbGsubHVhIikgdGhlbg0KICAgICAgU3hPcmI9dHJ1ZSBhbmQgDQogICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIHByaW50KCI8Zm9udCBjb2xvcj1cIiNGRjAwMDBcIj48Yj4gIi4uU2NyaXB0bmFtZS4uIiAtIDwvYj48L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IFN4T3JiV2FsayBpbnRlZ3JhdGlvbiBoYXMgYmVlbiBmaW5pc2hlZCBzdWNjZXNmdWxseSIpIGVuZCwgNCkNCiAgICAgIHJlcXVpcmUoIlN4T3JiV2FsayIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNV0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgIHNlbGYuQ29uZmlnOmFkZFN1Yk1lbnUoIlN4T3JiV2FsayIsIm9yYldhbGsiKSBlbmQsNSkNCiAgICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgX0cuU3hPcmI6TG9hZFRvTWVudShzZWxmLkNvbmZpZy5vcmJXYWxrKSBlbmQsNSkNCiAgICBlbHNlaWYgU0FDfj10cnVlIGFuZCBTeE9yYn49IHRydWUgdGhlbg0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiPT09PT09PT09PT09PT09PT0iKQ0KICAgICAgcCgiU3hPcmIgb3IgU0FDOlIgaXMgcmVxdWlyZWQuIikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICBlbmQNCiAgZW5kDQogIGZ1bmN0aW9uIExlYmxhbmM6ZmluZG9yYndhbGtlcigpDQogICBpZiBfRy5SZWJvcm5fTG9hZGVkIHRoZW4NCiAgICAgIFNBQz10cnVlIGFuZA0KICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaGFzIGJlZW4gZm91bmQiKSBlbmQsIDIpDQogICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPlNpZGFzIEF1dG8gQ2FycnkgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDgpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyMiIsIGxvY19jaG9vc2VuWzExNF0sIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvMyIsICJfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fIiwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3giLCAiICAgICAgICAgICAgICAgIi4uU2NyaXB0bmFtZS4uIiIsIFNDUklQVF9QQVJBTV9JTkZPLCAiIikgDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3gyIixsb2NfY2hvb3NlblsxMTFdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDYiLCBsb2NfY2hvb3NlblsxMTJdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mb2JveDUiLCBsb2NfY2hvb3NlblsxMTNdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikgICANCiAgICBlbHNlaWYgbm90IF9HLlJlYm9ybl9Mb2FkZWQgYW5kIEZpbGVFeGlzdChMSUJfUEFUSCAuLiAiU3hPcmJXYWxrLmx1YSIpIHRoZW4NCiAgICAgIFN4T3JiPXRydWUgYW5kIA0KICAgIERlbGF5QWN0aW9uKGZ1bmN0aW9uKCkgcHJpbnQoIjxmb250IGNvbG9yPVwiI0ZGMDAwMFwiPjxiPiAiLi5TY3JpcHRuYW1lLi4iIC0gPC9iPjwvZm9udD48Zm9udCBjb2xvcj1cIiNGRkZGRkZcIj4gU3hPcmJXYWxrIGhhcyBiZWVuIGZvdW5kIikgZW5kLCAyKQ0KICAgICAgICAgICAgRGVsYXlBY3Rpb24oZnVuY3Rpb24oKSBwcmludCgiPGZvbnQgY29sb3I9XCIjRkYwMDAwXCI+PGI+ICIuLlNjcmlwdG5hbWUuLiIgLSA8L2I+PC9mb250Pjxmb250IGNvbG9yPVwiI0ZGRkZGRlwiPiBTeE9yYldhbGsgaW50ZWdyYXRpb24gaGFzIGJlZW4gZmluaXNoZWQgc3VjY2VzZnVsbHkiKSBlbmQsIDQpDQogICAgICByZXF1aXJlKCJTeE9yYldhbGsiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MjIiLCBsb2NfY2hvb3NlblsxMTVdLCBTQ1JJUFRfUEFSQU1fSU5GTywiIikNCiAgICAgICBzZWxmLkNvbmZpZzphZGRQYXJhbSgiaW5mbzMiLCAiX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXyIsIFNDUklQVF9QQVJBTV9JTkZPLCIiKQ0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94IiwgIiAgICAgICAgICAgICAgICIuLlNjcmlwdG5hbWUuLiIiLCBTQ1JJUFRfUEFSQU1fSU5GTywgIiIpIA0KICAgICAgIHNlbGYuQ29uZmlnOmFkZFBhcmFtKCJpbmZvYm94MiIsbG9jX2Nob29zZW5bMTExXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g2IiwgbG9jX2Nob29zZW5bMTEyXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpDQogICAgICAgc2VsZi5Db25maWc6YWRkUGFyYW0oImluZm9ib3g1IiwgbG9jX2Nob29zZW5bMTEzXSwgU0NSSVBUX1BBUkFNX0lORk8sIiIpICAgDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpICBzZWxmLkNvbmZpZzphZGRTdWJNZW51KCJTeE9yYldhbGsiLCJvcmJXYWxrIikgZW5kLDUpDQogICAgICBEZWxheUFjdGlvbihmdW5jdGlvbigpIF9HLlN4T3JiOkxvYWRUb01lbnUoc2VsZi5Db25maWcub3JiV2FsaykgZW5kLDUpDQogICAgZWxzZWlmIFNBQ349dHJ1ZSBhbmQgU3hPcmJ+PSB0cnVlIHRoZW4NCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIj09PT09PT09PT09PT09PT09IikNCiAgICAgIHAoIlN4T3JiIG9yIFNBQzpSIGlzIHJlcXVpcmVkLiIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgICBwKCI9PT09PT09PT09PT09PT09PSIpDQogICAgZW5kDQogIGVuZA0KIA0KIGZ1bmN0aW9uIE9uVW5sb2FkKCkNCiAgaWYgVklQX1VTRVIgYW5kIG5vdCBza2lubG9hZCAgdGhlbg0KICAgIFNlbmRTa2luUGFja2V0KG15SGVyby5jaGFyTmFtZSwgbmlsLCBteUhlcm8ubmV0d29ya0lEKQ0KICBlbmQNCmVuZA=="), nil, "bt", _ENV))()
-- easy cp